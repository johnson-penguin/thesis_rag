+---------------------------------------------+-----------------------+
| 3GPP TS 29.329 V16.2.0 (2021-03)            |                       |
+=============================================+=======================+
| Technical Specification                     |                       |
+---------------------------------------------+-----------------------+
| 3rd Generation Partnership Project;         |                       |
|                                             |                       |
| Technical Specification Group Core Network  |                       |
| and Terminals;                              |                       |
|                                             |                       |
| Sh Interface based on the Diameter          |                       |
| protocol;                                   |                       |
|                                             |                       |
| Protocol details                            |                       |
|                                             |                       |
| (Release 16)                                |                       |
+---------------------------------------------+-----------------------+
|                                             |                       |
+---------------------------------------------+-----------------------+
| ![](media/image1.jpeg)                      | ![](media/image2.png) |
+---------------------------------------------+-----------------------+
|                                             |                       |
+---------------------------------------------+-----------------------+
| The present document has been developed     |                       |
| within the 3rd Generation Partnership       |                       |
| Project (3GPP ^TM^) and may be further      |                       |
| elaborated for the purposes of 3GPP.\       |                       |
| The present document has not been subject   |                       |
| to any approval process by the 3GPP         |                       |
| Organizational Partners and shall not be    |                       |
| implemented.\                               |                       |
| This Specification is provided for future   |                       |
| development work within 3GPP only. The      |                       |
| Organizational Partners accept no liability |                       |
| for any use of this Specification.\         |                       |
| Specifications and Reports for              |                       |
| implementation of the 3GPP ^TM^ system      |                       |
| should be obtained via the 3GPP             |                       |
| Organizational Partners\' Publications      |                       |
| Offices.                                    |                       |
+---------------------------------------------+-----------------------+

+----------------------------------------------------------------------+
|                                                                      |
+======================================================================+
| > ***3GPP***                                                         |
| >                                                                    |
| > Postal address                                                     |
| >                                                                    |
| > 3GPP support office address                                        |
| >                                                                    |
| > 650 Route des Lucioles - Sophia Antipolis                          |
| >                                                                    |
| > Valbonne - FRANCE                                                  |
| >                                                                    |
| > Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16                     |
| >                                                                    |
| > Internet                                                           |
| >                                                                    |
| > http://www.3gpp.org                                                |
+----------------------------------------------------------------------+
| ***Copyright Notification***                                         |
|                                                                      |
| No part may be reproduced except as authorized by written            |
| permission.\                                                         |
| The copyright and the foregoing restriction extend to reproduction   |
| in all media.                                                        |
|                                                                      |
| © 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, |
| TTA, TTC).                                                           |
|                                                                      |
| All rights reserved.                                                 |
|                                                                      |
| UMTS™ is a Trade Mark of ETSI registered for the benefit of its      |
| members                                                              |
|                                                                      |
| 3GPP™ is a Trade Mark of ETSI registered for the benefit of its      |
| Members and of the 3GPP Organizational Partners\                     |
| LTE™ is a Trade Mark of ETSI registered for the benefit of its       |
| Members and of the 3GPP Organizational Partners                      |
|                                                                      |
| GSM® and the GSM logo are registered and owned by the GSM            |
| Association                                                          |
+----------------------------------------------------------------------+

 Contents {#contents .TT}
========

Foreword 5

1 Scope 6

2 References 6

3 Definitions, symbols and abbreviations 7

3.1 Definitions 7

3.2 Abbreviations 7

4 General 7

5 Use of the Diameter base protocol 8

6 Diameter application for Sh interface 8

6.1 Command-Code values 8

6.1.1 User-Data-Request (UDR) Command 8

6.1.2 User-Data-Answer (UDA) Command 9

6.1.3 Profile-Update-Request (PUR) Command 10

6.1.4 Profile-Update-Answer (PUA) Command 10

6.1.5 Subscribe-Notifications-Request (SNR) Command 11

6.1.6 Subscribe-Notifications-Answer (SNA) Command 11

6.1.7 Push-Notification-Request (PNR) Command 12

6.1.8 Push-Notifications-Answer (PNA) Command 12

6.2 Result-Code AVP values 13

6.2.1 Success 13

6.2.2 Permanent Failures 13

6.2.2.1 DIAMETER\_ERROR\_USER\_DATA\_NOT\_RECOGNIZED (5100) 13

6.2.2.2 DIAMETER\_ERROR\_OPERATION\_NOT\_ALLOWED (5101) 13

6.2.2.3 DIAMETER\_ERROR\_USER\_DATA\_CANNOT\_BE\_READ (5102) 13

6.2.2.4 DIAMETER\_ERROR\_USER\_DATA\_CANNOT\_BE\_MODIFIED (5103) 13

6.2.2.5 DIAMETER\_ERROR\_USER\_DATA\_CANNOT\_BE\_NOTIFIED (5104) 13

6.2.2.6 DIAMETER\_ERROR\_TOO\_MUCH\_DATA (5008) 13

6.2.2.7 DIAMETER\_ERROR\_TRANSPARENT\_DATA OUT\_OF\_SYNC (5105) 13

6.2.2.8 DIAMETER\_ERROR\_FEATURE\_UNSUPPORTED (5011) 13

6.2.2.9 DIAMETER\_ERROR\_SUBS\_DATA\_ABSENT (5106) 13

6.2.2.10 DIAMETER\_ERROR\_NO\_SUBSCRIPTION\_TO\_DATA (5107) 14

6.2.2.11 DIAMETER\_ERROR\_DSAI\_NOT\_AVAILABLE (5108) 14

6.2.2.12 DIAMETER\_ERROR\_IDENTITIES\_DONT\_MATCH (5002) 14

6.2.3 Transient Failures 14

6.2.3.1 DIAMETER\_USER\_DATA\_NOT\_AVAILABLE (4100) 14

6.2.3.2 DIAMETER\_PRIOR\_UPDATE\_IN\_PROGRESS (4101) 14

6.3 AVPs 15

6.3.1 User-Identity AVP 16

6.3.2 MSISDN AVP 16

6.3.3 User-Data AVP 16

6.3.4 Data-Reference AVP 16

6.3.5 Service-Indication AVP 17

6.3.6 Subs-Req-Type AVP 17

6.3.7 Requested-Domain AVP 18

6.3.7A Requested-Nodes AVP 18

6.3.8 Current-Location AVP 18

6.3.9 Server-Name AVP 18

6.3.10 Identity-Set AVP 18

6.3.11 Supported-Features AVP 18

6.3.12 Feature-List-ID AVP 19

6.3.13 Feature-List AVP 19

6.3.14 Supported-Applications AVP 19

6.3.15 Public-Identity AVP 19

6.3.16 Expiry-Time AVP 19

6.3.17 Send-Data-Indication AVP 19

6.3.18 DSAI-Tag AVP 19

6.3.19 Wildcarded-Public-Identity AVP 19

6.3.20 Wildcarded-IMPU AVP 19

6.3.21 Session-Priority AVP 19

6.3.22 One-Time-Notification AVP 19

6.3.23 Serving-Node-Indication AVP 20

6.3.24 Repository-Data-ID AVP 20

6.3.25 Sequence-Number AVP 20

6.3.26 Pre-paging-Supported AVP 20

6.3.27 Local-Time-Zone-Indication AVP 20

6.3.28 UDR-Flags 20

6.3.29 Call-Reference-Info AVP 21

6.3.30 Call-Reference-Number AVP 21

6.3.31 AS-Number AVP 21

6.3.32 OC-Supported-Features 21

6.3.33 OC-OLR 21

6.3.34 DRMP AVP 21

6.3.35 Load 21

6.4 Use of namespaces 21

6.4.1 AVP codes 21

6.4.2 Experimental-Result-Code AVP values 22

6.4.3 Command Code values 22

6.4.4 Application-ID value 22

7 Special Requirements 23

7.1 Version Control 23

Annex A (informative): Change history 24

 Foreword
========

This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

In the present document, modal verbs have the following meanings:

**shall** indicates a mandatory requirement to do something

**shall not** indicates an interdiction (prohibition) to do something

The constructions \"shall\" and \"shall not\" are confined to the
context of normative provisions, and do not appear in Technical Reports.

The constructions \"must\" and \"must not\" are not used as substitutes
for \"shall\" and \"shall not\". Their use is avoided insofar as
possible, and they are not used in a normative context except in a
direct citation from an external, referenced, non-3GPP document, or so
as to maintain continuity of style when extending or modifying the
provisions of such a referenced document.

**should** indicates a recommendation to do something

**should not** indicates a recommendation not to do something

**may** indicates permission to do something

**need not** indicates permission not to do something

The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\"
are used instead, depending upon the meaning intended.

**can** indicates that something is possible

**cannot** indicates that something is impossible

The constructions \"can\" and \"cannot\" are not substitutes for \"may\"
and \"need not\".

**will** indicates that something is certain or expected to happen as a
result of action taken by an agency the behaviour of which is outside
the scope of the present document

**will not** indicates that something is certain or expected not to
happen as a result of action taken by an agency the behaviour of which
is outside the scope of the present document

**might** indicates a likelihood that something will happen as a result
of action taken by some agency the behaviour of which is outside the
scope of the present document

**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside
the scope of the present document

In addition:

**is** (or any other verb in the indicative mood) indicates a statement
of fact

**is not** (or any other negative verb in the indicative mood) indicates
a statement of fact

The constructions \"is\" and \"is not\" do not indicate requirements.

1 Scope
=======

The present document defines a transport protocol for use in the IP
multimedia (IM) Core Network (CN) subsystem based on the Diameter base
protocol as specified in IETF RFC 6733 \[15\].

The present document is applicable to:

\- The Sh interface between an AS and the HSS.

\- The Sh interface between an SCS and the HSS.

Whenever it is possible this document specifies the requirements for
this protocol by reference to specifications produced by the IETF within
the scope of Diameter base protocol as specified in
IETF RFC 6733 \[15\]. Where this is not possible, extensions to the
Diameter base protocol as specified in IETF RFC 6733 \[15\] are defined
within this document.

2 References
============

The following documents contain provisions, which through reference in
this text constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] 3GPP TS 29.328 \"IP Multimedia (IM) Subsystem Sh interface;
signalling flows and message contents\".

\[2\] 3GPP TS 33.210 \"3G Security; Network Domain Security; IP Network
Layer Security\".

\[3\] IETF RFC 2960 \"Stream Control Transmission Protocol\".

\[4\] Void.

\[5\] IETF RFC 2234 \"Augmented BNF for syntax specifications\".

\[6\] 3GPP TS 29.229 \"Cx and Dx Interfaces based on the Diameter
protocol; protocol details\".

\[7\] IETF RFC 3589 \"Diameter Command Codes for Third Generation
Partnership Project (3GPP) Release 5\".

\[8\] ITU-T Recommendation E.164: \"The international public
telecommunication numbering plan\".

\[9\] 3GPP TR 33.978 \"Security aspects of early IP Multimedia Subsystem
(IMS) (Release 6)\".

\[10\] 3GPP TS 29.364 \"IMS Application Server Service Data Descriptions
for AS interoperability\".

\[11\] 3GPP TS 29.002 \"Mobile Application Part (MAP) specification\".

\[12\] IETF RFC 7683: \"Diameter Overload Indication Conveyance\".

\[13\] IETF RFC 7944: \"Diameter Routing Message Priority\".

\[14\] IETF RFC 8583: \"Diameter Load Information Conveyance\".

 \[15\] IETF RFC 6733: \"Diameter Base Protocol\".

\[16\]\] 3GPP TS 29.336: \"Home Subscriber Server (HSS) diameter
interfaces for interworking with packet data networks and
applications\".

3 Definitions, symbols and abbreviations
========================================

3.1 Definitions
---------------

Refer to IETF RFC 6733 \[15\] for the definitions of some terms used in
this document.

For the purposes of the present document, the following terms and
definitions apply.

**Attribute-Value Pair**: see IETF RFC 6733 \[15\], it corresponds to an
Information Element in a Diameter message.

**Server**: SIP-server.

**User data**: user profile data.

3.2 Abbreviations
-----------------

For the purposes of the present document, the following abbreviations
apply:

AAA Authentication, Authorization and Accounting

AS Application Server

ABNF Augmented Backus-Naur Form

AVP Attribute-Value Pair

CN Core Network

DRMP Diameter Routing Message Priority

DSCP Differentiated Services Code Point

HSS Home Subscriber Server

IANA Internet Assigned Numbers Authority

IETF Internet Engineering Task Force

IMS IP Multimedia Subsystem

NDS Network Domain Security

RFC Request For Comment

SCTP Stream Control Transport Protocol

UCS Universal Character Set

URL Uniform Resource Locator

UTF UCS Transformation Formats

4 General
=========

he Diameter base protocol as specified in IETF RFC 6733 \[15\] shall
apply except as modified by the defined support of the methods and the
defined support of the commands and AVPs, result and event codes
specified in clause 6 of this specification. Unless otherwise specified,
the procedures (including error handling and unrecognised information
handling) are unmodified.

5 Use of the Diameter base protocol
===================================

The same clarifications of clause 5 of 3GPP TS 29.229 \[6\] shall apply
to the Sh interface. An exception is that the application identifier for
this application is defined in chapter 6.

6 Diameter application for Sh interface
=======================================

This clause specifies a Diameter application that allows a Diameter
server and a Diameter client:

\- to download and update transparent and non-transparent user data

\- to request and send notifications on changes on user data

The Sh interface protocol is defined as an IETF vendor specific Diameter
application, where the vendor is 3GPP. The vendor identifier assigned by
IANA to 3GPP ( http://www.iana.org/assignments/enterprise-numbers) is
10415.

The Diameter application identifier assigned to the Sh interface
application is 16777217 (allocated by IANA).

6.1 Command-Code values
-----------------------

This clause defines Command-Code values for this Diameter application.

Every command is defined by means of the ABNF syntax (as defined in RFC
2234 \[5\]), according to the Command Code Format (CCF) specification
defined in IETF RFC 6733 \[15\]. Whenever the definition and use of an
AVP is not specified in this document, what is stated in 3GPP
TS 29.229 \[6\] shall apply.

NOTE: As the Diameter commands described in this specification have been
defined based on the former specification of the Diameter base protocol,
the Vendor-Specific-Application-Id AVP is still listed as a required AVP
(an AVP indicated as {AVP}) in the command code format specifications
defined in this specification to avoid backward compatibility issues,
even if the use of this AVP has been deprecated in the new specification
of the Diameter base protocol (IETF RFC 6733 \[15\]).

The command codes for the Sh interface application are taken from the
range allocated by IANA in IETF RFC 3589 \[7\] as assigned in this
specification. For these commands, the Application-ID field shall be set
to 16777217 (application identifier of the Sh interface application,
allocated by IANA).

The following Command Codes are defined in this specification:

Table 6.1.1: Command-Code values

  --------------------------------- -------------- ------ --------
  Command-Name                      Abbreviation   Code   Clause
  User-Data-Request                 UDR            306    6.1.1
  User-Data-Answer                  UDA            306    6.1.2
  Profile-Update-Request            PUR            307    6.1.3
  Profile-Update-Answer             PUA            307    6.1.4
  Subscribe-Notifications-Request   SNR            308    6.1.5
  Subscribe-Notifications-Answer    SNA            308    6.1.6
  Push-Notification-Request         PNR            309    6.1.7
  Push-Notification-Answer          PNA            309    6.1.8
  --------------------------------- -------------- ------ --------

### 6.1.1 User-Data-Request (UDR) Command

The User-Data-Request (UDR) command, indicated by the Command-Code field
set to 306 and the \'R\' bit set in the Command Flags field, is sent by
a Diameter client to a Diameter server in order to request user data.

Message Format

> \< User-Data -Request\> ::= \< Diameter Header: 306, REQ, PXY,
> 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> \[ Destination-Host \]
>
> { Destination-Realm }
>
> **\*\[ Supported-Features \]**
>
> **{ User-Identity }**
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> **\[ Server-Name \]**
>
> **\*\[ Service-Indication \]**
>
> **\*{ Data-Reference }**
>
> **\*\[ Identity-Set \]**
>
> **\[ Requested-Domain \]**
>
> **\[ Current-Location \]**
>
> **\*\[ DSAI-Tag \]**
>
> **\[ Session-Priority \]**
>
> \[ User-Name \]
>
> **\[ Requested-Nodes \]**
>
> **\[ Serving-Node-Indication \]**
>
> **\[ Pre-paging-Supported \]**
>
> \[ Local-Time-Zone-Indication \]
>
> \[ UDR-Flags \]
>
> \[ Call-Reference-Info \]
>
> \[ OC-Supported-Features \]

\*\[ AVP \]

\*\[ Proxy-Info \]

\*\[ Route-Record \]

### 6.1.2 User-Data-Answer (UDA) Command

The User-Data-Answer (UDA) command, indicated by the Command-Code field
set to 306 and the \'R\' bit cleared in the Command Flags field, is sent
by a server in response to the User-Data-Request command. The
Experimental-Result AVP may contain one of the values defined in
clause 6.2 or in 3GPP TS 29.229 \[6\].

Message Format

> \< User-Data-Answer \> ::= \< Diameter Header: 306, PXY, 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> \[ Result-Code \]
>
> \[ Experimental-Result \]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> **\*\[ Supported-Features \]**
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> **\[ User-Data \]**
>
> \[ OC-Supported-Features \]
>
> \[ OC-OLR \]
>
> \*\[ Load \]
>
> \*\[ AVP \]
>
> \[ Failed-AVP \]
>
> \*\[ Proxy-Info \]

\*\[ Route-Record \]

### 6.1.3 Profile-Update-Request (PUR) Command

The Profile-Update-Request (PUR) command, indicated by the Command-Code
field set to 307 and the \'R\' bit set in the Command Flags field, is
sent by a Diameter client to a Diameter server in order to update user
data in the server.

Message Format

> \< Profile-Update-Request \> ::= \< Diameter Header: 307, REQ, PXY,
> 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> \[ Destination-Host \]
>
> { Destination-Realm }
>
> **\*\[ Supported-Features \]**
>
> **{ User-Identity }**
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> \[ User-Name \]
>
> \***{** Data-Reference **}**
>
> { User-Data }
>
> \[ OC-Supported-Features \]
>
> \*\[ AVP \]
>
> \*\[ Proxy-Info \]
>
> \*\[ Route-Record \]

NOTE: More than one Data-Reference AVP may be present in the message
only if both the AS and the HSS support the Update-Eff-Enhance feature.
How the AS knows whether the HSS supports the Update-Eff-Enhance feature
is implementation issue, e.g. the AS can get the information from a
previous PUA message.

### 6.1.4 Profile-Update-Answer (PUA) Command

The Profile-Update-Answer (PUA) command, indicated by the Command-Code
field set to 307 and the \'R\' bit cleared in the Command Flags field,
is sent by a server in response to the Profile-Update-Request command.
The Experimental-Result AVP may contain one of the values defined in
clause 6.2 or in 3GPP TS 29.229 \[6\].

Message Format

> \< Profile-Update-Answer \> ::=\< Diameter Header: 307, PXY, 16777217
> \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> \[ Result-Code \]
>
> \[ Experimental-Result \]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> **\[ Repository-Data-ID \]**
>
> **\[** Data-Reference **\]**
>
> \*\[ Supported-Features \]
>
> \[ OC-Supported-Features \]
>
> \[ OC-OLR \]
>
> \*\[ Load \]
>
> \*\[ AVP \]
>
> \[ Failed-AVP \]
>
> \*\[ Proxy-Info \]
>
> \*\[ Route-Record \]

NOTE: The Data-Reference AVP may be present in the message only if both
the AS and the HSS support the Update-Eff-Enhance feature.

### 6.1.5 Subscribe-Notifications-Request (SNR) Command

The Subscribe-Notifications-Request (SNR) command, indicated by the
Command-Code field set to 308 and the \'R\' bit set in the Command Flags
field, is sent by a Diameter client to a Diameter server in order to
request notifications of changes in user data.

Message Format

> \< Subscribe-Notifications-Request \> ::= \< Diameter Header: 308,
> REQ, PXY, 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> \[ Destination-Host \]
>
> { Destination-Realm }
>
> **\*\[ Supported-Features \]**
>
> **{ User-Identity }**
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> **\*\[ Service-Indication \]**
>
> **\[ Send-Data-Indication \]**
>
> **\[ Server-Name \]**
>
> **{ Subs-Req-Type }**
>
> **\*{ Data-Reference }**
>
> **\*\[ Identity-Set \]**
>
> **\[ Expiry-Time \]**
>
> **\*\[ DSAI-Tag \]**
>
> **\[One-Time-Notification\]**
>
> \[ User-Name \]
>
> \[ OC-Supported-Features \]

\*\[ AVP \]

\*\[ Proxy-Info \]

\*\[ Route-Record \]

### 6.1.6 Subscribe-Notifications-Answer (SNA) Command

The Subscribe-Notifications-Answer command, indicated by the
Command-Code field set to 308 and the \'R\' bit cleared in the Command
Flags field, is sent by a server in response to the
Subscribe-Notifications-Request command. The Result-Code or
Experimental-Result AVP may contain one of the values defined in
clause 6.2 or in 3GPP TS 29.229 \[6\].

Message Format

> \< Subscribe-Notifications-Answer \> ::= \< Diameter Header: 308, PXY,
> 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> { Auth-Session-State }
>
> \[ Result-Code \]
>
> \[ Experimental-Result \]
>
> { Origin-Host }
>
> { Origin-Realm }
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> **\*\[ Supported-Features \]**
>
> **\[ User-Data \]**
>
> **\[ Expiry-Time \]**
>
> \[ OC-Supported-Features \]
>
> \[ OC-OLR \]
>
> \*\[ Load \]
>
> \*\[ AVP \]
>
> \[ Failed-AVP \]
>
> \*\[ Proxy-Info \]
>
> \*\[ Route-Record \]

### 6.1.7 Push-Notification-Request (PNR) Command

The Push-Notification-Request (PNR) command, indicated by the
Command-Code field set to 309 and the \'R\' bit set in the Command Flags
field, is sent by a Diameter server to a Diameter client in order to
notify changes in the user data in the server.

Message Format

> \< Push-Notification-Request \> ::= \< Diameter Header: 309, REQ, PXY,
> 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> { Destination-Host }
>
> { Destination-Realm }
>
> **\*\[ Supported-Features \]**
>
> **{ User-Identity }**
>
> **\[ Wildcarded-Public-Identity \]**
>
> **\[ Wildcarded-IMPU \]**
>
> \[ User-Name \]
>
> { User-Data }
>
> \*\[ AVP \]
>
> \*\[ Proxy-Info \]
>
> \*\[ Route-Record \]

### 6.1.8 Push-Notifications-Answer (PNA) Command

The Push-Notifications-Answer (PNA) command, indicated by the
Command-Code field set to 309 and the \'R\' bit cleared in the Command
Flags field, is sent by a client in response to the
Push-Notification-Request command. The Experimental-Result AVP may
contain one of the values defined in clause 6.2 or in 3GPP
TS 29.229 \[6\].

Message Format

> \< Push-Notification-Answer \> ::=\< Diameter Header: 309, PXY,
> 16777217 \>
>
> \< Session-Id \>
>
> \[ DRMP \]
>
> { Vendor-Specific-Application-Id }
>
> \[ Result-Code \]
>
> \[ Experimental-Result \]
>
> { Auth-Session-State }
>
> { Origin-Host }
>
> { Origin-Realm }
>
> **\*\[ Supported-Features \]**
>
> \*\[ AVP \]
>
> \[ Failed-AVP \]
>
> \*\[ Proxy-Info \]
>
> \*\[ Route-Record \]

 6.2 Result-Code AVP values
--------------------------

This clause defines new result code values that must be supported by all
Diameter implementations that conform to this specification. The result
codes defined in 3GPP TS 29.229 \[6\] are also applicable. When one of
the result codes defined here is included in a response, it shall be
inside an Experimental-Result AVP and Result-Code AVP shall be absent.

### 6.2.1 Success

Result codes that fall within the Success category are used to inform a
peer that a request has been successfully completed.

No result codes within this category have been defined so far.

### 6.2.2 Permanent Failures

Errors that fall within the Permanent Failures category are used to
inform the peer that the request failed, and should not be attempted
again.

#### 6.2.2.1 DIAMETER\_ERROR\_USER\_DATA\_NOT\_RECOGNIZED (5100)

The data received by the AS is not supported or recognized.

#### 6.2.2.2 DIAMETER\_ERROR\_OPERATION\_NOT\_ALLOWED (5101) 

The requested operation is not allowed for the user

#### 6.2.2.3 DIAMETER\_ERROR\_USER\_DATA\_CANNOT\_BE\_READ (5102) 

The requested user data is not allowed to be read.

#### 6.2.2.4 DIAMETER\_ERROR\_USER\_DATA\_CANNOT\_BE\_MODIFIED (5103) 

The requested user data is not allowed to be modified.

#### 6.2.2.5 DIAMETER\_ERROR\_USER\_DATA\_CANNOT\_BE\_NOTIFIED (5104) 

The requested user data is not allowed to be notified on changes.

#### 6.2.2.6 DIAMETER\_ERROR\_TOO\_MUCH\_DATA (5008)

The size of the data pushed to the receiving entity exceeds its
capacity. This error code is defined in 3GPP TS 29.229 \[6\].

#### 6.2.2.7 DIAMETER\_ERROR\_TRANSPARENT\_DATA OUT\_OF\_SYNC (5105)

The request to update the repository data at the HSS could not be
completed because the requested update is based on an out-of-date
version of the repository data. That is, the sequence number in the
Sh-Update Request message, does not match with the immediate successor
of the associated sequence number stored for that repository data at the
HSS. It is also used where an AS tries to create a new set of repository
data when the identified repository data already exists in the HSS.

#### 6.2.2.8 DIAMETER\_ERROR\_FEATURE\_UNSUPPORTED (5011)

See 3GPP TS 29.229 \[6\] clause 6.2.2.11.

#### 6.2.2.9 DIAMETER\_ERROR\_SUBS\_DATA\_ABSENT (5106)

The Application Server requested to subscribe to changes to Repository
Data that is not present in the HSS.

#### 6.2.2.10 DIAMETER\_ERROR\_NO\_SUBSCRIPTION\_TO\_DATA (5107)

The AS received a notification of changes of some information to which
it is not subscribed.

#### 6.2.2.11 DIAMETER\_ERROR\_DSAI\_NOT\_AVAILABLE (5108)

The Application Server addressed a DSAI not configured in the HSS.

#### 6.2.2.12 DIAMETER\_ERROR\_IDENTITIES\_DONT\_MATCH (5002)

See 3GPP TS 29.229 \[6\]

### 6.2.3 Transient Failures

Errors that fall within the transient failures category are those used
to inform a peer that the request could not be satisfied at the time
that it was received. The request may be able to be satisfied in the
future.

#### 6.2.3.1 DIAMETER\_USER\_DATA\_NOT\_AVAILABLE (4100)

The requested user data is not available at this time to satisfy the
requested operation.

#### 6.2.3.2 DIAMETER\_PRIOR\_UPDATE\_IN\_PROGRESS (4101)

The request to update data at the HSS could not be completed for one of
the following reasons:

\- If the Data Reference is Repository Data, then the related Repository
Data is currently being updated by another entity;

\- If the Data Reference is other than Repository Data, then the related
data is currently being updated.

 6.3 AVPs
--------

The following table describes the Diameter AVPs defined for the Sh
interface protocol, their AVP Code values, types, possible flag values
and whether the AVP may or not be encrypted.

Table 6.3.1: Diameter Multimedia Application AVPs

+-------+-------+-------+-------+------+-----+-------+-------+-------+
|       | AVP   |       |       |      |     |       |       |       |
|       | Flag  |       |       |      |     |       |       |       |
|       | rules |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Attr  | AVP   | C     | Value | Must | May | S     | Must  | May   |
| ibute | Code  | lause | Type  |      |     | hould | not   | En    |
| Name  |       | de    |       |      |     | not   |       | crypt |
|       |       | fined |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Use   | 700   | 6.3.1 | Gr    | M, V |     |       |       | No    |
| r-Ide |       |       | ouped |      |     |       |       |       |
| ntity |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| M     | 701   | 6.3.2 | O     | M, V |     |       |       | No    |
| SISDN |       |       | ctetS |      |     |       |       |       |
|       |       |       | tring |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| User  | 702   | 6.3.3 | O     | M, V |     |       |       | No    |
| -Data |       |       | ctetS |      |     |       |       |       |
|       |       |       | tring |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Data  | 703   | 6.3.4 | Enume | M, V |     |       |       | No    |
| -Refe |       |       | rated |      |     |       |       |       |
| rence |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Ser   | 704   | 6.3.5 | O     | M, V |     |       |       | No    |
| vice- |       |       | ctetS |      |     |       |       |       |
| Indic |       |       | tring |      |     |       |       |       |
| ation |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Sub   | 705   | 6.3.6 | Enume | M, V |     |       |       | No    |
| s-Req |       |       | rated |      |     |       |       |       |
| -Type |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| R     | 706   | 6.3.7 | Enume | M, V |     |       |       | No    |
| eques |       |       | rated |      |     |       |       |       |
| ted-D |       |       |       |      |     |       |       |       |
| omain |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| C     | 707   | 6.3.8 | Enume | M, V |     |       |       | No    |
| urren |       |       | rated |      |     |       |       |       |
| t-Loc |       |       |       |      |     |       |       |       |
| ation |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Id    | 708   | 6     | Enume | V    |     |       | M     | No    |
| entit |       | .3.10 | rated |      |     |       |       |       |
| y-Set |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| E     | 709   | 6     | Time  | V    |     |       | M     | No    |
| xpiry |       | .3.16 |       |      |     |       |       |       |
| -Time |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Send- | 710   | 6     | Enume | V    |     |       | M     | No    |
| Data- |       | .3.17 | rated |      |     |       |       |       |
| Indic |       |       |       |      |     |       |       |       |
| ation |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| S     | 602   | 6.3.9 | UTF8S | M, V |     |       |       | No    |
| erver |       |       | tring |      |     |       |       |       |
| -Name |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Sup   | 628   | 6     | Gr    | V    | M   |       |       | No    |
| porte |       | .3.11 | ouped |      |     |       |       |       |
| d-Fea |       |       |       |      |     |       |       |       |
| tures |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Featu | 629   | 6     | Unsig | V    |     |       | M     | No    |
| re-Li |       | .3.12 | ned32 |      |     |       |       |       |
| st-ID |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Fe    | 630   | 6     | Unsig | V    |     |       | M     | No    |
| ature |       | .3.13 | ned32 |      |     |       |       |       |
| -List |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Su    | 631   | 6     | Gr    | V    |     |       | M     | No    |
| pport |       | .3.14 | ouped |      |     |       |       |       |
| ed-Ap |       |       |       |      |     |       |       |       |
| plica |       |       |       |      |     |       |       |       |
| tions |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Publi | 601   | 6     | UTF8S | M, V |     |       |       | No    |
| c-Ide |       | .3.15 | tring |      |     |       |       |       |
| ntity |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| DSA   | 711   | 6     | O     | M, V |     |       |       | No    |
| I-Tag |       | .3.18 | ctetS |      |     |       |       |       |
|       |       |       | tring |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| W     | 634   | 6     | UTF8S | V    |     |       | M     | No    |
| ildca |       | .3.19 | tring |      |     |       |       |       |
| rded- |       |       |       |      |     |       |       |       |
| Publi |       |       |       |      |     |       |       |       |
| c-Ide |       |       |       |      |     |       |       |       |
| ntity |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Wildc | 636   | 6     | UTF8S | V    |     |       | M     | No    |
| arded |       | .3.20 | tring |      |     |       |       |       |
| -IMPU |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| S     | 650   | 6     | Enume | V    |     |       | M     | No    |
| essio |       | .3.21 | rated |      |     |       |       |       |
| n-Pri |       |       |       |      |     |       |       |       |
| ority |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| O     | 712   | 6     | Enume | V    |     |       | M     | No    |
| ne-Ti |       | .3.22 | rated |      |     |       |       |       |
| me-No |       |       |       |      |     |       |       |       |
| tific |       |       |       |      |     |       |       |       |
| ation |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Reque | 713   | 6     | Unsig | V    |     |       | M     | No    |
| sted- |       | .3.7A | ned32 |      |     |       |       |       |
| Nodes |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Ser   | 714   | 6     | Enume | V    |     |       | M     | No    |
| ving- |       | .3.23 | rated |      |     |       |       |       |
| Node- |       |       |       |      |     |       |       |       |
| Indic |       |       |       |      |     |       |       |       |
| ation |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Rep   | 715   | 6     | Gr    | V    |     |       | M     | No    |
| osito |       | .3.24 | ouped |      |     |       |       |       |
| ry-Da |       |       |       |      |     |       |       |       |
| ta-ID |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Seque | 716   | 6     | Unsig | V    |     |       | M     | No    |
| nce-N |       | .3.25 | ned32 |      |     |       |       |       |
| umber |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Pre-p | 717   | 6     | Enume | V    |     |       | M     | No    |
| aging |       | .3.26 | rated |      |     |       |       |       |
| -Supp |       |       |       |      |     |       |       |       |
| orted |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| L     | 718   | 6     | Enume | V    |     |       | M     | No    |
| ocal- |       | .3.27 | rated |      |     |       |       |       |
| Time- |       |       |       |      |     |       |       |       |
| Zone- |       |       |       |      |     |       |       |       |
| Indic |       |       |       |      |     |       |       |       |
| ation |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| UDR-  | 719   | 6     | Unsig | V    |     |       | M     | No    |
| Flags |       | .3.28 | ned32 |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Call  | 720   | 6     | Gr    | V    |     |       | M     | No    |
| -Refe |       | .3.29 | ouped |      |     |       |       |       |
| rence |       |       |       |      |     |       |       |       |
| -Info |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| C     | 721   | 6     | O     | V    |     |       | M     | No    |
| all-R |       | .3.30 | ctetS |      |     |       |       |       |
| efere |       |       | tring |      |     |       |       |       |
| nce-N |       |       |       |      |     |       |       |       |
| umber |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| AS-N  | 722   | 6     | O     | V    |     |       | M     | No    |
| umber |       | .3.31 | ctetS |      |     |       |       |       |
|       |       |       | tring |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| O     | 621   | 6     | Gr    |      |     |       | M, V  | No    |
| C-Sup |       | .3.32 | ouped |      |     |       |       |       |
| porte | NOTE  |       |       |      |     |       |       |       |
| d-Fea | 3     |       |       |      |     |       |       |       |
| tures |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| O     | 623   | 6     | Gr    |      |     |       | M, V  | No    |
| C-OLR |       | .3.33 | ouped |      |     |       |       |       |
|       | NOTE  |       |       |      |     |       |       |       |
|       | 3     |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| DRMP  | 301   | 6     | Enume |      |     |       | M, V  | No    |
|       |       | .3.34 | rated |      |     |       |       |       |
|       | NOTE  |       |       |      |     |       |       |       |
|       | 4     |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| Load  | NOTE  | 6     | Gr    |      |     |       | M, V  | No    |
|       | 5     | .3.35 | ouped |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+
| NOTE  |       |       |       |      |     |       |       |       |
| 1:    |       |       |       |      |     |       |       |       |
| The   |       |       |       |      |     |       |       |       |
| AVP   |       |       |       |      |     |       |       |       |
| h     |       |       |       |      |     |       |       |       |
| eader |       |       |       |      |     |       |       |       |
| bit   |       |       |       |      |     |       |       |       |
| de    |       |       |       |      |     |       |       |       |
| noted |       |       |       |      |     |       |       |       |
| as    |       |       |       |      |     |       |       |       |
| \     |       |       |       |      |     |       |       |       |
| 'M\', |       |       |       |      |     |       |       |       |
| indi  |       |       |       |      |     |       |       |       |
| cates |       |       |       |      |     |       |       |       |
| wh    |       |       |       |      |     |       |       |       |
| ether |       |       |       |      |     |       |       |       |
| su    |       |       |       |      |     |       |       |       |
| pport |       |       |       |      |     |       |       |       |
| of    |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| AVP   |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| requ  |       |       |       |      |     |       |       |       |
| ired. |       |       |       |      |     |       |       |       |
| The   |       |       |       |      |     |       |       |       |
| AVP   |       |       |       |      |     |       |       |       |
| h     |       |       |       |      |     |       |       |       |
| eader |       |       |       |      |     |       |       |       |
| bit   |       |       |       |      |     |       |       |       |
| de    |       |       |       |      |     |       |       |       |
| noted |       |       |       |      |     |       |       |       |
| as    |       |       |       |      |     |       |       |       |
| \     |       |       |       |      |     |       |       |       |
| 'V\', |       |       |       |      |     |       |       |       |
| indi  |       |       |       |      |     |       |       |       |
| cates |       |       |       |      |     |       |       |       |
| wh    |       |       |       |      |     |       |       |       |
| ether |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| opt   |       |       |       |      |     |       |       |       |
| ional |       |       |       |      |     |       |       |       |
| Vend  |       |       |       |      |     |       |       |       |
| or-ID |       |       |       |      |     |       |       |       |
| field |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| pr    |       |       |       |      |     |       |       |       |
| esent |       |       |       |      |     |       |       |       |
| in    |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| AVP   |       |       |       |      |     |       |       |       |
| hea   |       |       |       |      |     |       |       |       |
| der.\ |       |       |       |      |     |       |       |       |
| For   |       |       |       |      |     |       |       |       |
| fu    |       |       |       |      |     |       |       |       |
| rther |       |       |       |      |     |       |       |       |
| det   |       |       |       |      |     |       |       |       |
| ails, |       |       |       |      |     |       |       |       |
| see   |       |       |       |      |     |       |       |       |
| 3GPP  |       |       |       |      |     |       |       |       |
| T     |       |       |       |      |     |       |       |       |
| S 29. |       |       |       |      |     |       |       |       |
| 229 \ |       |       |       |      |     |       |       |       |
| [6\]. |       |       |       |      |     |       |       |       |
|       |       |       |       |      |     |       |       |       |
| NOTE  |       |       |       |      |     |       |       |       |
| 2: If |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| M-bit |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| set   |       |       |       |      |     |       |       |       |
| for   |       |       |       |      |     |       |       |       |
| an    |       |       |       |      |     |       |       |       |
| AVP   |       |       |       |      |     |       |       |       |
| and   |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| rec   |       |       |       |      |     |       |       |       |
| eiver |       |       |       |      |     |       |       |       |
| does  |       |       |       |      |     |       |       |       |
| not   |       |       |       |      |     |       |       |       |
| under |       |       |       |      |     |       |       |       |
| stand |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| AVP,  |       |       |       |      |     |       |       |       |
| it    |       |       |       |      |     |       |       |       |
| shall |       |       |       |      |     |       |       |       |
| r     |       |       |       |      |     |       |       |       |
| eturn |       |       |       |      |     |       |       |       |
| a     |       |       |       |      |     |       |       |       |
| rejec |       |       |       |      |     |       |       |       |
| tion. |       |       |       |      |     |       |       |       |
| If    |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| M-bit |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| not   |       |       |       |      |     |       |       |       |
| set   |       |       |       |      |     |       |       |       |
| for   |       |       |       |      |     |       |       |       |
| an    |       |       |       |      |     |       |       |       |
| AVP,  |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| rec   |       |       |       |      |     |       |       |       |
| eiver |       |       |       |      |     |       |       |       |
| shall |       |       |       |      |     |       |       |       |
| not   |       |       |       |      |     |       |       |       |
| r     |       |       |       |      |     |       |       |       |
| eturn |       |       |       |      |     |       |       |       |
| a     |       |       |       |      |     |       |       |       |
| rejec |       |       |       |      |     |       |       |       |
| tion, |       |       |       |      |     |       |       |       |
| wh    |       |       |       |      |     |       |       |       |
| ether |       |       |       |      |     |       |       |       |
| or    |       |       |       |      |     |       |       |       |
| not   |       |       |       |      |     |       |       |       |
| it    |       |       |       |      |     |       |       |       |
| u     |       |       |       |      |     |       |       |       |
| nders |       |       |       |      |     |       |       |       |
| tands |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| AVP.  |       |       |       |      |     |       |       |       |
| If    |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| rec   |       |       |       |      |     |       |       |       |
| eiver |       |       |       |      |     |       |       |       |
| u     |       |       |       |      |     |       |       |       |
| nders |       |       |       |      |     |       |       |       |
| tands |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| AVP   |       |       |       |      |     |       |       |       |
| but   |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| M-bit |       |       |       |      |     |       |       |       |
| value |       |       |       |      |     |       |       |       |
| does  |       |       |       |      |     |       |       |       |
| not   |       |       |       |      |     |       |       |       |
| match |       |       |       |      |     |       |       |       |
| with  |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| defin |       |       |       |      |     |       |       |       |
| ition |       |       |       |      |     |       |       |       |
| in    |       |       |       |      |     |       |       |       |
| this  |       |       |       |      |     |       |       |       |
| t     |       |       |       |      |     |       |       |       |
| able, |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| rec   |       |       |       |      |     |       |       |       |
| eiver |       |       |       |      |     |       |       |       |
| shall |       |       |       |      |     |       |       |       |
| i     |       |       |       |      |     |       |       |       |
| gnore |       |       |       |      |     |       |       |       |
| the   |       |       |       |      |     |       |       |       |
| M     |       |       |       |      |     |       |       |       |
| -bit. |       |       |       |      |     |       |       |       |
|       |       |       |       |      |     |       |       |       |
| NOTE  |       |       |       |      |     |       |       |       |
| 3:    |       |       |       |      |     |       |       |       |
| The   |       |       |       |      |     |       |       |       |
| value |       |       |       |      |     |       |       |       |
| of    |       |       |       |      |     |       |       |       |
| these |       |       |       |      |     |       |       |       |
| attri |       |       |       |      |     |       |       |       |
| butes |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| de    |       |       |       |      |     |       |       |       |
| fined |       |       |       |      |     |       |       |       |
| in    |       |       |       |      |     |       |       |       |
| I     |       |       |       |      |     |       |       |       |
| ETF R |       |       |       |      |     |       |       |       |
| FC 76 |       |       |       |      |     |       |       |       |
| 83 \[ |       |       |       |      |     |       |       |       |
| 12\]. |       |       |       |      |     |       |       |       |
|       |       |       |       |      |     |       |       |       |
| NOTE  |       |       |       |      |     |       |       |       |
| 4:    |       |       |       |      |     |       |       |       |
| The   |       |       |       |      |     |       |       |       |
| value |       |       |       |      |     |       |       |       |
| of    |       |       |       |      |     |       |       |       |
| this  |       |       |       |      |     |       |       |       |
| attr  |       |       |       |      |     |       |       |       |
| ibute |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| de    |       |       |       |      |     |       |       |       |
| fined |       |       |       |      |     |       |       |       |
| in    |       |       |       |      |     |       |       |       |
| I     |       |       |       |      |     |       |       |       |
| ETF R |       |       |       |      |     |       |       |       |
| FC 79 |       |       |       |      |     |       |       |       |
| 44 \[ |       |       |       |      |     |       |       |       |
| 13\]. |       |       |       |      |     |       |       |       |
|       |       |       |       |      |     |       |       |       |
| NOTE  |       |       |       |      |     |       |       |       |
| 5:    |       |       |       |      |     |       |       |       |
| The   |       |       |       |      |     |       |       |       |
| value |       |       |       |      |     |       |       |       |
| of    |       |       |       |      |     |       |       |       |
| this  |       |       |       |      |     |       |       |       |
| attr  |       |       |       |      |     |       |       |       |
| ibute |       |       |       |      |     |       |       |       |
| is    |       |       |       |      |     |       |       |       |
| de    |       |       |       |      |     |       |       |       |
| fined |       |       |       |      |     |       |       |       |
| in    |       |       |       |      |     |       |       |       |
| I     |       |       |       |      |     |       |       |       |
| ETF R |       |       |       |      |     |       |       |       |
| FC 85 |       |       |       |      |     |       |       |       |
| 83 \[ |       |       |       |      |     |       |       |       |
| 14\]. |       |       |       |      |     |       |       |       |
+-------+-------+-------+-------+------+-----+-------+-------+-------+

The following table specifies the Diameter AVPs re-used by the Sh
interface protocol from existing Diameter Applications, including a
reference to their respective specifications and when needed, a short
description of their use within Sh.

Table 6.3/2: Sh re-used Diameter AVPs

+----------------------+----------------------+----------+----------+
| Attribute Name       | Reference            | Comments | M-bit    |
+----------------------+----------------------+----------+----------+
| External-Identifier  | 3GPP                 |          | Must set |
|                      | TS 29.336 \[16\]     |          |          |
+----------------------+----------------------+----------+----------+
| NOTE 1: The M-bit    |                      |          |          |
| settings for re-used |                      |          |          |
| AVPs override those  |                      |          |          |
| of the defining      |                      |          |          |
| specifications that  |                      |          |          |
| are referenced.      |                      |          |          |
| Values include:      |                      |          |          |
| \"Must set\", \"Must |                      |          |          |
| not set\". If the    |                      |          |          |
| M-bit setting is     |                      |          |          |
| blank, then the      |                      |          |          |
| defining             |                      |          |          |
| specification        |                      |          |          |
| applies.             |                      |          |          |
|                      |                      |          |          |
| NOTE 2: If the M-bit |                      |          |          |
| is set for an AVP    |                      |          |          |
| and the receiver     |                      |          |          |
| does not understand  |                      |          |          |
| the AVP, it shall    |                      |          |          |
| return a rejection.  |                      |          |          |
| If the M-bit is not  |                      |          |          |
| set for an AVP, the  |                      |          |          |
| receiver shall not   |                      |          |          |
| return a rejection,  |                      |          |          |
| whether or not it    |                      |          |          |
| understands the AVP. |                      |          |          |
| If the receiver      |                      |          |          |
| understands the AVP  |                      |          |          |
| but the M-bit value  |                      |          |          |
| does not match with  |                      |          |          |
| the definition in    |                      |          |          |
| this table, the      |                      |          |          |
| receiver shall       |                      |          |          |
| ignore the M-bit.    |                      |          |          |
+----------------------+----------------------+----------+----------+

### 6.3.1 User-Identity AVP

The User-Identity AVP is of type Grouped. This AVP contains either a
Public- Identity AVP or an MSISDN AVP or an External-Identifier AVP.

AVP format

> User-Identity ::= \<AVP header: 700 10415\>
>
> \[Public-Identity\]
>
> \[MSISDN\]
>
> \[External-Identifier\]
>
> \*\[AVP\]

### 6.3.2 MSISDN AVP

The MSISDN AVP is of type OctetString. This AVP contains an MSISDN, in
international number format as described in ITU-T Rec E.164 \[8\],
encoded as a TBCD-string, i.e. digits from 0 through 9 are encoded 0000
to 1001; 1111 is used as a filler when there is an odd number of digits;
bits 8 to 5 of octet n encode digit 2n; bits 4 to 1 of octet n encode
digit 2(n-1)+1.

### 6.3.3 User-Data AVP

The User-Data AVP is of type OctetString. This AVP contains the user
data requested in the UDR/UDA, SNR/SNA and PNR/PNA operations and the
data to be modified in the PUR/PUA operation. The exact content and
format of this AVP is described in 3GPP TS 29.328 \[1\] Annex C as
Sh-Data.

### 6.3.4 Data-Reference AVP

The Data-Reference AVP is of type Enumerated, and indicates the type of
the requested user data in the operation UDR and SNR. Its exact values
and meaning is defined in 3GPP TS 29.328 \[1\]. The following values are
defined (more details are given in 3GPP TS 29.328 \[1\]):

RepositoryData (0)

IMSPublicIdentity (10)

IMSUserState (11)

S-CSCFName (12)

InitialFilterCriteria (13)

This value is used to request initial filter criteria relevant to the
requesting AS

LocationInformation (14)

UserState (15)

ChargingInformation (16)

MSISDN (17)

PSIActivation (18)

DSAI (19)

ServiceLevelTraceInfo (21)

IPAddressSecureBindingInformation (22)

ServicePriorityLevel (23)

SMSRegistrationInfo (24)

UEReachabilityForIP (25)

TADSinformation (26)

STN-SR (27)

UE-SRVCC-Capability (28)

ExtendedPriority (29)

CSRN (30)

ReferenceLocationInformation (31)

IMSI (32)

IMSPrivateUserIdentity (33)

IMEISV (34)

UE-5G-SRVCC-Capability (35)

NOTE: Value 20 is reserved.

### 6.3.5 Service-Indication AVP

The Service-Indication AVP is of type OctetString. This AVP contains the
Service Indication that identifies a service or a set of services in an
AS and the related repository data in the HSS. Standardized values of
Service-Indication identifying a standardized service or set of services
in the AS and standardized format of the related repository data are
defined in 3GPP TS 29.364 \[10\].

### 6.3.6 Subs-Req-Type AVP

The Subs-Req-Type AVP is of type Enumerated, and indicates the type of
the subscription-to-notifications request. The following values are
defined:

Subscribe (0)

This value is used by an AS to subscribe to notifications of changes in
data.

Unsubscribe (1)

This value is used by an AS to unsubscribe to notifications of changes
in data.

### 6.3.7 Requested-Domain AVP

The Requested-Domain AVP is of type Enumerated, and indicates the access
domain for which certain data (e.g. user state) are requested. The
following values are defined:

CS-Domain (0)

The requested data apply to the CS domain.

PS-Domain (1)

The requested data apply to the PS domain.

### 6.3.7A Requested-Nodes AVP

The Requested-Nodes AVP is of type Unsigned32 and it shall contain a bit
mask. The meaning of the bits shall be as defined in table 6.3.7A/1:

Table 6.3.7A/1: Requested-Nodes

  ----- ---------------------- ----------------------------------------------------------
  Bit   Name                   Description
  0     MME                    The requested data apply to the MME
  1     SGSN                   The requested data apply to the SGSN
  2     3GPP-AAA-SERVER-TWAN   The requested data apply to the 3GPP AAA Server for TWAN
  3     AMF                    The requested data apply to the AMF (for 3GPP access)
  ----- ---------------------- ----------------------------------------------------------

### 6.3.8 Current-Location AVP

The Current-Location AVP is of type Enumerated, and indicates whether an
active location retrieval has to be initiated or not:

DoNotNeedInitiateActiveLocationRetrieval (0)

The request indicates that the initiation of an active location
retrieval is not required.

InitiateActiveLocationRetrieval (1)

It is requested that an active location retrieval is initiated.

### 6.3.9 Server-Name AVP

The Server-Name contains a SIP-URL used to identify an AS. See 3GPP
TS 29.229 \[6\] for further description of this AVP.

### 6.3.10 Identity-Set AVP

The Identity-Set AVP is of type Enumerated and indicates the requested
set of IMS Public Identities. The following values are defined:

ALL\_IDENTITIES (0)

REGISTERED\_IDENTITIES (1)

IMPLICIT\_IDENTITIES (2)

ALIAS\_IDENTITIES (3)

### 6.3.11 Supported-Features AVP

See 3GPP TS 29.229 \[6\] clause 6.3.29.

### 6.3.12 Feature-List-ID AVP

See 3GPP TS 29.229 \[6\] clause 6.3.30.

### 6.3.13 Feature-List AVP

See 3GPP TS 29.229 \[6\] clause 6.3.31.

### 6.3.14 Supported-Applications AVP

See 3GPP TS 29.229 \[6\] clause 6.3.32.

### 6.3.15 Public-Identity AVP

The Public-Identity AVP contains a Public User Identity. See 3GPP
TS 29.229 \[6\] for the definition of this AVP.

### 6.3.16 Expiry-Time AVP

The Expiry-Time AVP is of type Time. This AVP contains the expiry time
of subscriptions to notifications in the HSS.

### 6.3.17 Send-Data-Indication AVP

The Send-Data-Indication AVP is of type Enumerated. If present it
indicates that the sender requests the User-Data. The following values
are defined:

USER\_DATA\_NOT\_REQUESTED (0)

USER\_DATA\_REQUESTED (1)

### 6.3.18 DSAI-Tag AVP

The DSAI-Tag AVP is of type OctetString. This AVP contains the DSAI-Tag
identifying the instance of the Dynamic Service Activation Information
being accessed for the Public Identity.

### 6.3.19 Wildcarded-Public-Identity AVP

See 3GPP TS 29.229 \[6\] clause 6.3.35 for the definition of
theWildcarded-Public-Identity AVP. This AVP only contains a Wildcarded
PSI over Sh interface.

### 6.3.20 Wildcarded-IMPU AVP

See 3GPP TS 29.229 \[6\] clause 6.3.43.

### 6.3.21 Session-Priority AVP

See 3GPP TS 29.229 \[6\] clause 6.3.56.

### 6.3.22 One-Time-Notification AVP

The One-Time-Notification AVP is of type Enumerated. If present it
indicates that the sender requests to be notified only one time. The
following values are defined:

ONE\_TIME\_NOTIFICATION\_REQUESTED (0)

This AVP is only applicable to UE reachability for IP (25)

### 6.3.23 Serving-Node-Indication AVP

The Serving-Node-Indication AVP is of type Enumerated. If present it
indicates that the sender does not require any location information
other than the Serving Node Addresses/Identities requested (e.g. MME
name, VLR number). Other location information (e.g. Global Cell ID,
Tracking Area ID) may be absent. The following values are defined:

ONLY\_SERVING\_NODES\_REQUIRED (0)

### 6.3.24 Repository-Data-ID AVP

The Repository-Data-ID AVP is of type Grouped. This AVP shall contain a
Service-Indication AVP and a Sequence-Number AVP.

AVP format

> Repository-Data-ID ::= \<AVP header: 715 10415\>
>
> {Service-Indication}
>
> {Sequence-Number}
>
> \*\[AVP\]

### 6.3.25 Sequence-Number AVP

The Sequence-Number AVP is of type Unsigned32. This AVP contains a
number associated to a repository data.

### 6.3.26 Pre-paging-Supported AVP

The Pre-paging-Supported AVP is of type Enumerated. It indicates whether
the sender supports pre-paging or not. The following values are defined:

PREPAGING\_NOT\_SUPPORTED (0)

PREPAGING\_SUPPORTED (1)

If this AVP is not present in the command, the default value is
PREPAGING\_NOT\_SUPPORTED (0).

### 6.3.27 Local-Time-Zone-Indication AVP

The Local-Time-Zone-Indication AVP is of type Enumerated. If present it
indicates that the Local Time Zone information (time zone and daylight
saving time) of the visited network where the UE is attached is
requested with or without other location information. The following
values are defined:

ONLY\_LOCAL\_TIME\_ZONE\_REQUESTED (0)

LOCAL\_TIME\_ZONE\_WITH\_LOCATION\_INFO\_REQUESTED (1)

### 6.3.28 UDR-Flags

The UDR-Flags AVP is of type Unsigned32 and it shall contain a bit mask.
The meaning of the bits shall be as defined in 3GPP TS 29.328 \[1\].

Table 6.3.28/1: UDR-Flags

  Bit                                                                                                                                Name
  ---------------------------------------------------------------------------------------------------------------------------------- ------------------------------------
  0                                                                                                                                  Location-Information-EPS-Supported
  1                                                                                                                                  RAT-Type-Requested
  NOTE: Bits not defined in this table shall be cleared by the sender of the request and discarded by the receiver of the request.   

### 6.3.29 Call-Reference-Info AVP

The Call-Reference-Info AVP is of type Grouped. This AVP shall contain a
Call-Reference-Number AVP and an AS-Number AVP.

AVP format

> Call-Reference-Info ::= \<AVP header: 720 10415\>
>
> {Call-Reference-Number}
>
> {AS-Number}
>
> \*\[AVP\]

### 6.3.30 Call-Reference-Number AVP

The Call-Reference-Number AVP is of type OctetString. The exact content
and format of this AVP is described in 3GPP TS 29.002 \[11\].

### 6.3.31 AS-Number AVP

The AS-Number AVP is of type OctetString. The exact content and format
of this AVP corresponds to the gmsc-address parameter described in 3GPP
TS 29.002 \[11\].

### 6.3.32 OC-Supported-Features

The OC-Supported-Features AVP is of type Grouped and it is defined in
IETF RFC 7683 \[12\]. This AVP is used to support Diameter overload
control mechanism.

### 6.3.33 OC-OLR

The OC-OLR AVP is of type Grouped and it is defined in IETF RFC
7683 \[12\]. This AVP is used to support Diameter overload control
mechanism.

### 6.3.34 DRMP AVP

The DRMP AVP is of type Enumerated and it is defined in
IETF RFC 7944 \[13\]. This AVP allows the HSS/SLF and the AS/OSA SCS to
indicate the relative priority of Diameter messages. The DRMP AVP may be
used to set the DSCP marking for transport of the associated Diameter
message.

### 6.3.35 Load

The Load AVP is of type Grouped and it is defined in
IETF RFC 8583 \[14\]. This AVP is used to support the Diameter load
control mechanism.

6.4 Use of namespaces
---------------------

This clause contains the namespaces that have either been created in
this specification, or the values assigned to existing namespaces
managed by IANA.

### 6.4.1 AVP codes

This specification assigns the AVP values from the AVP Code namespace
managed by 3GPP for its Diameter vendor-specific applications. See
clause 6.3 for the assignment of the namespace in this specification.

### 6.4.2 Experimental-Result-Code AVP values

This specification has assigned Experimental-Result-Code AVP values
4100-4101 and 5100-5105. See clause 6.2.

### 6.4.3 Command Code values

This specification assigns the values 306-309 from the range allocated
by IANA to 3GPP in IETF RFC 3589 \[7\].

### 6.4.4 Application-ID value

IANA has allocated the value 16777217 for the 3GPP Sh interface
application.

 7 Special Requirements
======================

7.1 Version Control
-------------------

The version control mechanisms specified in 3GPP TS 29.229 \[6\] clauses
7.1, 7.2 and 7.3 apply to this specification.

The following table of features shall apply to the Sh interface.

Table 7.1.1: Features of feature list 1 used in Sh

+-------------------+-------------------+-----+-------------------+
| Feature bit       | Feature           | M/O | Description       |
+-------------------+-------------------+-----+-------------------+
| 0                 | Notif-Eff         | M   | This feature is   |
|                   |                   |     | applicable to the |
|                   |                   |     | UDR/UDA, SNR/SNA  |
|                   |                   |     | and PNR/PNA       |
|                   |                   |     | command pairs. It |
|                   |                   |     | requires support  |
|                   |                   |     | in both the HSS   |
|                   |                   |     | and the AS.       |
|                   |                   |     |                   |
|                   |                   |     | If multiple       |
|                   |                   |     | subscriptions to  |
|                   |                   |     | notifications are |
|                   |                   |     | associated with a |
|                   |                   |     | Public User       |
|                   |                   |     | Identity, the HSS |
|                   |                   |     | may combine the   |
|                   |                   |     | notifications for |
|                   |                   |     | multiple Data     |
|                   |                   |     | References and/or |
|                   |                   |     | Service           |
|                   |                   |     | Indications       |
|                   |                   |     | and/or Identity   |
|                   |                   |     | Sets into a       |
|                   |                   |     | single            |
|                   |                   |     | Push-Not          |
|                   |                   |     | ification-Request |
|                   |                   |     | message.          |
|                   |                   |     |                   |
|                   |                   |     | The               |
|                   |                   |     | User-Data-Request |
|                   |                   |     | / Answer and the  |
|                   |                   |     | Subscribe-Noti    |
|                   |                   |     | fications-Request |
|                   |                   |     | / Answer allow    |
|                   |                   |     | multiple Data     |
|                   |                   |     | References,       |
|                   |                   |     | Service           |
|                   |                   |     | Indications and   |
|                   |                   |     | Identity Sets.    |
|                   |                   |     |                   |
|                   |                   |     | The               |
|                   |                   |     | User-Data-Answer  |
|                   |                   |     | and               |
|                   |                   |     | Push-Not          |
|                   |                   |     | ification-Request |
|                   |                   |     | allow combining   |
|                   |                   |     | multiple          |
|                   |                   |     | DataReference     |
|                   |                   |     | items resulting   |
|                   |                   |     | in the User Data  |
|                   |                   |     | AVP including a   |
|                   |                   |     | single XML        |
|                   |                   |     | document with the |
|                   |                   |     | separable XML     |
|                   |                   |     | clauses           |
|                   |                   |     | populated.        |
+-------------------+-------------------+-----+-------------------+
| 1                 | Update-Eff        | O   | This feature is   |
|                   |                   |     | applicable to the |
|                   |                   |     | PUR/PUA commands. |
|                   |                   |     | If both the HSS   |
|                   |                   |     | and the AS        |
|                   |                   |     | support this      |
|                   |                   |     | feature, a PUR    |
|                   |                   |     | command where the |
|                   |                   |     | Data reference    |
|                   |                   |     | type is           |
|                   |                   |     | Repository Data,  |
|                   |                   |     | may contain an    |
|                   |                   |     | XML document with |
|                   |                   |     | several           |
|                   |                   |     | Repository Data   |
|                   |                   |     | instances.        |
+-------------------+-------------------+-----+-------------------+
| 2                 | U                 | O   | This feature is   |
|                   | pdate-Eff-Enhance |     | an enhancement of |
|                   |                   |     | the Update-Eff    |
|                   |                   |     | feature and       |
|                   |                   |     | requires          |
|                   |                   |     | Update-Eff is     |
|                   |                   |     | supported. It is  |
|                   |                   |     | applicable to the |
|                   |                   |     | PUR/PUA commands. |
|                   |                   |     | If both the HSS   |
|                   |                   |     | and the AS        |
|                   |                   |     | support this      |
|                   |                   |     | feature, a PUR    |
|                   |                   |     | command may       |
|                   |                   |     | contain an XML    |
|                   |                   |     | document with     |
|                   |                   |     | several Data      |
|                   |                   |     | instances.        |
+-------------------+-------------------+-----+-------------------+
| 3                 | Additional-MSISDN | O   | This feature is   |
|                   |                   |     | applicable to     |
|                   |                   |     | UDR/UDA commands. |
|                   |                   |     |                   |
|                   |                   |     | It requires       |
|                   |                   |     | support in both   |
|                   |                   |     | HSS and AS.       |
|                   |                   |     |                   |
|                   |                   |     | If enabled, it    |
|                   |                   |     | extends the       |
|                   |                   |     | information       |
|                   |                   |     | returned with     |
|                   |                   |     | DataReference=17. |
|                   |                   |     | Instead of        |
|                   |                   |     | returning only    |
|                   |                   |     | MSISDN, it        |
|                   |                   |     | includes          |
|                   |                   |     | ExtendedMSISDN.   |
|                   |                   |     | See 3GPP          |
|                   |                   |     | TS 29.328 \[1\]   |
|                   |                   |     | for more          |
|                   |                   |     | information.      |
+-------------------+-------------------+-----+-------------------+
| Feature bit: The  |                   |     |                   |
| order number of   |                   |     |                   |
| the bit within    |                   |     |                   |
| the               |                   |     |                   |
| **S               |                   |     |                   |
| upported-Features |                   |     |                   |
| AVP, e.g.         |                   |     |                   |
| \"1\".**          |                   |     |                   |
|                   |                   |     |                   |
| **Feature: A      |                   |     |                   |
| short name that   |                   |     |                   |
| can be used to    |                   |     |                   |
| refer to the bit  |                   |     |                   |
| and to the        |                   |     |                   |
| feature, e.g.     |                   |     |                   |
| \"MOM\".**        |                   |     |                   |
|                   |                   |     |                   |
| **M/O: Defines if |                   |     |                   |
| the               |                   |     |                   |
| implementation of |                   |     |                   |
| the feature is    |                   |     |                   |
| mandatory (\"M\") |                   |     |                   |
| or optional       |                   |     |                   |
| (\"O\").**        |                   |     |                   |
|                   |                   |     |                   |
| Description: A    |                   |     |                   |
| clear textual     |                   |     |                   |
| description of    |                   |     |                   |
| the feature.      |                   |     |                   |
+-------------------+-------------------+-----+-------------------+

The following table shall apply to the Sh interface; the column
Application identifier lists the used application identifiers on Sh and
3GPP.

Table 7.1.2: Application identifiers used in Sh

  ------------------------ ---------------
  Application identifier   First applied
  16777217                 3GPP Rel-5
  ------------------------ ---------------

########  Annex A (informative): Change history

  ----------- ------------ -------------- ---------- --------- -------------------------------------------------------------------------------------------- ---------
  **Date**    **TSG \#**   **TSG Doc.**   **CR\#**   **Rev**   **Subject/Comment**                                                                          **Out**
  June 2002   CN\#16       NP-020266                           Version 2.0.1 present in CN\#16 for approval                                                 5.0.0
  Sep 2002    CN\#17       NP-020450      2          1         Cancellation of subscriptions to notifications                                               5.1.0
  Sep 2002    CN\#17       NP-020450      3          1         Addition of AVPs to User-Data-Request                                                        5.1.0
  Dec 2002    CN\#18       NP-020592      6          \-        Error handling in HSS when being updated with too much data                                  5.2.0
  Mar 2003    CN\#19       NP-030102      005        1         Initial Filter Criteria                                                                      5.3.0
  Mar 2003    CN\#19       NP-030102      007        2         Update after Diameter has become RFC                                                         5.3.0
  Mar 2003    CN\#19       NP-030102      011        \-        Missing code-point in Data-Reference AVP                                                     5.3.0
  Mar 2003    CN\#19       NP-030102      013        \-        Registration State Alignment                                                                 5.3.0
  Mar 2003    CN\#19       NP-030102      008        \-        Correction of the Application Server Identification type for Initial Filter Criteria usage   5.3.0
  Mar 2003    CN\#19       NP-030102      009        \-        Clarification on Sh interface for charging purposes                                          5.3.0
  Jun 2003    CN\#20       NP-030216      014        1         Co-ordination of Update of Repository Data                                                   5.4.0
  Jun 2003    CN\#20       NP-030216      015        1         Command code correction for UDA plus editorial corrections                                   5.4.0
  Jun 2003    CN\#20       NP-030216      016        \-        Correction on Current-Location AVP values                                                    5.4.0
  Jun 2003    CN\#20       NP-030216      018        \-        Correction to the use of User-Identity                                                       5.4.0
  Jun 2003    CN\#20       NP-030216      019        1         Correction to the use of Data-Reference                                                      5.4.0
  Dec 2003    CN\#22                                           Editorial changes in application IDs and references \[4\] and \[7\].                         5.4.1
  Mar 2004    CN\#23       NP-040135      031        1         Add MSISDN to set of Data that may be downloaded                                             5.5.0
  Mar 2004    CN\#23       NP-040055      032        2         Introduction of \'Identity-Set\' AVP                                                         6.0.0
  Jun 2004    CN\#24       NP-040216      037        \-        Correction to description of Data Reference AVP value 10                                     6.1.0
  Jun 2004    CN\#24       NP-040216      035        1         Correction of reference for definition of MSISDN                                             6.1.0
  Sep 2004    CN\#25       NP-040394      043        \-        Incorrect Data-Reference AVP in Subscriber Notification Answer Command                       6.2.0
  Sep 2004    CN\#25       NP-040395      046        1         Application version control                                                                  6.2.0
  Sep 2004    CN\#25       NP-040394      041        1         Public-Identity is unspecified for the Sh interface                                          6.2.0
  Sep 2004    CN\#25       NP-040395      045        1         Single Public\_Identity required in Grouped User-Identity AVP                                6.2.0
  Sep 2004    CN\#25       NP-040394      049        \-        Correction of the Application-Id code                                                        6.2.0
  Sep 2004    CN\#25       NP-040412      051        1         Re-numbering of 3GPP specific AVP codes                                                      6.2.0
  Dec 2004    CN\#26       NP-040578      053        \-        Sh ABNF corrections                                                                          6.3.0
  Mar 2005    CN\#27       NP-050031      057        1         Introduction of Failed AVP                                                                   6.4.0
  Mar 2005    CN\#27       NP-050031      064        \-        Sh-Update needs to include Data-Reference to be future proof                                 6.4.0
  Jun 2005    CT\#28       CP-050216      069        \-        Sh UDR correction                                                                            6.5.0
  Jun 2005    CT\#28       CP-050087      070        \-        Correction of references                                                                     6.5.0
  Jun 2005    CT\#28       CP-050087      071        1         Corrections to message parameters                                                            6.5.0
  Jun 2005    CT\#28       CP-050087      072        1         Miscellaneous Corrections                                                                    6.5.0
  Jun 2005    CT\#28       CP-050216      074        \-        Correction to allow realm based routing                                                      6.5.0
  Sep 2005    CT\#29       CP-050424      075        \-        Identity-Set correction                                                                      6.6.0
  Sep 2005    CT\#29       CP-050422      095        1         State the condition for encryption of the Data Reference                                     6.6.0
  Sep 2005    CT\#29       CP-050423      097        1         Early IMS Security based protection for the Ut interface                                     6.6.0
  Dec 2005    CT\#30       CP-050625      098        3         Notification & Query Efficiency                                                              7.0.0
  Dec 2005    CT\#30       CP-050625      099        1         Management of subscriptions                                                                  7.0.0
  Mar 2006    CT\#31       CP-060084      0100       1         User-Data in the response to Sh-Subs-Notif                                                   7.1.0
  Mar 2006    CT\#31       CP-060084      0101       3         New error indications for the Sh-Subs-Notif procedure                                        7.1.0
  Jun 2006    CT\#32       CP-060319      0105       2         Sh interface efficiency improvement                                                          7.2.0
  Sep 2006    CT\#33       CP-060417      0107       2         Introduction of Activation State Information for IMS (DSAI)                                  7.3.0
  Sep 2006    CT\#33       CP-060417      0108       \-        Addition of AVPs in SNR and SNA                                                              7.3.0
  Sep 2006    CT\#33       CP-060417      0110       1         Public User Identity Grouping Information                                                    7.3.0
  Sep 2006    CT\#33       CP-060405      0112       \-        Missing Data Reference value                                                                 7.3.0
  Sep 2006    CT\#33       CP-060417      0113       1         Errors to be sent in response to Sh-Notif                                                    7.3.0
  Sep 2007    CT\#37       CP-070527      0118       \-        Define User-Data AVP                                                                         7.4.0
  Sep 2007    CT\#37       CP-070527      0119       1         Wildcarded PSI as key in the Sh Interface                                                    7.4.0
  Nov 2007    CT\#38       CP-070743      0120       \-        ABNF correction for UDR and SNR                                                              7.5.0
  Nov 2007    CT\#38       CP-070743      0121       1         PNR for Subscriptions to Notifications for all Identity Sets                                 7.5.0
  Mar 2008    CT\#39       CP-080019      0122       \-        Wildcarded Public User Identities                                                            8.0.0
  Jun 2008    CT\#40       CP-080267      0123       1         DSAI Corrections                                                                             8.1.0
  Jun 2008    CT\#40       CP-080702      0130       1         Service Indication for standardized services                                                 8.2.0
  Jun 2008    CT\#40       CP-080883      0132       1         Correction of Identity-Set AVP                                                               8.2.0
  Mar 2009    CT\#43       CP-090042      0134       1         AliasesRepositoryData removal                                                                8.3.0
  Jun 2009    CT\#44       CP-090305      0136                 Missing data-reference for GIBA                                                              8.4.0
  Dec 2009    CT\#46       CP-090778      0138                 Session-Priority AVP                                                                         8.5.0
  Dec 2009    CT\#46                                           Upgraded unchanged from Rel-8                                                                9.0.0
  Mar 2010    CT\#47       CP-100033      0143       1         IP-SM-GW UE reachability handling over Sh                                                    9.1.0
  Mar 2010    CT\#47       CP-100048      0144       1         Sh handling of T-ADS                                                                         9.1.0
  Mar 2010    CT\#47       CP-100206      0148       3         EPS Subcsriber State and Location Information Request                                        9.1.0
  Jun 2010    CT\#48       CP-100275      0149                 EPS state and location retrieval                                                             9.2.0
  Jun 2010    CT\#48       CP-100279      0154       1                                                                                                      9.2.0
  Sep 2010    CT\#49       CP-100447      0157       1         Correction to the Value of Data-Reference AVP                                                9.3.0
  Sep 2010    CT\#49       CP-100454      0160       1         Correction on Requested-Domain                                                               9.3.0
  Sep 2010    CT\#49       CP-100466      0158       2         Usage of IMSI and IMPI for user identification over Sh                                       10.0.0
  Sep 2010    CT\#49       CP-100466      0159       3         Location data including only serving node address                                            10.0.0
  Sep 2010    CT\#49       CP-100466      0163       3         Update-Eff feature                                                                           10.0.0
  Dec 2010    CT\#50       CP-100699      0164       2         Enhanced SRVCC                                                                               10.1.0
  Mar 2011    CT\#51       CP-110257      0168       2         MPS over Sh                                                                                  10.2.0
  Mar 2011    CT\#51       CP-110075      0170       2         Retrieval of CSRN from HSS                                                                   10.2.0
  Jun 2011    CT\#52       CP-110370      0175       1         Pre-paging Support Indicator for CSRN                                                        10.3.0
  Jun 2011    CT\#52       CP-110370      0176       1         Clarification on Notif-Eff description for SNR/SNA                                           10.3.0
  Jun 2011    CT\#52       CP-110370      0177       \-        Missing Repository-Data-ID AVP in PUA                                                        10.3.0
  Jun 2011    CT\#52       CP-110383      0173       2         Reference Location over Sh interface                                                         11.0.0
  Dec 2011    CT\#54       CP-110781      0189       \-        Correction on Wildcarded Public Identity                                                     11.1.0
  Mar 2012    CT\#55       CP-120035      0194       2         Update of Multiple Data Instances in Sh-Update                                               11.2.0
  Jun 2012    CT\#56       CP-120240      0195       3         Local Time for NPLI                                                                          11.3.0
  Sep 2012    CT\#57       CP-120481      0197                 A-MSISDN handling over Sh                                                                    11.4.0
  Sep 2012    CT\#57       CP-120481      0198       1         Local Time Zone                                                                              11.4.0
  Dec 2012    CT\#58       CP-120743      0202       1         EPS LocationInformation Support                                                              11.5.0
  Mar 2013    CT\#59       CP-130020      0208       1         PS Location Info request with RAT-type                                                       11.6.0
  Mar 2013    CT\#59       CP-130020      0210       1         Pre-paging-Supported and Local-Time-Zone-Indication AVPs                                     11.6.0
  Mar 2013    CT\#59       CP-130031      0200       1         Sh IMSI retrieval                                                                            12.0.0
  Jun 2013    CT\#60       CP-130374      0211       1         MTRR on Sh                                                                                   12.1.0
  Mar 2014    CT\#63       CP-140027      0214       1         Multiple notification due to the Update-Eff feature                                          12.2.0
  Jun 2014    CT\#64       CP-140262      0217       \-        Private User Identity retrieval                                                              12.3.0
  Jun 2014    CT\#64       CP-140262      0218       \-        UE Reachability for IP                                                                       12.3.0
  Sep 2014    CT\#65       CP-140515      0219       \-        Session-Priority reference                                                                   12.4.0
  Sep 2014    CT\#65       CP-140509      0220       1         Diameter Overload Control Over Sh                                                            12.4.0
  Dec 2014    CT\#66       CP-140773      0222       \-        M-bit clarification                                                                          12.5.0
  Dec 2014    CT\#66       CP-140779      0223       \-        Retrieval of TWAN-Id over Sh                                                                 12.5.0
  Dec 2014    CT\#66       CP-140790      0224       \-        DOIC reference update                                                                        12.5.0
  Dec 2015    CT\#70       CP-150759      0226       1         Update reference to DOIC new IETF RFC                                                        12.6.0
  Dec 2015    CT\#70       CP-150849      0227       4         Support of the DRMP AVP over Sh/Dh                                                           13.0.0
  2016-09     CT\#73       CP-160431      0228       1         Request to update data while a previous update request is in progress                        14.0.0
  2016-12     CT\#74       CP-160649      0236       1         RAT type included in EPS location information                                                14.1.0
  2016-12     CT\#74       CP-160681      0237       1         Load Control                                                                                 14.1.0
  2016-12     CT\#74       CP-160664      0239       1         Correction to change IETF drmp draft version to official RFC 7944                            14.1.0
  2017-03     CT\#75       CP-170035      0241       \-        Notif-Eff feature description correction                                                     14.2.0
  2017-03     CT\#75       CP-170035      0245       1         UDR flag description                                                                         14.2.0
  2017-03     CT\#75       CP-170048      0243       1         Update of reference for the Diameter base protocol                                           14.2.0
  2017-03     CT\#75       CP-170048      0244       \-        Cardinality of the Failed-AVP AVP in answer                                                  14.2.0
  2017-06     CT\#76       CP-171018      0248       1         Support for signaling transport level packet marking                                         14.3.0
  2017-06     CT\#76       CP-171040      0246       1         External Identifier on Sh                                                                    15.0.0
  2018-06     CT\#80       CP-181131      0249       \-        Requested Node AMF                                                                           15.1.0
  2019-09     CT\#85       CP-192094      0251       2         draft-ietf-dime-load published as RFC 8583                                                   15.2.0
  2020-07     CT\#88e      \-             \-         \-        Update to Rel-16 version (MCC)                                                               16.0.0
  2020-12     CT\#91e      CP-203022      0253       1         Incomplete implemented CR                                                                    16.1.0
  2021-03     CT\#91e      CP-210044      0354       \-        IMEISV and 5G SRVCC Capability missing in Data Reference AVP                                 16.2.0
  ----------- ------------ -------------- ---------- --------- -------------------------------------------------------------------------------------------- ---------
