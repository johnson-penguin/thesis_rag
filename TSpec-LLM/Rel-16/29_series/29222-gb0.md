![](media/image1.jpeg){width="7.0875in" height="3.4229166666666666in"}

  {#section .TT}

Contents {#contents .TT}
========

[12](#foreword)

[13](#scope)

[13](#references)

[14](#definitions-and-abbreviations)

[14](#definitions)

[14](#abbreviations)

[15](#overview)

[15](#introduction)

[15](#service-architecture)

[17](#functional-entities)

[17](#api-invoker)

[17](#capif-core-function)

[18](#api-exposing-function)

[18](#api-publishing-function)

[18](#api-management-function)

[19](#services-offered-by-the-capif-core-function)

[19](#introduction-of-services)

[20](#capif_discover_service_api)

[20](#service-description)

[20](#overview-1)

[20](#service-operations)

[20](#introduction-1)

[21](#discover_service_api)

[21](#general)

[21](#consumer-discovering-service-api-using-discover_service_api-service-operation)

[21](#capif_publish_service_api)

[21](#service-description-1)

[21](#overview-2)

[21](#service-operations-1)

[21](#introduction-2)

[22](#publish_service_api)

[22](#general-1)

[22](#api-publishing-function-publishing-service-apis-on-capif-core-function-using-publish_service_api-service-operation)

[23](#capif-core-function-publishing-service-apis-on-other-capif-core-function-using-publish_service_api-service-operation)

[23](#unpublish_service_api)

[23](#general-2)

[24](#consumer-un-publishing-service-apis-from-capif-core-function-using-unpublish_service_api-service-operation)

[24](#get_service_api)

[24](#general-3)

[24](#consumer-retrieving-service-apis-from-capif-core-function-using-get_service_api-service-operation)

[25](#update_service_api)

[25](#general-4)

[25](#consumer-updating-published-service-apis-on-capif-core-function-using-update_service_api-service-operation)

[25](#capif_events_api)

[25](#service-description-2)

[25](#overview-3)

[26](#service-operations-2)

[26](#introduction-3)

[26](#subscribe_event)

[26](#general-5)

[26](#subscribing-to-capif-events-using-subscribe_event-service-operation)

[27](#unsubscribe_event)

[27](#general-6)

[27](#unsubscribing-from-capif-events-using-unsubscribe_event-service-operation)

[27](#notify_event)

[27](#general-7)

[27](#notifying-capif-events-using-notify_event-service-operation)

[28](#capif_api_invoker_management_api)

[28](#service-description-3)

[28](#overview-4)

[28](#service-operations-3)

[28](#introduction-4)

[28](#onboard_api_invoker)

[28](#general-8)

[28](#api-invoker-on-boarding-itself-as-a-recognized-user-of-capif-using-onboard_api_invoker-service-operation)

[29](#offboard_api_invoker)

[29](#general-9)

[29](#api-invoker-off-boarding-itself-as-a-recognized-user-of-capif-using-offboard_api_invoker-service-operation)

[30](#notify_onboarding_completion)

[30](#general-10)

[30](#notifying-onboarding-completion-using-notify_onboarding_completion-service-operation)

[30](#update_api_invoker_details)

[30](#general-11)

[30](#api-invoker-updating-its-details-on-capif-using-update_api_invoker_details-service-operation)

[31](#notify_update_completion)

[31](#general-12)

[31](#notifying-api-invoker-update-completion-using-notify_update_completion-service-operation)

[31](#capif_security_api)

[31](#service-description-4)

[31](#overview-5)

[32](#service-operations-4)

[32](#introduction-5)

[32](#obtain_security_method)

[32](#general-13)

[32](#request-service-api-security-method-from-capif-using-obtain_security_method-service-operation)

[33](#obtain_authorization)

[33](#general-14)

[33](#obtain-authorization-using-obtain_authorization-service-operation)

[33](#obtain_api_invoker_info)

[33](#general-15)

[33](#obtain-api-invokers-security-information-using-obtain_api_invoker_info-service-operation)

[34](#revoke_authentication)

[34](#general-16)

[34](#invalidate-authorization-using-revoke_authorization-service-operation)

[34](#capif_monitoring_api)

[34](#capif_logging_api_invocation_api)

[34](#service-description-5)

[34](#overview-6)

[35](#service-operations-5)

[35](#introduction-6)

[35](#log_api_invocation_api)

[35](#general-17)

[35](#logging-service-api-invocations-using-log_api_invocation-service-operation)

[35](#capif_auditing_api)

[35](#service-description-6)

[35](#overview-7)

[36](#service-operations-6)

[36](#introduction-7)

[36](#query_invocation_logs_api)

[36](#general-18)

[36](#query-api-invocation-information-logs-using-query_invocation_logs-service-operation)

[36](#capif_access_control_policy_api)

[36](#service-description-7)

[36](#overview-8)

[37](#service-operations-7)

[37](#introduction-8)

[37](#obtain_access_control_policy)

[37](#general-19)

[37](#api-exposing-function-obtaining-access-control-policy-from-the-capif-core-function-using-obtain_access_control_policy-service-operation)

[37](#related-events)

[37](#capif_api_provider_management_api)

[37](#service-description-8)

[37](#overview-9)

[37](#service-operations-8)

[37](#introduction-9)

[38](#register_api_provider)

[38](#general-20)

[38](#api-provider-domain-functions-registering-as-a-recognized-api-provider-domain-function-of-capif-using-register_api_provider-service-operation)

[38](#update_api_provider)

[38](#general-21)

[38](#api-management-function-updating-api-provider-domain-function-details-on-capif-using-update_api_provider-service-operation)

[39](#deregister_api_provider)

[39](#general-22)

[39](#api-provider-domain-functions-deregistering-as-a-recognized-api-provider-domain-function-of-capif-using-deregister_api_provider-service-operation)

[39](#capif_routing_info_api)

[39](#service-description-9)

[39](#overview-10)

[40](#service-operations-9)

[40](#introduction-10)

[40](#obtain_routing_info)

[40](#general-23)

[40](#api-exposing-function-obtaining-api-routing-information-from-the-capif-core-function-using-obtain_routing_info-service-operation)

[40](#services-offered-by-the-api-exposing-function)

[40](#introduction-of-services-1)

[41](#aef_security_api)

[41](#service-description-10)

[41](#overview-11)

[41](#service-operations-10)

[41](#introduction-11)

[41](#initiate_authentication)

[41](#general-24)

[41](#api-invoker-initiating-authentication-using-initiate_authentication-service-operation)

[42](#revoke_authorization)

[42](#general-25)

[42](#capif-core-function-initiating-revocation-using-revoke_authorization-service-operation)

[42](#capif-design-aspects-common-for-all-apis)

[42](#general-26)

[42](#data-types)

[42](#general-27)

[43](#referenced-structured-data-types)

[43](#referenced-simple-data-types-and-enumerations)

[43](#usage-of-http)

[43](#content-type)

[44](#uri-structure)

[44](#notifications)

[44](#error-handling)

[45](#feature-negotiation)

[45](#http-headers)

[45](#conventions-for-open-api-specification-files)

[45](#capif-api-definition)

[45](#capif_discover_service_api-1)

[45](#api-uri)

[46](#resources)

[46](#overview-12)

[46](#resource-all-published-service-apis)

[46](#description)

[46](#resource-definition)

[46](#resource-standard-methods)

[46](#get)

[47](#resource-custom-operations)

[47](#notifications-1)

[47](#data-model)

[47](#general-28)

[48](#structured-data-types)

[48](#introduction-12)

[48](#type-discoveredapis)

[48](#void)

[48](#simple-data-types-and-enumerations)

[48](#error-handling-1)

[48](#feature-negotiation-1)

[49](#capif_publish_service_api-1)

[49](#api-uri-1)

[49](#resources-1)

[49](#overview-13)

[50](#resource-apf-published-apis)

[50](#description-1)

[50](#resource-definition-1)

[50](#resource-standard-methods-1)

[50](#post)

[51](#get-1)

[51](#resource-custom-operations-1)

[51](#resource-individual-apf-published-api)

[51](#description-2)

[51](#resource-definition-2)

[51](#resource-standard-methods-2)

[51](#get-2)

[52](#put)

[52](#delete)

[53](#resource-custom-operations-2)

[53](#notifications-2)

[53](#data-model-1)

[53](#general-29)

[54](#structured-data-types-1)

[54](#introduction-13)

[54](#type-serviceapidescription)

[55](#type-interfacedescription)

[55](#type-aefprofile)

[55](#type-version)

[56](#type-resource)

[56](#type-customoperation)

[56](#type-shareableinformation)

[56](#type-publishedapipath)

[57](#simple-data-types-and-enumerations-1)

[57](#introduction-14)

[57](#simple-data-types)

[57](#enumeration-protocol)

[57](#enumeration-dataformat)

[57](#enumeration-communicationtype)

[57](#enumeration-securitymethod)

[58](#enumeration-operation)

[58](#error-handling-2)

[58](#feature-negotiation-2)

[58](#capif_events_api-1)

[58](#api-uri-2)

[59](#resources-2)

[59](#overview-14)

[59](#resource-capif-events-subscriptions)

[59](#description-3)

[59](#resource-definition-3)

[60](#resource-standard-methods-3)

[60](#post-1)

[60](#resource-custom-operations-3)

[60](#resource-individual-capif-events-subscription)

[60](#description-4)

[60](#resource-definition-4)

[61](#resource-standard-methods-4)

[61](#delete-1)

[61](#resource-custom-operations-4)

[61](#notifications-3)

[61](#general-30)

[62](#event-notification)

[62](#description-5)

[62](#notification-definition)

[62](#data-model-2)

[62](#general-31)

[63](#structured-data-types-2)

[63](#introduction-15)

[64](#type-eventsubscription)

[64](#type-eventnotification)

[64](#type-capifeventfilter)

[65](#type-capifeventdetail)

[65](#type-accesscontrolpolicylistext)

[65](#type-topologyhiding)

[65](#simple-data-types-and-enumerations-2)

[65](#introduction-16)

[65](#simple-data-types-1)

[66](#enumeration-capifevent)

[66](#error-handling-3)

[66](#feature-negotiation-3)

[67](#capif_api_invoker_management_api-1)

[67](#api-uri-3)

[67](#resources-3)

[67](#overview-15)

[68](#resource-on-boarded-api-invokers)

[68](#description-6)

[68](#resource-definition-5)

[68](#resource-standard-methods-5)

[68](#post-2)

[69](#put-1)

[69](#resource-custom-operations-5)

[69](#resource-individual-on-boarded-api-invoker)

[69](#description-7)

[69](#resource-definition-6)

[70](#resource-standard-methods-6)

[70](#delete-2)

[70](#resource-custom-operations-6)

[70](#notifications-4)

[70](#general-32)

[71](#notify_onboarding_completion-1)

[71](#description-8)

[71](#notification-definition-1)

[71](#notify_update_completion-1)

[71](#description-9)

[71](#notification-definition-2)

[72](#data-model-3)

[72](#general-33)

[73](#structured-data-types-3)

[73](#introduction-17)

[73](#type-apiinvokerenrolmentdetails)

[73](#type-void)

[73](#type-apilist)

[74](#type-onboardinginformation)

[74](#type-void-1)

[74](#type-onboardingnotification)

[74](#simple-data-types-and-enumerations-3)

[74](#error-handling-4)

[74](#feature-negotiation-4)

[75](#capif_security_api-1)

[75](#api-uri-4)

[75](#resources-4)

[75](#overview-16)

[76](#resource-trusted-api-invokers)

[76](#description-10)

[76](#resource-definition-7)

[76](#resource-standard-methods-7)

[76](#void-1)

[76](#resource-custom-operations-7)

[76](#resource-individual-trusted-api-invokers)

[76](#description-11)

[77](#resource-definition-8)

[77](#resource-standard-methods-8)

[77](#get-3)

[77](#delete-3)

[78](#put-2)

[79](#resource-custom-operations-8)

[79](#overview-17)

[79](#operation-update)

[79](#description-12)

[79](#operation-definition)

[80](#operation-delete)

[80](#description-13)

[80](#operation-definition-1)

[80](#operation-token)

[80](#description-14)

[80](#operation-definition-2)

[81](#notifications-5)

[81](#general-34)

[81](#authorization-revoked-notification)

[81](#description-15)

[81](#notification-definition-3)

[82](#data-model-4)

[82](#general-35)

[83](#structured-data-types-4)

[83](#introduction-18)

[83](#type-servicesecurity)

[84](#type-securityinformation)

[84](#void-2)

[84](#type-securitynotification)

[85](#type-accesstokenreq)

[86](#type-accesstokenrsp)

[86](#type-accesstokenclaims)

[87](#simple-data-types-and-enumerations-4)

[87](#introduction-19)

[87](#simple-data-types-2)

[87](#enumeration-cause)

[87](#error-handling-5)

[87](#feature-negotiation-5)

[87](#capif_access_control_policy_api-1)

[87](#api-uri-5)

[88](#resources-5)

[88](#overview-18)

[88](#resource-access-control-policy-list)

[88](#description-16)

[88](#resource-definition-9)

[89](#resource-standard-methods-9)

[89](#get-4)

[89](#resource-custom-operations-9)

[89](#notifications-6)

[89](#data-model-5)

[89](#general-36)

[90](#structured-data-types-5)

[90](#introduction-20)

[90](#type-accesscontrolpolicylist)

[90](#type-apiinvokerpolicy)

[90](#type-timerangelist)

[91](#simple-data-types-and-enumerations-5)

[91](#error-handling-6)

[91](#feature-negotiation-6)

[91](#capif_logging_api_invocation_api-1)

[91](#api-uri-6)

[92](#resources-6)

[92](#overview-19)

[92](#resource-logs)

[92](#description-17)

[92](#resource-definition-10)

[93](#resource-standard-methods-10)

[93](#post-3)

[93](#resource-custom-operations-10)

[93](#notifications-7)

[93](#data-model-6)

[93](#general-37)

[94](#structured-data-types-6)

[94](#introduction-21)

[94](#type-invocationlog)

[95](#type-log)

[95](#simple-data-types-and-enumerations-6)

[95](#introduction-22)

[95](#simple-data-types-3)

[96](#error-handling-7)

[96](#feature-negotiation-7)

[96](#capif_auditing_api-1)

[96](#api-uri-7)

[96](#resources-7)

[96](#overview-20)

[97](#resource-all-service-api-invocation-logs)

[97](#description-18)

[97](#resource-definition-11)

[97](#resource-standard-methods-11)

[97](#get-5)

[98](#resource-custom-operations-11)

[98](#notifications-8)

[98](#data-model-7)

[98](#general-38)

[98](#structured-data-types-7)

[98](#simple-data-types-and-enumerations-7)

[99](#error-handling-8)

[99](#feature-negotiation-8)

[99](#capif_api_provider_management_api-1)

[99](#api-uri-8)

[99](#resources-8)

[99](#overview-21)

[100](#resource-all-api-provider-domains-registrations)

[100](#description-19)

[100](#resource-definition-12)

[100](#resource-standard-methods-12)

[100](#post-4)

[101](#resource-custom-operations-12)

[101](#resource-individual-api-provider-domain-registration)

[101](#description-20)

[101](#resource-definition-13)

[101](#resource-standard-methods-13)

[101](#put-3)

[102](#delete-4)

[102](#resource-custom-operations-13)

[102](#notifications-9)

[103](#data-model-8)

[103](#general-39)

[104](#structured-data-types-8)

[104](#introduction-23)

[104](#type-apiproviderenrolmentdetails)

[105](#type-apiproviderfunctiondetails)

[105](#type-registrationinformation)

[105](#simple-data-types-and-enumerations-8)

[105](#introduction-24)

[105](#simple-data-types-4)

[106](#enumeration-apiproviderfuncrole)

[106](#error-handling-9)

[106](#feature-negotiation-9)

[106](#capif_routing_info_api-1)

[106](#api-uri-9)

[106](#resources-9)

[106](#overview-22)

[107](#resource-individual-service-api-routing-info)

[107](#description-21)

[107](#resource-definition-14)

[107](#resource-standard-methods-14)

[107](#get-6)

[108](#resource-custom-operations-14)

[108](#notifications-10)

[108](#data-model-9)

[108](#general-40)

[108](#structured-data-types-9)

[108](#introduction-25)

[108](#type-routinginfo)

[109](#type-routingrule)

[109](#type-ipv6addressrange)

[109](#simple-data-types-and-enumerations-9)

[109](#error-handling-10)

[109](#feature-negotiation-10)

[109](#aef-api-definition)

[109](#aef_security_api-1)

[109](#api-uri-10)

[110](#resources-10)

[110](#resource-custom-operations-15)

[110](#a-custom-operations-without-associated-resources)

[110](#a.1-overview)

[110](#a.2-operation-check-authentication)

[110](#a.2.1-description)

[110](#a.2.2-operation-definition)

[111](#a.3-operation-revoke-authorization)

[111](#a.3.1-description)

[111](#a.3.2-operation-definition)

[111](#notifications-11)

[111](#data-model-10)

[111](#general-41)

[112](#structured-data-types-10)

[112](#introduction-26)

[112](#type-checkauthenticationreq)

[112](#type-checkauthenticationrsp)

[112](#type-revokeauthorizationreq)

[112](#type-revokeauthorizationrsp)

[113](#simple-data-types-and-enumerations-10)

[113](#error-handling-11)

[113](#feature-negotiation-11)

[113](#security)

[113](#general-42)

[113](#capif-11e-security)

[113](#capif-22e-security-and-securely-invoking-service-apis)

[114](#annex-a-normative-openapi-specification)

[114](#a.1-general)

[114](#a.2-capif_discover_service_api)

[115](#a.3-capif_publish_service_api)

[122](#a.4-capif_events_api)

[126](#a.5-capif_api_invoker_management_api)

[130](#a.6-capif_security_api)

[136](#a.7-capif_access_control_policy_api)

[137](#a.8-capif_logging_api_invocation_api)

[139](#a.9-capif_auditing_api)

[141](#a.10-aef_security_api)

[143](#a.11-capif_api_provider_management_api)

[146](#a.12-capif_routing_info_api)

[148](#annex-b-informative-change-history)Foreword 1 Scope 2 References
3 Definitions and abbreviations 3.1 Definitions 3.2 Abbreviations 4
Overview 4.1 Introduction 4.2 Service Architecture 4.3 Functional
Entities 4.3.1 API invoker 4.3.2 CAPIF core function 4.3.3 API exposing
function 4.3.4 API publishing function 4.3.5 API management function 5
Services offered by the CAPIF Core Function 5.1 Introduction of Services
5.2 CAPIF\_Discover\_Service\_API 5.2.1 Service Description 5.2.1.1
Overview 5.2.2 Service Operations 5.2.2.1 Introduction 5.2.2.2
Discover\_Service\_API 5.2.2.2.1 General 5.2.2.2.2 Consumer discovering
service API using Discover\_Service\_API service operation 5.3
CAPIF\_Publish\_Service\_API 5.3.1 Service Description 5.3.1.1 Overview
5.3.2 Service Operations 5.3.2.1 Introduction 5.3.2.2
Publish\_Service\_API 5.3.2.2.1 General 5.3.2.2.2 API publishing
function publishing service APIs on CAPIF core function using
Publish\_Service\_API service operation 5.3.2.2.3 CAPIF core function
publishing service APIs on other CAPIF core function using
Publish\_Service\_API service operation 5.3.2.3 Unpublish\_Service\_API
5.3.2.3.1 General 5.3.2.3.2 Consumer un-publishing service APIs from
CAPIF core function using Unpublish\_Service\_API service operation
5.3.2.4 Get\_Service\_API 5.3.2.4.1 General 5.3.2.4.2 Consumer
retrieving service APIs from CAPIF core function using Get\_Service\_API
service operation 5.3.2.5 Update\_Service\_API 5.3.2.5.1 General
5.3.2.5.2 Consumer updating published service APIs on CAPIF core
function using Update\_Service\_API service operation 5.4
CAPIF\_Events\_API 5.4.1 Service Description 5.4.1.1 Overview 5.4.2
Service Operations 5.4.2.1 Introduction 5.4.2.2 Subscribe\_Event
5.4.2.2.1 General 5.4.2.2.2 Subscribing to CAPIF events using
Subscribe\_Event service operation 5.4.2.3 Unsubscribe\_Event 5.4.2.3.1
General 5.4.2.3.2 Unsubscribing from CAPIF events using
Unsubscribe\_Event service operation 5.4.2.4 Notify\_Event 5.4.2.4.1
General 5.4.2.4.2 Notifying CAPIF events using Notify\_Event service
operation 5.5 CAPIF\_API\_Invoker\_Management\_API 5.5.1 Service
Description 5.5.1.1 Overview 5.5.2 Service Operations 5.5.2.1
Introduction 5.5.2.2 Onboard\_API\_Invoker 5.5.2.2.1 General 5.5.2.2.2
API invoker on-boarding itself as a recognized user of CAPIF using
Onboard\_API\_Invoker service operation 5.5.2.3 Offboard\_API\_Invoker
5.5.2.3.1 General 5.5.2.3.2 API invoker off-boarding itself as a
recognized user of CAPIF using Offboard\_API\_Invoker service operation
5.5.2.4 Notify\_Onboarding\_Completion 5.5.2.4.1 General 5.5.2.4.2
Notifying Onboarding completion using Notify\_Onboarding\_Completion
service operation 5.5.2.5 Update\_API\_Invoker\_Details 5.5.2.5.1
General 5.5.2.5.2 API invoker updating its details on CAPIF using
Update\_API\_Invoker\_Details service operation 5.5.2.6
Notify\_Update\_Completion 5.5.2.6.1 General 5.5.2.6.2 Notifying API
invoker update completion using Notify\_Update\_Completion service
operation 5.6 CAPIF\_Security\_API 5.6.1 Service Description 5.6.1.1
Overview 5.6.2 Service Operations 5.6.2.1 Introduction 5.6.2.2
Obtain\_Security\_Method 5.6.2.2.1 General 5.6.2.2.2 Request service API
security method from CAPIF using Obtain\_Security\_Method service
operation 5.6.2.3 Obtain\_Authorization 5.6.2.3.1 General 5.6.2.3.2
Obtain authorization using Obtain\_Authorization service operation
5.6.2.4 Obtain\_API\_Invoker\_Info 5.6.2.4.1 General 5.6.2.4.2 Obtain
API invoker\'s security information using Obtain\_API\_Invoker\_Info
service operation 5.6.2.5 Revoke\_Authentication 5.6.2.5.1 General
5.6.2.5.2 Invalidate authorization using Revoke\_Authorization service
operation 5.7 CAPIF\_Monitoring\_API 5.8
CAPIF\_Logging\_API\_Invocation\_API 5.8.1 Service Description 5.8.1.1
Overview 5.8.2 Service Operations 5.8.2.1 Introduction 5.8.2.2
Log\_API\_Invocation\_API 5.8.2.2.1 General 5.8.2.2.2 Logging service
API invocations using Log\_API\_Invocation service operation 5.9
CAPIF\_Auditing\_API 5.9.1 Service Description 5.9.1.1 Overview 5.9.2
Service Operations 5.9.2.1 Introduction 5.9.2.2
Query\_Invocation\_Logs\_API 5.9.2.2.1 General 5.9.2.2.2 Query API
invocation information logs using Query\_Invocation\_Logs service
operation 5.10 CAPIF\_Access\_Control\_Policy\_API 5.10.1 Service
Description 5.10.1.1 Overview 5.10.2 Service Operations 5.10.2.1
Introduction 5.10.2.2 Obtain\_Access\_Control\_Policy 5.10.2.2.1 General
5.10.2.2.2 API exposing function obtaining access control policy from
the CAPIF core function using Obtain\_Access\_Control\_Policy service
operation 5.10.3 Related Events 5.11
CAPIF\_API\_Provider\_Management\_API 5.11.1 Service Description
5.11.1.1 Overview 5.11.2 Service Operations 5.11.2.1 Introduction
5.11.2.2 Register\_API\_Provider 5.11.2.2.1 General 5.11.2.2.2 API
provider domain functions registering as a recognized API provider
domain function of CAPIF using Register\_API\_Provider service operation
5.11.2.3 Update\_API\_Provider 5.11.2.3.1 General 5.11.2.3.2 API
management function updating API provider domain function details on
CAPIF using Update\_API\_Provider service operation 5.11.2.4
Deregister\_API\_Provider 5.11.2.4.1 General 5.11.2.4.2 API provider
domain functions deregistering as a recognized API provider domain
function of CAPIF using Deregister\_API\_Provider service operation 5.12
CAPIF\_Routing\_Info\_API 5.12.1 Service Description 5.12.1.1 Overview
5.12.2 Service Operations 5.12.2.1 Introduction 5.12.2.2
Obtain\_Routing\_Info 5.12.2.2.1 General 5.12.2.2.2 API exposing
function obtaining API routing information from the CAPIF core function
using Obtain\_Routing\_Info service operation 6 Services offered by the
API exposing function 6.1 Introduction of Services 6.2
AEF\_Security\_API 6.2.1 Service Description 6.2.1.1 Overview 6.2.2
Service Operations 6.2.2.1 Introduction 6.2.2.2 Initiate\_Authentication
6.2.2.2.1 General 6.2.2.2.2 API invoker initiating authentication using
Initiate\_Authentication service operation 6.2.2.3 Revoke\_Authorization
6.2.2.3.1 General 6.2.2.3.2 CAPIF core function initiating revocation
using Revoke\_Authorization service operation 7 CAPIF Design Aspects
Common for All APIs 7.1 General 7.2 Data Types 7.2.1 General 7.2.2
Referenced structured data types 7.2.3 Referenced Simple data types and
enumerations 7.3 Usage of HTTP 7.4 Content type 7.5 URI structure 7.6
Notifications 7.7 Error handling 7.8 Feature negotiation 7.9 HTTP
headers 7.10 Conventions for Open API specification files 8 CAPIF API
Definition 8.1 CAPIF\_Discover\_Service\_API 8.1.1 API URI 8.1.2
Resources 8.1.2.1 Overview 8.1.2.2 Resource: All published service APIs
8.1.2.2.1 Description 8.1.2.2.2 Resource Definition 8.1.2.2.3 Resource
Standard Methods 8.1.2.2.3.1 GET 8.1.2.2.4 Resource Custom Operations
8.1.3 Notifications 8.1.4 Data Model 8.1.4.1 General 8.1.4.2 Structured
data types 8.1.4.2.1 Introduction 8.1.4.2.2 Type: DiscoveredAPIs
8.1.4.2.3 Void 8.1.4.3 Simple data types and enumerations 8.1.5 Error
Handling 8.1.6 Feature negotiation 8.2 CAPIF\_Publish\_Service\_API
8.2.1 API URI 8.2.2 Resources 8.2.2.1 Overview 8.2.2.2 Resource: APF
published APIs 8.2.2.2.1 Description 8.2.2.2.2 Resource Definition
8.2.2.2.3 Resource Standard Methods 8.2.2.2.3.1 POST 8.2.2.2.3.2 GET
8.2.2.2.4 Resource Custom Operations 8.2.2.3 Resource: Individual APF
published API 8.2.2.3.1 Description 8.2.2.3.2 Resource Definition
8.2.2.3.3 Resource Standard Methods 8.2.2.3.3.1 GET 8.2.2.3.3.2 PUT
8.2.2.3.3.3 DELETE 8.2.2.3.4 Resource Custom Operations 8.2.3
Notifications 8.2.4 Data Model 8.2.4.1 General 8.2.4.2 Structured data
types 8.2.4.2.1 Introduction 8.2.4.2.2 Type: ServiceAPIDescription
8.2.4.2.3 Type: InterfaceDescription 8.2.4.2.4 Type: AefProfile
8.2.4.2.5 Type: Version 8.2.4.2.6 Type: Resource 8.2.4.2.7 Type:
CustomOperation 8.2.4.2.8 Type: ShareableInformation 8.2.4.2.9 Type:
PublishedApiPath 8.2.4.3 Simple data types and enumerations 8.2.4.3.1
Introduction 8.2.4.3.2 Simple data types 8.2.4.3.3 Enumeration: Protocol
8.2.4.3.4 Enumeration: DataFormat 8.2.4.3.5 Enumeration:
CommunicationType 8.2.4.3.6 Enumeration: SecurityMethod 8.2.4.3.7
Enumeration: Operation 8.2.5 Error Handling 8.2.6 Feature negotiation
8.3 CAPIF\_Events\_API 8.3.1 API URI 8.3.2 Resources 8.3.2.1 Overview
8.3.2.2 Resource: CAPIF Events Subscriptions 8.3.2.2.1 Description
8.3.2.2.2 Resource Definition 8.3.2.2.3 Resource Standard Methods
8.3.2.2.3.1 POST 8.3.2.2.4 Resource Custom Operations 8.3.2.3 Resource:
Individual CAPIF Events Subscription 8.3.2.3.1 Description 8.3.2.3.2
Resource Definition 8.3.2.3.3 Resource Standard Methods 8.3.2.3.3.1
DELETE 8.3.2.3.4 Resource Custom Operations 8.3.3 Notifications 8.3.3.1
General 8.3.3.2 Event Notification 8.3.3.2.1 Description 8.3.3.2.2
Notification definition 8.3.4 Data Model 8.3.4.1 General 8.3.4.2
Structured data types 8.3.4.2.1 Introduction 8.3.4.2.2 Type:
EventSubscription 8.3.4.2.3 Type: EventNotification 8.3.4.2.4 Type:
CAPIFEventFilter 8.3.4.2.5 Type: CAPIFEventDetail 8.3.4.2.6 Type:
AccessControlPolicyListExt 8.3.4.2.7 Type: TopologyHiding 8.3.4.3 Simple
data types and enumerations 8.3.4.3.1 Introduction 8.3.4.3.2 Simple data
types 8.3.4.3.3 Enumeration: CAPIFEvent 8.3.5 Error Handling 8.3.6
Feature negotiation 8.4 CAPIF\_API\_Invoker\_Management\_API 8.4.1 API
URI 8.4.2 Resources 8.4.2.1 Overview 8.4.2.2 Resource: On-boarded API
invokers 8.4.2.2.1 Description 8.4.2.2.2 Resource Definition 8.4.2.2.3
Resource Standard Methods 8.4.2.2.3.1 POST 8.4.2.3.3.2 PUT 8.4.2.2.4
Resource Custom Operations 8.4.2.3 Resource: Individual On-boarded API
Invoker 8.4.2.3.1 Description 8.4.2.3.2 Resource Definition 8.4.2.3.3
Resource Standard Methods 8.4.2.3.3.1 DELETE 8.3.2.3.4 Resource Custom
Operations 8.4.3 Notifications 8.4.3.1 General 8.4.3.2
Notify\_Onboarding\_Completion 8.4.3.2.1 Description 8.4.3.2.2
Notification definition 8.4.3.3 Notify\_Update\_Completion 8.4.3.3.1
Description 8.4.3.3.2 Notification definition 8.4.4 Data Model 8.4.4.1
General 8.4.4.2 Structured data types 8.4.4.2.1 Introduction 8.4.4.2.2
Type: APIInvokerEnrolmentDetails 8.4.4.2.3 Type: Void 8.4.4.2.4 Type:
APIList 8.4.4.2.5 Type: OnboardingInformation 8.4.4.2.6 Type: Void
8.4.4.2.7 Type: OnboardingNotification 8.4.4.3 Simple data types and
enumerations 8.4.5 Error Handling 8.4.6 Feature negotiation 8.5
CAPIF\_Security\_API 8.5.1 API URI 8.5.2 Resources 8.5.2.1 Overview
8.5.2.2 Resource: Trusted API invokers 8.5.2.2.1 Description 8.5.2.2.2
Resource Definition 8.5.2.2.3 Resource Standard Methods 8.5.2.2.3.1 Void
8.5.2.2.4 Resource Custom Operations 8.5.2.3 Resource: Individual
trusted API invokers 8.5.2.3.1 Description 8.5.2.3.2 Resource Definition
8.5.2.3.3 Resource Standard Methods 8.5.2.3.3.1 GET 8.5.2.3.3.2 DELETE
8.5.2.3.3.3 PUT 8.5.2.3.4 Resource Custom Operations 8.5.2.3.4.1
Overview 8.5.2.3.4.2 Operation: update 8.5.2.3.4.2.1 Description
8.5.2.3.4.2.2 Operation Definition 8.5.2.3.4.3 Operation: delete
8.5.2.3.4.3.1 Description 8.5.2.3.4.3.2 Operation Definition 8.5.2.3.4.4
Operation: token 8.5.2.3.4.4.1 Description 8.5.2.3.4.4.2 Operation
Definition 8.5.3 Notifications 8.5.3.1 General 8.5.3.2 Authorization
revoked notification 8.5.3.2.1 Description 8.5.3.2.2 Notification
definition 8.5.4 Data Model 8.5.4.1 General 8.5.4.2 Structured data
types 8.5.4.2.1 Introduction 8.5.4.2.2 Type: ServiceSecurity 8.5.4.2.3
Type: SecurityInformation 8.5.4.2.4 Void 8.5.4.2.5 Type:
SecurityNotification 8.5.4.2.6 Type: AccessTokenReq 8.5.4.2.7 Type:
AccessTokenRsp 8.5.4.2.8 Type: AccessTokenClaims 8.5.4.3 Simple data
types and enumerations 8.5.4.3.1 Introduction 8.5.4.3.2 Simple data
types 8.5.4.3.3 Enumeration: Cause 8.5.5 Error Handling 8.5.6 Feature
negotiation 8.6 CAPIF\_Access\_Control\_Policy\_API 8.6.1 API URI 8.6.2
Resources 8.6.2.1 Overview 8.6.2.2 Resource: Access Control Policy List
8.6.2.2.1 Description 8.6.2.2.2 Resource Definition 8.6.2.2.3 Resource
Standard Methods 8.6.2.2.3.1 GET 8.6.2.2.4 Resource Custom Operations
8.6.3 Notifications 8.6.4 Data Model 8.6.4.1 General 8.6.4.2 Structured
data types 8.6.4.2.1 Introduction 8.6.4.2.2 Type:
AccessControlPolicyList 8.6.4.2.3 Type: ApiInvokerPolicy 8.6.4.2.4 Type:
TimeRangeList 8.6.4.3 Simple data types and enumerations 8.6.5 Error
Handling 8.6.6 Feature negotiation 8.7
CAPIF\_Logging\_API\_Invocation\_API 8.7.1 API URI 8.7.2 Resources
8.7.2.1 Overview 8.7.2.2 Resource: Logs 8.7.2.2.1 Description 8.7.2.2.2
Resource Definition 8.7.2.2.3 Resource Standard Methods 8.7.2.2.3.1 POST
8.7.2.2.4 Resource Custom Operations 8.7.3 Notifications 8.7.4 Data
Model 8.7.4.1 General 8.7.4.2 Structured data types 8.7.4.2.1
Introduction 8.7.4.2.2 Type: InvocationLog 8.7.4.2.3 Type: Log 8.7.4.3
Simple data types and enumerations 8.7.4.3.1 Introduction 8.7.4.3.2
Simple data types 8.7.5 Error Handling 8.7.6 Feature negotiation 8.8
CAPIF\_Auditing\_API 8.8.1 API URI 8.8.2 Resources 8.8.2.1 Overview
8.8.2.2 Resource: All service API invocation logs 8.8.2.2.1 Description
8.8.2.2.2 Resource Definition 8.8.2.2.3 Resource Standard Methods
8.8.2.2.3.1 GET 8.8.2.2.4 Resource Custom Operations 8.8.3 Notifications
8.8.4 Data Model 8.8.4.1 General 8.8.4.2 Structured data types 8.8.4.3
Simple data types and enumerations 8.8.5 Error Handling 8.8.6 Feature
negotiation 8.9 CAPIF\_API\_Provider\_Management\_API 8.9.1 API URI
8.9.2 Resources 8.9.2.1 Overview 8.9.2.2 Resource: All API Provider
Domains Registrations 8.9.2.2.1 Description 8.9.2.2.2 Resource
Definition 8.9.2.2.3 Resource Standard Methods 8.9.2.2.3.1 POST
8.9.2.2.4 Resource Custom Operations 8.9.2.3 Resource: Individual API
Provider Domain Registration 8.9.2.3.1 Description 8.9.2.3.2 Resource
Definition 8.9.2.3.3 Resource Standard Methods 8.9.2.3.3.1 PUT
8.9.2.3.3.2 DELETE 8.9.2.3.4 Resource Custom Operations 8.9.3
Notifications 8.9.4 Data Model 8.9.4.1 General 8.9.4.2 Structured data
types 8.9.4.2.1 Introduction 8.9.4.2.2 Type: APIProviderEnrolmentDetails
8.9.4.2.3 Type: APIProviderFunctionDetails 8.9.4.2.4 Type:
RegistrationInformation 8.9.4.3 Simple data types and enumerations
8.9.4.3.1 Introduction 8.9.4.3.2 Simple data types 8.9.4.3.3
Enumeration: ApiProviderFuncRole 8.9.5 Error Handling 8.9.6 Feature
negotiation 8.10 CAPIF\_Routing\_Info\_API 8.10.1 API URI 8.10.2
Resources 8.10.2.1 Overview 8.10.2.2 Resource: Individual Service API
routing info 8.10.2.2.1 Description 8.10.2.2.2 Resource Definition
8.10.2.2.3 Resource Standard Methods 8.10.2.2.3.1 GET 8.10.2.2.4
Resource Custom Operations 8.10.3 Notifications 8.10.4 Data Model
8.10.4.1 General 8.10.4.2 Structured data types 8.10.4.2.1 Introduction
8.10.4.2.2 Type: RoutingInfo 8.10.4.2.3 Type: RoutingRule 8.10.4.2.4
Type: Ipv6AddressRange 8.10.4.3 Simple data types and enumerations
8.10.5 Error Handling 8.10.6 Feature negotiation 9 AEF API Definition
9.1 AEF\_Security\_API 9.1.1 API URI 9.1.2 Resources 9.1.2.2.4 Resource
Custom Operations 9.1.2a Custom Operations without associated resources
9.1.2a.1 Overview 9.1.2a.2 Operation: check-authentication 9.1.2a.2.1
Description 9.1.2a.2.2 Operation Definition 9.1.2a.3 Operation:
revoke-authorization 9.1.2a.3.1 Description 9.1.2a.3.2 Operation
Definition 9.1.3 Notifications 9.1.4 Data Model 9.1.4.1 General 9.1.4.2
Structured data types 9.1.4.2.1 Introduction 9.1.4.2.2 Type:
CheckAuthenticationReq 9.1.4.2.3 Type: CheckAuthenticationRsp 9.1.4.2.4
Type: RevokeAuthorizationReq 9.1.4.2.5 Type: RevokeAuthorizationRsp
9.1.4.3 Simple data types and enumerations 9.1.5 Error Handling 9.1.6
Feature negotiation 10 Security 10.1 General 10.2 CAPIF-1/1e security
10.3 CAPIF-2/2e security and securely invoking service APIs Annex A
(normative): OpenAPI specification A.1 General A.2
CAPIF\_Discover\_Service\_API A.3 CAPIF\_Publish\_Service\_API A.4
CAPIF\_Events\_API A.5 CAPIF\_API\_Invoker\_Management\_API A.6
CAPIF\_Security\_API A.7 CAPIF\_Access\_Control\_Policy\_API A.8
CAPIF\_Logging\_API\_Invocation\_API A.9 CAPIF\_Auditing\_API A.10
AEF\_Security\_API A.11 CAPIF\_API\_Provider\_Management\_API A.12
CAPIF\_Routing\_Info\_API Annex B (informative): Change history

Foreword
========

This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

1 Scope
=======

The present specification describes the protocol for the Common API
Framework (CAPIF) for 3GPP Northbound APIs. The CAPIF and the related
stage 2 architecture and functional requirements are defined in
3GPP TS 23.222 \[2\].

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".

\[2\] 3GPP TS 23.222: \"Functional architecture and information flows to
support Common API Framework for 3GPP Northbound APIs; Stage 2\".

\[3\] Open API Initiative, \"OpenAPI 3.0.0 Specification\",
<https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md>.

\[4\] IETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message
Syntax and Routing\".

\[5\] IETF RFC 7231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics
and Content\".

\[6\] IETF RFC 7232: \"Hypertext Transfer Protocol (HTTP/1.1):
Conditional Requests\".

\[7\] IETF RFC 7233: \"Hypertext Transfer Protocol (HTTP/1.1): Range
Requests\".

\[8\] IETF RFC 7234: \"Hypertext Transfer Protocol (HTTP/1.1):
Caching\".

\[9\] IETF RFC 7235: \"Hypertext Transfer Protocol (HTTP/1.1):
Authentication\".

\[10\] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2
(HTTP/2)\".

\[11\] IETF RFC 5246: \"The Transport Layer Security (TLS) Protocol
Version 1.2\".

\[12\] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data
Interchange Format\".

\[13\] IETF RFC 6455: \"The Websocket Protocol\".

\[14\] 3GPP TS 29.122: \"T8 reference point for northbound Application
Programming Interfaces (APIs)\".

\[15\] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound
APIs; Stage 3\".

\[16\] 3GPP TS 33.122: \"Security Aspects of Common API Framework for
3GPP Northbound APIs\".

\[17\] IETF RFC 2617: \"HTTP Authentication: Basic and Digest Access
Authentication\".

\[18\] 3GPP TS 29.501: \"5G System; Principles and Guidelines for
Services Definition; Stage 3\".

\[19\] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".

\[20\] IETF RFC 7239: \"Forwarded HTTP Extension\".

\[21\] 3GPP TS 29.500: \"5G System; Technical Realization of Service
Based Architecture; Stage 3\".\[22\] W3C HTML 4.01 Specification,
[[https://www.w3.org/TR/2018/SPSD-html401-20180327/]{.underline}](https://www.w3.org/TR/2018/SPSD-html401-20180327/).

\[23\] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".

\[24\] IETF RFC 7519: \"JSON Web Token (JWT)\".

\[25\] IETF RFC 7515: \"JSON Web Signature (JWS)\".

\[26\] 3GPP TS 29.523: \"5G System; Policy Control Event Exposure
Service; Stage 3\".

\[27\] 3GPP TR 21.900: \"Technical Specification Group working
methods\".

\[28\] 3GPP TS 29.510: \"5G System; Network Function Repository
Services; Stage 3\"

\[29\] IETF RFC 5280: \"Internet X.509 Public Key Infrastructure
Certificate and Certificate Revocation List (CRL) Profile\".

3 Definitions and abbreviations
===============================

3.1 Definitions
---------------

For the purposes of the present document, the terms and definitions
given in 3GPP TR 21.905 \[1\] and the following apply. A term defined in
the present document takes precedence over the definition of the same
term, if any, in 3GPP TR 21.905 \[1\].

**API registry:** API registry is a registry maintained by the CAPIF
core function to store information about the service APIs based on the
data models defined in this specification. The structure of the API
registry is out of scope of this specification.

**CAPIF administrator:** An authorized user with special permissions for
CAPIF operations.

**PLMN trust domain:** The entities protected by adequate security and
controlled by the PLMN operator or a trusted 3^rd^ party of the PLMN.

**Service API:** The interface through which a component of the system
exposes its services to API invokers by abstracting the services from
the underlying mechanisms.

**Subscriber:** A functional entity that subscribes to another
functional entity for notifications.

3.2 Abbreviations
-----------------

For the purposes of the present document, the abbreviations given in
3GPP TR 21.905 \[1\] and the following apply. An abbreviation defined in
the present document takes precedence over the definition of the same
abbreviation, if any, in 3GPP TR 21.905 \[1\].

AEF API Exposing Function

AMF API Management Function

APF API Publishing Function

AS Application Server

CAPIF Common API Framework

CCF CAPIF Core Function

JSON JavaScript Object Notation

REST Representational State Transfer

SCEF Service Capability Exposure Function

SCS Service Capability Server

4 Overview
==========

4.1 Introduction
----------------

In 3GPP, there are multiple northbound API-related specifications. To
avoid duplication and inconsistency of approaches between different API
specifications and to specify common services (e.g. authorization), 3GPP
has considered in 3GPP TS 23.222 \[2\] the development of a common API
framework (CAPIF) that includes common aspects applicable to any
northbound service APIs.

The present document specifies the APIs needed to support CAPIF.

4.2 Service Architecture
------------------------

3GPP TS 23.222 \[2\], clause 6 specifies the functional entities and
domains of the functional model, which is depicted in Figure 4.2-1, in
detail.

Figure 4.2-1: CAPIF Functional Model

CAPIF-1 and CAPIF-1e reference points connect an API invoker inside the
PLMN Trust Domain and an API invoker outside the PLMN Trust Domain
respectively, with the CAPIF core function.

CAPIF-2 and CAPIF-2e reference points connect an API invoker inside the
PLMN Trust Domain and an API invoker outside the PLMN Trust Domain
respectively, with the API exposing function.

CAPIF-3 reference point connects an API exposing function inside the
PLMN Trust Domain with the CAPIF core function.

CAPIF-4 reference point connects an API publishing function inside the
PLMN Trust Domain with the CAPIF core function.

CAPIF-5 reference point connects an API management function inside the
PLMN Trust Domain with the CAPIF core function.

NOTE: The API exposing function, API publishing function and API
management function are part the API provider domain which can be
implemented by the Service Capability Exposure Function (SCEF) and/or
the Network Exposure Function (NEF).

3GPP TS 23.222 \[2\], clause 6 specifies functional model for the CAPIF
to support 3^rd^ party API providers, which is depicted in Figure 4.2-2
in detail

Figure 4.2-2: Functional model for the CAPIF to support 3rd party API
providers

The CAPIF core function in the PLMN trust domain supports service APIs
from both the PLMN trust domain and the 3rd party trust domain having
business relationship with PLMN Trust Domain. The API invokers may exist
within the PLMN trust domain, or within the 3rd party trust domain or
outside of both the PLMN trust domain and the 3rd party trust domain.

CAPIF-3e reference point connects an API exposing function outside PLMN
Trust Domain with the CAPIF core function.

CAPIF-4e reference point connects an API publishing function outside
PLMN Trust Domain with the CAPIF core function.

CAPIF-5e reference point connects an API management function outside
PLMN Trust Domain with the CAPIF core function.

CAPIF-7 and CAPIF-7e reference points connect API exposing functions
within PLMN Trust Domain and outside PLMN Trust Domains respectively.
3GPP TS 23.222 \[2\] specifies functional model for interactions between
API exposing functions.

NOTE: CAPIF-7 reference point is not represented in the Figure 4.2-2
which is aligning to TS 23.222 \[2\].

3GPP TS 23.222 \[2\], clause 6 specifies functional model to support
CAPIF interconnection, which is depicted in Figure 4.2-3 in detail.

Figure 4.2-3: CAPIF interconnection functional model

CAPIF-6 and CAPIF-6e reference points connect two CAPIF core functions
located in the same or different PLMN trust domains, respectively. The
reference points allows API invokers of a CAPIF provider to utilize the
service APIs from the 3rd party CAPIF provider or another CAPIF provider
within trust domain.

4.3 Functional Entities
-----------------------

### 4.3.1 API invoker

The API invoker is typically provided by a 3^rd^ party application
provider who has service agreement with PLMN operator. The API invoker
may reside within the same trust domain as the PLMN operator network.

The API invoker supports several capabilities such as supporting

\- the authentication and obtaining authorization and discovering using
CAPIF-1/CAPIF-1e reference point as defined in 3GPP TS 23.222 \[2\]; and

\- invoking the Service APIs using CAPIF-2/CAPIF-2e referenced point as
defined in 3GPP TS 23.222 \[2\], e.g. the T8 interface as defined in
3GPP TS 29.122 \[14\] or the NEF Northbound interface as defined in
3GPP TS 29.522 \[15\].

### 4.3.2 CAPIF core function

The CAPIF core function (CCF) supports the following capabilities over
CAPIF-1/CAPIF-1e reference point as defined in 3GPP TS 23.222 \[2\]:

\- authenticating the API invoker;

\- providing the authorization information; and

\- service API discovery.

The CAPIF core function supports the following capabilities over CAPIF-3
and CAPIF-3e reference points as defined in 3GPP TS 23.222 \[2\]:

\- providing the service API access policy;

\- providing the authentication and authorization information of API
invoker for validation;

\- providing API routing information;

\- providing API topology hiding information;

\- logging of service API invocations; and

\- charging of service API invocations.

The CAPIF core function supports the following capabilities over CAPIF-4
and CAPIF-4e reference points as defined in 3GPP TS 23.222 \[2\]:

\- publishing and storing the service APIs information.

The CAPIF core function supports the following capabilities over CAPIF-5
and CAPIF-5e reference points as defined in 3GPP TS 23.222 \[2\]:

\- providing the service API invocation log for auditing;

\- providing monitoring information the status of service APIs and

\- storing configurations of the API provider policies.

\- registering of API provider domain functions.

\- update registration information of API provider domain functions.

The CAPIF core function supports the following capabilities over CAPIF-6
and CAPIF-6e reference point as defined in 3GPP TS 23.222 \[2\]:

\- publishing of service APIs information with another CAPIF core
function; and

\- discovery of service APIs information with another CAPIF core
function.

### 4.3.3 API exposing function

The API exposing function (AEF) is the provider of the Service APIs and
is also the service communication entry point of the Service API to the
API invokers using CAPIF-2/CAPIF-2e reference point as defined in
3GPP TS 23.222 \[2\]. The API exposing function consists of capabilities
such as authenticating the API invoker, validating the authorization
provided by the CAPIF core function and logging the Service API
invocations at the CAPIF core function using CAPIF-3 and CAPIF-3e
reference points as defined in 3GPP TS 23.222 \[2\].

According to the distributed deployment scenarios specified in
3GPP TS 23.222 \[2\], it is possible that the CAPIF can be deployed by
splitting the functionality of the API exposing function among multiple
API exposing function entities, of which one acts as the entry point.
The source API exposing function communicates with the destination API
exposing function over CAPIF-7/7e reference points.

### 4.3.4 API publishing function

The API publishing function (APF) enables the API provider to publish
the Service APIs information using CAPIF-4 and CAPIF-4e reference points
as defined in 3GPP TS 23.222 \[2\] in order to enable the discovery of
Service APIs by the API invoker.

### 4.3.5 API management function

The API management function (AMF) enables the API provider to perform
administration of the Service APIs. The API management function supports
several capabilities such as querying the Service API invocation log for
auditing, monitoring the events, configuring the API provider policies
and monitoring the status of the Service APIs, register and maintain
registration information of the API provider domain functions on the
CAPIF core function, using CAPIF-5 and CAPIF-5e reference points as
defined in 3GPP TS 23.222 \[2\].

5 Services offered by the CAPIF Core Function
=============================================

5.1 Introduction of Services
----------------------------

The table 5.1-1 lists the CAPIF Core Function APIs below the service
name. A service description subclause for each API gives a general
description of the related API.

Table 5.1-1: List of CAPIF Services

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------- --------------------- --------------------------------------------------------------------------------------
  Service Name                                                                                                                                                                             Service Operations                Operation Semantics   Consumer(s)
  CAPIF\_Discover\_Service\_API                                                                                                                                                            Discover\_Service\_API            Request/ Response     API Invoker, CAPIF core function
                                                                                                                                                                                           Event operations (NOTE)           (NOTE)                API Invoker
  CAPIF\_Publish\_Service\_API                                                                                                                                                             Publish\_Service\_API             Request/ Response     API Publishing Function, CAPIF core function
                                                                                                                                                                                           Unpublish\_Service\_API           Request/ Response     API Publishing Function, CAPIF core function
                                                                                                                                                                                           Update\_Service\_API              Request/ Response     API Publishing Function, CAPIF core function
                                                                                                                                                                                           Get\_Service\_API                 Request/ Response     API Publishing Function, CAPIF core function
  CAPIF\_Events\_API                                                                                                                                                                       Subscribe\_Event                  Subscribe/Notify      API Invoker, API Publishing Function, API Management Function, API Exposing Function
                                                                                                                                                                                           Notify\_Event                     Subscribe/Notify      API Invoker, API Publishing Function, API Management Function, API Exposing Function
                                                                                                                                                                                           Unsubscribe\_Event                Subscribe/Notify      API Invoker, API Publishing Function, API Management Function, API Exposing Function
  CAPIF\_API\_Invoker\_Management\_API                                                                                                                                                     Onboard\_API\_Invoker             Request/ Response     API Invoker
                                                                                                                                                                                           Offboard\_API\_Invoker            Request/ Response     API Invoker
                                                                                                                                                                                           Notify\_Onboarding\_Completion    Subscribe/Notify      API Invoker
                                                                                                                                                                                           Update\_API\_Invoker\_Details     Request/Response      API Invoker
                                                                                                                                                                                           Notify\_Update\_Completion        Subscribe/Notify      API Invoker
  CAPIF\_Security\_API                                                                                                                                                                     Obtain\_Security\_Method          Request/ Response     API Invoker
                                                                                                                                                                                           Obtain\_Authorization             Request/ Response     API Invoker
                                                                                                                                                                                           Obtain\_API\_Invoker\_Info        Request/ Response     API exposing function
                                                                                                                                                                                           Revoke\_Authorization             Request/ Response     API exposing function
  CAPIF\_Monitoring\_API                                                                                                                                                                   Event operations (NOTE)           (NOTE)                API Management Function
  CAPIF\_Logging\_API\_Invocation\_API                                                                                                                                                     Log\_API\_Invocation              Request/ Response     API exposing function
  CAPIF\_Auditing\_API                                                                                                                                                                     Query\_API\_Invocation\_Log       Request/ Response     API management function
  CAPIF\_Access\_Control\_Policy\_API                                                                                                                                                      Obtain\_Access\_Control\_Policy   Request/Response      API Exposing Function
  CAPIF\_API\_Provider\_Management\_API                                                                                                                                                    Register\_API\_Provider           Request/Response      API Management Function
                                                                                                                                                                                           Update\_API\_Provider             Request/Response      API Management Function
                                                                                                                                                                                           Deregister\_API\_Provider         Request/Response      API Management Function
  CAPIF\_Routing\_Info\_API                                                                                                                                                                Obtain\_ Routing\_Info            Request/Response      API exposing function
  NOTE: The service operations of CAPIF Events API are reused by the CAPIF\_Discover\_Service\_API, CAPIF\_Publish\_Service\_API and CAPIF\_Monitoring\_API for events related services.                                                           
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------------- --------------------- --------------------------------------------------------------------------------------

Table 5.1-2 summarizes the corresponding APIs defined in this
specification.

Table 5.1-2: API Descriptions

  --------------------------------------- --------------- ------------------------------------------- ----------------------------------------------------- ------------------------- -----------
  **Service Name**                        **Subclause**   **Description**                             **OpenAPI Specification File**                        **apiName**               **Annex**
  CAPIF\_Discover\_Service\_API           8.1             CAPIF API discovery service                 TS29222\_CAPIF\_Discover\_Service\_API.yaml           service-apis              A.2
  CAPIF\_Publish\_Service\_API            8.2             CAPIF API Publish Service                   TS29222\_CAPIF\_Publish\_Service\_API.yaml            published-apis            A.3
  CAPIF\_Events\_API                      8.3             CAPIF event service                         TS29222\_CAPIF\_Events\_API.yaml                      capif-events              A.4
  CAPIF\_API\_Invoker\_Management\_API    8.4             CAPIF API Invoker Management Service        TS29222\_CAPIF\_API\_Invoker\_Management\_API.yaml    api-invoker-management    A.5
  CAPIF\_Security\_API                    8.5             CAPIF Security Service                      TS29222\_CAPIF\_Security\_API.yaml                    capif-security            A.6
  CAPIF\_Access\_Control\_Policy\_API     8.6             CAPIF Access Control Policy API Service     TS29222\_CAPIF\_Access\_Control\_Policy\_API.yaml     access-control-policy     A.7
  CAPIF\_Logging\_API\_Invocation\_API    8.7             CAPIF Logging API Invocation Service        TS29222\_CAPIF\_Logging\_API\_Invocation\_API.yaml    api-invocation-logs       A.8
  CAPIF\_Auditing\_API                    8.8             CAPIF Auditing API Service                  TS29222\_CAPIF\_Auditing\_API.yaml                    logs                      A.9
  CAPIF\_API\_Provider\_Management\_API   8.9             CAPIF API Provider Management API Service   TS29222\_CAPIF\_API\_Provider\_Management\_API.yaml   api-provider-management   A.11
  CAPIF\_Routing\_Info\_API               8.10            CAPIF Routing Information API Service       TS29222\_CAPIF\_Routing\_Info\_API.yaml               capif-routing-info        A.12
  --------------------------------------- --------------- ------------------------------------------- ----------------------------------------------------- ------------------------- -----------

5.2 CAPIF\_Discover\_Service\_API
---------------------------------

### 5.2.1 Service Description

#### 5.2.1.1 Overview

The CAPIF discover service APIs, as defined in 3GPP TS 23.222 \[2\],
allow API invokers via CAPIF-1/1e reference points to discover service
API available at the CAPIF core function, and allow CAPIF core function
via CAPIF-6 and CAPIF-6e reference points to discover service API
available at other CAPIF core function.

### 5.2.2 Service Operations 

#### 5.2.2.1 Introduction

The service operation defined for CAPIF\_Discover\_Service\_API is shown
in table 5.2.2.1-1.

Table 5.2.2.1-1: Operations of the CAPIF\_Discover\_Service\_API

  ---------------------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------
  **Service operation name**   **Description**                                                                                                                                                                                                                              **Initiated by**
  Discover\_Service\_API       This service operation is used by an API invoker to discover service API available at the CAPIF core function. This service operation is also used by CAPIF core function to discover service APIs available at other CAPIF core function.   API invoker, CAPIF core function
  ---------------------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------

#### 5.2.2.2 Discover\_Service\_API

##### 5.2.2.2.1 General

This service operation is used by:

\- an API invoker to discover service API available at the CAPIF core
function; or

\- a CAPIF core function to discover service API available at other
CAPIF core function in interconnection scenario.

##### 5.2.2.2.2 Consumer discovering service API using Discover\_Service\_API service operation

To discover service APIs available at the CAPIF core function, the
consumer (e.g. API invoker) shall send an HTTP GET message with the API
invoker Identifier or CAPIF core function Identifier and query
parameters to the CAPIF core function as specified in
subclause 8.1.2.2.3.1.

Upon receiving the above described HTTP GET message, the CAPIF core
function shall:

1\. verify the identity of the consumer (e.g. API invoker) and check if
the consumer is authorized to discover the service APIs;

2\. if the consumer is authorized to discover the service APIs, the
CAPIF core function shall:

a\. search the CAPIF core function (API registry) for APIs matching the
query criteria;

b\. apply the discovery policy, if any, on the search results and filter
the search results to obtain the list of service API description or the
information of the CAPIF core function which is required to be contacted
further for discovering the service APIs;

c\. return the filtered search results or the information of the CAPIF
core function in the response message. The shareableInformation for each
of serviceAPIDescription is not provided in the filtered search results.

5.3 CAPIF\_Publish\_Service\_API
--------------------------------

### 5.3.1 Service Description

#### 5.3.1.1 Overview

The CAPIF publish service APIs, as defined in 3GPP TS 23.222 \[2\],
allow API publishing function via CAPIF-4 and CAPIF-4e reference points
to publish and manage published service APIs at the CAPIF core function,
and allow CAPIF core function via CAPIF-6 and CAPIF-6e reference points
to publish and manage published service APIs at other CAPIF core
function.

NOTE: Functions from 3rd party API provider domain can also access this
API with sufficient permissions.

### 5.3.2 Service Operations 

#### 5.3.2.1 Introduction

The service operations defined for the CAPIF\_Publish\_Service API are
shown in table 5.3.2.1-1.

Table 5.3.2.1-1: Operations of the CAPIF\_Publish\_Service\_API

  ---------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------
  **Service operation name**   **Description**                                                                                                                                                                                                                                       **Initiated by**
  Publish\_Service\_API        This service operation is used by an API publishing function to publish service APIs on the CAPIF core function. This service operation is also used by CAPIF core function to publish service APIs on other CAPIF core function.                     API publishing function, CAPIF core function
  Unpublish\_Service\_API      This service operation is used by an API publishing function to un-publish service APIs from the CAPIF core function. This service operation is also used by CAPIF core function to un-publish service APIs on other CAPIF core function.             API publishing function, CAPIF core function
  Get\_Service\_API            This service operation is used by an API publishing function to retrieve service APIs from the CAPIF core function. This service operation is also used by CAPIF core function to retrieve service APIs on other CAPIF core function.                 API publishing function, CAPIF core function
  Update\_Service\_API         This service operation is used by an API publishing function to update published service APIs on the CAPIF core function. This service operation is also used by CAPIF core function to update published service APIs on other CAPIF core function.   API publishing function, CAPIF core function
  ---------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------------------------------

#### 5.3.2.2 Publish\_Service\_API

##### 5.3.2.2.1 General

This service operation is used by:

\- an API publishing function to publish service APIs on the CAPIF core
function: or

\- a CAPIF core function to publish service APIs on other CAPIF core
function in interconnection scenario.

##### 5.3.2.2.2 API publishing function publishing service APIs on CAPIF core function using Publish\_Service\_API service operation

To publish service APIs at the CAPIF core function, the API publishing
function shall send an HTTP POST message to the CAPIF core function. The
body of the HTTP POST message shall include API Information as specified
in subclause 8.2.2.2.3.1.

Upon receiving the above described HTTP POST message, the CAPIF core
function shall:

1\. verify the identity of the API publishing function and check if the
API publishing function is authorized to publish service APIs;

2\. if the API publishing function is authorized to publish service
APIs, the CAPIF core function shall:

a\. verify the API Information present in the HTTP POST message and add
the service APIs in the CAPIF core function (API registry);

b\. If topology hiding is enabled as per policy, the CAPIF core function
shall

i\. determine the service APIs which require topology hiding as per
policy;

ii\. determine the API exposing function(s) responsible for the topology
hiding for each service API which requires topology hiding;

iii\. create a API topology hiding information for each service API
which requires topology hiding by extracting the API identification
information and the API exposing function(s) information from the
service API information added to the CAPIF core function (API registry);

iv\. replace the API exposing function(s) information in the service API
information added to the CAPIF core function (API registry) with the
corresponding API exposing function(s) information responsible for the
topology hiding for service API;

v\. send a notification message with the API topology hiding information
to the API exposing function(s) which is responsible for the topology
hiding for a service API and that has subscribed to the
API\_TOPOLOGY\_HIDING\_CREATED event;

vi\. store the API topology hiding information in the CAPIF core
function;

c\. create a new resource using the service API information in the CAPIF
core function (API registry) as specified in subclause 8.2.2.1;

d\. send a notification message with the updated service API, to all API
Invokers that subscribed to the Service API Update event; and

e\. return the CAPIF Resource URI in the response message.

##### 5.3.2.2.3 CAPIF core function publishing service APIs on other CAPIF core function using Publish\_Service\_API service operation

To publish service APIs at other CAPIF core function, the CAPIF core
function shall send an HTTP POST message to the peer CAPIF core
function. The body of the HTTP POST message shall include API
Information as specified in subclause 8.2.2.2.3.1. For service API
publishing on CAPIF-6 reference point, The CAPIF core function shall
also include the published API path \"pubApiPath\" as specified in
subclause 8.2.4.2.2. The \"pubApiPath\" includes a list of CAPIF core
function Identifiers within the same CAPIF provider domain, such list
includes own CAPIF core function identifier and received CAPIF core
function identifier(s) from other CAPIF core function.

If the CAPIF core function knows the peer CAPIF core function
identifier, it shall not send the HTTP POST message to the peer CAPIF
core function if the peer CAPIF core function identifier is included in
the published API path.

Upon receiving the above described HTTP POST message, the CAPIF core
function shall:

1\. verify the identity of the requesting CAPIF core function in the URI
and check if the CAPIF core function is authorized to publish service
APIs;

2\. if the requesting CAPIF core function is authorized to publish
service APIs, the CAPIF core function shall check if own CAPIF core
function identifier is within the published API path (if received). If
it is not within the path, the CAPIF core function shall add its own
identifier in the path; otherwise reject the HTTP POST request.

3\. Then the CAPIF core function shall:

a\. verify the rest API Information present in the HTTP POST message and
add the service APIs in the CAPIF core function (API registry);

b\. create a new resource as specified in subclause 8.2.2.1;

c\. send a notification message with the updated service API, to all API
Invokers that subscribed to the Service API Update event; and

d\. return the CAPIF Resource URI in the response message.

#### 5.3.2.3 Unpublish\_Service\_API

##### 5.3.2.3.1 General

This service operation is used by:

\- an API publishing function to un-publish service APIs from the CAPIF
core function; or

\- a CAPIF core function to un-publish service APIs on other CAPIF core
function in interconnection scenario.

##### 5.3.2.3.2 Consumer un-publishing service APIs from CAPIF core function using Unpublish\_Service\_API service operation

To un-publish service APIs from the CAPIF core function, the consumer
(e.g. API publishing function) shall send an HTTP DELETE message using
the CAPIF Resource URI received during the publish operation to the
CAPIF core function as specified in subclause 8.2.2.3.3.3.

Upon receiving the above described HTTP DELETE message, the CAPIF core
function shall

1\. verify the identity of the consumer (e.g. API publishing function)
and check if the consumer is authorized to un-publish service APIs;

2\. if the consumer is authorized to un-publish service APIs, the CAPIF
core function shall:

a\. delete the resource pointed by the CAPIF Resource URI;

b\. delete the relevant service APIs from the CAPIF core function (API
registry);

c\. If topology hiding is enabled as per policy, the CAPIF core function
shall

i\. determine the API topology hiding information associated with the
service API and delete the corresponding API topology hiding information
in the CAPIF core function;

ii\. send a notification message with the deleted API topology hiding
information to the corresponding API exposing function(s) which were
responsible for the topology hiding of the service API and that
subscribed to the API\_TOPOLOGY\_HIDING\_REVOKED event; and

d\. send a notification message with the deleted service API, to all API
Invokers that subscribed to the Service API Update event.

#### 5.3.2.4 Get\_Service\_API

##### 5.3.2.4.1 General

This service operation is used by:

\- an API publishing function to retrieve service APIs from the CAPIF
core function; or

\- a CAPIF core function to retrieve service APIs from other CAPIF core
function in interconnection scenario.

##### 5.3.2.4.2 Consumer retrieving service APIs from CAPIF core function using Get\_Service\_API service operation

To retrieve information about the published service APIs from the CAPIF
core function, the consumer (e.g. API publishing function) shall send an
HTTP GET message to the CAPIF core function. For retrieving the entire
list of service APIs, the HTTP GET message shall be sent to the
collection of service APIs resource representation URI as specified in
subclause 8.2.2.2.3.2. For retrieving a specific service API, the HTTP
GET message shall be sent to that service API's resource representation
URI as described in subclause 8.2.2.3.3.1.

Upon receiving the above described HTTP GET message, the CAPIF core
function shall

1\. verify the identity of the consumer (e.g. API publishing function)
and check if the consumer is authorized to retrieve information about
the published service APIs;

2\. if the consumer is authorized to retrieve information about the
published service APIs, the CAPIF core function shall:

a\. respond with the requested API Information.

#### 5.3.2.5 Update\_Service\_API

##### 5.3.2.5.1 General

This service operation is used by:

\- an API publishing function to update published service APIs on the
CAPIF core function; or

\- a CAPIF core function to update published service APIs on other CAPIF
core function in interconnection scenario.

##### 5.3.2.5.2 Consumer updating published service APIs on CAPIF core function using Update\_Service\_API service operation

To update information of published service APIs, the consumer (e.g. API
publishing function) shall send an HTTP PUT message to that service
API's resource representation URI in the CAPIF core function. The body
of the HTTP PUT message shall include updated API Information as
specified in subclause 8.2.2.3.3.2.

Upon receiving the above described HTTP PUT message, the CAPIF core
function shall

1\. verify the identity of the consumer (e.g. API publishing function)
and check if the consumer is authorized to update information of
published service APIs;

2\. if the consumer is authorized to update information of published
service APIs, the CAPIF core function shall:

a\. verify the API Information present in the HTTP PUT message and
replace the service APIs in the CAPIF core function (API registry);

b\. If topology hiding is enabled as per policy, the CAPIF core function
shall

i\. if the service API being updated has a corresponding API topology
hiding information in the CAPIF core function, then update the API
topology hiding information with any updated API exposing function(s)
information from the service API information replaced at the CAPIF core
function (API registry);

ii\. replace the API exposing function(s) information in the service API
information added to the CAPIF core function (API registry) with the
corresponding API exposing function(s) information responsible for the
topology hiding for service API;

iii\. send a notification message with the API topology hiding
information to the API exposing function(s) which is responsible for the
topology hiding for a service API and that has subscribed to the
API\_TOPOLOGY\_HIDING\_CREATED event;

iv\. update the API topology hiding information in the CAPIF core
function;

c\. replace the existing resource accordingly using the updated service
API information in the CAPIF core function (API registry); and

d\. send a notification message with the updated service API, to all API
Invokers that subscribed to the Service API Update event.

5.4 CAPIF\_Events\_API
----------------------

### 5.4.1 Service Description

#### 5.4.1.1 Overview

The CAPIF events APIs, as defined in 3GPP TS 23.222 \[2\], allow an API
invoker via CAPIF-1/1e reference points, API exposure function via
CAPIF-3/3e reference points, API publishing function via CAPIF-4/4e
reference points and API management function via CAPIF-5/5e reference
points to subscribe to and unsubscribe from CAPIF events and to receive
notifications from CAPIF core function.

NOTE: The functional elements listed above are referred to as Subscriber
in the service operations described in the subclauses below.

### 5.4.2 Service Operations 

#### 5.4.2.1 Introduction

The service operations defined for the CAPIF\_Events\_API are shown in
table 5.4.2.1-1.

Table 5.4.2.1-1: Operations of the CAPIF\_Events\_API

  ---------------------------- ---------------------------------------------------------------------------------------------- ---------------------
  **Service operation name**   **Description**                                                                                **Initiated by**
  Subscribe\_Event             This service operation is used by a Subscriber to subscribe to CAPIF events.                   Subscriber
  Unsubscribe\_Event           This service operation is used by a Subscriber to unsubscribe from CAPIF events                Subscriber
  Notify\_Event                This service operation is used by CAPIF core function to send a notification to a Subscriber   CAPIF core function
  ---------------------------- ---------------------------------------------------------------------------------------------- ---------------------

#### 5.4.2.2 Subscribe\_Event

##### 5.4.2.2.1 General

This service operation is used by a Subscriber to subscribe to CAPIF
events.

##### 5.4.2.2.2 Subscribing to CAPIF events using Subscribe\_Event service operation

To subscribe to CAPIF events, the Subscriber shall send an HTTP POST
message to the CAPIF core function. The body of the HTTP POST message
shall include Subscriber\'s Identifier, Event Type and a Notification
Destination URI as specified in subclause 8.3.2.2.3.1.

For all events included in the HTTP POST message, if the
Enhanced\_event\_report feature is supported, the Subscriber may include
an event report requirement in the \"eventReq\" attribute including:

\- event notification method (periodic, one time, on event detection) in
the \"notifMethod\" attribute;

\- maximum Number of Reports in the \"maxReportNbr\" attribute;

\- monitoring duration in the \"monDur\" attribute;

\- repetition period for periodic reporting in the \"repPeriod\"
attribute; and/or

\- immediate reporting indication in the \"immRep\" attribute.

If the Enhanced\_event\_report feature is supported, the Subscriber may
also include an event filter in the \"eventFilters\" attribute. The
\"eventFilters\" attribute shall include:

\- if the event is SERVICE\_API\_AVAILABLE, SERVICE\_API\_UNAVAILABLE or
SERVICE\_API\_UPDATE, the API IDs in the \"apiIds\" attribute;

\- if the event is API\_INVOKER\_ONBOARDED or API\_INVOKER\_OFFBOARDED
or API\_INVOKER\_UPDATED, the API invoker IDs in the \"apiInvokerIds\"
attribute;

\- if the event is ACCESS\_CONTROL\_POLICY\_UPDATE, the API invoker IDs
in the \"apiInvokerIds\" attribute and/or API identifications in the
\"apiIds\" attribute; and/or

\- if the event is SERVICE\_API\_INVOCATION\_SUCCESS or
SERVICE\_API\_INVOCATION\_FAILURE, the API invoker IDs in the
\"apiInvokerIds\" attribute, AEF identifiers in the \"aefIds\" attribute
and/or API IDs in the \"apiIds\" attribute.

Upon receiving the above described HTTP POST message, the CAPIF core
function shall:

1\. verify the identity of the Subscriber and check if the Subscriber is
authorized to subscribe to the CAPIF events mentioned in the HTTP POST
message;

2\. if the Subscriber is authorized to subscribe to the CAPIF events,
the CAPIF core function shall:

a\. create a new resource as specified in subclause 8.3.2.1; and

b\. return the CAPIF Resource URI in the response message.

#### 5.4.2.3 Unsubscribe\_Event

##### 5.4.2.3.1 General

This service operation is used by a Subscriber to un-subscribe from
CAPIF events.

##### 5.4.2.3.2 Unsubscribing from CAPIF events using Unsubscribe\_Event service operation

To unsubscribe from CAPIF events, the Subscriber shall send an HTTP
DELETE message to the resource representing the event in the CAPIF core
function as specified in subclause 8.3.2.3.3.1.

Upon receiving the HTTP DELETE message, the CAPIF core function shall:

1\. verify the identity of the Unsubscribing functional entity and check
if the Unsubscribing functional entity is authorized to Unsubscribe from
the CAPIF event associated with the CAPIF Resource URI; and

2\. if the Unsubscribing functional entity is authorized to unsubscribe
from the CAPIF events, the CAPIF core function shall delete the resource
pointed by the CAPIF Resource URI.

#### 5.4.2.4 Notify\_Event

##### 5.4.2.4.1 General

This service operation is used by CAPIF core function to send a
notification to a Subscriber.

##### 5.4.2.4.2 Notifying CAPIF events using Notify\_Event service operation

To notify CAPIF events, the CAPIF core function shall send an HTTP POST
message using the Notification Destination URI received in the
subscription request. The body of the HTTP POST message shall include an
Event Notification and CAPIF Resource URI.

If the Enhanced\_event\_report feature is supported, the CAPIF core
function may include an event detail in the \"eventDetail\" attribute.
The \"eventDetail\" attribute shall include:

\- if the event is SERVICE\_API\_AVAILABLE or SERVICE\_API\_UNAVAILABLE,
the API IDs in the \"apiIds\" attribute;

\- if the event is SERVICE\_API\_UPDATE, the API descriptions in the
\"serviceAPIDescriptions\" attribute;

\- if the event is API\_INVOKER\_ONBOARDED or API\_INVOKER\_OFFBOARDED
or API\_INVOKER\_UPDATED, the API invoker IDs in the \"apiInvokerIds\"
attribute;

\- if the event is ACCESS\_CONTROL\_POLICY\_UPDATE, the access control
policy information in the \"accCtrlPolList\" attribute;

\- if the event is SERVICE\_API\_INVOCATION\_SUCCESS or
SERVICE\_API\_INVOCATION\_FAILURE, the API invocation logs in the
\"invocationLogs\" attribute; or

\- if the event is API\_TOPOLOGY\_HIDING\_CREATED or
API\_TOPOLOGY\_HIDING\_REVOKED, the API topology hiding information in
the \"apiTopoHide\" attribute.

Upon receiving the HTTP POST message, the Subscriber shall process the
Event Notification.

5.5 CAPIF\_API\_Invoker\_Management\_API
----------------------------------------

### 5.5.1 Service Description

#### 5.5.1.1 Overview

The CAPIF API invoker management APIs, as defined in
3GPP TS 23.222 \[2\], allow API invokers via CAPIF-1/1e reference points
to on-board and off-board itself as a recognized user of the CAPIF or
update the API invoker's details on the CAPIF core function.

### 5.5.2 Service Operations

#### 5.5.2.1 Introduction

The service operations defined for the CAPIF API Invoker Management API
are shown in table 5.5.2.1-1.

Table 5.5.2.1-1: Operations of the CAPIF\_API\_Invoker\_Management\_API

  -------------------------------- --------------------------------------------------------------------------------------------------------------- ---------------------
  **Service operation name**       **Description**                                                                                                 **Initiated by**
  Onboard\_API\_Invoker            This service operation is used by an API invoker to on-board itself as a recognized user of CAPIF               API invoker
  Offboard\_API\_Invoker           This service operation is used by an API invoker to off-board itself as a recognized user of CAPIF              API invoker
  Notify\_Onboarding\_Completion   This service operation is used by CAPIF core function to send an on-boarding notification to the API invoker.   CAPIF core function
  Update\_API\_Invoker\_Details    This service operation is used by an API invoker to update API invoker's details in the CAPIF core function.    API Invoker
  Notify\_Update\_Completion       This service operation is used by CAPIF core function to send an update notification to the API invoker         CAPIF core function
  -------------------------------- --------------------------------------------------------------------------------------------------------------- ---------------------

#### 5.5.2.2 Onboard\_API\_Invoker

##### 5.5.2.2.1 General

This service operation is used by an API invoker to on-board itself as a
recognized user of CAPIF

##### 5.5.2.2.2 API invoker on-boarding itself as a recognized user of CAPIF using Onboard\_API\_Invoker service operation

To on-board itself as a recognized user of the CAPIF, the API invoker
shall send an HTTP POST message to the CAPIF core function. The body of
the HTTP POST message shall include API invoker Enrolment Details, API
List and a Notification Destination URI for on-boarding notification as
specified in subclause 8.4.2.2.3.1.

Upon receiving the above described HTTP POST message, the CAPIF core
function shall check if it can determine authorization of the request
and on-board the API invoker automatically. If the CAPIF core function:

1\. can determine authorization of the request and on-board the API
invoker automatically, the CAPIF core function:

a\. shall process the API invoker Enrolment Details and the API List
received in the HTTP POST message and determine if the request sent by
the API invoker is authorized or not;

b\. if the API invoker\'s request is authorized, the CAPIF core function
shall:

i\. create the API invoker Profile consisting of an API invoker
Identifier, Authentication Information, Authorization Information and
CAPIF Identity Information;

ii\. verify the API List present in the HTTP POST message and create a
API List of APIs the API invoker is allowed to access;

iii\. create a new resource as defined in subclause 8.4.2.1;

iv\. return the API invoker Profile, API List of APIs the API invoker is
allowed to access and the CAPIF Resource URI in the response message.

2\. cannot determine authorization of the request to on-board the API
invoker automatically, the CAPIF core function:

a\. shall acknowledge the receipt of the on-boarding request to the API
invoker.

b\. shall request the CAPIF administrator to validate the on-boarding
request or the API management to validate the on-boarding request by
sharing the API invoker Enrolment Details and the API List received in
the HTTP POST message;

c\. on receiving confirmation of successful validation of the
on-boarding request from the CAPIF administrator or the API management,
the CAPIF core function shall:

i\. create the API invoker Profile consisting of an API invoker
Identifier, Authentication Information, Authorization Information and
CAPIF Identity Information;

ii\. create a new resource as defined in subclause 8.4.3;

iii\. deliver the API invoker Profile, API List of APIs the API invoker
is allowed to access and the CAPIF Resource URI to the API invoker in a
notification.

NOTE 1: How the CAPIF core function determines that the CAPIF core
function can process the request and on-board the API invoker
automatically is out-of-scope of this specification.

NOTE 2: How the CAPIF core function determines that the API invoker\'s
request to on-board is authorized is specified in 3GPP TS 33.122 \[16\].

NOTE 3: Interactions between the CAPIF core function and the CAPIF
administrator or the API management is out-of-scope of this
specification.

NOTE 4: The onboarding credential received by the API invoker from the
service provider as specified in 3GPP TS 33.122 \[16\] is included in
the Authorization header field of the HTTP request message as described
in IETF RFC 2617 \[17\].

NOTE 5: After the onboarding operation is completed the API Invoker no
longer needs to maintain the Notification Destination URI and may delete
it.

#### 5.5.2.3 Offboard\_API\_Invoker

##### 5.5.2.3.1 General

This service operation is used by an API invoker to stop being as a
recognized user of CAPIF

##### 5.5.2.3.2 API invoker off-boarding itself as a recognized user of CAPIF using Offboard\_API\_Invoker service operation

To off-board itself as a recognized user of the CAPIF, the API invoker
shall send an HTTP DELETE message to its resource representation in the
CAPIF core function as specified in subclause 8.4.2.3.3.1.

Upon receiving the HTTP DELETE message, the CAPIF core function shall:

1\. determine if the request sent by the API invoker is authorized or
not;

2\. if the API invoker\'s request is authorized, the CAPIF core function
shall:

a\. delete the resource representation pointed by the CAPIF Resource
Identifier; and

b\. delete the related API invoker profile.

#### 5.5.2.4 Notify\_Onboarding\_Completion

##### 5.5.2.4.1 General

This service operation is used by the CAPIF core function to send a
notification about the completion of the Onboarding operation to the API
Invoker.

##### 5.5.2.4.2 Notifying Onboarding completion using Notify\_Onboarding\_Completion service operation

When the CAPIF core function cannot immediately authorize the API
invoker that issued an Onboarding request (see subclause 5.5.2.2.2) it
will send a response acknowledging the request and begin processing it.
After completion, the CAPIF core function shall send an HTTP POST
message using the Notification Destination URI received in the
Onboarding request. The body of the HTTP POST message shall include the
API Invoker Profile, API List of the APIs the API invoker is allowed to
access and the CAPIF Resource URI.

Upon receiving the HTTP POST message, the API invoker shall process the
message in the same manner it would have processed an immediate response
to the Onboarding request, and respond to the HTTP POST message with an
acknowledgement and no body.

#### 5.5.2.5 Update\_API\_Invoker\_Details

##### 5.5.2.5.1 General

This service operation is used by an API invoker to update the API
invoker's profile details on the CAPIF core function.

##### 5.5.2.5.2 API invoker updating its details on CAPIF using Update\_API\_Invoker\_Details service operation

To update the API invoker's profile details on the CAPIF core function,
the API invoker shall send a HTTP PUT message to the CAPIF core function
to its resource representation, requesting to replace all properties in
the existing resource, addressed by the URI received in the response to
the request that has created the API invoker profile resource. The
properties \"apiInvokerId" and "onboardingInformation" shall remain
unchanged from the previously provided values. The body of the HTTP PUT
message shall include API invoker identity information, API invoker
details that need to be updated and a Notification Destination URI for
update notification as specified in clause 8.4.2.3.3.2. API invoker
details may include API invoker information and API List. Upon receiving
the above described HTTP PUT message:

1\. if the CAPIF core function decides to update the API list of the API
invoker without validation by CAPIF administrator, then the CAPIF core
function:

a\. shall determine if the request in the HTTP PUT message by the API
invoker is authorized or not.

b\. verify that the \"apiInvokerId" and "onboardingInformation"
properties are same as in API invoker resource on CAPIF core function.

c\. if the API invoker\'s request is authorized and the properties
\"apiInvokerId" and "onboardingInformation" match, the CAPIF core
function shall:

i\. if the request contains an API list:

\- create a list of APIs the API invoker is allowed to access; and

\- update the resource identified by the CAPIF Resource URI of the API
invoker's HTTP PUT request with the updated information in the request
and the API list created in step A;

ii\. if the request does not contain an API list, update the resource
identified by the CAPIF Resource URI of the API invoker's HTTP PUT
request with the updated information in the request; and

iii\. return the updated API invoker details;

2\. otherwise, the CAPIF core function:

a\. shall acknowledge the receipt of the update API invoker details
request to the API invoker.

b\. verify that the \"apiInvokerId" and "onboardingInformation"
properties are same as in API invoker resource on CAPIF core function;

c\. if the properties \"apiInvokerId" and "onboardingInformation" match,
then shall request the CAPIF administrator to validate the request or
the API management to validate the request by sharing the API invoker
identity information and the updated information received in the HTTP
PUT message;

d\. on receiving confirmation of successful validation of the request
from the CAPIF administrator or the API management, the CAPIF core
function shall:

i\. update the resource identified by the CAPIF Resource URI of the API
invoker's HTTP PUT request, with validated information; and

ii\. return the updated API invoker details.

NOTE 1: How the CAPIF core function determines that the CAPIF core
function can process the request and update the API list of the API
invoker automatically is out-of-scope of this specification.

NOTE 2: Interactions between the CAPIF core function and the CAPIF
administrator or the API management is out-of-scope of this
specification.

NOTE 3: After the operation is completed the API Invoker no longer needs
to maintain the Notification Destination URI and may delete it.

#### 5.5.2.6 Notify\_Update\_Completion

##### 5.5.2.6.1 General

This service operation is used by the CAPIF core function to send a
notification about the completion of the update of API invoker's
details.

##### 5.5.2.6.2 Notifying API invoker update completion using Notify\_Update\_Completion service operation

When the CAPIF core function cannot immediately grant the update request
(see subclause 5.5.2.5.2) it will send a response acknowledging the
request and begin processing it. After completion, the CAPIF core
function shall send an HTTP POST message using the Notification
Destination URI received in the update details request. The body of the
HTTP POST message shall include the updated API Invoker details.

Upon receiving the HTTP POST message, the API invoker shall process the
message in the same manner it would have processed an immediate response
to the update the details of the API invoker request, and respond to the
HTTP POST message with HTTP response 204 No content.

5.6 CAPIF\_Security\_API
------------------------

### 5.6.1 Service Description

#### 5.6.1.1 Overview

The CAPIF security APIs, as defined in 3GPP TS 23.222 \[2\], allow:

\- API invokers via CAPIF-1/1e reference points to (re-)negotiate the
service security method and obtain authorization for invoking service
APIs; and

\- API exposing function via CAPIF-3/3e reference points to obtain
authentication information of the API invoker for authentication of the
API invoker and revoke the authorization for service APIs.

### 5.6.2 Service Operations 

#### 5.6.2.1 Introduction

The service operations defined for CAPIF\_Security\_API are shown in
table 5.6.2.1-1.

Table 5.6.2.1-1: Operations of the CAPIF\_Security\_API

  ---------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------------------
  **Service operation name**   **Description**                                                                                                                                                                                                                    **Initiated by**
  Obtain\_Security\_Method     This service operation is used by an API invoker to negotiate and obtain information about service API security method for itself with CAPIF core function. This information is used by API invoker for service API invocations.   API invoker
  Obtain\_Authorization        This service operation is used by an API invoker to obtain authorization to access service APIs.                                                                                                                                   API invoker
  Obtain\_API\_Invoker\_Info   This service operation is used by an API exposing function to obtain the authentication or authorization information related to an API invoker.                                                                                    API exposing function
  Revoke\_Authorization        This service operation is used by an API exposing function to invalidate the authorization of an API invoker.                                                                                                                      API exposing function
  ---------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -----------------------

Security information is generated when requested by an API invoker, and
is stored in the CAPIF Core function. The information can be accessed
via a resource representation URI using the API invoker ID as described
in subclause 8.5.2.3. The URI is provided to the API invoker in the HTTP
response to the creation request (via the Obtain\_Security\_Method
service operation name).

Refer to subclause 9.1.2a.2 for details about verifying that the API
Exposing function has the ability to authorize API invokers prior to
invoking service APIs.

#### 5.6.2.2 Obtain\_Security\_Method

##### 5.6.2.2.1 General

This service operation is used by an API invoker to negotiate and obtain
service API security method from the CAPIF core function. The
information received by API invoker shall be used for authentication
with the API exposing function.

##### 5.6.2.2.2 Request service API security method from CAPIF using Obtain\_Security\_Method service operation

To negotiate and obtain service API security method information from the
CAPIF core function, the API invoker shall send an HTTP PUT message to
the CAPIF core function. The body of the HTTP PUT message shall include
Security Method Request and a Notification Destination URI for security
related notifications. The Security Method Request from the API invoker
contains the unique interface details of the service APIs and may
contain a preferred method for each unique service API interface as
specified in subclause 8.5.2.3.3.3.

Upon receiving the above described HTTP PUT message, the CAPIF core
function shall:

1\. determine the security method for each service API interface as
specified in 3GPP TS 33.122 \[16\];

2\. store the Notification Destination URI for security related
notification;

3\. create a new resource as defined in subclause 8.5.2.1; and

4\. return the security method information and the CAPIF Resource URI in
the response message.

#### 5.6.2.3 Obtain\_Authorization

##### 5.6.2.3.1 General

This service operation is used by an API invoker to negotiate and obtain
authorization information from the CAPIF core function. The information
received by API invoker shall be used for authorization to invoke
service APIs exposed by the API exposing function.

##### 5.6.2.3.2 Obtain authorization using Obtain\_Authorization service operation

To obtain authorization information from the CAPIF core function to
invoke service APIs, the API invoker shall perform the functions of the
resource owner, client and redirection endpoints as described in
subclause 6.5.2.3 of 3GPP TS 33.122 \[16\].

The API invoker shall send a POST request to the \"Token Endpoint\", as
described in IETF RFC 6749 \[23\], subclause 3.2. The \"Token Endpoint\"
URI shall be:

> {apiRoot}/capif-security/v1/securities/{securityId}/token
>
> where {securityId} is the API invoker identifier and represents the
> \"Individual trusted API invoker\" resource created during obtain
> security method, as described in subclause 5.6.2.2.\
> \
> The body of the HTTP POST request shall indicate that the required
> OAuth2 grant must be of type \"client\_credentials\". The \"scope\"
> parameter (if present) shall include a list of AEF identifiers and its
> associated API names the API invoker is trying to access (i.e., the
> API invoker expected scope).
>
> The API invoker may use HTTP Basic authentication towards this
> endpoint, using the API invoker identifier as \"username\" and the
> onboarding secret as \"password\". Such username and password may be
> included in the header or body of the HTTP POST request.

On success, \"200 OK\" shall be returned. The payload body of the POST
response shall contain the requested access token, the token type and
the expiration time for the token. The access token shall be a JSON Web
Token (JWT) as specified in IETF RFC 7519 \[24\]. The access token
returned by the CAPIF core function shall include the claims encoded as
a JSON object as specified in subclause 8.5.4.2.8 and then digitally
signed using JWS as specified in IETF RFC 7515 \[25\] and in Annex C.1
of 3GPP TS 33.122 \[16\].

The digitally signed access token shall be converted to the JWS Compact
Serialization encoding as a string as specified in subclause 7.1 of
IETF RFC 7515 \[25\].

If the access token request fails at the CAPIF core function, the CAPIF
core function shall return \"400 Bad Request\" status code, including a
JSON object in the response payload, that includes details about the
specific error that occurred.

#### 5.6.2.4 Obtain\_API\_Invoker\_Info

##### 5.6.2.4.1 General

This service operation is used by an API exposing function to obtain the
security information of API Invokers to be able to authenticate them and
authorize each service API invocation by them.

##### 5.6.2.4.2 Obtain API invoker\'s security information using Obtain\_API\_Invoker\_Info service operation

To obtain authentication or authorization information from the CAPIF
core function to authenticate or authorize an API invoker, the API
exposing function shall send an HTTP GET message to that API invoker's
resource representation URI in the CAPIF core function with an
indication to request authentication and/or authorization information,
as specified in subclause 8.5.2.3.3.1.

Upon receiving the above described HTTP GET message, the CAPIF core
function shall:

1\. determine the security information of API invoker for all the
service API interfaces of the API exposing function; and

2\. return the security information in the response message.

NOTE: Functions from 3rd party API provider domain can also access this
service operation with sufficient permissions.

#### 5.6.2.5 Revoke\_Authentication

##### 5.6.2.5.1 General

This service operation is used by an API exposing function to invalidate
the authorization of a specified API Invoker to invoke service APIs
exposed by the calling API exposing function.

##### 5.6.2.5.2 Invalidate authorization using Revoke\_Authorization service operation

To invalidate authorization of an API invoker for all service APIs, the
API exposing function shall send an HTTP DELETE message to that API
invoker's resource representation URI in the CAPIF core function using
the API invoker ID as specified in subclause 8.5.2.3.3.2.

Upon receiving the HTTP DELETE message, the CAPIF core function shall
delete the resource representation and shall notify the API invoker of
the authorization invalidation using the Notification Destination URI
received in the Obtain\_Security\_Method message.

The CAPIF core function shall also invalidate the previously assigned
access token when the authorization of all service APIs are revoked for
the API invoker.

To invalidate authorization of an API invoker for some service APIs, the
API exposing function shall send an HTTP POST message to that API
invoker's \"delete\" custom resource representation URI in the CAPIF
core function with a list of the service APIs that should be revoked.

Upon receiving the HTTP POST message, the CAPIF core function shall
revoke the authorization of the API invoker for the indicated service
APIs (e.g. it may update the list of unauthorized APIs locally); and
shall notify the API invoker of the authorization invalidation using the
Notification Destination URI received in the Obtain\_Security\_Method
message.

In both alternatives, the CAPIF core function shall acknowledge the HTTP
request from the API exposing function.

NOTE: Functions from 3rd party API provider domain can also access this
service operation with sufficient permissions.

5.7 CAPIF\_Monitoring\_API
--------------------------

The CAPIF monitoring API as defined in 3GPP TS 23.222 \[2\], allow the
API management function via CAPIF-5/5e reference points to monitor
service API invocations and receive such monitoring events from the
CAPIF core function.

The CAPIF\_Monitoring\_API shall use the CAPIF\_Events\_API as described
in subclause 8.3 by setting the CAPIFEvent to one of the events as
described in subclause 8.3.4.3.3.

5.8 CAPIF\_Logging\_API\_Invocation\_API
----------------------------------------

### 5.8.1 Service Description

#### 5.8.1.1 Overview

The Logging API invocations APIs, as defined in 3GPP TS 23.222 \[2\],
allow API exposing functions via CAPIF-3/3e reference points to log the
information related to service API invocations on the CAPIF core
function.

NOTE: Functions from 3rd party API provider domain can also access this
API with sufficient permissions.

### 5.8.2 Service Operations 

#### 5.8.2.1 Introduction

Table 5.8.2.1-1: Operations of the CAPIF\_Logging\_API\_Invocation\_API

  ---------------------------- ---------------------------------------------------------------------------------------------------------------------- -----------------------
  **Service operation name**   **Description**                                                                                                        **Initiated by**
  Log\_API\_Invocation         This service operation is used by an API exposing function to log API invocation information on CAPIF core function.   API exposing function
  ---------------------------- ---------------------------------------------------------------------------------------------------------------------- -----------------------

#### 5.8.2.2 Log\_API\_Invocation\_API

##### 5.8.2.2.1 General

This service operation is used by an API exposing function to log API
invocation information on CAPIF core function.

##### 5.8.2.2.2 Logging service API invocations using Log\_API\_Invocation service operation

To log service API invocations at the CAPIF core function, the API
exposing function shall send an HTTP POST message to the CAPIF core
function. The body of the HTTP POST message shall include API exposing
function identity information and API invocation log information as
specified in subclause 8.7.2.2.3.1.

Upon receiving the above described HTTP POST message, the CAPIF core
function shall:

1\. verify the identity of the API exposing function and check if the
API exposing function is authorized to create service API invocation
logs;

2\. if the API exposing function is authorized to create service API
invocation logs, the CAPIF core function shall:

a\. process the API invocation log information received in the HTTP POST
message and store the API invocation log information in the API
repository;

b\. create a new resource as defined in subclause 8.7.2.1; and

c\. return the CAPIF Resource Identifier in the response message.

5.9 CAPIF\_Auditing\_API
------------------------

### 5.9.1 Service Description

#### 5.9.1.1 Overview

The Auditing API, as defined in 3GPP TS 23.222 \[2\], allows API
management functions via CAPIF-5/5e reference points to query the log
information stored on the CAPIF core function.

NOTE: Functions from 3rd party API provider domain can also access this
API with sufficient permissions.

### 5.9.2 Service Operations 

#### 5.9.2.1 Introduction

Table 5.9.2.1-1: Operations of the CAPIF\_Auditing\_API

  ---------------------------- -------------------------------------------------------------------------------------------------------------------------------------- -------------------------
  **Service operation name**   **Description**                                                                                                                        **Initiated by**
  Query\_Invocation\_Logs      This service operation is used by an API management function to query API invocation information logs stored on CAPIF core function.   API management function
  ---------------------------- -------------------------------------------------------------------------------------------------------------------------------------- -------------------------

#### 5.9.2.2 Query\_Invocation\_Logs\_API

##### 5.9.2.2.1 General

This service operation is used by an API management function to query
API invocation information logs stored on CAPIF core function.

##### 5.9.2.2.2 Query API invocation information logs using Query\_Invocation\_Logs service operation

To query service API invocation logs at the CAPIF core function, the API
management function shall send an HTTP GET message with the API
management function identity information and the log query to the CAPIF
core function as specified in subclause 8.8.2.2.3.1.

Upon receiving the above described HTTP GET message, the CAPIF core
function shall:

1\. verify the identity of the API management function and check if the
API management function is authorized to query the service API
invocation logs;

2\. if the API management function is authorized to query the service
API invocation logs, the CAPIF core function shall:

a\. search the API invocation logs for logs matching the Log Query
criteria; and

b\. return the search results in the response message.

5.10 CAPIF\_Access\_Control\_Policy\_API
----------------------------------------

### 5.10.1 Service Description

#### 5.10.1.1 Overview

The CAPIF access control policy APIs allow API exposing function via
CAPIF-3/3e reference points to obtain the service API access policy from
the CAPIF core function.

NOTE: Functions from 3rd party API provider domain can also access this
API with sufficient permissions.

### 5.10.2 Service Operations 

#### 5.10.2.1 Introduction

Table 5.3.2.1-1: Operations of the CAPIF\_Access\_Control\_Policy\_API

  --------------------------------- ------------------------------------------------------------------------------------------------------------------------------ -----------------------
  **Service operation name**        **Description**                                                                                                                **Initiated by**
  Obtain\_Access\_Control\_Policy   This service operation is used by an API exposing function to obtain the access control policy from the CAPIF core function.   API exposing function
  --------------------------------- ------------------------------------------------------------------------------------------------------------------------------ -----------------------

#### 5.10.2.2 Obtain\_Access\_Control\_Policy

##### 5.10.2.2.1 General

This service operation is used by an API exposing function to obtain the
access control policy from the CAPIF core function.

##### 5.10.2.2.2 API exposing function obtaining access control policy from the CAPIF core function using Obtain\_Access\_Control\_Policy service operation

To obtain the access control policy from the CAPIF core function, the
API exposing function shall send an HTTP GET message to the CAPIF core
function with the API exposing function Identifier and API
identification. The GET message may include API invoker ID for
retrieving access control policy of the requested API invoker as
specified in subclause 8.6.2.2.3.1.

Upon receiving the above described HTTP GET message, the CAPIF core
function shall

1\. verify the identity of the API exposing function and check if the
API exposing function is authorized to obtain the access control policy
corresponding to the API identification;

2\. if the API exposing function is authorized to obtain the access
control policy, the CAPIF core function shall respond with the access
control policy information corresponding to the API identification and
API invoker ID (if present) in the HTTP GET message.

### 5.10.3 Related Events

The CAPIF\_Access\_Control\_Policy\_API supports the subscription and
notification of the status of access control information via the
CAPIF\_Events\_API. The related events are specified in
subclause 8.3.4.3.3.

5.11 CAPIF\_API\_Provider\_Management\_API
------------------------------------------

### 5.11.1 Service Description

#### 5.11.1.1 Overview

The CAPIF API provider management APIs, as defined in
3GPP TS 23.222 \[2\], allow API management functions via CAPIF-5 and
CAPIF-5e reference points to register, deregister and update
registration information of API provider domain functions (API Exposing
Function, API Publishing Function, API management Function) as a
recognized API provider domain of the CAPIF domain.

### 5.11.2 Service Operations

#### 5.11.2.1 Introduction

The service operations defined for the CAPIF API Provider Management API
are shown in table 5.11.2.1-1.

Table 5.11.2.1-1: Operations of the
CAPIF\_API\_Provider\_Management\_API

  ---------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------------------------
  **Service operation name**   **Description**                                                                                                                                                     **Initiated by**
  Register\_API\_Provider      This service operation is used by an API management function to register API provider domain functions as a recognized API provider domain of the CAPIF domain.     API Management Function
  Update\_API\_Provider        This service operation is used by an API management function to update the API provider domain functions details in the CAPIF domain.                               API Management Function
  Deregister\_API\_Provider    This service operation is used by an API management function to deregister API provider domain functions as a recognized API provider domain of the CAPIF domain.   API Management Function
  ---------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------------------------

#### 5.11.2.2 Register\_API\_Provider

##### 5.11.2.2.1 General

This service operation is used by an API management function to register
API provider domain functions as a recognized API provider of CAPIF
domain.

##### 5.11.2.2.2 API provider domain functions registering as a recognized API provider domain function of CAPIF using Register\_API\_Provider service operation

To register API provider domain as a recognized API provider of the
CAPIF, the API management function shall send a HTTP POST message to the
CAPIF core function. The body of the HTTP POST message shall include API
provider Enrolment Details, consisting of details of all API provider
domain functions and security information for CAPIF core function to
validate the registration request.

Upon receiving the above described HTTP POST message, the CAPIF core
function validates the security information and determine if the request
sent by API management function is authorized or not. If the API
management function is authorized, CAPIF core function shall:

a\. create the API provider domain profile consisting of API provider
domain ID, API provider domain functions profiles as per the request.
CAPIF core function shall assign the identities for the API provider
domain functions.;

b\. create a new resource as defined in clause 8.9.2.2.3.1; and

c\. return the API provider domain profile, the CAPIF Resource URI in
the response message and registration failure information specific to
individual API provider domain functions.

#### 5.11.2.3 Update\_API\_Provider

##### 5.11.2.3.1 General

This service operation is used by an API management function to update
API provider domain function details on the CAPIF domain.

##### 5.11.2.3.2 API management function updating API provider domain function details on CAPIF using Update\_API\_Provider service operation

To update the API provider domain profile and its individual functions
details on CAPIF domain, the API management function shall send a HTTP
PUT message to its resource representation in the CAPIF core function as
specified in clause 8.9.2.3.3.1, requesting to replace all properties in
the existing resource, addressed by the URI received in the response to
the request that has created the API provider domain profile resource.
The property "apiProviderDomainId", shall remain unchanged from the
previously provided values. The body of the HTTP PUT message shall
include the API provider domain profile that need to be updated. Upon
receiving the described HTTP PUT message:

1\. the CAPIF core function shall process the updates received in the
HTTP PUT message and determine if the request sent by API management
function is authorized or not;

2\. verify that the "apiProviderDomainId" property is same as in the API
provider domain resource on CAPIF Core Function.

3\. if the API management function is authorized and the property
"apiProviderDomainId" matches, then the CAPIF core function shall

a\. replace the representation of the resource identified by the CAPIF
Resource URI of the API management function's HTTP PUT request with
updated information in the request.

b\. update the individual API provider domain function profiles as per
the request. CAPIF core function shall create new API provider domain
function profiles along with assignment of identities, if the API
provider domain functions profiles in the request do not exist in CAPIF.

c\. return the updated API provider domain profile resource and update
failure information specific to individual API provider domain
functions.

#### 5.11.2.4 Deregister\_API\_Provider

##### 5.11.2.4.1 General

This service operation is used by an API management function to
deregister the API provider domain function as a recognized API provider
of the CAPIF domain.

##### 5.11.2.4.2 API provider domain functions deregistering as a recognized API provider domain function of CAPIF using Deregister\_API\_Provider service operation

To deregister API provider domain as a recognized API provider of the
CAPIF domain, the API management function shall send an HTTP DELETE
message to its resource representation in the CAPIF core function as
specified in clause 8.9.2.3.3.2.

Upon receiving the HTTP DELETE message, the CAPIF core function shall:

1\. determine if the request sent by the API management functions is
authorized or not;

2\. if the API management function's request is authorized, the CAPIF
core function shall:

a\. delete the resource representation pointed by the CAPIF Resource
Identifier; and

b\. delete the related API provider domain profile.

5.12 CAPIF\_Routing\_Info\_API
------------------------------

### 5.12.1 Service Description

#### 5.12.1.1 Overview

The CAPIF routing info API allows an API exposing function via
CAPIF-3/3e reference point to obtain the API routing information from
the CAPIF core function.

NOTE: Functions from 3rd party API provider domain can also access this
API routing information with sufficient permissions.

### 5.12.2 Service Operations 

#### 5.12.2.1 Introduction

Table 5.12.2.1-1: Operations of the CAPIF\_Routing\_Info\_API

  ------------------------ -------------------------------------------------------------------------------------------------------------------------------- -----------------------
  Service operation name   Description                                                                                                                      Initiated by
  Obtain\_Routing\_Info    This service operation is used by an API exposing function to obtain the API routing information from the CAPIF core function.   API exposing function
  ------------------------ -------------------------------------------------------------------------------------------------------------------------------- -----------------------

#### 5.12.2.2 Obtain\_Routing\_Info

##### 5.12.2.2.1 General

This service operation is used by an API exposing function to obtain the
API routing information from the CAPIF core function.

##### 5.12.2.2.2 API exposing function obtaining API routing information from the CAPIF core function using Obtain\_Routing\_Info service operation

To obtain the API routing information from the CAPIF core function, the
API exposing function shall send an HTTP GET request message to the
CAPIF core function with the API exposing function Identifier and API
identification as specified in subclause 8.10.2.2.3.1.

Upon receiving the above described HTTP GET message, the CAPIF core
function shall

1\. verify the identity of the API exposing function and check if the
API exposing function is authorized to obtain the API routing
information corresponding to the API identification;

2\. if the API exposing function is authorized to obtain the API routing
information, the CAPIF core function shall respond with the API routing
information corresponding to the API identification in the HTTP GET
response message.

6 Services offered by the API exposing function
===============================================

6.1 Introduction of Services
----------------------------

The table 6.1-1 lists the API exposing function APIs below the service
name. A service description subclause for each API gives a general
description of the related API.

Table 6.1-1: List of AEF Services

  -------------------- -------------------------- --------------------- ---------------------
  Service Name         Service Operations         Operation Semantics   Consumer(s)
  AEF\_Security\_API   Initiate\_Authentication   Request/ Response     API Invoker
                       Revoke\_Authorization      Request/ Response     CAPIF core function
  -------------------- -------------------------- --------------------- ---------------------

Table 6.1-2 summarizes the corresponding APIs defined in this
specification.

Table 6.1-2: API Descriptions

  -------------------- --------------- -------------------------- ---------------------------------- -------------- -----------
  **Service Name**     **Subclause**   **Description**            **OpenAPI Specification File**     **apiName**    **Annex**
  AEF\_Security\_API   9.1             AEF Security API Service   TS29222\_AEF\_Security\_API.yaml   aef-security   A.10
  -------------------- --------------- -------------------------- ---------------------------------- -------------- -----------

6.2 AEF\_Security\_API
----------------------

### 6.2.1 Service Description

#### 6.2.1.1 Overview

The AEF securityAPI, allows an API invokers via CAPIF-2/2e reference
points to request API exposing function to ensure that authentication
parameters necessary for authentication of the API invoker are available
with the API exposing function. If the necessary authentication
parameters are not available, the API exposing function fetches
necessary authentication parameters from CAPIF core function to
authenticate the API invoker.

The AEF security API, also allows the CAPIF core function via CAPIF-3/3e
reference points to request API exposing function to revoke the
authorization of service APIs for an API invoker.

### 6.2.2 Service Operations 

#### 6.2.2.1 Introduction

The service operation defined for AEF\_Security\_API is shown in
table 6.2.2.1-1.

Table 6.2.2.1-1: Operations of the AEF\_Security\_API

  -------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------
  Service operation name     Description                                                                                                                                                               Initiated by
  Initiate\_Authentication   This service operation is used by an API invoker to request API exposing function to confirm necessary authentication data is available to authenticate the API invoker   API invoker
  Revoke\_Authorization      This service operation is used by the CAPIF core function to request the API exposing function to revoke the authorization of service APIs for an API invoker.            CAPIF core function
  -------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------

#### 6.2.2.2 Initiate\_Authentication

##### 6.2.2.2.1 General

This service operation is used by an API invoker to initiate
authentication with the API exposing function. On receiving the
Initiate\_Authentication the API exposing function fetches the
authentication information of the API invoker from the CAPIF core
function, if required.

##### 6.2.2.2.2 API invoker initiating authentication using Initiate\_Authentication service operation

To initiate authentication with the API exposing function, the API
invoker shall send an HTTP POST message to the API exposing function
with the API invoker ID to the URI
\"{apiRoot}/aef-security/v1/check-authentication\".

Upon receiving the above described HTTP POST message, the API exposing
function shall check if the credentials of the API invoker for
authentication are available with the API exposing function. If the
credentials of the API invoker for authentication are not available, the
API exposing function shall use the service defined in
subclause 5.6.2.4.2 to fetch the credentials from the CAPIF core
function.

The API exposing function shall store the received credentials and
respond to the API invoker with 200 OK status code.

#### 6.2.2.3 Revoke\_Authorization

##### 6.2.2.3.1 General

This service operation is used by CAPIF core function to revoke
authorization of service APIs (e.g. due to policy change in the CAPIF
core function). On receiving the Revoke\_Authorization the API exposing
function revokes authorization of the API invoker for the service APIs
indicated in the request.

##### 6.2.2.3.2 CAPIF core function initiating revocation using Revoke\_Authorization service operation

To revoke authorization, the CAPIF core function shall send an HTTP POST
message to the API exposing function with the API invoker ID and a list
of service API IDs on the URI
\"{apiRoot}/aef-security/v1/revoke-authorization\".

Upon receiving the HTTP POST message, the API exposing function shall
revoke the authorization of the API invoker for the indicated service
APIs (e.g. it may update the list of unauthorized APIs locally), and
then respond to the CAPIF core function with 200 OK status code.

The CAPIF core function shall also notify the API invoker of the
authorization invalidation using the Notification Destination URI
received in the Obtain\_Security\_Method message.

7 CAPIF Design Aspects Common for All APIs
==========================================

7.1 General
-----------

CAPIF APIs are RESTful APIs that allow secure access to the capabilities
provided by CAPIF.

This document specifies the procedures triggered at different functional
entities as a result of API invocation requests and event notifications.
The stage-2 level requirements and signalling flows are defined in
3GPP TS 23.222 \[2\].

Several design aspects, as mentioned in the following subclauses, are
specified in 3GPP TS 29.122 \[14\] and referenced by this specification.

7.2 Data Types
--------------

### 7.2.1 General

This clause defines structured data types, simple data types and
enumerations that are applicable to several APIs defined in the present
specification and can be referenced from data structures defined in the
subsequent clauses.

In addition, data types that are defined in
OpenAPI 3.0.0 Specification \[3\] can also be referenced from data
structures defined in the subsequent clauses.

NOTE: As a convention, data types in the present specification are
written with an upper-case letter in the beginning. Parameters are
written with a lower-case letter in the beginning. As an exception, data
types that are also defined in OpenAPI 3.0.0 Specification \[3\] can use
a lower-case case letter in the beginning for consistency.

Table 7.2.1-1 specifies data types re-used by the CAPIF from other
specifications, including a reference to their respective specifications
and when needed, a short description of their use within the CAPIF.

Table 7.2.1-1: Re-used Data Types

+--------------------+-----------------------+-----------------------+
| Data type          | Reference             | Comments              |
+--------------------+-----------------------+-----------------------+
| Uri                | 3GPP TS 29.122 \[14\] |                       |
+--------------------+-----------------------+-----------------------+
| TestNotification   | 3GPP TS 29.122 \[14\] | Following             |
|                    |                       | clarifications apply: |
|                    |                       |                       |
|                    |                       | \- The SCEF is the    |
|                    |                       | CAPIF core function;  |
|                    |                       | and                   |
|                    |                       |                       |
|                    |                       | \- The SCS/AS is the  |
|                    |                       | Subscriber.           |
+--------------------+-----------------------+-----------------------+
| WebsockNotifConfig | 3GPP TS 29.122 \[14\] | Following             |
|                    |                       | clarifications apply: |
|                    |                       |                       |
|                    |                       | \- The SCEF is the    |
|                    |                       | CAPIF core function;  |
|                    |                       | and                   |
|                    |                       |                       |
|                    |                       | \- The SCS/AS is the  |
|                    |                       | Subscriber.           |
+--------------------+-----------------------+-----------------------+

### 7.2.2 Referenced structured data types

Table 7.2.2-1 lists structured data types defined in this specification
referenced by multiple services:

Table 7.2.2-1: Referenced Structured Data Types

  ----------------------- --------------------- ----------------------------------
  Data type               Reference             Description
  Log                     Subclause 8.7.4.2.3   Individual log entries
  InterfaceDescription    Subclause 8.2.4.2.3   Description of the API interface
  ServiceAPIDescription   Subclause 8.2.4.2.2   Description of the service API
  ----------------------- --------------------- ----------------------------------

### 7.2.3 Referenced Simple data types and enumerations

Following simple data types defined in Table 7.2.3.1-1 are applicable to
several APIs in this document:

Table 7.2.3.1-1: Simple data types applicable to several APIs

  ----------------- --------------------- ------------------------------------------------------------------------------------
  Type name         Reference             Description
  CAPIFResourceId   n/a                   string chosen by the CAPIF core function to serve as identifier in a resource URI.
  DataFormat        Subclause 8.2.4.3.4   Data format used by the API
  Protocol          Subclause 8.2.4.3.3   Protocol used by the API
  ----------------- --------------------- ------------------------------------------------------------------------------------

7.3 Usage of HTTP
-----------------

For CAPIF APIs, support of HTTP/1.1 (IETF RFC 7230 \[4\],
IETF RFC 7231 \[5\], IETF RFC 7232 \[6\], IETF RFC 7233 \[7\],
IETF RFC 7234 \[8\] and IETF RFC 7235 \[9\]) over TLS
(IETF RFC 5246 \[11\]) is mandatory and support of HTTP/2
(IETF RFC 7540 \[10\]) over TLS (IETF RFC 5246 \[11\]) is recommended.

A functional entity desiring to use HTTP/2 shall use the HTTP upgrade
mechanism to negotiate applicable HTTP version as described in
IETF RFC 7540 \[10\].

7.4 Content type
----------------

The bodies of HTTP request and successful HTTP responses shall be
encoded in JSON format (see IETF RFC 8259 \[12\]).

The MIME media type that shall be used within the related Content-Type
header field is \"application/json\", as defined in IETF RFC 8259 \[12\]
unless specified otherwise in the API definition.

7.5 URI structure
-----------------

7.5.1 Resource URI structure

All API URIs of CAPIF APIs shall be:

**{apiRoot}/\<apiName\>/\<apiVersion\>/**

\"apiRoot\" is configured by means outside the scope of the present
document. It includes the scheme (\"https\"), host and optional port,
and an optional prefix string. \"apiName\" and \"apiVersion\" shall be
set dependent on the API, as defined in the corresponding subclauses
below.

All resource URIs in the subclauses below are defined relative to the
above root API URI.

NOTE 1: The \"apiVersion\" will only be increased if the new API version
contains backward incompatible changes. Otherwise, the supported feature
mechanism defined in subclause 7.8 can be used to negotiate extensions.

NOTE 2: A different root structure can be used when the resource URI is
preconfigured in the API invoking entity.

The root structure may be followed by \"apiSpecificSuffixes\" that are
dependent on the API and are defined separately for each API as resource
URI where they apply:

**{apiRoot}/\<apiName\>/\<apiVersion\>/\<apiSpecificSuffixes\>**

7.5.2 Custom operations URI structure

The custom operation definition is in Annex C of 3GPP TS 29.501 \[18\].

The URI of a custom operation which is associated with a resource shall
have the following structure:

**{apiRoot}/\<apiName\>/\<apiVersion\>/\<apiSpecificResourceUriPart\>/\<custOpName\>**

Custom operations can also be associated with the service instead of a
resource. The URI of a custom operation which is not associated with a
resource shall have the following structure:

**{apiRoot}/\<apiName\>/\<apiVersion\>/\<custOpName\>**

In the above URI structures, \"apiRoot\", \"apiName\", \"apiVersion\"
and \"apiSpecificResourceUriPart\" are as defined in subclause 7.5.1 and
\"custOpName\" represents the name of the custom operation as defined in
subclause 5.1.3.2 of 3GPP TS 29.501 \[18\].

7.6 Notifications
-----------------

The functional entities

\- shall support the delivery of notifications using a separate HTTP
connection towards an address;

\- may support testing delivery of notifications; and

\- may support the delivery of notification using WebSocket protocol
(see IETF RFC 6455 \[13\]),

as described in 3GPP TS 29.122 \[14\], with the following
clarifications:

\- the SCEF is the CAPIF core function; and

\- the SCS/AS is the Subscriber.

7.7 Error handling
------------------

Response bodies for error handling, as described in
3GPP TS 29.122 \[14\], are applicable to all APIs in the present
specification unless specified otherwise, with the following
clarifications:

\- the SCEF is the CAPIF core function; and

\- the SCS/AS is the functional entity invoking an API.

7.8 Feature negotiation
-----------------------

The functional entity invoking an API (i.e. the API invoker, the API
exposing function, the API publishing function or the API management
function) and the CAPIF core function use feature negotiation procedures
defined in 3GPP TS 29.122 \[14\] to negotiate the supported features,
with the following clarifications:

\- description of the SCEF applies to the CAPIF core function;

\- description of the SCS/AS applies to the functional entity invoking
an API;

\- the CAPIF Core Function should not register any feature in the NRF;
and

\- the AEF should not register any feature for AEF\_Security\_API in the
NRF.

7.9 HTTP headers
----------------

The HTTP headers described in 3GPP TS 29.122 \[14\] are applicable to
all APIs in this document.

7.10 Conventions for Open API specification files
-------------------------------------------------

The conventions for Open API specification files as specified in
subclause 5.2.9 of 3GPP TS 29.122 \[14\] shall be applicable for all
APIs in this document.

8 CAPIF API Definition
======================

8.1 CAPIF\_Discover\_Service\_API 
---------------------------------

### 8.1.1 API URI

The CAPIF\_Discover\_Service\_API service shall use the
CAPIF\_Discover\_Service\_API.

The request URIs used in HTTP requests from the API invoker towards the
CAPIF core function shall have the Resource URI structure as defined in
subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"service-apis\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.1.2.

### 8.1.2 Resources 

#### 8.1.2.1 Overview

Figure 8.1.2.1-1: Resource URI structure of the
CAPIF\_Discover\_Service\_API

Table 8.1.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.1.2.1-1: Resources and methods overview

+----------------+----------------+----------------+----------------+
| Resource name  | Resource URI   | HTTP method or | Description    |
|                |                | custom         |                |
|                |                | operation      |                |
+----------------+----------------+----------------+----------------+
| All published  | /              | GET            | Discover       |
| service APIs   | allServiceAPIs |                | published      |
|                |                |                | service APIs   |
| (Store)        |                |                | and retrieve a |
|                |                |                | collection of  |
|                |                |                | APIs according |
|                |                |                | to certain     |
|                |                |                | filter         |
|                |                |                | criteria.      |
+----------------+----------------+----------------+----------------+

#### 8.1.2.2 Resource: All published service APIs

##### 8.1.2.2.1 Description

The All published service APIs resource represents a collection of
published service APIs on a CAPIF core function. The resource is
modelled as a Store resource archetype (see Annex C.3 of
3GPP TS 29.501 \[18\])

##### 8.1.2.2.2 Resource Definition

Resource URI: **{apiRoot}/service-apis/\<apiVersion\>/allServiceAPIs**

This resource shall support the resource URI variables defined in
table 8.1.2.2.2-1.

Table 8.1.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- ------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.1.1
  ------------ ----------- ------------------

##### 8.1.2.2.3 Resource Standard Methods

###### 8.1.2.2.3.1 GET

This operation retrieves a list of APIs currently registered in the
CAPIF core function, satisfying a number of filter criteria.

Table 8.1.2.2.3.1-1: URI query parameters supported by the GET method on
this resource

  ------------------------ ------------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------
  Name                     Data type           P   Cardinality   Description                                                                                                                                          Applicability
  api-invoker-id           string              M   1             String identifying the API invoker assigned by the CAPIF core function. It also represents the CCF identifier in the CAPIF-6/6e reference point.     
  api-name                 string              O   0..1          API name, it is set as {apiName} part of the URI structure as defined in subclause 4.4 of 3GPP TS 29.501 \[18\].                                     
  api-version              string              O   0..1          API major version in the URI (e.g. v1)                                                                                                               
  comm-type                CommunicationType   O   0..1          Communication type used by the API (e.g.REQUEST\_RESPONSE).                                                                                          
  protocol                 Protocol            O   0..1          Protocol used by the API.                                                                                                                            
  aef-id                   string              O   0..1          AEF identifier.                                                                                                                                      
  data-format              DataFormat          O   0..1          Data format used by the API (e.g. serialization protocol JSON used).                                                                                 
  api-cat                  string              O   0..1          The service API category to which the service API belongs to.                                                                                        
  supported-features       SupportedFeatures   O   0..1          To filter irrelevant responses related to unsupported features.                                                                                      
  api-supported-features   SupportedFeatures   C   0..1          Features supported by the discovered service API indicated by api-name parameter. This may only be present if api-name query parameter is present.   ApiSupportedFeatureQuery
  ------------------------ ------------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------- --------------------------

This method shall support the request data structures specified in
table 8.1.2.2.3.1-2 and the response data structures and response codes
specified in table 8.1.2.2.3.1-3.

Table 8.1.2.2.3.1-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.1.2.2.3.1-3: Data structures supported by the GET Response Body
on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| D             | M | 1           | 200 OK        | The response  |
| iscoveredAPIs |   |             |               | body contains |
|               |   |             |               | the result of |
|               |   |             |               | the search    |
|               |   |             |               | over the list |
|               |   |             |               | of registered |
|               |   |             |               | APIs.         |
+---------------+---+-------------+---------------+---------------+
| P             | O | 0..1        | 414 URI Too   | Indicates     |
| roblemDetails |   |             | Long          | that the      |
|               |   |             |               | server is     |
|               |   |             |               | refusing to   |
|               |   |             |               | service the   |
|               |   |             |               | request       |
|               |   |             |               | because the   |
|               |   |             |               | r             |
|               |   |             |               | equest-target |
|               |   |             |               | is too long.  |
+---------------+---+-------------+---------------+---------------+

##### 8.1.2.2.4 Resource Custom Operations

None.

### 8.1.3 Notifications

None.

### 8.1.4 Data Model

#### 8.1.4.1 General

This subclause specifies the application data model supported by the
API.

Table 8.1.4.1-1 specifies the data types defined for the CAPIF service
based interface protocol.

Table 8.1.4.1-1: Specific Data Types

  ---------------- ----------------- ------------------------------- ---------------
  Data type        Section defined   Description                     Applicability
  DiscoveredAPIs   8.1.4.2.2         Definition of the service API   
  ---------------- ----------------- ------------------------------- ---------------

Table 8.1.4.1-2 specifies data types re-used by the
CAPIF\_Discover\_Service\_API service:

Table 8.1.4.1-2: Re-used Data Types

  ----------------------- ----------------------- ------------------------------------ ---------------
  Data type               Reference               Comments                             Applicability
  CommunicationType       Subclause 8.2.4.3.5     Communication type used by the API   
  DataFormat              Subclause 8.2.4.3.4     Data format                          
  ProblemDetails          3GPP TS 29.122 \[14\]                                        
  Protocol                Subclause 8.2.4.3.3     Protocol                             
  ServiceAPIDescription   Subclause 8.2.4.2.2     Description of the service API       
  ----------------------- ----------------------- ------------------------------------ ---------------

#### 8.1.4.2 Structured data types

##### 8.1.4.2.1 Introduction

##### 8.1.4.2.2 Type: DiscoveredAPIs

Table 8.1.4.2.2-1: Definition of type DiscoveredAPIs

  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------------------ --- ------------- -------------------------------------------------------------------- ---------------
  Attribute name                                                                                                                                                                                                                                                                                           Data type                      P   Cardinality   Description                                                          Applicability
  serviceAPIDescriptions                                                                                                                                                                                                                                                                                   array(ServiceAPIDescription)   O   1..N          Description of the service API as published by the service. (NOTE)   
  NOTE: For CAPIF\_Discover\_Service\_API, the supportedFeatures attribute in ServiceAPIDescription data type shall be provided in the HTTP GET response of successful query. In addition, the supportedFeatures attribute may include one or more the supported features as defined in subclause 8.1.6.                                                                                                                         
  -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------------------ --- ------------- -------------------------------------------------------------------- ---------------

##### 8.1.4.2.3 Void

#### 8.1.4.3 Simple data types and enumerations

None.

### 8.1.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.1.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.

Table 8.1.6-1: Supported Features

  -------------------- -------------------------- --------------------------------------------------------------------------
  **Feature number**   **Feature Name**           **Description**
  1                    ApiSupportedFeatureQuery   Indicates the support of query with supported feature for a service API.
  -------------------- -------------------------- --------------------------------------------------------------------------

8.2 CAPIF\_Publish\_Service\_API
--------------------------------

### 8.2.1 API URI

The CAPIF\_Publish\_Service\_API service shall use the
CAPIF\_Publish\_Service\_API.

The request URIs used in HTTP requests from the API publishing function
towards the CAPIF core function shall have the Resource URI structure as
defined in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"published-apis\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.2.2.

### 8.2.2 Resources 

#### 8.2.2.1 Overview

Figure 8.2.2.1-1: Resource URI structure of the
CAPIF\_Publish\_Service\_API

Table 8.2.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.2.2.1-1: Resources and methods overview

  ------------------------------ -------------------------------------- --------------------------------- -------------------------------------
  Resource name                  Resource URI                           HTTP method or custom operation   Description
  APF published APIs             /{apfId}/service-apis                  POST                              Publish a new API
                                                                        GET                               Retrieve all published service APIs
  Individual APF published API   /{apfId}/service-apis/{serviceApiId}   GET                               Retrieve a published service API
                                                                        PUT                               Update a published service API
                                                                        DELETE                            Unpublish a published service API
  ------------------------------ -------------------------------------- --------------------------------- -------------------------------------

#### 8.2.2.2 Resource: APF published APIs

##### 8.2.2.2.1 Description

The APF published APIs resource represents all published service APIs of
a API publishing function.

##### 8.2.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/published-apis/\<apiVersion\>/{apfId}/service-apis**

This resource shall support the resource URI variables defined in
table 8.2.2.2.2-1.

Table 8.2.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- --------------------------------------------------------------------------------------------------------------------------------------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.2.1
  apfId        string      Identifies the API publishing function; for CAPIF interconnection case, this string also identifies the CCF which is publishing the service API.
  ------------ ----------- --------------------------------------------------------------------------------------------------------------------------------------------------

##### 8.2.2.2.3 Resource Standard Methods

###### 8.2.2.2.3.1 POST

This method shall support the URI query parameters specified in
table 8.2.2.2.3.1-1.

Table 8.2.2.2.3.1-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.2.2.2.3.1-2 and the response data structures and response codes
specified in table 8.2.2.2.3.1-3.

Table 8.2.2.2.3.1-2: Data structures supported by the POST Request Body
on this resource

  ----------------------- --- ------------- -----------------------------------------------
  Data type               P   Cardinality   Description
  ServiceAPIDescription   M   1             Definition of the service API being published
  ----------------------- --- ------------- -----------------------------------------------

Table 8.2.2.2.3.1-3: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+-------------+---------------+
| Data type     | P | Cardinality | Response    | Description   |
|               |   |             |             |               |
|               |   |             | codes       |               |
+---------------+---+-------------+-------------+---------------+
| ServiceA      | M | 1           | 201 Created | Service API   |
| PIDescription |   |             |             | published     |
|               |   |             |             | successfully. |
|               |   |             |             |               |
|               |   |             |             | The URI of    |
|               |   |             |             | the created   |
|               |   |             |             | resource      |
|               |   |             |             | shall be      |
|               |   |             |             | returned in   |
|               |   |             |             | the           |
|               |   |             |             | \"Location\"  |
|               |   |             |             | HTTP header   |
+---------------+---+-------------+-------------+---------------+

Table 8.2.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/published-apis/\<apiVersion\>/{apfId}/service-apis/{serviceApiId}
  ---------- ----------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------

###### 8.2.2.2.3.2 GET

This method shall support the URI query parameters specified in
table 8.2.2.2.3.2-1.

Table 8.2.2.2.3.2-1: URI query parameters supported by the GET method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.2.2.2.3.2-2 and the response data structures and response codes
specified in table 8.2.2.2.3.2-3.

Table 8.2.2.2.3.2-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.2.2.2.3.1-3: Data structures supported by the GET Response Body
on this resource

+-----------------+---+-------------+----------+-----------------+
| Data type       | P | Cardinality | Response | Description     |
|                 |   |             |          |                 |
|                 |   |             | codes    |                 |
+-----------------+---+-------------+----------+-----------------+
| array(Service   | O | 0..N        | 200 OK   | Definition of   |
| APIDescription) |   |             |          | all service     |
|                 |   |             |          | API(s)          |
|                 |   |             |          | published by    |
|                 |   |             |          | the API         |
|                 |   |             |          | publishing      |
|                 |   |             |          | function.       |
+-----------------+---+-------------+----------+-----------------+

##### 8.2.2.2.4 Resource Custom Operations

None.

#### 8.2.2.3 Resource: Individual APF published API

##### 8.2.2.3.1 Description

The Individual APF published API resource represents an individual
published service API.

##### 8.2.2.3.2 Resource Definition

Resource URI:
**{apiRoot}/published-apis/\<apiVersion\>/{apfId}/service-apis/{serviceApiId}**

This resource shall support the resource URI variables defined in
table 8.2.2.3.2-1.

Table 8.2.2.3.2-1: Resource URI variables for this resource

  -------------- ----------- ------------------------------------------------
  Name           Data Type   Definition
  apiRoot        string      See clause 7.5
  apiVersion     string      See clause 8.2.1
  apfId          string      Identifies the API publishing function
  serviceApiId   string      Identifies an individual published service API
  -------------- ----------- ------------------------------------------------

##### 8.2.2.3.3 Resource Standard Methods

###### 8.2.2.3.3.1 GET

This method shall support the URI query parameters specified in
table 8.2.2.3.3.1-1.

Table 8.2.2.3.3.1-1: URI query parameters supported by the GET method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.2.2.3.3.1-2 and the response data structures and response codes
specified in table 8.2.2.3.3.1-3.

Table 8.2.2.3.3.1-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.2.2.3.3.1-3: Data structures supported by the GET Response Body
on this resource

+-----------------+---+-------------+----------+-----------------+
| Data type       | P | Cardinality | Response | Description     |
|                 |   |             |          |                 |
|                 |   |             | codes    |                 |
+-----------------+---+-------------+----------+-----------------+
| Servic          | M | 1           | 200 OK   | Definition of   |
| eAPIDescription |   |             |          | individual      |
|                 |   |             |          | service API     |
|                 |   |             |          | published by    |
|                 |   |             |          | the API         |
|                 |   |             |          | publishing      |
|                 |   |             |          | function.       |
+-----------------+---+-------------+----------+-----------------+

###### 8.2.2.3.3.2 PUT

This method shall support the URI query parameters specified in
table 8.2.2.3.3.2-1.

Table 8.2.2.3.3.2-1: URI query parameters supported by the PUT method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.2.2.3.3.2-2 and the response data structures and response codes
specified in table 8.2.2.3.3.2-3.

Table 8.2.2.3.3.2-2: Data structures supported by the PUT Request Body
on this resource

  ----------------------- --- ------------- ----------------------------------------
  Data type               P   Cardinality   Description
  ServiceAPIDescription   M   1             Updated definition of the service API.
  ----------------------- --- ------------- ----------------------------------------

Table 8.2.2.3.3.2-3: Data structures supported by the PUT Response Body
on this resource

+-----------------+---+-------------+----------+-----------------+
| Data type       | P | Cardinality | Response | Description     |
|                 |   |             |          |                 |
|                 |   |             | codes    |                 |
+-----------------+---+-------------+----------+-----------------+
| Servic          | M | 1           | 200 OK   | Definition of   |
| eAPIDescription |   |             |          | the service API |
|                 |   |             |          | updated         |
|                 |   |             |          | successfully.   |
+-----------------+---+-------------+----------+-----------------+

###### 8.2.2.3.3.3 DELETE

This method shall support the URI query parameters specified in
table 8.2.2.3.3.3-1.

Table 8.2.2.3.3.3-1: URI query parameters supported by the GET method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.2.2.3.3.3-2 and the response data structures and response codes
specified in table 8.2.2.3.3.3-3.

Table 8.2.2.3.3.3-2: Data structures supported by the DELETE Request
Body on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.2.2.3.3.3-3: Data structures supported by the DELETE Response
Body on this resource

+-----------+---+-------------+----------------+-----------------+
| Data type | P | Cardinality | Response       | Description     |
|           |   |             |                |                 |
|           |   |             | codes          |                 |
+-----------+---+-------------+----------------+-----------------+
| n/a       |   |             | 204 No Content | The individual  |
|           |   |             |                | published       |
|           |   |             |                | service API     |
|           |   |             |                | matching the    |
|           |   |             |                | serviceApiId is |
|           |   |             |                | deleted.        |
+-----------+---+-------------+----------------+-----------------+

##### 8.2.2.3.4 Resource Custom Operations

None.

### 8.2.3 Notifications

None.

### 8.2.4 Data Model

#### 8.2.4.1 General

This subclause specifies the application data model supported by the
API.

Table 8.2.4.1-1 specifies the data types defined for the CAPIF service
based interface protocol.

Table 8.2.4.1-1: Specific Data Types

  ---------------------- ----------------- ------------------------------------ ---------------
  Data type              Section defined   Description                          Applicability
  AefProfile             8.2.4.2.4         AEF profile                          
  CommunicationType      8.2.4.3.5         Communication type of the resource   
  CustomOperation        8.2.4.2.7         Custom operation                     
  DataFormat             8.2.4.3.4         Data format                          
  InterfaceDescription   8.2.4.2.3         Description of the API interface     
  Operation              8.2.4.3.7         HTTP method (e.g. PUT)               
  Protocol               8.2.4.3.3         Protocol used by the API             
  Resource               8.2.4.2.6         API resource                         
  SecurityMethod         8.2.4.3.6         Security method (e.g. PKI)           
  Version                8.2.4.2.5         API version information              
  ---------------------- ----------------- ------------------------------------ ---------------

Table 8.2.4.1-2 specifies data types re-used by the
CAPIF\_Publish\_Service\_API service:

Table 8.2.4.1-2: Re-used Data Types

  ------------------- ----------------------- ------------------------------------------------------------------------------------- ---------------
  Data type           Reference               Comments                                                                              Applicability
  Ipv4Addr            3GPP TS 29.122 \[14\]                                                                                         
  Ipv6Addr            3GPP TS 29.122 \[14\]                                                                                         
  Port                3GPP TS 29.122 \[14\]                                                                                         
  SupportedFeatures   3GPP TS 29.571 \[19\]   Used to negotiate the applicability of optional features defined in table  8.2.6-1.   
  ------------------- ----------------------- ------------------------------------------------------------------------------------- ---------------

#### 8.2.4.2 Structured data types

##### 8.2.4.2.1 Introduction

##### 8.2.4.2.2 Type: ServiceAPIDescription

Table 8.2.4.2.2-1: Definition of type ServiceAPIDescription

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| apiName   | string    | M | 1         | API name, |           |
|           |           |   |           | it is set |           |
|           |           |   |           | as        |           |
|           |           |   |           | {apiName} |           |
|           |           |   |           | part of   |           |
|           |           |   |           | the URI   |           |
|           |           |   |           | structure |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subc      |           |
|           |           |   |           | lause 4.4 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 29.50 |           |
|           |           |   |           | 1 \[18\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiId     | string    | O | 0..1      | API       |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | assigned  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | published |           |
|           |           |   |           | service   |           |
|           |           |   |           | API.      |           |
|           |           |   |           | Shall not |           |
|           |           |   |           | be        |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | from the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | p         |           |
|           |           |   |           | ublishing |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function. |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | response  |           |
|           |           |   |           | from the  |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | p         |           |
|           |           |   |           | ublishing |           |
|           |           |   |           | function  |           |
|           |           |   |           | and in    |           |
|           |           |   |           | the HTTP  |           |
|           |           |   |           | GET       |           |
|           |           |   |           | response  |           |
|           |           |   |           | from the  |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | (         |           |
|           |           |   |           | discovery |           |
|           |           |   |           | API).     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ae        | array(Ae  | C | 1..N      | AEF       |           |
| fProfiles | fProfile) |   |           | profile   |           |
|           |           |   |           | inf       |           |
|           |           |   |           | ormation, |           |
|           |           |   |           | which     |           |
|           |           |   |           | includes  |           |
|           |           |   |           | the       |           |
|           |           |   |           | exposed   |           |
|           |           |   |           | API       |           |
|           |           |   |           | details   |           |
|           |           |   |           | (e.g.     |           |
|           |           |   |           | p         |           |
|           |           |   |           | rotocol). |           |
|           |           |   |           | For       |           |
|           |           |   |           | C         |           |
|           |           |   |           | APIF-4/4e |           |
|           |           |   |           | i         |           |
|           |           |   |           | nterface, |           |
|           |           |   |           | API       |           |
|           |           |   |           | p         |           |
|           |           |   |           | ublishing |           |
|           |           |   |           | function  |           |
|           |           |   |           | shall     |           |
|           |           |   |           | provide   |           |
|           |           |   |           | this      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | to the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | in        |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | pu        |           |
|           |           |   |           | blishing. |           |
|           |           |   |           | For       |           |
|           |           |   |           | C         |           |
|           |           |   |           | APIF-1/1e |           |
|           |           |   |           | i         |           |
|           |           |   |           | nterface, |           |
|           |           |   |           | the CAPIF |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | shall     |           |
|           |           |   |           | provide   |           |
|           |           |   |           | this      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | Invoker   |           |
|           |           |   |           | during    |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | d         |           |
|           |           |   |           | iscovery. |           |
|           |           |   |           | (NOTE 2)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| de        | string    | O | 0..1      | Text      |           |
| scription |           |   |           | de        |           |
|           |           |   |           | scription |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| supporte  | Supporte  | O | 0..1      | The       |           |
| dFeatures | dFeatures |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | API.      |           |
|           |           |   |           | (NOTE 1)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| shar      | Sh        | O | 0..1      | R         |           |
| eableInfo | areableIn |   |           | epresents |           |
|           | formation |   |           | whether   |           |
|           |           |   |           | the       |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | and/or    |           |
|           |           |   |           | the       |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | category  |           |
|           |           |   |           | can be    |           |
|           |           |   |           | published |           |
|           |           |   |           | to other  |           |
|           |           |   |           | CCFs.     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| serviceAP | string    | C | 0..1      | The       |           |
| ICategory |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | category  |           |
|           |           |   |           | to which  |           |
|           |           |   |           | the       |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | belongs   |           |
|           |           |   |           | to. This  |           |
|           |           |   |           | attribute |           |
|           |           |   |           | is only   |           |
|           |           |   |           | a         |           |
|           |           |   |           | pplicable |           |
|           |           |   |           | for       |           |
|           |           |   |           | C         |           |
|           |           |   |           | APIF-6/6e |           |
|           |           |   |           | i         |           |
|           |           |   |           | nterface. |           |
|           |           |   |           | (NOTE 2)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ccfId     | string    | C | 0..1      | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | which can |           |
|           |           |   |           | be        |           |
|           |           |   |           | contacted |           |
|           |           |   |           | further   |           |
|           |           |   |           | for       |           |
|           |           |   |           | di        |           |
|           |           |   |           | scovering |           |
|           |           |   |           | the       |           |
|           |           |   |           | details   |           |
|           |           |   |           | of        |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | inf       |           |
|           |           |   |           | ormation. |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | is only   |           |
|           |           |   |           | a         |           |
|           |           |   |           | pplicable |           |
|           |           |   |           | for       |           |
|           |           |   |           | C         |           |
|           |           |   |           | APIF-6/6e |           |
|           |           |   |           | interface |           |
|           |           |   |           | and shall |           |
|           |           |   |           | be        |           |
|           |           |   |           | provided  |           |
|           |           |   |           | with      |           |
|           |           |   |           | s         |           |
|           |           |   |           | erviceAPI |           |
|           |           |   |           | Category. |           |
|           |           |   |           | (NOTE 2)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | Supporte  | O | 0..1      | Provided  | Ap        |
| SuppFeats | dFeatures |   |           | by the    | iSupporte |
|           |           |   |           | consumer  | dFeatureP |
|           |           |   |           | to        | ublishing |
|           |           |   |           | indicate  |           |
|           |           |   |           | the       |           |
|           |           |   |           | features  |           |
|           |           |   |           | supported |           |
|           |           |   |           | by the    |           |
|           |           |   |           | service   |           |
|           |           |   |           | API.      |           |
+-----------+-----------+---+-----------+-----------+-----------+
| p         | Publish   | C | 0..1      | It        |           |
| ubApiPath | edApiPath |   |           | contains  |           |
|           |           |   |           | the       |           |
|           |           |   |           | published |           |
|           |           |   |           | API path  |           |
|           |           |   |           | within    |           |
|           |           |   |           | the same  |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain.   |           |
|           |           |   |           | it shall  |           |
|           |           |   |           | be        |           |
|           |           |   |           | provided  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CCF when  |           |
|           |           |   |           | p         |           |
|           |           |   |           | ublishing |           |
|           |           |   |           | the       |           |
|           |           |   |           | service   |           |
|           |           |   |           | API to    |           |
|           |           |   |           | other CCF |           |
|           |           |   |           | via the   |           |
|           |           |   |           | CAPIF-6   |           |
|           |           |   |           | reference |           |
|           |           |   |           | point.    |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE 1:   |           |   |           |           |           |
| For       |           |   |           |           |           |
| CA        |           |   |           |           |           |
| PIF\_Publ |           |   |           |           |           |
| ish\_Serv |           |   |           |           |           |
| ice\_API, |           |   |           |           |           |
| the       |           |   |           |           |           |
| supported |           |   |           |           |           |
| features  |           |   |           |           |           |
| attribute |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| provided  |           |   |           |           |           |
| in the    |           |   |           |           |           |
| HTTP POST |           |   |           |           |           |
| request   |           |   |           |           |           |
| and in    |           |   |           |           |           |
| the       |           |   |           |           |           |
| response  |           |   |           |           |           |
| of        |           |   |           |           |           |
| s         |           |   |           |           |           |
| uccessful |           |   |           |           |           |
| resource  |           |   |           |           |           |
| creation. |           |   |           |           |           |
| In        |           |   |           |           |           |
| addition, |           |   |           |           |           |
| the       |           |   |           |           |           |
| supporte  |           |   |           |           |           |
| dFeatures |           |   |           |           |           |
| attribute |           |   |           |           |           |
| may       |           |   |           |           |           |
| include   |           |   |           |           |           |
| one or    |           |   |           |           |           |
| more the  |           |   |           |           |           |
| supported |           |   |           |           |           |
| features  |           |   |           |           |           |
| as        |           |   |           |           |           |
| defined   |           |   |           |           |           |
| in        |           |   |           |           |           |
| subclau   |           |   |           |           |           |
| se 8.2.6. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 2:   |           |   |           |           |           |
| For       |           |   |           |           |           |
| C         |           |   |           |           |           |
| APIF-6/6e |           |   |           |           |           |
| i         |           |   |           |           |           |
| nterface, |           |   |           |           |           |
| at least  |           |   |           |           |           |
| one of    |           |   |           |           |           |
| ae        |           |   |           |           |           |
| fProfiles |           |   |           |           |           |
| or        |           |   |           |           |           |
| serviceAP |           |   |           |           |           |
| ICategory |           |   |           |           |           |
| and the   |           |   |           |           |           |
| corr      |           |   |           |           |           |
| esponding |           |   |           |           |           |
| ccfId     |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| provided. |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.2.4.2.3 Type: InterfaceDescription

Table 8.2.4.2.3-1: Definition of type InterfaceDescription

  ---------------------------------------------------------------------------------- ----------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------ ---------------
  Attribute name                                                                     Data type               P   Cardinality   Description                                                                                                                                      Applicability
  ipv4Addr                                                                           Ipv4Addr                O   0..1          String identifying an IPv4 address (NOTE)                                                                                                        
  ipv6Addr                                                                           Ipv6Addr                O   0..1          String identifying an IPv6 address (NOTE)                                                                                                        
  port                                                                               Port                    O   0..1          Port                                                                                                                                             
  securityMethods                                                                    array(SecurityMethod)   M   1..N          Security methods supported by the interface. It takes precedence over the security methods provided in AefProfile, for this specific interface   
  NOTE: Only one of the attributes \"ipv4Addr\" or \"ipv6Addr\" shall be included.                                                                                                                                                                                              
  ---------------------------------------------------------------------------------- ----------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------ ---------------

##### 8.2.4.2.4 Type: AefProfile

Table 8.2.4.2.4-1: Definition of type AefProfile

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| aefId     | string    | M | 1         | AEF       |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentifier |           |
+-----------+-----------+---+-----------+-----------+-----------+
| versions  | array     | M | 1..N      | API       |           |
|           | (Version) |   |           | version   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| protocol  | Protocol  | O | 0..1      | Protocol  |           |
|           |           |   |           | used by   |           |
|           |           |   |           | the API.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| d         | D         | O | 0..1      | Data      |           |
| ataFormat | ataFormat |   |           | format    |           |
|           |           |   |           | used by   |           |
|           |           |   |           | the API   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| securi    | arr       | O | 1..N      | Security  |           |
| tyMethods | ay(Securi |   |           | methods   |           |
|           | tyMethod) |   |           | supported |           |
|           |           |   |           | by the    |           |
|           |           |   |           | AEF for   |           |
|           |           |   |           | all       |           |
|           |           |   |           | in        |           |
|           |           |   |           | terfaces. |           |
|           |           |   |           | Certain   |           |
|           |           |   |           | i         |           |
|           |           |   |           | nterfaces |           |
|           |           |   |           | may have  |           |
|           |           |   |           | different |           |
|           |           |   |           | security  |           |
|           |           |   |           | methods   |           |
|           |           |   |           | supported |           |
|           |           |   |           | in the    |           |
|           |           |   |           | attribute |           |
|           |           |   |           | inte      |           |
|           |           |   |           | rfaceDesc |           |
|           |           |   |           | riptions. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| d         | string    | O | 0..1      | Domain to |           |
| omainName |           |   |           | which API |           |
|           |           |   |           | belongs   |           |
|           |           |   |           | to        |           |
|           |           |   |           |           |           |
|           |           |   |           | (NOTE 1)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| int       | array(Int | O | 1..N      | Interface |           |
| erfaceDes | erfaceDes |   |           | details   |           |
| criptions | cription) |   |           |           |           |
|           |           |   |           | (NOTE 1)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE 1:   |           |   |           |           |           |
| Only one  |           |   |           |           |           |
| of the    |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| \"dom     |           |   |           |           |           |
| ainName\" |           |   |           |           |           |
| or        |           |   |           |           |           |
| \"inter   |           |   |           |           |           |
| faceDescr |           |   |           |           |           |
| iptions\" |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| included. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 2:   |           |   |           |           |           |
| Not       |           |   |           |           |           |
| ification |           |   |           |           |           |
| or        |           |   |           |           |           |
| callback  |           |   |           |           |           |
| type of   |           |   |           |           |           |
| resource  |           |   |           |           |           |
| is not    |           |   |           |           |           |
| included. |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.2.4.2.5 Type: Version

Table 8.2.4.2.5-1: Definition of type Version

  ---------------- ------------------------ --- ------------- -------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Attribute name   Data type                P   Cardinality   Description                                                                                                                                        Applicability
  apiVersion       string                   M   1             API major version in URI (e.g. v1)                                                                                                                 
  expiry           DateTime                 O   0..1          Expiry date and time of the AEF service. This represents the planned retirement date as specified in subclause 4.3.1.5 of 3GPP TS 29.501 \[18\].   
  resources        array(Resource)          O   1..N          Resources supported by the API. It may include the custom operations with resource association.                                                    
  custOperations   array(CustomOperation)   O   1..N          Custom operations without resource association.                                                                                                    
  ---------------- ------------------------ --- ------------- -------------------------------------------------------------------------------------------------------------------------------------------------- ---------------

##### 8.2.4.2.6 Type: Resource

Table 8.2.4.2.6-1: Definition of type Resource

  ---------------- ------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Attribute name   Data type           P   Cardinality   Description                                                                                                                                                   Applicability
  resourceName     string              M   1             Resource name                                                                                                                                                 
  commType         CommunicationType   M   1             Communication type used by the API resource                                                                                                                   
  uri              string              M   1             Relative URI of the API resource, it is set as {apiSpecificResourceUriPart} part of the URI structure as defined in subclause 4.4 of 3GPP TS 29.501 \[18\].   
  custOpName       string              O   0..1          it is set as {custOpName} part of the URI structure for a custom operation associated with a resource as defined in subclause 4.4 of 3GPP TS 29.501 \[18\].   
  operations       array(Operation)    C   1..N          Supported HTTP methods for the API resource. Only applicable when the protocol in AefProfile indicates HTTP.                                                  
  description      string              O   0..1          Text description of the API resource.                                                                                                                         
  ---------------- ------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------

##### 8.2.4.2.7 Type: CustomOperation

Table 8.2.4.2.7-1: Definition of type CustomOperation

  ---------------- ------------------- --- ------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Attribute name   Data type           P   Cardinality   Description                                                                                                                                                     Applicability
  commType         CommunicationType   M   1             Communication type used by the API resource                                                                                                                     
  custOpName       string              M   1             it is set as {custOpName} part of the URI structure for a custom operation without resource association as defined in subclause 4.4 of 3GPP TS 29.501 \[18\].   
  operations       array(Operation)    C   1..N          Supported HTTP methods for the API resource. Only applicable when the protocol in AefProfile indicates HTTP.                                                    
  description      string              O   0..1          Text description of the custom operation.                                                                                                                       
  ---------------- ------------------- --- ------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------

##### 8.2.4.2.8 Type: ShareableInformation

Table 8.2.4.2.8-1: Definition of type ShareableInformation

  ------------------------------------------------------------------------------------------------ --------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Attribute name                                                                                   Data type       P   Cardinality   Description                                                                                                                                                                  Applicability
  isShareable                                                                                      boolean         M   1             Set to \"true\" indicates that the service API and/or the service API category can be shared to the list of CAPIF provider domain information. Otherwise set to \"false\".   
  capifProvDoms                                                                                    array(string)   O   1..N          List of CAPIF provider domains to which the service API information to be shared. (NOTE)                                                                                     
  NOTE: Only one CAPIF provider domain information shall be provided via the CAPIF-6e interface.                                                                                                                                                                                                                  
  ------------------------------------------------------------------------------------------------ --------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------

##### 8.2.4.2.9 Type: PublishedApiPath

Table 8.2.4.2.9-1: Definition of type PublishedApiPath

  ---------------- --------------- --- ------------- ----------------------------------------------------------------------- ---------------
  Attribute name   Data type       P   Cardinality   Description                                                             Applicability
  ccfIds           array(string)   O   1..N          A list of CCF identifiers where the service API is already published.   
  ---------------- --------------- --- ------------- ----------------------------------------------------------------------- ---------------

#### 8.2.4.3 Simple data types and enumerations

##### 8.2.4.3.1 Introduction

This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.

##### 8.2.4.3.2 Simple data types 

The simple data types defined in table 8.2.4.3.2-1 shall be supported.

Table 8.2.4.3.2-1: Simple data types

  ----------- ----------------- ------------- ---------------
  Type Name   Type Definition   Description   Applicability
  n/a                                         
  ----------- ----------------- ------------- ---------------

##### 8.2.4.3.3 Enumeration: Protocol

Table 8.2.4.3.3-1: Enumeration Protocol

  ------------------- ------------------ ---------------
  Enumeration value   Description        Applicability
  HTTP\_1\_1          HTTP version 1.1   
  HTTP\_2             HTTP version 2     
  ------------------- ------------------ ---------------

##### 8.2.4.3.4 Enumeration: DataFormat

Table 8.2.4.3.4-1: Enumeration DataFormat

  ------------------- ---------------------------------------------------- ---------------
  Enumeration value   Description                                          Applicability
  JSON                Serialization protocol: JavaScript Object Notation   
  ------------------- ---------------------------------------------------- ---------------

##### 8.2.4.3.5 Enumeration: CommunicationType

Table 8.2.4.3.5-1: Enumeration CommunicationType

  ------------------- ---------------------------------------------------- ---------------
  Enumeration value   Description                                          Applicability
  REQUEST\_RESPONSE   The communication is of the type request-response.   
  SUBSCRIBE\_NOTIFY   The communication is of the type subscribe-notify    
  ------------------- ---------------------------------------------------- ---------------

##### 8.2.4.3.6 Enumeration: SecurityMethod

Table 8.2.4.3.6-1: Enumeration SecurityMethod

  ------------------- --------------------------------------------------------------------------------- ---------------
  Enumeration value   Description                                                                       Applicability
  PSK                 Security method 1 (Using TLS-PSK) as described in 3GPP TS 33.122 \[16\].          
  PKI                 Security method 2 (Using PKI) as described in 3GPP TS 33.122 \[16\].              
  OAUTH               Security method 3 (TLS with OAuth token) as described in 3GPP TS 33.122 \[16\].   
  ------------------- --------------------------------------------------------------------------------- ---------------

##### 8.2.4.3.7 Enumeration: Operation

Table 8.2.4.3.7-1: Enumeration Operation

  ------------------- -------------------- ---------------
  Enumeration value   Description          Applicability
  GET                 HTTP GET method      
  POST                HTTP POST method     
  PUT                 HTTP PUT method      
  PATCH               HTTP PATCH method    
  DELETE              HTTP DELETE method   
  ------------------- -------------------- ---------------

### 8.2.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.2.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.

Table 8.2.6-1: Supported Features

  -------------------- ------------------------------- -------------------------------------------------------------------------------
  **Feature number**   **Feature Name**                **Description**
  1                    ApiSupportedFeaturePublishing   Indicates the support of publishing with supported feature for a service API.
  -------------------- ------------------------------- -------------------------------------------------------------------------------

8.3 CAPIF\_Events\_API
----------------------

### 8.3.1 API URI

The CAPIF\_Events\_API service shall use the CAPIF\_Events\_API.

The request URIs used in HTTP requests from the Subscriber towards the
CAPIF core function shall have the Resource URI structure as defined in
subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"capif-events\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.3.2.

### 8.3.2 Resources 

#### 8.3.2.1 Overview

Figure 8.3.2.1-1: Resource URI structure of the CAPIF\_Events\_API

Table 8.3.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.3.2.1-1: Resources and methods overview

  -------------------------------------- --------------------------------- --------------------------------- ---------------------------------------------------------------------------------
  Resource name                          Resource URI                      HTTP method or custom operation   Description

  CAPIF Events Subscriptions             /{subscriberId}/subscriptions     POST                              Creates a new individual CAPIF Event Subscription

  Individual CAPIF Events Subscription   /{subscriberId}/subscriptions/\   DELETE                            Deletes an individual CAPIF Event Subscription identified by the subscriptionId
                                         {subscriptionId}                                                    
  -------------------------------------- --------------------------------- --------------------------------- ---------------------------------------------------------------------------------

#### 8.3.2.2 Resource: CAPIF Events Subscriptions

##### 8.3.2.2.1 Description

The CAPIF Events Subscriptions resource represents all subscriptions of
aSubscriber.

##### 8.3.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/capif-events/\<apiVersion\>/{subscriberId}/subscriptions**

This resource shall support the resource URI variables defined in
table 8.3.2.2.2-1.

Table 8.3.2.2.2-1: Resource URI variables for this resource

  -------------- ----------- ----------------------
  Name           Data Type   Definition
  apiRoot        string      See clause 7.5
  apiVersion     string      See clause 8.3.1
  subscriberId   string      ID of the Subscriber
  -------------- ----------- ----------------------

##### 8.3.2.2.3 Resource Standard Methods

###### 8.3.2.2.3.1 POST

This method shall support the URI query parameters specified in
table 8.3.2.2.3.1-1.

Table 8.3.2.2.3.1-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.3.2.2.3.1-2 and the response data structures and response codes
specified in table 8.3.2.2.3.1-3.

Table 8.3.2.2.3.1-2: Data structures supported by the POST Request Body
on this resource

  ------------------- --- ------------- -------------------------------------------------------------
  Data type           P   Cardinality   Description
  EventSubscription   M   1             Create a new individual CAPIF Events Subscription resource.
  ------------------- --- ------------- -------------------------------------------------------------

Table 8.3.2.2.3.1-3: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+-------------+---------------+
| Data type     | P | Cardinality | Response    | Description   |
|               |   |             |             |               |
|               |   |             | codes       |               |
+---------------+---+-------------+-------------+---------------+
| Even          | M | 1           | 201 Created | CAPIF Events  |
| tSubscription |   |             |             | Subscription  |
|               |   |             |             | resource      |
|               |   |             |             | created       |
|               |   |             |             | s             |
|               |   |             |             | uccessfully.\ |
|               |   |             |             | \             |
|               |   |             |             | The URI of    |
|               |   |             |             | the created   |
|               |   |             |             | resource      |
|               |   |             |             | shall be      |
|               |   |             |             | returned in   |
|               |   |             |             | the           |
|               |   |             |             | \"Location\"  |
|               |   |             |             | HTTP header   |
+---------------+---+-------------+-------------+---------------+

Table 8.3.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/capif-events/\<apiVersion\>/{subscriberId}/subscriptions/{subscriptionId}
  ---------- ----------- --- ------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------

##### 8.3.2.2.4 Resource Custom Operations

None.

#### 8.3.2.3 Resource: Individual CAPIF Events Subscription

##### 8.3.2.3.1 Description

The Individual CAPIF Events Subscription resource represents an
individual event subscription of aSubscriber.

##### 8.3.2.3.2 Resource Definition

Resource URI:
**{apiRoot}/capif-events/\<apiVersion\>/{subscriberId}/subscriptions/{subscriptionId}**

This resource shall support the resource URI variables defined in
table 8.3.2.3.2-1.

Table 8.3.2.3.2-1: Resource URI variables for this resource

  ---------------- ----------- ----------------------------------------------
  Name             Data Type   Definition
  apiRoot          string      See clause 7.5
  apiVersion       string      See clause 8.3.1
  subscriberId     string      ID of the Subscriber
  subscriptionId   string      Identifies an individual Events Subscription
  ---------------- ----------- ----------------------------------------------

##### 8.3.2.3.3 Resource Standard Methods

###### 8.3.2.3.3.1 DELETE

This method shall support the URI query parameters specified in
table 8.3.2.3.3.1-1.

Table 8.3.2.3.3.1-1: URI query parameters supported by the DELETE method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.3.2.3.3.1-2 and the response data structures and response codes
specified in table 8.3.2.3.3.1-3.

Table 8.3.2.3.3.1-2: Data structures supported by the DELETE Request
Body on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.3.2.3.3.1-3: Data structures supported by the DELETE Response
Body on this resource

+-----------+---+-------------+----------------+-----------------+
| Data type | P | Cardinality | Response       | Description     |
|           |   |             |                |                 |
|           |   |             | codes          |                 |
+-----------+---+-------------+----------------+-----------------+
| n/a       |   |             | 204 No Content | The individual  |
|           |   |             |                | CAPIF Events    |
|           |   |             |                | Subscription    |
|           |   |             |                | matching the    |
|           |   |             |                | subscriptionId  |
|           |   |             |                | is deleted.     |
+-----------+---+-------------+----------------+-----------------+

##### 8.3.2.3.4 Resource Custom Operations

None.

### 8.3.3 Notifications

#### 8.3.3.1 General

The delivery of notifications shall conform to subclause 7.6.

Table 8.3.3.1-1: Notifications overview

+----------------+----------------+----------------+----------------+
| Notification   | Callback URI   | HTTP method or | Description    |
|                |                | custom         |                |
|                |                | operation      | (service       |
|                |                |                | operation)     |
+----------------+----------------+----------------+----------------+
| Event          | {notificati    | POST           | Notifies       |
| notification   | onDestination} |                | Subscriber of  |
|                |                |                | a CAPIF Event  |
+----------------+----------------+----------------+----------------+

#### 8.3.3.2 Event Notification

##### 8.3.3.2.1 Description

Event Notification is used by the CAPIF core function to notify a
Subscriber of an Event. The Subscriber shall be subscribed to such Event
Notification via the Individual CAPIF Events Subscription Resource.

##### 8.3.3.2.2 Notification definition

The POST method shall be used for Event notification and the URI shall
be the one provided by the Subscriber during the subscription to the
event.

Callback URI: **{notificationDestination}**

This method shall support the URI query parameters specified in
table 8.3.3.2.2.1-1.

Table 8.3.3.2.2-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.3.3.2.2-2 and the response data structures and response codes
specified in table 8.3.3.2.2-3.

Table 8.3.3.2.2-2: Data structures supported by the POST Request Body on
this resource

  ------------------- --- ------------- -------------------------------------------
  Data type           P   Cardinality   Description
  EventNotification   M   1             Notification information of a CAPIF Event
  ------------------- --- ------------- -------------------------------------------

Table 8.3.3.2.2-3: Data structures supported by the POST Response Body
on this resource

  ----------- --- ------------- ---------------- --------------------------------------------------
  Data type   P   Cardinality   Response codes   Description
  n/a                           204 No Content   The receipt of the Notification is acknowledged.
  ----------- --- ------------- ---------------- --------------------------------------------------

### 8.3.4 Data Model

#### 8.3.4.1 General

This subclause specifies the application data model supported by the
API. Data types listed in subclause 7.2 apply to this API.

Table 8.3.4.1-1 specifies the data types defined specifically for the
CAPIF\_Events\_API service.

Table 8.3.4.1-1: CAPIF\_Events\_API specific Data Types

  ---------------------------- ----------------- ---------------------------------------------------------------- ---------------
  Data type                    Section defined   Description                                                      Applicability
  AccessControlPolicyListExt   8.3.4.2.6         Represents the extension for access control policies             
  CAPIFEvent                   8.3.4.3.2         Describes CAPIF events                                           
  CAPIFEventDetail             8.3.4.2.5         Represents the CAPIF event detail                                
  CAPIFEventFilter             8.3.4.2.4         Represents the CAPIF event filter                                
  EventNotification            8.3.4.2.3         Represents an individual CAPIF Event Subscription Notification   
  EventSubscription            8.3.4.2.2         Represents an individual CAPIF Event Subscription resource       
  TopologyHiding               8.3.4.2.7         Represents the routing rules information of a service API.       
  ---------------------------- ----------------- ---------------------------------------------------------------- ---------------

Table 8.3.4.1-2 specifies data types re-used by the CAPIF\_Events\_API
service:

Table 8.3.4.1-2: Re-used Data Types

+----------------+----------------+----------------+----------------+
| Data type      | Reference      | Comments       | Applicability  |
+----------------+----------------+----------------+----------------+
| Report         | 3GPP TS        | Used to        | Enhanced\      |
| ingInformation |  29.523 \[26\] | indicate the   | _event\_report |
|                |                | reporting      |                |
|                |                | requirement,   |                |
|                |                | only the       |                |
|                |                | following      |                |
|                |                | information    |                |
|                |                | are applicable |                |
|                |                | for CAPIF:     |                |
|                |                |                |                |
|                |                | \- immRep      |                |
|                |                |                |                |
|                |                | \- notifMethod |                |
|                |                |                |                |
|                |                | \-             |                |
|                |                | maxReportNbr   |                |
|                |                |                |                |
|                |                | \- monDur      |                |
|                |                |                |                |
|                |                | \- repPeriod   |                |
+----------------+----------------+----------------+----------------+
| Sup            | 3GPP TS        | Used to        |                |
| portedFeatures |  29.571 \[19\] | negotiate the  |                |
|                |                | applicability  |                |
|                |                | of optional    |                |
|                |                | features       |                |
|                |                | defined in     |                |
|                |                | table 8.3.6-1. |                |
+----------------+----------------+----------------+----------------+
| Te             | 3GPP TS        | Following      |                |
| stNotification |  29.122 \[14\] | differences    |                |
|                |                | apply:         |                |
|                |                |                |                |
|                |                | \- The SCEF is |                |
|                |                | the CAPIF core |                |
|                |                | function; and  |                |
|                |                |                |                |
|                |                | \- The SCS/AS  |                |
|                |                | is the         |                |
|                |                | Subscribing    |                |
|                |                | functional     |                |
|                |                | entity.        |                |
+----------------+----------------+----------------+----------------+
| Uri            | 3GPP TS        |                |                |
|                |  29.122 \[14\] |                |                |
+----------------+----------------+----------------+----------------+
| Webs           | 3GPP TS        | Following      |                |
| ockNotifConfig |  29.122 \[14\] | differences    |                |
|                |                | apply:         |                |
|                |                |                |                |
|                |                | \- The SCEF is |                |
|                |                | the CAPIF core |                |
|                |                | function; and  |                |
|                |                |                |                |
|                |                | \- The SCS/AS  |                |
|                |                | is the         |                |
|                |                | Subscribing    |                |
|                |                | functional     |                |
|                |                | entity.        |                |
+----------------+----------------+----------------+----------------+

#### 8.3.4.2 Structured data types

##### 8.3.4.2.1 Introduction

This subclause defines the structures to be used in resource
representations.

##### 8.3.4.2.2 Type: EventSubscription

Table 8.3.4.2.2-1: Definition of type EventSubscription

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| events    | array(CA  | M | 1..N      | S         |           |
|           | PIFEvent) |   |           | ubscribed |           |
|           |           |   |           | events    |           |
+-----------+-----------+---+-----------+-----------+-----------+
| eve       | array     | O | 1..N      | S         | Enhan     |
| ntFilters | (CAPIFEve |   |           | ubscribed | ced\_even |
|           | ntFilter) |   |           | event     | t\_report |
|           |           |   |           | filters.  |           |
|           |           |   |           |           |           |
|           |           |   |           | The n^th^ |           |
|           |           |   |           | entry in  |           |
|           |           |   |           | the       |           |
|           |           |   |           | \"event   |           |
|           |           |   |           | Filters\" |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall     |           |
|           |           |   |           | c         |           |
|           |           |   |           | orrespond |           |
|           |           |   |           | to the    |           |
|           |           |   |           | n^th^     |           |
|           |           |   |           | entry in  |           |
|           |           |   |           | the       |           |
|           |           |   |           | \         |           |
|           |           |   |           | "events\" |           |
|           |           |   |           | a         |           |
|           |           |   |           | ttribute. |           |
|           |           |   |           | For event |           |
|           |           |   |           | not       |           |
|           |           |   |           | having    |           |
|           |           |   |           | event     |           |
|           |           |   |           | filter,   |           |
|           |           |   |           | an empty  |           |
|           |           |   |           | event     |           |
|           |           |   |           | filter    |           |
|           |           |   |           | entry     |           |
|           |           |   |           | without   |           |
|           |           |   |           | any       |           |
|           |           |   |           | sub-      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | provided. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| eventReq  | Re        | O | 0..1      | R         | Enhan     |
|           | portingIn |   |           | epresents | ced\_even |
|           | formation |   |           | the       | t\_report |
|           |           |   |           | reporting |           |
|           |           |   |           | req       |           |
|           |           |   |           | uirements |           |
|           |           |   |           | of the    |           |
|           |           |   |           | event     |           |
|           |           |   |           | subs      |           |
|           |           |   |           | cription. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| notif     | Uri       | M | 1         | URI where |           |
| icationDe |           |   |           | the       |           |
| stination |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | should be |           |
|           |           |   |           | delivered |           |
|           |           |   |           | to.       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| reque     | boolean   | O | 0..1      | Set to    | Notific   |
| stTestNot |           |   |           | true by   | ation\_te |
| ification |           |   |           | S         | st\_event |
|           |           |   |           | ubscriber |           |
|           |           |   |           | to        |           |
|           |           |   |           | request   |           |
|           |           |   |           | the CAPIF |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to send a |           |
|           |           |   |           | test      |           |
|           |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.6. |           |
|           |           |   |           | Set to    |           |
|           |           |   |           | false or  |           |
|           |           |   |           | omitted   |           |
|           |           |   |           | o         |           |
|           |           |   |           | therwise. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| websockNo | WebsockNo | O | 0..1      | Conf      | Notif     |
| tifConfig | tifConfig |   |           | iguration | ication\_ |
|           |           |   |           | p         | websocket |
|           |           |   |           | arameters |           |
|           |           |   |           | to set up |           |
|           |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | delivery  |           |
|           |           |   |           | over      |           |
|           |           |   |           | Websocket |           |
|           |           |   |           | protocol  |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.6. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| supporte  | Supporte  | O | 0..1      | Used to   |           |
| dFeatures | dFeatures |   |           | negotiate |           |
|           |           |   |           | the       |           |
|           |           |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API as    |           |
|           |           |   |           | described |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.8. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | provided  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | and in    |           |
|           |           |   |           | the       |           |
|           |           |   |           | response  |           |
|           |           |   |           | of        |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | resource  |           |
|           |           |   |           | creation. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.3.4.2.3 Type: EventNotification

Table 8.3.4.2.3-1: Definition of type EventNotification

  ---------------- ------------------ --- ------------- ----------------------------------------------------------------------------------------------------------- -------------------------
  Attribute name   Data type          P   Cardinality   Description                                                                                                 Applicability
  subscriptionId   string             M   1             Identifier of the subscription resource to which the notification is related -- CAPIF resource identifier   
  events           CAPIFEvent         M   1             Notifications of individual events                                                                          
  eventDetail      CAPIFEventDetail   O   0..1          Detailed information for the event.                                                                         Enhanced\_event\_report
  ---------------- ------------------ --- ------------- ----------------------------------------------------------------------------------------------------------- -------------------------

##### 8.3.4.2.4 Type: CAPIFEventFilter

Table 8.3.4.2.4-1: Definition of type CAPIFEventFilter

  ---------------- --------------- --- ------------- ---------------------------------------------------------------------------------- ---------------
  Attribute name   Data type       P   Cardinality   Description                                                                        Applicability
  apiIds           array(string)   O   1..N          API identifiers that the event subscriber wants to know in the interested event.   
  apiInvokerIds    array(string)   O   1..N          API invokers that the event subscriber wants to know in the interested event.      
  aefIds           array(string)   O   1..N          String identifying the AEF.                                                        
  ---------------- --------------- --- ------------- ---------------------------------------------------------------------------------- ---------------

##### 8.3.4.2.5 Type: CAPIFEventDetail

Table 8.3.4.2.5-1: Definition of type CAPIFEventDetail

  ------------------------ ------------------------------ --- ------------- --------------------------------------------------------- ---------------
  Attribute name           Data type                      P   Cardinality   Description                                               Applicability
  serviceAPIDescriptions   array(ServiceAPIDescription)   O   1..N          Description of the service API as published by the APF.   
  apiIds                   array(string)                  O   1..N          API identifiers.                                          
  apiInvokerIds            array(string)                  O   1..N          API invokers that are onboarded/offboarded.               
  accCtrlPolList           AccessControlPolicyListExt     O   0..1          Access control policy updated list.                       
  invocationLogs           array(InvocationLog)           O   1..N          Invocation logs                                           
  apiTopoHide              TopologyHiding                 O   0..1          Topology hiding information for a service API             
  ------------------------ ------------------------------ --- ------------- --------------------------------------------------------- ---------------

##### 8.3.4.2.6 Type: AccessControlPolicyListExt

Table 8.3.4.2.6-1: Definition of type AccessControlPolicyListExt

  ------------------------------------------------------------------------------------------------------ ----------- --- ------------- ------------------------------- ---------------
  Attribute name                                                                                         Data type   P   Cardinality   Description                     Applicability
  apiId                                                                                                  string      M   1             Identifier of the service API   
  NOTE: This data type also contains all the properties defined for AccessControlPolicyList data type.                                                                 
  ------------------------------------------------------------------------------------------------------ ----------- --- ------------- ------------------------------- ---------------

##### 8.3.4.2.7 Type: TopologyHiding

Table 8.3.4.2.7-1: Definition of type TopologyHiding

  ---------------- -------------------- --- ------------- ------------------------------- ---------------
  Attribute name   Data type            P   Cardinality   Description                     Applicability
  apiId            string               M   1             Identifier of the service API   
  routingRules     array(RoutingRule)   M   1..N          Routing rules                   
  ---------------- -------------------- --- ------------- ------------------------------- ---------------

#### 8.3.4.3 Simple data types and enumerations

##### 8.3.4.3.1 Introduction

This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.

##### 8.3.4.3.2 Simple data types 

None.

The simple data types defined in table 8.3.4.3.2-1 shall be supported.

Table 8.3.4.3.2-1: Simple data types

  ----------- ----------------- ------------- ---------------
  Type Name   Type Definition   Description   Applicability
  n/a                                         
  ----------- ----------------- ------------- ---------------

##### 8.3.4.3.3 Enumeration: CAPIFEvent

Table 8.3.4.3.3-1: Enumeration CAPIFEvent

  ------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Enumeration value                                                                                 Description                                                                                                                               Applicability
  SERVICE\_API\_AVAILABLE                                                                           Events related to the availability of service APIs after the service APIs are published.                                                  
  SERVICE\_API\_UNAVAILABLE                                                                         Events related to the unavailability of service APIs after the service APIs are unpublished.                                              
  SERVICE\_API\_UPDATE                                                                              Events related to change in service API information                                                                                       
  API\_INVOKER\_ONBOARDED                                                                           Events related to API invoker onboarded to CAPIF                                                                                          
  API\_INVOKER\_OFFBOARDED                                                                          Events related to API invoker offboarded from CAPIF                                                                                       
  SERVICE\_API\_INVOCATION\_SUCCESS                                                                 Events related to the successful invocation of service APIs                                                                               
  SERVICE\_API\_INVOCATION\_FAILURE                                                                 Events related to the failed invocation of service APIs                                                                                   
  ACCESS\_CONTROL\_POLICY\_UPDATE                                                                   Events related to the update for the access control policy related to the service APIs                                                    
  ACCESS\_CONTROL\_POLICY\_UNAVAILABLE                                                              Events related to the unavailability of the access control policy related to the service APIs (NOTE)                                      
  API\_INVOKER\_AUTHORIZATION\_REVOKED                                                              Events related to the revocation of the authorization of API invokers to access the service APIs. (NOTE)                                  
  API\_INVOKER\_UPDATED                                                                             Events related to API invoker profile updated to CAPIF.                                                                                   
  API\_TOPOLOGY\_HIDING\_CREATED                                                                    Events related to the creation or update of the API topology hiding information of the service API after the service APIs are published   
  API\_TOPOLOGY\_HIDING\_REVOKED                                                                    Events related to the revocation of the API topology information of the service API after the service APIs are unpublished                
  NOTE: The present release does not specify further details (e.g. event filters) for this event.                                                                                                                                             
  ------------------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------- ---------------

### 8.3.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.3.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.
Table 8.3.6-1 lists the supported features for CAPIF\_Events\_API.

Table 8.3.6-1: Supported Features

  -------------------- --------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  **Feature number**   **Feature Name**            **Description**
  1                    Notification\_test\_event   Testing of notification connection is supported according to subclause 7.6.
  2                    Notification\_websocket     The delivery of notifications over Websocket is supported according to subclause 7.6. This feature requires that the Notification\_test\_event feature is also supported.
  3                    Enhanced\_event\_report     This feature supports the enhanced event report including event reporting requirement and event reporting details as defined in subclause 5.4.2.2.2.
  -------------------- --------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

8.4 CAPIF\_API\_Invoker\_Management\_API
----------------------------------------

### 8.4.1 API URI

The CAPIF\_API\_Invoker\_Management\_API service shall use the
CAPIF\_API\_Invoker\_Management\_API.

The request URIs used in HTTP requests from the API invoker towards the
CAPIF core function shall have the Resource URI structure as defined in
subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"api-invoker-management\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.4.2.

### 8.4.2 Resources 

#### 8.4.2.1 Overview

Figure 8.4.2.1-1: Resource URI structure of the
CAPIF\_API\_Invoker\_Management\_API

Table 8.4.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.4.2.1-1: Resources and methods overview

  ----------------------------------- ----------------------------------- --------------------------------- ------------------------------------------------------------------------------------------------------------------
  Resource name                       Resource URI                        HTTP method or custom operation   Description
  On-boarded API Invokers             /onboardedInvokers                  POST                              On-boards a new API invoker by creating an API invoker profile
  Individual On-boarded API Invoker   /onboardedInvokers/{onboardingId}   DELETE                            Off-boards an individual API invoker by deleting the associated API invoker profile identified by {onboardingId}
                                                                          PUT                               Updates the API invoker details of an individual API invoker identified by the {onboardingId}
  ----------------------------------- ----------------------------------- --------------------------------- ------------------------------------------------------------------------------------------------------------------

#### 8.4.2.2 Resource: On-boarded API invokers

##### 8.4.2.2.1 Description

The On-boarded API Invokers resource represents all the API invokers
that are on-boarded at a given CAPIF core function.

##### 8.4.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/api-invoker-management/\<apiVersion\>/onboardedInvokers**

This resource shall support the resource URI variables defined in
table 8.4.2.2.2-1.

Table 8.4.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- ------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.4.1
  ------------ ----------- ------------------

##### 8.4.2.2.3 Resource Standard Methods

###### 8.4.2.2.3.1 POST

This method shall support the URI query parameters specified in
table 8.4.2.2.3.1-1.

Table 8.4.2.2.3.1-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.4.2.2.3.1-2 and the response data structures and response codes
specified in table 8.4.2.2.3.1-3.

Table 8.4.2.2.3.1-2: Data structures supported by the POST Request Body
on this resource

  ---------------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Data type                    P   Cardinality   Description
  APIInvokerEnrolmentDetails   M   1             Enrolment details of the API invoker including notification destination URI for any on-boarding related notifications and an optional list of APIs the API invoker intends to invoke while on-board.
  ---------------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 8.4.2.2.3.1-3: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+--------------+---------------+
| Data type     | P | Cardinality | Response     | Description   |
|               |   |             |              |               |
|               |   |             | codes        |               |
+---------------+---+-------------+--------------+---------------+
| APIInvokerEnr | M | 1           | 201 Created  | API invoker   |
| olmentDetails |   |             |              | on-boarded    |
|               |   |             |              | successfully  |
|               |   |             |              |               |
|               |   |             |              | The URI of    |
|               |   |             |              | the created   |
|               |   |             |              | resource      |
|               |   |             |              | shall be      |
|               |   |             |              | returned in   |
|               |   |             |              | the           |
|               |   |             |              | \"Location\"  |
|               |   |             |              | HTTP header.  |
|               |   |             |              | A list of     |
|               |   |             |              | APIs the API  |
|               |   |             |              | invoker is    |
|               |   |             |              | allowed to    |
|               |   |             |              | invoke while  |
|               |   |             |              | on-board may  |
|               |   |             |              | also be       |
|               |   |             |              | included as   |
|               |   |             |              | part of the   |
|               |   |             |              | APIInvokerEnr |
|               |   |             |              | olmentDetails |
|               |   |             |              | which is      |
|               |   |             |              | provided in   |
|               |   |             |              | the response  |
|               |   |             |              | body, if      |
|               |   |             |              | requested in  |
|               |   |             |              | the POST      |
|               |   |             |              | request.      |
+---------------+---+-------------+--------------+---------------+
| n/a           |   |             | 202 Accepted | The CAPIF     |
|               |   |             |              | core has      |
|               |   |             |              | accepted the  |
|               |   |             |              | Onboarding    |
|               |   |             |              | request and   |
|               |   |             |              | is processing |
|               |   |             |              | it. When      |
|               |   |             |              | processing is |
|               |   |             |              | completed,    |
|               |   |             |              | the CAPIF     |
|               |   |             |              | core function |
|               |   |             |              | will send a   |
|               |   |             |              | Noti          |
|               |   |             |              | fy\_Onboardin |
|               |   |             |              | g\_Completion |
|               |   |             |              | notification  |
|               |   |             |              | to the        |
|               |   |             |              | requesting    |
|               |   |             |              | API invoker.  |
|               |   |             |              | See           |
|               |   |             |              | subcl         |
|               |   |             |              | ause 8.4.3.2. |
+---------------+---+-------------+--------------+---------------+

Table 8.4.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/api-invoker-management/\<apiVersion\>/onboardedInvokers/{onboardingId}
  ---------- ----------- --- ------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------

###### 8.4.2.3.3.2 PUT

The PUT method allows updating the API invoker details of the onboarded
API invoker. This method shall support the URI query parameters
specified in table 8.4.2.3.3.2-1.

Table 8.4.2.3.3.2-1: URI query parameters supported by the PUT method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in the
table 8.4.2.3.3.2-2 and the response data structures and response codes
specified in the table 8.4.2.3.3.2-3.

Table 8.4.2.3.3.2-2: Data structures supported by the PUT Request Body
on this resource

  ---------------------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------
  Data type                    P   Cardinality   Description
  APIInvokerEnrolmentDetails   M   1             Updated details of the API invoker and a notification destination URI for any update request related notifications.
  ---------------------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------

Table 8.4.2.3.3.2-3: Data structures supported by the PUT Response Body
on this resource

+---------------+---+-------------+--------------+---------------+
| Data type     | P | Cardinality | Response     | Description   |
|               |   |             |              |               |
|               |   |             | codes        |               |
+---------------+---+-------------+--------------+---------------+
| APIInvokerEnr | M | 1           | 200 OK       | API invoker's |
| olmentDetails |   |             |              | information   |
|               |   |             |              | updated       |
|               |   |             |              | successfully. |
|               |   |             |              |               |
|               |   |             |              | Updated       |
|               |   |             |              | details of    |
|               |   |             |              | the API       |
|               |   |             |              | invoker as    |
|               |   |             |              | part of the   |
|               |   |             |              | A             |
|               |   |             |              | PIInvokerEnro |
|               |   |             |              | lmentDetails, |
|               |   |             |              | which is      |
|               |   |             |              | provided in   |
|               |   |             |              | the response  |
|               |   |             |              | body.         |
+---------------+---+-------------+--------------+---------------+
| n/a           |   |             | 202 Accepted | The CAPIF     |
|               |   |             |              | core has      |
|               |   |             |              | accepted the  |
|               |   |             |              | Update        |
|               |   |             |              | details       |
|               |   |             |              | request and   |
|               |   |             |              | is processing |
|               |   |             |              | it. When      |
|               |   |             |              | processing is |
|               |   |             |              | completed,    |
|               |   |             |              | the CAPIF     |
|               |   |             |              | core function |
|               |   |             |              | will send a   |
|               |   |             |              | Notify\_Updat |
|               |   |             |              | e\_Completion |
|               |   |             |              | notification  |
|               |   |             |              | to the        |
|               |   |             |              | requesting    |
|               |   |             |              | API invoker.  |
|               |   |             |              | See sub       |
|               |   |             |              | cl            |
|               |   |             |              | ause 8.4.3.3. |
+---------------+---+-------------+--------------+---------------+

##### 8.4.2.2.4 Resource Custom Operations

None.

#### 8.4.2.3 Resource: Individual On-boarded API Invoker

##### 8.4.2.3.1 Description

The Individual On-boarded API Invokers resource represents an individual
API invoker that is on-boarded at a given CAPIF core function.

##### 8.4.2.3.2 Resource Definition

Resource URI:
**{apiRoot}/api-invoker-management/\<apiVersion\>/onboardedInvokers/{onboardingId}**

This resource shall support the resource URI variables defined in
table 8.4.2.3.2-1.

Table 8.4.2.3.2-1: Resource URI variables for this resource

  -------------- ----------- ------------------------------------------------------------------
  Name           Data Type   Definition
  apiRoot        string      See clause 7.5
  apiVersion     string      See clause 8.4.1
  onboardingId   string      String identifying an individual on-boarded API invoker resource
  -------------- ----------- ------------------------------------------------------------------

##### 8.4.2.3.3 Resource Standard Methods

###### 8.4.2.3.3.1 DELETE

This method shall support the URI query parameters specified in
table 8.4.2.3.3.1-1.

Table 8.4.2.3.3.1-1: URI query parameters supported by the DELETE method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the response codes specified in
table 8.4.2.3.3.1-2 and the response data structures and response codes
specified in table 8.4.2.3.3.1-3.

Table 8.4.2.3.3.1-2: Data structures supported by the DELETE Request
Body on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.4.2.3.3.1-3: Data structures supported by the DELETE Response
Body on this resource

+-----------+---+-------------+----------------+-----------------+
| Data type | P | Cardinality | Response       | Description     |
|           |   |             |                |                 |
|           |   |             | codes          |                 |
+-----------+---+-------------+----------------+-----------------+
| n/a       |   |             | 204 No Content | The individual  |
|           |   |             |                | on-boarded API  |
|           |   |             |                | invoker         |
|           |   |             |                | matching the    |
|           |   |             |                | onboardingId is |
|           |   |             |                | deleted         |
+-----------+---+-------------+----------------+-----------------+

##### 8.3.2.3.4 Resource Custom Operations

None.

### 8.4.3 Notifications

#### 8.4.3.1 General

The delivery of notifications shall conform to subclause 7.6.

Table 8.4.3.1-1: Notifications overview

+----------------+----------------+----------------+----------------+
| Notification   | Callback URI   | HTTP method or | Description    |
|                |                | custom         |                |
|                |                | operation      | (service       |
|                |                |                | operation)     |
+----------------+----------------+----------------+----------------+
| No             | {notificati    | POST           | Notify API     |
| tify\_Onboardi | onDestination} |                | invoker of     |
| ng\_Completion |                |                | on-boarding    |
|                |                |                | result         |
+----------------+----------------+----------------+----------------+
| Notify\_Upda   | {notificati    | POST           | Notify API     |
| te\_Completion | onDestination} |                | invoker of     |
|                |                |                | update result  |
|                |                |                | details.       |
+----------------+----------------+----------------+----------------+

#### 8.4.3.2 Notify\_Onboarding\_Completion

##### 8.4.3.2.1 Description

Notify\_Onboarding\_Completion is used by the CAPIF core function to
notify an API invoker of the on-boarding result.

##### 8.4.3.2.2 Notification definition

The POST method shall be used for Notify\_Onboarding\_Completion and the
URI shall be the one provided by the API invoker during the on-boarding
request.

Callback URI: **{notificationDestination}**

This method shall support the URI query parameters specified in
table 8.4.3.2.2-1.

Table 8.4.3.2.2-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.4.3.2.2-2 and the response data structures and response codes
specified in table 8.4.3.2.2-3.

Table 8.4.3.2.2-2: Data structures supported by the POST Request Body on
this resource

  ------------------------ --- ------------- --------------------------------------
  Data type                P   Cardinality   Description
  OnboardingNotification   M   1             Notification with on-boarding result
  ------------------------ --- ------------- --------------------------------------

Table 8.4.3.2.2-3: Data structures supported by the POST Response Body
on this resource

  ----------- --- ------------- ---------------- --------------------------------------------------
  Data type   P   Cardinality   Response codes   Description
  n/a                           204 No Content   The receipt of the Notification is acknowledged.
  ----------- --- ------------- ---------------- --------------------------------------------------

#### 8.4.3.3 Notify\_Update\_Completion

##### 8.4.3.3.1 Description

Notify\_Update\_Completion is used by the CAPIF core function to notify
of the update of API Invoker's details result.

##### 8.4.3.3.2 Notification definition

The POST method shall be used for Notify\_Update\_Completion and the URI
shall be the one provided by the API invoker during the API invoker
details update request.

Callback URI: **{notificationDestination}**

This method shall support the URI query parameters specified in
table 8.4.3.3.2-1.

Table 8.4.3.3.2-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.4.3.3.2-2 and the response data structures and response codes
specified in table 8.4.3.3.2-3.

Table 8.4.3.3.2-2: Data structures supported by the POST Request Body on
this resource

  ------------------------ --- ------------- --------------------------------------------------------
  Data type                P   Cardinality   Description
  OnboardingNotification   M   1             Notification with API Invoker's details update result.
  ------------------------ --- ------------- --------------------------------------------------------

Table 8.4.3.3.2-3: Data structures supported by the POST Response Body
on this resource

  ----------- --- ------------- ---------------- --------------------------------------------------
  Data type   P   Cardinality   Response codes   Description
  n/a                           204 No Content   The receipt of the Notification is acknowledged.
  ----------- --- ------------- ---------------- --------------------------------------------------

### 8.4.4 Data Model

#### 8.4.4.1 General

This subclause specifies the application data model supported by the
API. Data types listed in subclause 7.2 apply to this API.

Table 8.4.4.1-1 specifies the data types defined specifically for the
CAPIF\_API\_Invoker\_Management\_API service.

Table 8.4.4.1-1: CAPIF\_API\_Invoker\_Management\_API specific Data
Types

  ---------------------------- ----------------- ------------------------------------------------ ---------------
  Data type                    Section defined   Description                                      Applicability
  APIInvokerEnrolmentDetails   8.4.4.2.2         API invoker\'s enrolment details                 
  APIList                      8.4.4.2.4         List of APIs                                     
  OnboardingInformation        8.4.4.2.5         On-boarding information of the API invoker       
  OnboardingNotification       8.4.4.2.7         Notification with on-boarding or update result   
  ---------------------------- ----------------- ------------------------------------------------ ---------------

Table 8.4.4.1-2 specifies data types re-used by the
CAPIF\_API\_Invoker\_Management\_API service.

Table 8.4.4.1-2: Re-used Data Types

  ----------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------
  Data type               Reference               Comments                                                                             Applicability
  ServiceAPIDescription   Subclause 8.1.4.2.2                                                                                          
  Uri                     3GPP TS 29.122 \[14\]                                                                                        
  TestNotification        3GPP TS 29.122 \[14\]                                                                                        
  WebsockNotifConfig      3GPP TS 29.122 \[14\]                                                                                        
  SupportedFeatures       3GPP TS 29.571 \[19\]   Used to negotiate the applicability of optional features defined in table 8.4.6-1.   
  ----------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------

#### 8.4.4.2 Structured data types

##### 8.4.4.2.1 Introduction

##### 8.4.4.2.2 Type: APIInvokerEnrolmentDetails

Table 8.4.4.2.2-1: Definition of type APIInvokerEnrolmentDetails

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | string    | O | 0..1      | API       |           |
| InvokerId |           |   |           | invoker   |           |
|           |           |   |           | ID        |           |
|           |           |   |           | assigned  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | while     |           |
|           |           |   |           | on        |           |
|           |           |   |           | -boarding |           |
|           |           |   |           | the API   |           |
|           |           |   |           | invoker.  |           |
|           |           |   |           | Shall not |           |
|           |           |   |           | be        |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | from the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | to the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function, |           |
|           |           |   |           | to        |           |
|           |           |   |           | on-board  |           |
|           |           |   |           | itself.   |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in all    |           |
|           |           |   |           | other     |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | requests  |           |
|           |           |   |           | and       |           |
|           |           |   |           | r         |           |
|           |           |   |           | esponses. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| onb       | Onb       | M | 1         | On        |           |
| oardingIn | oardingIn |   |           | -boarding |           |
| formation | formation |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | about the |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | necessary |           |
|           |           |   |           | for the   |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to        |           |
|           |           |   |           | on-board  |           |
|           |           |   |           | the API   |           |
|           |           |   |           | invoker.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| notif     | Uri       | M | 1         | URI where |           |
| icationDe |           |   |           | the       |           |
| stination |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | should be |           |
|           |           |   |           | delivered |           |
|           |           |   |           | to.       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| reque     | boolean   | O | 0..1      | Set to    | Notific   |
| stTestNot |           |   |           | true by   | ation\_te |
| ification |           |   |           | S         | st\_event |
|           |           |   |           | ubscriber |           |
|           |           |   |           | to        |           |
|           |           |   |           | request   |           |
|           |           |   |           | the CAPIF |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to send a |           |
|           |           |   |           | test      |           |
|           |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in in     |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.6. |           |
|           |           |   |           | Set to    |           |
|           |           |   |           | false or  |           |
|           |           |   |           | omitted   |           |
|           |           |   |           | o         |           |
|           |           |   |           | therwise. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| websockNo | WebsockNo | O | 0..1      | Conf      | Notif     |
| tifConfig | tifConfig |   |           | iguration | ication\_ |
|           |           |   |           | p         | websocket |
|           |           |   |           | arameters |           |
|           |           |   |           | to set up |           |
|           |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | delivery  |           |
|           |           |   |           | over      |           |
|           |           |   |           | Websocket |           |
|           |           |   |           | protocol  |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.6. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiList   | APIList   | O | 0..1      | A list of |           |
|           |           |   |           | APIs.     |           |
|           |           |   |           | When      |           |
|           |           |   |           | included  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | request   |           |
|           |           |   |           | message,  |           |
|           |           |   |           | it lists  |           |
|           |           |   |           | the APIs  |           |
|           |           |   |           | that the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | intends   |           |
|           |           |   |           | to invoke |           |
|           |           |   |           | while     |           |
|           |           |   |           | onboard   |           |
|           |           |   |           | or API    |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | update.   |           |
|           |           |   |           | When      |           |
|           |           |   |           | included  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | response  |           |
|           |           |   |           | message,  |           |
|           |           |   |           | it lists  |           |
|           |           |   |           | the APIs  |           |
|           |           |   |           | that the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | is        |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | to invoke |           |
|           |           |   |           | while     |           |
|           |           |   |           | onboard   |           |
|           |           |   |           | or API    |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | update.   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | string    | O | 0..1      | Generic   |           |
| InvokerIn |           |   |           | in        |           |
| formation |           |   |           | formation |           |
|           |           |   |           | related   |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | such as   |           |
|           |           |   |           | details   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | device or |           |
|           |           |   |           | the       |           |
|           |           |   |           | app       |           |
|           |           |   |           | lication. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| supporte  | Supporte  | O | 0..1      | Used to   |           |
| dFeatures | dFeatures |   |           | negotiate |           |
|           |           |   |           | the       |           |
|           |           |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API as    |           |
|           |           |   |           | described |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.8. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | provided  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | and in    |           |
|           |           |   |           | the       |           |
|           |           |   |           | response  |           |
|           |           |   |           | of        |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | resource  |           |
|           |           |   |           | creation. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.4.4.2.3 Type: Void

##### 8.4.4.2.4 Type: APIList

Table 8.4.4.2.4-1: Definition of type APIList

  ------------------------ ------------------------------ --- ------------- -------------------------------- ---------------
  Attribute name           Data type                      P   Cardinality   Description                      Applicability
  serviceAPIDescriptions   array(ServiceAPIDescription)   O   1..N          Definition of the service API.   
  ------------------------ ------------------------------ --- ------------- -------------------------------- ---------------

##### 8.4.4.2.5 Type: OnboardingInformation

Table 8.4.4.2.5-1: Definition of type OnboardingInformation

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| a         | string    | M | 1         | Public    |           |
| piInvoker |           |   |           | Key of    |           |
| PublicKey |           |   |           | API       |           |
|           |           |   |           | Invoker   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | string    | O | 0..1      | API       |           |
| InvokerCe |           |   |           | i         |           |
| rtificate |           |   |           | nvoker\'s |           |
|           |           |   |           | generic   |           |
|           |           |   |           | client    |           |
|           |           |   |           | cer       |           |
|           |           |   |           | tificate. |           |
|           |           |   |           |           |           |
|           |           |   |           | The       |           |
|           |           |   |           | subject   |           |
|           |           |   |           | field in  |           |
|           |           |   |           | the       |           |
|           |           |   |           | ce        |           |
|           |           |   |           | rtificate |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | encoded   |           |
|           |           |   |           | with API  |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | ID as     |           |
|           |           |   |           | Common    |           |
|           |           |   |           | Name as   |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | IET       |           |
|           |           |   |           | F RFC 528 |           |
|           |           |   |           | 0 \[29\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| onboard   | string    | O | 0..1      | API       |           |
| ingSecret |           |   |           | i         |           |
|           |           |   |           | nvoker\'s |           |
|           |           |   |           | o         |           |
|           |           |   |           | nboarding |           |
|           |           |   |           | secret,   |           |
|           |           |   |           | provided  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.4.4.2.6 Type: Void 

##### 8.4.4.2.7 Type: OnboardingNotification

Table 8.4.4.2.7-1: Definition of type OnboardingNotification

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| result    | boolean   | M | 1         | Set to    |           |
|           |           |   |           | \"true\"  |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | on-       |           |
|           |           |   |           | boarding. |           |
|           |           |   |           | Otherwise |           |
|           |           |   |           | set to    |           |
|           |           |   |           | \"false\" |           |
+-----------+-----------+---+-----------+-----------+-----------+
| resourc   | Uri       | C | 1         | URI       |           |
| eLocation |           |   |           | pointing  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | new CAPIF |           |
|           |           |   |           | resource  |           |
|           |           |   |           | created   |           |
|           |           |   |           | as a      |           |
|           |           |   |           | result of |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | on-       |           |
|           |           |   |           | boarding. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | if        |           |
|           |           |   |           | \         |           |
|           |           |   |           | 'result\' |           |
|           |           |   |           | attribute |           |
|           |           |   |           | is set to |           |
|           |           |   |           | \"true\". |           |
|           |           |   |           | Otherwise |           |
|           |           |   |           | it shall  |           |
|           |           |   |           | not be    |           |
|           |           |   |           | present.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiInvok  | APIInvok  | C | 1         | Enrolment |           |
| erEnrolme | erEnrolme |   |           | details   |           |
| ntDetails | ntDetails |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | which are |           |
|           |           |   |           | verified  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | admi      |           |
|           |           |   |           | nistrator |           |
|           |           |   |           | or API    |           |
|           |           |   |           | ma        |           |
|           |           |   |           | nagement. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | if        |           |
|           |           |   |           | \         |           |
|           |           |   |           | 'result\' |           |
|           |           |   |           | attribute |           |
|           |           |   |           | is set to |           |
|           |           |   |           | \"true\". |           |
|           |           |   |           | Otherwise |           |
|           |           |   |           | it shall  |           |
|           |           |   |           | not be    |           |
|           |           |   |           | present.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiList   | APIList   | O | 0..1      | List of   |           |
|           |           |   |           | APIs API  |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | is        |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | to        |           |
|           |           |   |           | access.   |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | may be    |           |
|           |           |   |           | present   |           |
|           |           |   |           | if        |           |
|           |           |   |           | \         |           |
|           |           |   |           | 'result\' |           |
|           |           |   |           | attribute |           |
|           |           |   |           | is set to |           |
|           |           |   |           | \"true\". |           |
|           |           |   |           | Otherwise |           |
|           |           |   |           | it shall  |           |
|           |           |   |           | not be    |           |
|           |           |   |           | present.  |           |
+-----------+-----------+---+-----------+-----------+-----------+

#### 8.4.4.3 Simple data types and enumerations

None.

### 8.4.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.4.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.
Table 8.4.6-1 lists the supported features for
CAPIF\_API\_Invoker\_Management\_API.

Table 8.4.6-1: Supported Features

  -------------------- --------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  **Feature number**   **Feature Name**            **Description**
  1                    Notification\_test\_event   Testing of notification connection is supported according to subclause 7.6.
  2                    Notification\_websocket     The delivery of notifications over Websocket is supported according to subclause 7.6. This feature requires that the Notification\_test\_event feature is also supported.
  -------------------- --------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

8.5 CAPIF\_Security\_API
------------------------

### 8.5.1 API URI

The CAPIF\_Security\_API service shall use the CAPIF\_Security\_API.

The request URIs used in HTTP requests from the API invoker or the API
exposing function towards the CAPIF core function shall have the
Resource URI structure as defined in subclause 7.5 with the following
clarifications:

\- The \<apiName\> shall be \"capif-security\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.5.2.

### 8.5.2 Resources 

#### 8.5.2.1 Overview

Figure 8.5.2.1-1: Resource URI structure of the CAPIF\_Security\_API

Table 8.5.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.5.2.1-1: Resources and methods overview

  -------------------------------- ---------------------------------------- --------------------------------- -----------------------------------------------------------------------
  Resource name                    Resource URI                             HTTP method or custom operation   Description
  Trusted API invokers             /trustedInvokers                         n/a                               
  Individual trusted API invoker   /trustedInvokers/{apiInvokerId}          GET                               Retrieve authentication information of an API invoker
                                                                            PUT                               Create a security context for individual API invoker
                                                                            DELETE                            Revoke the authorization of the API invoker
                                   /trustedInvokers/{apiInvokerId}/update   update (POST)                     Update the security context (e.g. re-negotiate the security methods).
                                   /trustedInvokers/{apiInvokerId}/delete   delete (POST)                     Revoke the authorization of the API invoker for some APIs
                                   /securities/{securityId}/token           token (POST)                      Obtain the OAuth 2.0 authorization information
  -------------------------------- ---------------------------------------- --------------------------------- -----------------------------------------------------------------------

#### 8.5.2.2 Resource: Trusted API invokers

##### 8.5.2.2.1 Description

The Trusted API Invokers resource represents all the API invokers that
are trusted by the CAPIF core function and have received authentication
information from the CAPIF core function.

##### 8.5.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/capif-security/\<apiVersion\>/trustedInvokers**

This resource shall support the resource URI variables defined in
table 8.5.2.2.2-1.

Table 8.5.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- ------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.5.1
  ------------ ----------- ------------------

##### 8.5.2.2.3 Resource Standard Methods

###### 8.5.2.2.3.1 Void

##### 8.5.2.2.4 Resource Custom Operations

None.

#### 8.5.2.3 Resource: Individual trusted API invokers

##### 8.5.2.3.1 Description

The Individual trusted API Invokers resource represents an individual
API invokers that is trusted by the CAPIF core function and have
received security related information from the CAPIF core function.

##### 8.5.2.3.2 Resource Definition

Resource URI:
**{apiRoot}/capif-security/\<apiVersion\>/trustedInvokers/{apiInvokerId}**

This resource shall support the resource URI variables defined in
table 8.5.2.3.2-1.

Table 8.5.2.3.2-1: Resource URI variables for this resource

  -------------- ----------- --------------------------------------
  Name           Data Type   Definition
  apiRoot        string      See clause 7.5
  apiVersion     string      See clause 8.5.1
  apiInvokerId   string      Identifies an individual API invoker
  -------------- ----------- --------------------------------------

##### 8.5.2.3.3 Resource Standard Methods

###### 8.5.2.3.3.1 GET

This method shall support the URI query parameters specified in
table 8.5.2.3.3.1-1.

Table 8.5.2.3.3.1-1: URI query parameters supported by the GET method on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| aut             | boolean   | O | 0..1        | When set to     |
| henticationInfo |           |   |             | \'true\', it    |
|                 |           |   |             | indicates the   |
|                 |           |   |             | CAPIF core      |
|                 |           |   |             | function to     |
|                 |           |   |             | send the        |
|                 |           |   |             | authentication  |
|                 |           |   |             | information of  |
|                 |           |   |             | the API         |
|                 |           |   |             | invoker. Set to |
|                 |           |   |             | false or        |
|                 |           |   |             | omitted         |
|                 |           |   |             | otherwise.      |
|                 |           |   |             |                 |
|                 |           |   |             | (NOTE)          |
+-----------------+-----------+---+-------------+-----------------+
| au              | boolean   | O | 0..1        | When set to     |
| thorizationInfo |           |   |             | \'true\', it    |
|                 |           |   |             | indicates the   |
|                 |           |   |             | CAPIF core      |
|                 |           |   |             | function to     |
|                 |           |   |             | send the        |
|                 |           |   |             | authorization   |
|                 |           |   |             | information of  |
|                 |           |   |             | the API         |
|                 |           |   |             | invoker. Set to |
|                 |           |   |             | false or        |
|                 |           |   |             | omitted         |
|                 |           |   |             | otherwise.      |
|                 |           |   |             |                 |
|                 |           |   |             | (NOTE)          |
+-----------------+-----------+---+-------------+-----------------+
| NOTE: The query |           |   |             |                 |
| parameters      |           |   |             |                 |
| \"authe         |           |   |             |                 |
| nticationInfo\" |           |   |             |                 |
| and             |           |   |             |                 |
| \"auth          |           |   |             |                 |
| orizationInfo\" |           |   |             |                 |
| do not follow   |           |   |             |                 |
| the related     |           |   |             |                 |
| naming          |           |   |             |                 |
| convention      |           |   |             |                 |
| defined in      |           |   |             |                 |
| s               |           |   |             |                 |
| ubclause 7.5.1. |           |   |             |                 |
| These query     |           |   |             |                 |
| parameters are  |           |   |             |                 |
| however kept as |           |   |             |                 |
| currently       |           |   |             |                 |
| defined in this |           |   |             |                 |
| specification   |           |   |             |                 |
| for backward    |           |   |             |                 |
| compatibility   |           |   |             |                 |
| considerations. |           |   |             |                 |
+-----------------+-----------+---+-------------+-----------------+

This method shall support the request data structures specified in
table 8.5.2.3.3.1-2 and the response data structures and response codes
specified in table 8.5.2.3.3.1-3.

Table 8.5.2.3.3.1-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.5.2.3.3.1-3: Data structures supported by the GET Response Body
on this resource

+-----------------+---+-------------+----------+-----------------+
| Data type       | P | Cardinality | Response | Description     |
|                 |   |             |          |                 |
|                 |   |             | codes    |                 |
+-----------------+---+-------------+----------+-----------------+
| ServiceSecurity | M | 1           | 200 OK   | The security    |
|                 |   |             |          | related         |
|                 |   |             |          | information of  |
|                 |   |             |          | the API Invoker |
|                 |   |             |          | based on the    |
|                 |   |             |          | request from    |
|                 |   |             |          | the API         |
|                 |   |             |          | exposing        |
|                 |   |             |          | function.       |
+-----------------+---+-------------+----------+-----------------+

###### 8.5.2.3.3.2 DELETE

This method shall support the URI query parameters specified in
table 8.5.2.3.3.2-1.

Table 8.5.2.3.3.2-1: URI query parameters supported by the DELETE method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.5.2.3.3.2-2 and the response data structures and response codes
specified in table 8.5.2.3.3.2-3.

Table 8.5.2.3.3.2-2: Data structures supported by the DELETE Request
Body on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.5.2.3.3.2-3: Data structures supported by the DELETE Response
Body on this resource

+-----------+---+-------------+----------------+-----------------+
| Data type | P | Cardinality | Response       | Description     |
|           |   |             |                |                 |
|           |   |             | codes          |                 |
+-----------+---+-------------+----------------+-----------------+
| n/a       |   |             | 204 No Content | Authorization   |
|           |   |             |                | of the API      |
|           |   |             |                | invoker         |
|           |   |             |                | revoked, and a  |
|           |   |             |                | notification is |
|           |   |             |                | sent to the API |
|           |   |             |                | invoker as      |
|           |   |             |                | specified in    |
|           |   |             |                | su              |
|           |   |             |                | bclause 8.5.3.2 |
+-----------+---+-------------+----------------+-----------------+

###### 8.5.2.3.3.3 PUT

This method shall support the URI query parameters specified in
table 8.5.2.3.3.3-1.

Table 8.5.2.3.3.3-1: URI query parameters supported by the PUT method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.5.2.3.3.3-2 and the response data structures and response codes
specified in table 8.5.2.3.3.3-3.

Table 8.5.2.3.3.3-2: Data structures supported by the PUT Request Body
on this resource

  ----------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Data type         P   Cardinality   Description

  ServiceSecurity   M   1             Security method request from the API invoker to the CAPIF core function. The request indicates a list of service APIs and a preferred method of security for the service APIs.\
                                      \
                                      The request also includes a notification destination URI for security related notifications.
  ----------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 8.5.2.3.3.3-3: Data structures supported by the PUT Response Body
on this resource

+---------------+---+-------------+-------------+---------------+
| Data type     | P | Cardinality | Response    | Description   |
|               |   |             |             |               |
|               |   |             | codes       |               |
+---------------+---+-------------+-------------+---------------+
| Se            | M | 1           | 201 Created | Security      |
| rviceSecurity |   |             |             | method from   |
|               |   |             |             | the CAPIF     |
|               |   |             |             | core function |
|               |   |             |             | to the API    |
|               |   |             |             | invoker is    |
|               |   |             |             | based on the  |
|               |   |             |             | received      |
|               |   |             |             | request. The  |
|               |   |             |             | response      |
|               |   |             |             | indicates the |
|               |   |             |             | security      |
|               |   |             |             | method to be  |
|               |   |             |             | used for the  |
|               |   |             |             | service APIs\ |
|               |   |             |             | \             |
|               |   |             |             | The URI of    |
|               |   |             |             | the created   |
|               |   |             |             | resource      |
|               |   |             |             | shall be      |
|               |   |             |             | returned in   |
|               |   |             |             | the           |
|               |   |             |             | \"Location\"  |
|               |   |             |             | HTTP header.  |
+---------------+---+-------------+-------------+---------------+

Table 8.5.2.3.3.3-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/capif-security/v1/trustedInvokers/{apiInvokerId}
  ---------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------------------------------------------

##### 8.5.2.3.4 Resource Custom Operations

###### 8.5.2.3.4.1 Overview

Table 8.5.2.3.4.1-1: Custom operations

  -------------------- ---------------------------------------- -------------------- ------------------------------------------------------------------------
  **Operation name**   Custom operation URI                     Mapped HTTP method   Description
  update               /trustedInvokers/{apiInvokerId}/update   POST                 Update the security instance (e.g. re-negotiate the security methods).
  delete               /trustedInvokers/{apiInvokerId}/delete   POST                 Revoke the authorization of the API invoker for some APIs
  token                /securities/{securityId}/token           POST                 Obtain the OAuth 2.0 authorization information
  -------------------- ---------------------------------------- -------------------- ------------------------------------------------------------------------

###### 8.5.2.3.4.2 Operation: update

####### 8.5.2.3.4.2.1 Description

This custom operation updates an existing Individual security instance
resource in the CAPIF core function.

####### 8.5.2.3.4.2.2 Operation Definition

This method shall support the URI query parameters specified in
table 8.5.2.3.4.2.2-1.

Table 8.5.2.3.4.2.2-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This operation shall support the request data structures specified in
table 8.5.2.3.4.2.2-2 and the response data structure and response codes
specified in table 8.5.2.3.4.2.2-3.

Table 8.5.2.3.4.2.2-2: Data structures supported by the POST Request
Body on this resource

  ----------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Data type         P   Cardinality   Description

  ServiceSecurity   M   1             Security method request from the API invoker to the CAPIF core function. The request indicates a list of service APIs and a preferred method of security for the service APIs.\
                                      \
                                      The request also includes a notification destination URI for security related notifications.
  ----------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 8.5.2.3.4.2.2-3: Data structures supported by the POST Response
Body on this resource

  ----------------- --- ------------- ---------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Data type         P   Cardinality   Response codes   Description
  ServiceSecurity   M   1             200 OK           Security method from the CAPIF core function to the API invoker is based on the received request. The response indicates the security method to be used for the service APIs
  ----------------- --- ------------- ---------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

###### 8.5.2.3.4.3 Operation: delete

####### 8.5.2.3.4.3.1 Description

This custom operation revokes authorization for some service APIs of an
existing Individual security instance resource in the CAPIF core
function.

####### 8.5.2.3.4.3.2 Operation Definition

This method shall support the URI query parameters specified in
table 8.5.2.3.4.3.2-1.

Table 8.5.2.3.4.3.2-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This operation shall support the request data structures specified in
table 8.5.2.3.4.3.2-2 and the response data structure and response codes
specified in table 8.5.2.3.4.3.2-3.

Table 8.5.2.3.4.3.2-2: Data structures supported by the POST Request
Body on this resource

  ---------------------- --- ------------- -------------------------------------------------------------------------------------------------------
  Data type              P   Cardinality   Description
  SecurityNotification   M   1             It includes a list of API identifiers for which authorization needs to be revoked for an API invoker.
  ---------------------- --- ------------- -------------------------------------------------------------------------------------------------------

Table 8.5.2.3.4.3.2-3: Data structures supported by the POST Response
Body on this resource

+-----------+---+-------------+----------------+-----------------+
| Data type | P | Cardinality | Response codes | Description     |
+-----------+---+-------------+----------------+-----------------+
| n/a       |   |             | 204 No Content | Successful      |
|           |   |             |                | case.           |
|           |   |             |                |                 |
|           |   |             |                | The CAPIF core  |
|           |   |             |                | function        |
|           |   |             |                | revoked the     |
|           |   |             |                | authorization   |
|           |   |             |                | of the API      |
|           |   |             |                | invoker for the |
|           |   |             |                | requested APIs. |
+-----------+---+-------------+----------------+-----------------+

###### 8.5.2.3.4.4 Operation: token

####### 8.5.2.3.4.4.1 Description

This custom operation obtains OAuth 2.0 authorization information from
an existing Individual security instance resource in the CAPIF core
function.

####### 8.5.2.3.4.4.2 Operation Definition

This method shall support the URI query parameters specified in
table 8.5.2.3.4.4.2-1.

Table 8.5.2.3.4.4.2-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This operation shall support the request data structures specified in
table 8.5.2.3.4.4.2-2 and the response data structure and response codes
specified in table 8.5.2.3.4.4.2-3.

Table 8.5.2.3.4.4.2-2: Data structures supported by the POST Request
Body on this resource

  ---------------- --- ------------- -----------------------------------------------------------------------------
  Data type        P   Cardinality   Description
  AccessTokenReq   M   1             This IE shall contain the request information for the access token request.
  ---------------- --- ------------- -----------------------------------------------------------------------------

Table 8.5.2.3.4.4.2-3: Data structures supported by the POST Response
Body on this resource

  ---------------- --- ------------- ----------------- --------------------------------------------------------------
  Data type        P   Cardinality   Response codes    Description
  AccessTokenRsp   M   1             200 OK            This IE shall contain the access token response information.
  AccessTokenErr   M   1             400 Bad Request   See IETF RFC 6749 \[23\] subclause 5.2.
  ---------------- --- ------------- ----------------- --------------------------------------------------------------

### 8.5.3 Notifications

#### 8.5.3.1 General

The delivery of notifications shall conform to subclause 7.6.

Table 8.5.3.1-1: Notifications overview

+----------------+----------------+----------------+----------------+
| Notification   | Callback URI   | HTTP method or | Description    |
|                |                | custom         |                |
|                |                | operation      | (service       |
|                |                |                | operation)     |
+----------------+----------------+----------------+----------------+
| Authorization  | {notificati    | POST           | Notify API     |
| revoked        | onDestination} |                | invoker that   |
| notification   |                |                | the            |
|                |                |                | authorization  |
|                |                |                | rights are     |
|                |                |                | revoked by the |
|                |                |                | API exposing   |
|                |                |                | function.      |
+----------------+----------------+----------------+----------------+

#### 8.5.3.2 Authorization revoked notification

##### 8.5.3.2.1 Description

Authorization revoked notification is used by the CAPIF core function to
notify an API invoker that the authorization rights are revoked by the
API exposing function.

##### 8.5.3.2.2 Notification definition

The POST method shall be used for Authorization revoked notification and
the URI shall be the one provided by the API invoker during the
Obtain\_Security\_Method service operation.

Callback URI: **{notificationDestination}**

This method shall support the URI query parameters specified in
table 8.5.3.2.2-1.

Table 8.5.3.2.2-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.5.3.2.2-2 and the response data structures and response codes
specified in table 8.5.3.2.2-3.

Table 8.5.3.2.2-2: Data structures supported by the POST Request Body on
this resource

  ---------------------- --- ------------- -----------------------------------------------------------------
  Data type              P   Cardinality   Description
  SecurityNotification   M   1             Notification with information related to revoked authorization.
  ---------------------- --- ------------- -----------------------------------------------------------------

Table 8.5.3.2.2-3: Data structures supported by the POST Response Body
on this resource

  ----------- --- ------------- ---------------- --------------------------------------------------
  Data type   P   Cardinality   Response codes   Description
  n/a                           204 No Content   The receipt of the Notification is acknowledged.
  ----------- --- ------------- ---------------- --------------------------------------------------

### 8.5.4 Data Model

#### 8.5.4.1 General

This subclause specifies the application data model supported by the
API.

Table 8.5.4.1-1 specifies the data types defined for the CAPIF service
based interface protocol.

Table 8.5.4.1-1: Specific Data Types

  ---------------------- ----------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Data type              Section defined   Description                                                                                                                                                                                                                                                                      Applicability
  AccessTokenClaims      8.5.4.2.6         The claims data structure for the access token.                                                                                                                                                                                                                                  
  AccessTokenReq         8.5.4.2.7         Data type for carrying information related to access token request.                                                                                                                                                                                                              
  AccessTokenRsp         8.5.4.2.8         Data type for carrying information related to access token response.                                                                                                                                                                                                             
  SecurityInformation    8.5.4.2.3         Interface details and the security method                                                                                                                                                                                                                                        
  SecurityNotification   8.5.4.2.5         Revoked authorization notification details                                                                                                                                                                                                                                       
  ServiceSecurity        8.5.4.2.2         Details of the security method for each service API interface. When included by the API invoker, it shall indicate the preferred method of security. When included by the CAPIF core function, it shall indicate the security method to be used for the service API interface.   
  ---------------------- ----------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------

Table 8.5.4.1-2 specifies data types re-used by the CAPIF\_Security\_API
service based interface:

Table 8.5.4.1-2: Re-used Data Types

+----------------+----------------+----------------+---------------+
| Data type      | Reference      | Comments       | Applicability |
+----------------+----------------+----------------+---------------+
| DurationSec    | 3GPP TS        | Duration in    |               |
|                |  29.122 \[14\] | seconds        |               |
+----------------+----------------+----------------+---------------+
| SecurityMethod | Subcl          | Security       |               |
|                | ause 8.2.4.3.6 | method (e.g.   |               |
|                |                | PKI)           |               |
+----------------+----------------+----------------+---------------+
| Te             | 3GPP TS        | Following      |               |
| stNotification |  29.122 \[14\] | differences    |               |
|                |                | apply:         |               |
|                |                |                |               |
|                |                | \- The SCEF is |               |
|                |                | the CAPIF core |               |
|                |                | function; and  |               |
|                |                |                |               |
|                |                | \- The SCS/AS  |               |
|                |                | is the         |               |
|                |                | Subscribing    |               |
|                |                | functional     |               |
|                |                | entity.        |               |
+----------------+----------------+----------------+---------------+
| Uri            | 3GPP TS        |                |               |
|                |  29.122 \[14\] |                |               |
+----------------+----------------+----------------+---------------+
| Webs           | 3GPP TS        | Following      |               |
| ockNotifConfig |  29.122 \[14\] | differences    |               |
|                |                | apply:         |               |
|                |                |                |               |
|                |                | \- The SCEF is |               |
|                |                | the CAPIF core |               |
|                |                | function; and  |               |
|                |                |                |               |
|                |                | \- The SCS/AS  |               |
|                |                | is the         |               |
|                |                | Subscribing    |               |
|                |                | functional     |               |
|                |                | entity.        |               |
+----------------+----------------+----------------+---------------+
| Sup            | 3GPP TS        | Used to        |               |
| portedFeatures |  29.571 \[19\] | negotiate the  |               |
|                |                | applicability  |               |
|                |                | of optional    |               |
|                |                | features       |               |
|                |                | defined in     |               |
|                |                | table 8.5.6-1. |               |
+----------------+----------------+----------------+---------------+

#### 8.5.4.2 Structured data types

##### 8.5.4.2.1 Introduction

##### 8.5.4.2.2 Type: ServiceSecurity

Table 8.5.4.2.2-1: Definition of type ServiceSecurity

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| sec       | array(Se  | M | 1..N      | Security  |           |
| urityInfo | curityInf |   |           | in        |           |
|           | ormation) |   |           | formation |           |
|           |           |   |           | for each  |           |
|           |           |   |           | API       |           |
|           |           |   |           | i         |           |
|           |           |   |           | nterface. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| notif     | Uri       | M | 1         | URI where |           |
| icationDe |           |   |           | the       |           |
| stination |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | should be |           |
|           |           |   |           | delivered |           |
|           |           |   |           | to.       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| reque     | boolean   | O | 0..1      | Set to    | Notific   |
| stTestNot |           |   |           | true by   | ation\_te |
| ification |           |   |           | API       | st\_event |
|           |           |   |           | invoker   |           |
|           |           |   |           | to        |           |
|           |           |   |           | request   |           |
|           |           |   |           | the CAPIF |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to send a |           |
|           |           |   |           | test      |           |
|           |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in in     |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.6. |           |
|           |           |   |           | Set to    |           |
|           |           |   |           | false or  |           |
|           |           |   |           | omitted   |           |
|           |           |   |           | o         |           |
|           |           |   |           | therwise. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| websockNo | WebsockNo | O | 0..1      | Conf      | Notif     |
| tifConfig | tifConfig |   |           | iguration | ication\_ |
|           |           |   |           | p         | websocket |
|           |           |   |           | arameters |           |
|           |           |   |           | to set up |           |
|           |           |   |           | not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | delivery  |           |
|           |           |   |           | over      |           |
|           |           |   |           | Websocket |           |
|           |           |   |           | protocol  |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.6. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| supporte  | Supporte  | O | 0..1      | Used to   |           |
| dFeatures | dFeatures |   |           | negotiate |           |
|           |           |   |           | the       |           |
|           |           |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API as    |           |
|           |           |   |           | described |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.8. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | provided  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | and in    |           |
|           |           |   |           | the       |           |
|           |           |   |           | response  |           |
|           |           |   |           | of        |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | resource  |           |
|           |           |   |           | creation. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.5.4.2.3 Type: SecurityInformation

Table 8.5.4.2.3-1: Definition of type SecurityInformation

  -------------------------------------------------------------------------------------------- ----------------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  Attribute name                                                                               Data type               P   Cardinality   Description                                                                                                                                                                                                                                                                                                Applicability
  interfaceDetails                                                                             InterfaceDescription    O   0..1          Details of the interface (NOTE)                                                                                                                                                                                                                                                                            
  aefId                                                                                        string                  O   0..1          AEF identifier (NOTE)                                                                                                                                                                                                                                                                                      
  prefSecurityMethods                                                                          array(SecurityMethod)   M   1..N          Security methods preferred by the API invoker for the API interface                                                                                                                                                                                                                                        
  selSecurityMethod                                                                            SecurityMethod          O   0..1          Supplied by the CAPIF core function, it indicates the selected security method for the API interface. If it is not provided, it means no common supported security method by the API invoker and the AEF, or the selected security method is not allowed by the local policy in the CAPIF core function.   
  authenticationInfo                                                                           string                  O   0..1          Authentication related information                                                                                                                                                                                                                                                                         
  authorizationInfo                                                                            string                  O   0..1          Authorization related information                                                                                                                                                                                                                                                                          
  NOTE:      Only one of the attributes \"aefId\" or \"interfaceDetails\" shall be included.                                                                                                                                                                                                                                                                                                                                                        
  -------------------------------------------------------------------------------------------- ----------------------- --- ------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------

##### 8.5.4.2.4 Void

##### 8.5.4.2.5 Type: SecurityNotification

Table 8.5.4.2.5-1: Definition of type SecurityNotification

  ---------------- --------------- --- ------------- ------------------------------------------------------------------------- ---------------
  Attribute name   Data type       P   Cardinality   Description                                                               Applicability
  apiInvokerId     string          M   1             String identifying the API invoker assigned by the CAPIF core function    
  aefId            string          O   0..1          String identifying the AEF.                                               
  apiIds           array(string)   M   1..N          Identifier of the service API                                             
  cause            Cause           M   1             The cause for revoking the API invoker authorization to the service API   
  ---------------- --------------- --- ------------- ------------------------------------------------------------------------- ---------------

##### 8.5.4.2.6 Type: AccessTokenReq

Table 8.5.4.2.6-1: Definition of type AccessTokenReq

+-----------------+-----------+---+-------------+-----------------+
| Attribute name  | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| grant\_type     | string    | M | 1           | This IE shall   |
|                 |           |   |             | contain the     |
|                 |           |   |             | grant type as   |
|                 |           |   |             | \"client        |
|                 |           |   |             | \_credentials\" |
+-----------------+-----------+---+-------------+-----------------+
| client\_id      | string    | M | 1           | This IE shall   |
|                 |           |   |             | contain the API |
|                 |           |   |             | invoker         |
|                 |           |   |             | Identifier.     |
+-----------------+-----------+---+-------------+-----------------+
| client\_secret  | string    | O | 0..1        | This IE when    |
|                 |           |   |             | present shall   |
|                 |           |   |             | contain the     |
|                 |           |   |             | onboarding      |
|                 |           |   |             | secret which is |
|                 |           |   |             | got during API  |
|                 |           |   |             | invoker         |
|                 |           |   |             | onboarding.     |
+-----------------+-----------+---+-------------+-----------------+
| scope           | string    | O | 0..1        | This IE when    |
|                 |           |   |             | present shall   |
|                 |           |   |             | contain a list  |
|                 |           |   |             | of AEF          |
|                 |           |   |             | identifiers and |
|                 |           |   |             | its associated  |
|                 |           |   |             | API names for   |
|                 |           |   |             | which the       |
|                 |           |   |             | access\_token   |
|                 |           |   |             | is authorized   |
|                 |           |   |             | for use.        |
|                 |           |   |             |                 |
|                 |           |   |             | It takes the    |
|                 |           |   |             | format of       |
|                 |           |   |             | 3gpp\#aefId1:a  |
|                 |           |   |             | piName1,apiName |
|                 |           |   |             | 2,...apiNameX;a |
|                 |           |   |             | efId2:apiName1, |
|                 |           |   |             | apiName2,...api |
|                 |           |   |             | NameY;...aefIdN |
|                 |           |   |             | :apiName1,apiNa |
|                 |           |   |             | me2,...apiNameZ |
|                 |           |   |             |                 |
|                 |           |   |             | Using delimeter |
|                 |           |   |             | \"\#\" after    |
|                 |           |   |             | the             |
|                 |           |   |             | discriminator   |
|                 |           |   |             | \"3gpp\", \":\" |
|                 |           |   |             | after AEF       |
|                 |           |   |             | identifier,     |
|                 |           |   |             | \",\" between   |
|                 |           |   |             | API names and   |
|                 |           |   |             | \";\" between   |
|                 |           |   |             | the last API    |
|                 |           |   |             | name of the     |
|                 |           |   |             | previous AEF    |
|                 |           |   |             | identifier and  |
|                 |           |   |             | the next AEF    |
|                 |           |   |             | identifier.     |
|                 |           |   |             | (NOTE 2)        |
|                 |           |   |             |                 |
|                 |           |   |             | Example:        |
|                 |           |   |             | \'3gpp\#aef-ji  |
|                 |           |   |             | angsu-nanjing:3 |
|                 |           |   |             | gpp-monitoring- |
|                 |           |   |             | event,3gpp-as-s |
|                 |           |   |             | ession-with-qos |
|                 |           |   |             | ;aef-zhejiang-h |
|                 |           |   |             | angzhou:3gpp-cp |
|                 |           |   |             | -parameter-prov |
|                 |           |   |             | isioning,3gpp-p |
|                 |           |   |             | fd-management\' |
+-----------------+-----------+---+-------------+-----------------+
| NOTE 1: This    |           |   |             |                 |
| data structure  |           |   |             |                 |
| shall not be    |           |   |             |                 |
| treated as a    |           |   |             |                 |
| JSON object. It |           |   |             |                 |
| shall be        |           |   |             |                 |
| treated as a    |           |   |             |                 |
| key, value pair |           |   |             |                 |
| data structure  |           |   |             |                 |
| to be encoded   |           |   |             |                 |
| using           |           |   |             |                 |
| x               |           |   |             |                 |
| -www-urlencoded |           |   |             |                 |
| format as       |           |   |             |                 |
| specified in    |           |   |             |                 |
| subc            |           |   |             |                 |
| lause 17.13.4.1 |           |   |             |                 |
| of W3C HTML     |           |   |             |                 |
| 4.01            |           |   |             |                 |
| Specif          |           |   |             |                 |
| ication \[22\]. |           |   |             |                 |
|                 |           |   |             |                 |
| NOTE 2: The     |           |   |             |                 |
| scope may       |           |   |             |                 |
| contain more    |           |   |             |                 |
| space-delimited |           |   |             |                 |
| strings which   |           |   |             |                 |
| further add     |           |   |             |                 |
| additional      |           |   |             |                 |
| access ranges   |           |   |             |                 |
| to the scope,   |           |   |             |                 |
| the definition  |           |   |             |                 |
| of those        |           |   |             |                 |
| additional      |           |   |             |                 |
| strings is out  |           |   |             |                 |
| of the scope of |           |   |             |                 |
| the present     |           |   |             |                 |
| document.       |           |   |             |                 |
+-----------------+-----------+---+-------------+-----------------+

##### 8.5.4.2.7 Type: AccessTokenRsp

Table 8.5.4.2.7-1: Definition of type AccessTokenRsp

+---------------+-------------+---+-------------+---------------+
| Attribute     | Data type   | P | Cardinality | Description   |
| name          |             |   |             |               |
+---------------+-------------+---+-------------+---------------+
| access\_token | string      | M | 1           | This IE shall |
|               |             |   |             | contain JWS   |
|               |             |   |             | Compact       |
|               |             |   |             | Serialized    |
|               |             |   |             | r             |
|               |             |   |             | epresentation |
|               |             |   |             | of the JWS    |
|               |             |   |             | signed JSON   |
|               |             |   |             | object        |
|               |             |   |             | containing    |
|               |             |   |             | Acce          |
|               |             |   |             | ssTokenClaims |
|               |             |   |             | (see          |
|               |             |   |             | subclaus      |
|               |             |   |             | e 8.5.4.2.c). |
+---------------+-------------+---+-------------+---------------+
| token\_type   | string      | M | 1           | This IE shall |
|               |             |   |             | contain the   |
|               |             |   |             | token type    |
|               |             |   |             | (i.e.         |
|               |             |   |             | \"Bearer\").  |
+---------------+-------------+---+-------------+---------------+
| expires\_in   | DurationSec | M | 1           | This IE when  |
|               |             |   |             | present shall |
|               |             |   |             | contain the   |
|               |             |   |             | number of     |
|               |             |   |             | seconds after |
|               |             |   |             | which the     |
|               |             |   |             | access\_token |
|               |             |   |             | is considered |
|               |             |   |             | to be         |
|               |             |   |             | expired.      |
+---------------+-------------+---+-------------+---------------+
| scope         | string      | O | 0..1        | This IE when  |
|               |             |   |             | present shall |
|               |             |   |             | contain a     |
|               |             |   |             | list of AEF   |
|               |             |   |             | identifiers   |
|               |             |   |             | and its       |
|               |             |   |             | associated    |
|               |             |   |             | API names for |
|               |             |   |             | which the     |
|               |             |   |             | access\_token |
|               |             |   |             | is authorized |
|               |             |   |             | for use.      |
|               |             |   |             |               |
|               |             |   |             | It takes the  |
|               |             |   |             | format of     |
|               |             |   |             | 3g            |
|               |             |   |             | pp\#aefId1:ap |
|               |             |   |             | iName1,apiNam |
|               |             |   |             | e2,...apiName |
|               |             |   |             | X;aefId2:apiN |
|               |             |   |             | ame1,apiName2 |
|               |             |   |             | ,...apiNameY; |
|               |             |   |             | ...aefIdN:api |
|               |             |   |             | Name1,apiName |
|               |             |   |             | 2,...apiNameZ |
|               |             |   |             |               |
|               |             |   |             | Using         |
|               |             |   |             | delimeter     |
|               |             |   |             | \"\#\" after  |
|               |             |   |             | the           |
|               |             |   |             | discriminator |
|               |             |   |             | \"3gpp\",     |
|               |             |   |             | \":\" after   |
|               |             |   |             | AEF           |
|               |             |   |             | identifier,   |
|               |             |   |             | \",\" between |
|               |             |   |             | API names and |
|               |             |   |             | \";\" between |
|               |             |   |             | the last API  |
|               |             |   |             | name of the   |
|               |             |   |             | previous AEF  |
|               |             |   |             | identifier    |
|               |             |   |             | and the next  |
|               |             |   |             | AEF           |
|               |             |   |             | identifier.   |
|               |             |   |             | (NOTE)        |
|               |             |   |             |               |
|               |             |   |             | Example:      |
|               |             |   |             | \'3gpp        |
|               |             |   |             | \#aef-jiangsu |
|               |             |   |             | -nanjing:3gpp |
|               |             |   |             | -monitoring-e |
|               |             |   |             | vent,3gpp-as- |
|               |             |   |             | session-with- |
|               |             |   |             | qos;aef-zheji |
|               |             |   |             | ang-hangzhou: |
|               |             |   |             | 3gpp-cp-param |
|               |             |   |             | eter-provisio |
|               |             |   |             | ning,3gpp-pfd |
|               |             |   |             | -management\' |
+---------------+-------------+---+-------------+---------------+
| NOTE: The     |             |   |             |               |
| scope may     |             |   |             |               |
| contain more  |             |   |             |               |
| sp            |             |   |             |               |
| ace-delimited |             |   |             |               |
| strings which |             |   |             |               |
| further add   |             |   |             |               |
| additional    |             |   |             |               |
| access ranges |             |   |             |               |
| to the scope, |             |   |             |               |
| the           |             |   |             |               |
| definition of |             |   |             |               |
| those         |             |   |             |               |
| additional    |             |   |             |               |
| strings is    |             |   |             |               |
| out of the    |             |   |             |               |
| scope of the  |             |   |             |               |
| present       |             |   |             |               |
| document.     |             |   |             |               |
+---------------+-------------+---+-------------+---------------+

##### 8.5.4.2.8 Type: AccessTokenClaims

Table 8.5.4.2.8-1: Definition of type AccessTokenClaims

+---------------+-------------+---+-------------+---------------+
| Attribute     | Data type   | P | Cardinality | Description   |
| name          |             |   |             |               |
+---------------+-------------+---+-------------+---------------+
| iss           | string      | M | 1           | This IE shall |
|               |             |   |             | contain the   |
|               |             |   |             | API invoker   |
|               |             |   |             | Identifier.   |
+---------------+-------------+---+-------------+---------------+
| scope         | string      | M | 1           | This IE shall |
|               |             |   |             | contain a     |
|               |             |   |             | list of AEF   |
|               |             |   |             | identifiers   |
|               |             |   |             | and its       |
|               |             |   |             | associated    |
|               |             |   |             | API names for |
|               |             |   |             | which the     |
|               |             |   |             | access\_token |
|               |             |   |             | is authorized |
|               |             |   |             | for use.      |
|               |             |   |             |               |
|               |             |   |             | It takes the  |
|               |             |   |             | format of     |
|               |             |   |             | 3g            |
|               |             |   |             | pp\#aefId1:ap |
|               |             |   |             | iName1,apiNam |
|               |             |   |             | e2,...apiName |
|               |             |   |             | X;aefId2:apiN |
|               |             |   |             | ame1,apiName2 |
|               |             |   |             | ,...apiNameY; |
|               |             |   |             | ...aefIdN:api |
|               |             |   |             | Name1,apiName |
|               |             |   |             | 2,...apiNameZ |
|               |             |   |             |               |
|               |             |   |             | Using         |
|               |             |   |             | delimeter     |
|               |             |   |             | \"\#\" after  |
|               |             |   |             | the           |
|               |             |   |             | discriminator |
|               |             |   |             | \"3gpp\",     |
|               |             |   |             | \":\" after   |
|               |             |   |             | AEF           |
|               |             |   |             | identifier,   |
|               |             |   |             | \",\" between |
|               |             |   |             | API names and |
|               |             |   |             | \";\" between |
|               |             |   |             | the last API  |
|               |             |   |             | name of the   |
|               |             |   |             | previous AEF  |
|               |             |   |             | identifier    |
|               |             |   |             | and the next  |
|               |             |   |             | AEF           |
|               |             |   |             | identifier.   |
|               |             |   |             | (NOTE)        |
|               |             |   |             |               |
|               |             |   |             | Example:      |
|               |             |   |             | \'3gpp        |
|               |             |   |             | \#aef-jiangsu |
|               |             |   |             | -nanjing:3gpp |
|               |             |   |             | -monitoring-e |
|               |             |   |             | vent,3gpp-as- |
|               |             |   |             | session-with- |
|               |             |   |             | qos;aef-zheji |
|               |             |   |             | ang-hangzhou: |
|               |             |   |             | 3gpp-cp-param |
|               |             |   |             | eter-provisio |
|               |             |   |             | ning,3gpp-pfd |
|               |             |   |             | -management\' |
+---------------+-------------+---+-------------+---------------+
| exp           | DurationSec | M | 1           | This IE shall |
|               |             |   |             | contain the   |
|               |             |   |             | number of     |
|               |             |   |             | seconds after |
|               |             |   |             | which the     |
|               |             |   |             | access\_token |
|               |             |   |             | is considered |
|               |             |   |             | to be         |
|               |             |   |             | expired.      |
+---------------+-------------+---+-------------+---------------+
| NOTE: The     |             |   |             |               |
| scope may     |             |   |             |               |
| contain more  |             |   |             |               |
| sp            |             |   |             |               |
| ace-delimited |             |   |             |               |
| strings which |             |   |             |               |
| further add   |             |   |             |               |
| additional    |             |   |             |               |
| access ranges |             |   |             |               |
| to the scope, |             |   |             |               |
| the           |             |   |             |               |
| definition of |             |   |             |               |
| those         |             |   |             |               |
| additional    |             |   |             |               |
| strings is    |             |   |             |               |
| out of the    |             |   |             |               |
| scope of the  |             |   |             |               |
| present       |             |   |             |               |
| document.     |             |   |             |               |
+---------------+-------------+---+-------------+---------------+

#### 8.5.4.3 Simple data types and enumerations

##### 8.5.4.3.1 Introduction

This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.

##### 8.5.4.3.2 Simple data types 

The simple data types defined in table 8.5.4.3.2-1 shall be supported.

Table 8.5.4.3.2-1: Simple data types

  ----------- ----------------- ------------- ---------------
  Type Name   Type Definition   Description   Applicability
  n/a                                         
  ----------- ----------------- ------------- ---------------

##### 8.5.4.3.3 Enumeration: Cause

Table 8.5.4.3.3-1: Enumeration Cause

  -------------------- --------------------------------------------------------------------------------------------------------- ---------------
  Enumeration value    Description                                                                                               Applicability
  OVERLIMIT\_USAGE     The revocation of the authorization of the API invoker is due to the overlimit usage of the service API   
  UNEXPECTED\_REASON   The revocation of the authorization of the API invoker is due to unexpected reason.                       
  -------------------- --------------------------------------------------------------------------------------------------------- ---------------

### 8.5.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.5.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.
Table 8.5.6-1 lists the supported features for CAPIF\_Security\_API.

Table 8.5.6-1: Supported Features

  -------------------- --------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  **Feature number**   **Feature Name**            **Description**
  1                    Notification\_test\_event   Testing of notification connection is supported according to subclause 7.6.
  2                    Notification\_websocket     The delivery of notifications over Websocket is supported according to subclause 7.6. This feature requires that the Notification\_test\_event feature is also supported.
  -------------------- --------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------

8.6 CAPIF\_Access\_Control\_Policy\_API
---------------------------------------

### 8.6.1 API URI

The CAPIF\_Access\_Control\_Policy\_API service shall use the
CAPIF\_Access\_Control\_Policy\_API.

The request URIs used in HTTP requests from the API exposing function
towards the CAPIF core function shall have the Resource URI structure as
defined in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"access-control-policy\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.6.2.

### 8.6.2 Resources 

#### 8.6.2.1 Overview

This resource is created by the CAPIF administrator on the CAPIF core
function.

NOTE: The details of the mechanisms used to create the Access Control
Policy List resource on the CAPIF core function is out of the scope of
the present document.

Figure 8.6.2.1-1: Resource URI structure of the
CAPIF\_Access\_Control\_Policy\_API

Table 8.6.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.6.2.1-1: Resources and methods overview

  ---------------------------- ----------------------------------------- --------------------------------- -----------------------------------------------------------------------
  Resource name                Resource URI                              HTTP method or custom operation   Description
  Access Control Policy List   /accessControlPolicyList/{serviceApiId}   GET                               Retrieves the access control policy list for a published service API.
  ---------------------------- ----------------------------------------- --------------------------------- -----------------------------------------------------------------------

#### 8.6.2.2 Resource: Access Control Policy List

##### 8.6.2.2.1 Description

The Access Control Policy List resource represents the access control
information for all the service APIs per API invoker.

##### 8.6.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/access-control-policy/\<apiVersion\>/accessControlPolicyList/{serviceApiId}**

This resource shall support the resource URI variables defined in
table 8.6.2.2.2-1.

Table 8.6.2.2.2-1: Resource URI variables for this resource

  -------------- ----------- ------------------------------------------------
  Name           Data Type   Definition
  apiRoot        string      See clause 7.5
  apiVersion     string      See clause 8.6.1
  serviceApiId   string      Identifies an individual published service API
  -------------- ----------- ------------------------------------------------

##### 8.6.2.2.3 Resource Standard Methods

###### 8.6.2.2.3.1 GET

This method shall support the URI query parameters specified in
table 8.6.2.2.3.1-1.

Table 8.6.2.2.3.1-1: URI query parameters supported by the GET method on
this resource

  -------------------- ------------------- --- ------------- -----------------------------------------------------------------
  Name                 Data type           P   Cardinality   Description
  aef-id               string              M   1             AEF identifier
  api-invoker-id       string              O   1             String identifying the API invoker
  supported-features   SupportedFeatures   O   0..1          To filter irrelevant responses related to unsupported features.
  -------------------- ------------------- --- ------------- -----------------------------------------------------------------

This method shall support the request data structures specified in
table 8.6.2.2.3.1-2 and the response data structures and response codes
specified in table 8.6.2.2.3.1-3.

Table 8.6.2.2.3.1-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.6.2.2.3.1-3: Data structures supported by the GET Response Body
on this resource

+-----------------+---+-------------+----------+-----------------+
| Data type       | P | Cardinality | Response | Description     |
|                 |   |             |          |                 |
|                 |   |             | codes    |                 |
+-----------------+---+-------------+----------+-----------------+
| AccessCo        | M | 1           | 200 OK   | List of the     |
| ntrolPolicyList |   |             |          | access control  |
|                 |   |             |          | policy          |
|                 |   |             |          | applicable for  |
|                 |   |             |          | the service API |
|                 |   |             |          | requested.      |
+-----------------+---+-------------+----------+-----------------+

##### 8.6.2.2.4 Resource Custom Operations

None.

### 8.6.3 Notifications

None.

### 8.6.4 Data Model

#### 8.6.4.1 General

This subclause specifies the application data model supported by the
API. Data types listed in subclause 7.2 apply to this API.

Table 8.6.4.1-1 specifies the data types defined specifically for the
CAPIF\_Access\_Control\_Policy\_API service.

Table 8.6.4.1-1: CAPIF\_Access\_Control\_Policy\_API specific Data Types

  ------------------------- ----------------- ---------------------------- ---------------
  Data type                 Section defined   Description                  Applicability
  AccessControlPolicyList   8.6.4.2.2         Access control policy list   
  ------------------------- ----------------- ---------------------------- ---------------

Table 8.6.4.1-2 specifies data types re-used by the
CAPIF\_Access\_Control\_Policy\_API service.

Table 8.6.4.1-2: Re-used Data Types

  ----------- ----------- ---------- ---------------
  Data type   Reference   Comments   Applicability
  n/a                                
  ----------- ----------- ---------- ---------------

#### 8.6.4.2 Structured data types

##### 8.6.4.2.1 Introduction

This subclause defines data structures to be used in resource
representations.

##### 8.6.4.2.2 Type: AccessControlPolicyList

Table 8.6.4.2.2-1: Definition of type AccessControlPolicyList

  -------------------- ------------------------- --- ------------- ----------------------------- ---------------
  Attribute name       Data type                 P   Cardinality   Description                   Applicability
  apiInvokerPolicies   array(ApiInvokerPolicy)   O   0..N          Policy of each API invoker.   
  -------------------- ------------------------- --- ------------- ----------------------------- ---------------

##### 8.6.4.2.3 Type: ApiInvokerPolicy

Table 8.6.4.2.3-1: Definition of type ApiInvokerPolicy

  -------------------------------- ---------------------- --- ------------- ------------------------------------------------------------------------------------------------- ---------------
  Attribute name                   Data type              P   Cardinality   Description                                                                                       Applicability
  apiInvokerId                     string                 M   1             API invoker ID assigned by the CAPIF core function                                                
  allowedTotalInvocations          integer                O   0..1          Total number of invocations allowed on the service API by the API invoker.                        
  allowedInvocationsPerSecond      integer                O   0..1          Invocations per second allowed on the service API by the API invoker.                             
  allowedInvocationTimeRangeList   array(TimeRangeList)   O   0..N          The time ranges during which the invocations are allowed on the service API by the API invoker.   
  -------------------------------- ---------------------- --- ------------- ------------------------------------------------------------------------------------------------- ---------------

##### 8.6.4.2.4 Type: TimeRangeList

Table 8.6.4.2.4-1: Definition of type TimeRangeList

  ---------------- ----------- --- ------------- ----------------------------------------------------------------------------------------- ---------------
  Attribute name   Data type   P   Cardinality   Description                                                                               Applicability
  startTime        DateTime    M   1             The start time for the invocations to be allowed on the service API by the API invoker.   
  stopTime         DateTime    M   1             The end time for the invocations to be allowed on the service API by the API invoker.     
  ---------------- ----------- --- ------------- ----------------------------------------------------------------------------------------- ---------------

#### 8.6.4.3 Simple data types and enumerations

None.

### 8.6.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.6.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.

Table 8.6.8-1: Supported Features

  -------------------- ------------------ -----------------
  **Feature number**   **Feature Name**   **Description**
  n/a                                     
  -------------------- ------------------ -----------------

8.7 CAPIF\_Logging\_API\_Invocation\_API
----------------------------------------

### 8.7.1 API URI

The CAPIF\_Logging\_API\_Invocation\_API service shall use the
CAPIF\_Logging\_API\_Invocation\_API.

The request URIs used in HTTP requests from the API exposing function
towards the CAPIF core function shall have the Resource URI structure as
defined in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"api-invocation-logs\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.7.2

### 8.7.2 Resources 

#### 8.7.2.1 Overview

Figure 8.7.2.1-1: Resource URI structure of the
CAPIF\_Logging\_API\_Invocation\_API

Table 8.7.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.7.2.1-1: Resources and methods overview

  ---------------- ----------------------- --------------------------------- -----------------------------------------------------
  Resource name    Resource URI            HTTP method or custom operation   Description
  Logs             /{aefId}/logs           POST                              Creates a new log entry for service API invocations
  Individual log   /{aefId}/logs/{logId}   n/a                               Individual log entry
  ---------------- ----------------------- --------------------------------- -----------------------------------------------------

#### 8.7.2.2 Resource: Logs

##### 8.7.2.2.1 Description

The Logs resource represents all the log entries created by a API
exposing function at CAPIF core function.

##### 8.7.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/api-invocation-logs/\<apiVersion\>/{aefId}/logs**

This resource shall support the resource URI variables defined in
table 8.7.2.2.2-1.

Table 8.7.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- -----------------------------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.7.1
  aefId        string      Identifies of the API exposing function
  ------------ ----------- -----------------------------------------

##### 8.7.2.2.3 Resource Standard Methods

###### 8.7.2.2.3.1 POST

This method shall support the URI query parameters specified in
table 8.7.2.2.3.1-1.

Table 8.7.2.2.3.1-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.7.2.2.3.1-2 and the response data structures and response codes
specified in table 8.7.2.2.3.1-3.

Table 8.7.2.2.3.1-2: Data structures supported by the POST Request Body
on this resource

  --------------- --- ------------- -------------------------------------------------------------------------------------------------------
  Data type       P   Cardinality   Description
  InvocationLog   M   1             Log of service API invocations provided by API exposing function to store on the CAPIF core function.
  --------------- --- ------------- -------------------------------------------------------------------------------------------------------

Table 8.7.2.2.3.1-3: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+-------------+---------------+
| Data type     | P | Cardinality | Response    | Description   |
|               |   |             |             |               |
|               |   |             | codes       |               |
+---------------+---+-------------+-------------+---------------+
| InvocationLog | M | 1           | 201 Created | Log of        |
|               |   |             |             | service API   |
|               |   |             |             | invocations   |
|               |   |             |             | provided by   |
|               |   |             |             | API exposing  |
|               |   |             |             | function      |
|               |   |             |             | successfully  |
|               |   |             |             | stored on the |
|               |   |             |             | CAPIF core    |
|               |   |             |             | function.     |
|               |   |             |             |               |
|               |   |             |             | The URI of    |
|               |   |             |             | the created   |
|               |   |             |             | resource      |
|               |   |             |             | shall be      |
|               |   |             |             | returned in   |
|               |   |             |             | the           |
|               |   |             |             | \"Location\"  |
|               |   |             |             | HTTP header.  |
+---------------+---+-------------+-------------+---------------+

Table 8.7.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- -----------------------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/api-invocation-logs/\<apiVersion\>/{aefId}/logs/{logId}
  ---------- ----------- --- ------------- -----------------------------------------------------------------------------------------------------------------------------------------------

##### 8.7.2.2.4 Resource Custom Operations

None.

### 8.7.3 Notifications

None.

### 8.7.4 Data Model

#### 8.7.4.1 General

This subclause specifies the application data model supported by the
API.

Table 8.7.4.1-1 specifies the data types defined for the CAPIF service
based interface protocol.

Table 8.7.4.1-1: Specific Data Types

  --------------- ----------------- ------------------------------------------------------------------------ ---------------
  Data type       Section defined   Description                                                              Applicability
  InvocationLog   8.7.4.2.2         Set of Service API invocation logs to be stored on CAPIF core function   
  Log             8.7.4.2.3         Individual log entries                                                   
  --------------- ----------------- ------------------------------------------------------------------------ ---------------

Table 8.7.4.1-2 specifies data types re-used by the
CAPIF\_Logging\_API\_Invocation\_API service:

Table 8.7.4.1-2: Re-used Data Types

  ---------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------
  Data type              Reference               Comments                                                                             Applicability
  DateTime               3GPP TS 29.122 \[14\]                                                                                        
  InterfaceDescription   Subclause 8.2.4.2.3     Details of the interface                                                             
  SupportedFeatures      3GPP TS 29.571 \[19\]   Used to negotiate the applicability of optional features defined in table 8.7.6-1.   
  Operation              Subclause 8.2.4.3.7     HTTP operation                                                                       
  Protocol               Subclause 8.2.4.3.3     API protocol                                                                         
  Uri                    3GPP TS 29.122 \[14\]                                                                                        
  ---------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------

#### 8.7.4.2 Structured data types

##### 8.7.4.2.1 Introduction

##### 8.7.4.2.2 Type: InvocationLog

Table 8.7.4.2.2-1: Definition of type InvocationLog

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| aefId     | string    | M | 1         | Identity  |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | exposing  |           |
|           |           |   |           | function  |           |
|           |           |   |           | r         |           |
|           |           |   |           | equesting |           |
|           |           |   |           | logging   |           |
|           |           |   |           | of        |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
|           |           |   |           | in        |           |
|           |           |   |           | vocations |           |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | string    | M | 1         | Identity  |           |
| InvokerId |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | which     |           |
|           |           |   |           | invoked   |           |
|           |           |   |           | the       |           |
|           |           |   |           | service   |           |
|           |           |   |           | API       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| logs      | a         | M | 1..N      | Service   |           |
|           | rray(Log) |   |           | API       |           |
|           |           |   |           | i         |           |
|           |           |   |           | nvocation |           |
|           |           |   |           | log       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| supporte  | Supporte  | O | 0..1      | Used to   |           |
| dFeatures | dFeatures |   |           | negotiate |           |
|           |           |   |           | the       |           |
|           |           |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API as    |           |
|           |           |   |           | described |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.8. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | provided  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | and in    |           |
|           |           |   |           | the       |           |
|           |           |   |           | response  |           |
|           |           |   |           | of        |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | resource  |           |
|           |           |   |           | creation. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.7.4.2.3 Type: Log

Table 8.7.4.2.3-1: Definition of type Log

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| apiId     | string    | M | 1         | String    |           |
|           |           |   |           | id        |           |
|           |           |   |           | entifying |           |
|           |           |   |           | the API   |           |
|           |           |   |           | invoked.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiName   | string    | M | 1         | Name of   |           |
|           |           |   |           | the API   |           |
|           |           |   |           | which was |           |
|           |           |   |           | invoked,  |           |
|           |           |   |           | it is set |           |
|           |           |   |           | as        |           |
|           |           |   |           | {apiName} |           |
|           |           |   |           | part of   |           |
|           |           |   |           | the URI   |           |
|           |           |   |           | structure |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subc      |           |
|           |           |   |           | lause 4.4 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 29.50 |           |
|           |           |   |           | 1 \[18\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| a         | string    | M | 1         | Version   |           |
| piVersion |           |   |           | of the    |           |
|           |           |   |           | API which |           |
|           |           |   |           | was       |           |
|           |           |   |           | invoked   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| res       | String    | M | 1         | Name of   |           |
| ourceName |           |   |           | the       |           |
|           |           |   |           | specific  |           |
|           |           |   |           | resource  |           |
|           |           |   |           | invoked   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| uri       | Uri       | O | 0..1      | Full URI  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | resource  |           |
|           |           |   |           | as        |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | subc      |           |
|           |           |   |           | lause 4.4 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 29.50 |           |
|           |           |   |           | 1 \[18\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| protocol  | Protocol  | M | 1         | Protocol  |           |
|           |           |   |           | invoked.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| operation | Operation | C | 0..1      | Operation |           |
|           |           |   |           | that was  |           |
|           |           |   |           | invoked   |           |
|           |           |   |           | on the    |           |
|           |           |   |           | API, only |           |
|           |           |   |           | a         |           |
|           |           |   |           | pplicable |           |
|           |           |   |           | for HTTP  |           |
|           |           |   |           | protocol. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| result    | string    | M | 1         | For HTTP  |           |
|           |           |   |           | protocol, |           |
|           |           |   |           | it        |           |
|           |           |   |           | contains  |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | status    |           |
|           |           |   |           | code of   |           |
|           |           |   |           | the       |           |
|           |           |   |           | i         |           |
|           |           |   |           | nvocation |           |
+-----------+-----------+---+-----------+-----------+-----------+
| invoc     | DateTime  | O | 0..1      | Date on   |           |
| ationTime |           |   |           | which it  |           |
|           |           |   |           | was       |           |
|           |           |   |           | invoked   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| invocati  | D         | O | 0..1      | Latency   |           |
| onLatency | urationMs |   |           | for the   |           |
|           |           |   |           | API       |           |
|           |           |   |           | in        |           |
|           |           |   |           | vocation. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| inputP    | ANY TYPE  | O | 0..1      | List of   |           |
| arameters |           |   |           | input     |           |
|           | (NOTE)    |   |           | p         |           |
|           |           |   |           | arameters |           |
+-----------+-----------+---+-----------+-----------+-----------+
| OutputP   | ANY TYPE  | O | 0..1      | List of   |           |
| arameters |           |   |           | output    |           |
|           | (NOTE)    |   |           | p         |           |
|           |           |   |           | arameters |           |
+-----------+-----------+---+-----------+-----------+-----------+
| src       | In        | O | 0..1      | Interface |           |
| Interface | terfaceDe |   |           | de        |           |
|           | scription |   |           | scription |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoker.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| dest      | In        | O | 0..1      | Interface |           |
| Interface | terfaceDe |   |           | de        |           |
|           | scription |   |           | scription |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | invoked.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| fwd       | string    | O | 0..1      | It        |           |
| Interface |           |   |           | includes  |           |
|           |           |   |           | the node  |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | (as       |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in        |           |
|           |           |   |           | IE        |           |
|           |           |   |           | TF RFC 72 |           |
|           |           |   |           | 39 \[20\] |           |
|           |           |   |           | of all    |           |
|           |           |   |           | f         |           |
|           |           |   |           | orwarding |           |
|           |           |   |           | entities  |           |
|           |           |   |           | between   |           |
|           |           |   |           | the API   |           |
|           |           |   |           | invoker   |           |
|           |           |   |           | and the   |           |
|           |           |   |           | AEF,      |           |
|           |           |   |           | con       |           |
|           |           |   |           | catenated |           |
|           |           |   |           | with      |           |
|           |           |   |           | comma and |           |
|           |           |   |           | space,    |           |
|           |           |   |           | e.g.      |           |
|           |           |   |           | 192.0     |           |
|           |           |   |           | .2.43:80, |           |
|           |           |   |           | unknown:\ |           |
|           |           |   |           | _OBFport, |           |
|           |           |   |           | 203       |           |
|           |           |   |           | .0.113.60 |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE: Any |           |   |           |           |           |
| basic     |           |   |           |           |           |
| data type |           |   |           |           |           |
| defined   |           |   |           |           |           |
| in        |           |   |           |           |           |
| OpenAP    |           |   |           |           |           |
| I 3.0.0 S |           |   |           |           |           |
| pecificat |           |   |           |           |           |
| ion \[3\] |           |   |           |           |           |
| may be    |           |   |           |           |           |
| used.     |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

#### 8.7.4.3 Simple data types and enumerations

##### 8.7.4.3.1 Introduction

This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.

##### 8.7.4.3.2 Simple data types 

The simple data types defined in table 8.7.4.3.2-1 shall be supported.

Table 8.7.4.3.2-1: Simple data types

  --------------- --------------------- ------------------------------------------------------------------------- -------------------
  **Type Name**   **Type Definition**   **Description**                                                           **Applicability**
  DurationMs      integer               Unsigned integer identifying a period of time in units of milliseconds.   
  --------------- --------------------- ------------------------------------------------------------------------- -------------------

### 8.7.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.7.6 Feature negotiation

Table 8.7.8-1: Supported Features

  -------------------- ------------------ -----------------
  **Feature number**   **Feature Name**   **Description**
  n/a                                     
  -------------------- ------------------ -----------------

8.8 CAPIF\_Auditing\_API
------------------------

### 8.8.1 API URI

The CAPIF\_Auditing\_API service shall use the CAPIF\_Auditing\_API.

The request URIs used in HTTP requests from the API management function
towards the CAPIF core function shall have the Resource URI structure as
defined in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"logs\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.8.2.

### 8.8.2 Resources 

#### 8.8.2.1 Overview

Figure 8.8.2.1-1: Resource URI structure of the CAPIF\_Auditing\_API

Table 8.8.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.8.2.1-1: Resources and methods overview

  ----------------------------------------- -------------------- --------------------------------- ----------------------------------------------------------------------------------
  Resource name                             Resource URI         HTTP method or custom operation   Description
  All service API invocation logs (Store)   /apiInvocationLogs   GET                               Query and retrieve service API invocation logs stored on the CAPIF core function
  ----------------------------------------- -------------------- --------------------------------- ----------------------------------------------------------------------------------

#### 8.8.2.2 Resource: All service API invocation logs

##### 8.8.2.2.1 Description

The All service API invocation logs resource represents a collection of
service API invocation logs stored on the CAPIF core function. The
resource is modelled as a Store resource archetype (see annex C.3 of
3GPP TS 29.501 \[18\])

##### 8.8.2.2.2 Resource Definition

Resource URI: **{apiRoot}/logs/\<apiVersion\>/apiInvocationLogs**

This resource shall support the resource URI variables defined in
table 8.8.2.2.2-1.

Table 8.8.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- ------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.8.1
  ------------ ----------- ------------------

##### 8.8.2.2.3 Resource Standard Methods

###### 8.8.2.2.3.1 GET

This method shall support the URI query parameters specified in
table 8.8.2.2.3.1-1.

Table 8.8.2.2.3.1-1: URI query parameters supported by the GET method on
this resource

  -------------------- ---------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------
  Name                 Data type              P   Cardinality   Description
  aef-id               string                 O   0..1          String identifying the API exposing function
  api-invoker-id       string                 O   0..1          String identifying the API invoker which invoked the service API
  time-range-start     DateTime               O   0..1          Start time of the invocation time range
  time-range-end       DateTime               O   0..1          End time of the invocation time range
  api-id               string                 O   0..1          String identifying the API invoked.
  api-name             string                 O   0..1          API name, it is set as {apiName} part of the URI structure as defined in subclause 4.4 of 3GPP TS 29.501 \[18\].
  api-version          string                 O   0..1          Version of the API which was invoked
  protocol             Protocol               O   0..1          Protocol invoked
  operation            Operation              O   0..1          Operation that was invoked on the API
  result               string                 O   0..1          HTTP status code of the invocation
  resource-name        string                 O   0..1          Name of the specific resource invoked
  src-interface        InterfaceDescription   O   0..1          Interface description of the API invoker.
  dest-interface       InterfaceDescription   O   0..1          Interface description of the API invoked.
  supported-features   SupportedFeatures      O   0..1          To filter irrelevant responses related to unsupported features.
  -------------------- ---------------------- --- ------------- ------------------------------------------------------------------------------------------------------------------

This method shall support the request data structures specified in
table 8.8.2.2.3.1-2 and the response data structures and response codes
specified in table 8.8.2.2.3.1-3.

Table 8.8.2.2.3.1-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.8.2.2.3.1-3: Data structures supported by the GET Response Body
on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| InvocationLog | O | 0..1        | 200 OK        | Result of the |
|               |   |             |               | query         |
|               |   |             |               | operation     |
|               |   |             |               | along with    |
|               |   |             |               | fetched       |
|               |   |             |               | service API   |
|               |   |             |               | invocation    |
|               |   |             |               | log data.     |
+---------------+---+-------------+---------------+---------------+
| P             | O | 0..1        | 414 URI Too   | Indicates     |
| roblemDetails |   |             | Long          | that the      |
|               |   |             |               | server is     |
|               |   |             |               | refusing to   |
|               |   |             |               | service the   |
|               |   |             |               | request       |
|               |   |             |               | because the   |
|               |   |             |               | r             |
|               |   |             |               | equest-target |
|               |   |             |               | is too long.  |
+---------------+---+-------------+---------------+---------------+

##### 8.8.2.2.4 Resource Custom Operations

None.

### 8.8.3 Notifications

None.

### 8.8.4 Data Model

#### 8.8.4.1 General

This subclause specifies the application data model supported by the
API.

Table 8.8.4.1-1 specifies the data types defined for the CAPIF service
based interface protocol.

Table 8.8.4.1-1: Specific Data Types

  ----------- ----------------- ------------- ---------------
  Data type   Section defined   Description   Applicability
  n/a                                         
  ----------- ----------------- ------------- ---------------

Table 8.8.4.1-2 specifies data types re-used by the CAPIF\_Auditing\_API
service:

Table 8.8.4.1-2: Re-used Data Types

  ---------------------- ----------------------- -------------------------------------------------------------------- ---------------
  Data type              Reference               Comments                                                             Applicability
  DateTime               3GPP TS 29.122 \[14\]                                                                        
  InterfaceDescription   Subclause 8.2.4.2.3     Interface description                                                
  InvocationLog          Subclause 8.7.4.2.2     Logs of service API invocations stored on the CAPIF core function.   
  Operation              Subclause 8.2.4.3.7     HTTP operation                                                       
  ProblemDetails         3GPP TS 29.122 \[14\]                                                                        
  Protocol               Subclause 8.2.4.3.3     API protocol                                                         
  ---------------------- ----------------------- -------------------------------------------------------------------- ---------------

#### 8.8.4.2 Structured data types

None.

#### 8.8.4.3 Simple data types and enumerations

None.

### 8.8.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.8.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.

Table 8.8.6-1: Supported Features

  -------------------- ------------------ -----------------
  **Feature number**   **Feature Name**   **Description**
  n/a                                     
  -------------------- ------------------ -----------------

8.9 CAPIF\_API\_Provider\_Management\_API
-----------------------------------------

### 8.9.1 API URI

The CAPIF\_API\_Provider\_Management\_API service shall use the
CAPIF\_API\_Provider\_Management\_API.

The request URIs used in HTTP requests from the API management function
towards the CAPIF core function shall have the Resource URI structure as
defined in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"api-provider-management\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
clause 8.9.2.

### 8.9.2 Resources

#### 8.9.2.1 Overview

Figure 8.9.2.1-1: Resource URI structure of the
CAPIF\_API\_Provider\_Management\_API

Table 8.9.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.9.2.1-1: Resources and methods overview

  --------------------------------------------- --------------------------------- --------------------------------- -----------------------------------------------------------------------------------------------------------------------
  Resource name                                 Resource URI                      HTTP method or custom operation   Description
  All API Provider Domains Registrations        /registrations                    POST                              Registers a new API provider domain by creating an API provider domain with API provider domain functions profiles.
  Individual API Provider Domain Registration   /registrations/{registrationId}   PUT                               Updates an individual API provider domain identified by {registrationId}
                                                                                  DELETE                            Deregisters an API provider domain by deleting the API provider domain and functions, identified by {registrationId}.
  --------------------------------------------- --------------------------------- --------------------------------- -----------------------------------------------------------------------------------------------------------------------

#### 8.9.2.2 Resource: All API Provider Domains Registrations

##### 8.9.2.2.1 Description

The All API provider domains registrations resource represents all the
API provider domains that are registered at a given CAPIF core function.

##### 8.9.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/api-provider-management/\<apiVersion\>/registrations**

This resource shall support the resource URI variables defined in
table 8.9.2.2.2-1.

Table 8.9.2.2.2-1: Resource URI variables for this resource

  ------------ ----------- ------------------
  Name         Data Type   Definition
  apiRoot      string      See clause 7.5
  apiVersion   string      See clause 8.9.1
  ------------ ----------- ------------------

##### 8.9.2.2.3 Resource Standard Methods

###### 8.9.2.2.3.1 POST

This method shall support the URI query parameters specified in
table 8.9.2.2.3.1-1.

Table 8.9.2.2.3.1-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 8.9.2.2.3.1-2 and the response data structures and response codes
specified in table 8.9.2.2.3.1-3.

Table 8.9.2.2.3.1-2: Data structures supported by the POST Request Body
on this resource

  ----------------------------- --- ------------- ---------------------------------------------------------------------------------------------------------
  Data type                     P   Cardinality   Description
  APIProviderEnrolmentDetails   M   1             Enrolment details of the API provider domain including individual API provider domain function details.
  ----------------------------- --- ------------- ---------------------------------------------------------------------------------------------------------

Table 8.9.2.2.3.1-3: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+-------------+---------------+
| Data type     | P | Cardinality | Response    | Description   |
|               |   |             |             |               |
|               |   |             | codes       |               |
+---------------+---+-------------+-------------+---------------+
| A             | M | 1           | 201 Created | API provider  |
| PIProviderEnr |   |             |             | domain        |
| olmentDetails |   |             |             | registered    |
|               |   |             |             | successfully  |
|               |   |             |             |               |
|               |   |             |             | The URI of    |
|               |   |             |             | the created   |
|               |   |             |             | resource      |
|               |   |             |             | shall be      |
|               |   |             |             | returned in   |
|               |   |             |             | the           |
|               |   |             |             | \"Location\"  |
|               |   |             |             | HTTP header.  |
|               |   |             |             |               |
|               |   |             |             | The list of   |
|               |   |             |             | successfully  |
|               |   |             |             | registered    |
|               |   |             |             | individual    |
|               |   |             |             | API provider  |
|               |   |             |             | domain        |
|               |   |             |             | functions,    |
|               |   |             |             | registration  |
|               |   |             |             | specific      |
|               |   |             |             | failure       |
|               |   |             |             | information   |
|               |   |             |             | of failed API |
|               |   |             |             | provider      |
|               |   |             |             | domain        |
|               |   |             |             | function      |
|               |   |             |             | r             |
|               |   |             |             | egistrations, |
|               |   |             |             | are included  |
|               |   |             |             | in            |
|               |   |             |             | A             |
|               |   |             |             | PIProviderEnr |
|               |   |             |             | olmentDetails |
|               |   |             |             | which is      |
|               |   |             |             | provided in   |
|               |   |             |             | the response  |
|               |   |             |             | body.         |
+---------------+---+-------------+-------------+---------------+

Table 8.9.2.2.3.1-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/api-provider-management/\<apiVersion\>/registrations/{registrationId}
  ---------- ----------- --- ------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------

##### 8.9.2.2.4 Resource Custom Operations

None.

#### 8.9.2.3 Resource: Individual API Provider Domain Registration

##### 8.9.2.3.1 Description

The Individual API Provide Domain Registration resource represents an
individual API provider domain that is registered at a given CAPIF core
function.

##### 8.9.2.3.2 Resource Definition

Resource URI:
**{apiRoot}/api-provider-management/\<apiVersion\>/registrations/{registrationId}**

This resource shall support the resource URI variables defined in
table 8.9.2.3.2-1.

Table 8.9.2.3.2-1: Resource URI variables for this resource

  ---------------- ----------- ------------------------------------------------------------------
  Name             Data Type   Definition
  apiRoot          string      See clause 7.5
  apiVersion       string      See clause 8.9.1
  registrationId   string      Identifies an individual registered API Provider domain resource
  ---------------- ----------- ------------------------------------------------------------------

##### 8.9.2.3.3 Resource Standard Methods

###### 8.9.2.3.3.1 PUT

The PUT method allows updating the registered API provider domain's
detail. The properties \"apiProviderDomainId", and "supportedFeatures"
shall remain unchanged from previously provided values. This method
shall support the URI query parameters specified in table 8.9.2.3.3.1-1.

Table 8.9.2.3.3.1-1: URI query parameters supported by the PUT method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in the
table 8.9.2.3.3.1-2 and the response data structures and response codes
specified in the table 8.9.2.3.3.1-3.

Table 8.9.2.3.3.1-2: Data structures supported by the PUT Request Body
on this resource

  ----------------------------- --- ------------- ---------------------------------------------
  Data type                     P   Cardinality   Description
  APIProviderEnrolmentDetails   M   1             Updated details of the API provider domain.
  ----------------------------- --- ------------- ---------------------------------------------

Table 8.9.2.3.3.1-3: Data structures supported by the PUT Response Body
on this resource

+-----------------+---+-------------+----------+-----------------+
| Data type       | P | Cardinality | Response | Description     |
|                 |   |             |          |                 |
|                 |   |             | codes    |                 |
+-----------------+---+-------------+----------+-----------------+
| APIProviderE    | M | 1           | 200 OK   | API provider    |
| nrolmentDetails |   |             |          | domain's        |
|                 |   |             |          | information     |
|                 |   |             |          | updated         |
|                 |   |             |          | successfully.   |
|                 |   |             |          |                 |
|                 |   |             |          | Updated details |
|                 |   |             |          | of the API      |
|                 |   |             |          | provider domain |
|                 |   |             |          | is part of the  |
|                 |   |             |          | APIProviderEn   |
|                 |   |             |          | rolmentDetails, |
|                 |   |             |          | which is        |
|                 |   |             |          | provided in the |
|                 |   |             |          | response body.  |
|                 |   |             |          | The list of     |
|                 |   |             |          | successfully    |
|                 |   |             |          | updated         |
|                 |   |             |          | individual API  |
|                 |   |             |          | provider domain |
|                 |   |             |          | functions,      |
|                 |   |             |          | registration    |
|                 |   |             |          | update specific |
|                 |   |             |          | failure         |
|                 |   |             |          | information of  |
|                 |   |             |          | failed API      |
|                 |   |             |          | provider domain |
|                 |   |             |          | function        |
|                 |   |             |          | registration    |
|                 |   |             |          | updates, are    |
|                 |   |             |          | included in     |
|                 |   |             |          | APIProviderE    |
|                 |   |             |          | nrolmentDetails |
|                 |   |             |          | which is        |
|                 |   |             |          | provided in the |
|                 |   |             |          | response body.  |
+-----------------+---+-------------+----------+-----------------+

###### 8.9.2.3.3.2 DELETE

This method shall support the URI query parameters specified in
table 8.9.2.3.3.2-1.

Table 8.9.2.3.3.2-1: URI query parameters supported by the DELETE method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the response codes specified in
table 8.9.2.3.3.2-2 and the response data structures and response codes
specified in table 8.9.2.3.3.2-3.

Table 8.9.2.3.3.2-2: Data structures supported by the DELETE Request
Body on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.9.2.3.3.2-3: Data structures supported by the DELETE Response
Body on this resource

+-----------+---+-------------+----------------+-----------------+
| Data type | P | Cardinality | Response       | Description     |
|           |   |             |                |                 |
|           |   |             | codes          |                 |
+-----------+---+-------------+----------------+-----------------+
| n/a       |   |             | 204 No Content | The individual  |
|           |   |             |                | registered API  |
|           |   |             |                | provider domain |
|           |   |             |                | matching the    |
|           |   |             |                | registrationId  |
|           |   |             |                | is deleted. All |
|           |   |             |                | the individual  |
|           |   |             |                | API provider    |
|           |   |             |                | domain          |
|           |   |             |                | functions of    |
|           |   |             |                | the API         |
|           |   |             |                | provider domain |
|           |   |             |                | are deleted.    |
+-----------+---+-------------+----------------+-----------------+

##### 8.9.2.3.4 Resource Custom Operations

None.

### 8.9.3 Notifications

None.

### 8.9.4 Data Model

#### 8.9.4.1 General

This clause specifies the application data model supported by the API.
Data types listed in clause 7.2 apply to this API.

Table 8.9.4.1-1 specifies the data types defined specifically for the
CAPIF\_API\_Provider\_Management\_API service.

Table 8.9.4.1-1: CAPIF\_API\_Provider\_Management\_API specific Data
Types

  ----------------------------- ----------------- -------------------------------------------------------------------------- ---------------
  Data type                     Section defined   Description                                                                Applicability
  APIProviderEnrolmentDetails   8.9.4.2.2         API provider domain's enrolment details.                                   
  APIProviderFunctionDetails    8.9.4.2.3         API Provider domain function's details.                                    
  RegistrationInformation       8.9.4.2.4         Registration information of the individual API provider domain function.   
  ----------------------------- ----------------- -------------------------------------------------------------------------- ---------------

Table 8.9.4.1-2 specifies data types re-used by the
CAPIF\_API\_Provider\_Management\_API service.

Table 8.9.4.1-2: Re-used Data Types

  ------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------
  Data type           Reference               Comments                                                                             Applicability
  SupportedFeatures   3GPP TS 29.571 \[19\]   Used to negotiate the applicability of optional features defined in table 8.4.6-1.   
  ------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------

#### 8.9.4.2 Structured data types

##### 8.9.4.2.1 Introduction

##### 8.9.4.2.2 Type: APIProviderEnrolmentDetails

Table 8.9.4.2.2-1: Definition of type APIProviderEnrolmentDetails

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | string    | O | 0..1      | API       |           |
| ProvDomId |           |   |           | provider  |           |
|           |           |   |           | domain ID |           |
|           |           |   |           | assigned  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | while     |           |
|           |           |   |           | re        |           |
|           |           |   |           | gistering |           |
|           |           |   |           | the API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain.   |           |
|           |           |   |           | Shall not |           |
|           |           |   |           | be        |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | from the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function, |           |
|           |           |   |           | to        |           |
|           |           |   |           | on-board  |           |
|           |           |   |           | itself.   |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in all    |           |
|           |           |   |           | other     |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | requests  |           |
|           |           |   |           | and       |           |
|           |           |   |           | r         |           |
|           |           |   |           | esponses. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| regSec    | string    | M | 1         | Security  |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | necessary |           |
|           |           |   |           | for the   |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to        |           |
|           |           |   |           | validate  |           |
|           |           |   |           | the       |           |
|           |           |   |           | reg       |           |
|           |           |   |           | istration |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain.   |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in HTTP   |           |
|           |           |   |           | POST      |           |
|           |           |   |           | request   |           |
|           |           |   |           | from API  |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | to CAPIF  |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | for API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | regi      |           |
|           |           |   |           | stration. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| api       | array(    | O | 1..N      | A list of |           |
| ProvFuncs | APIProvid |   |           | i         |           |
|           | erFunctio |   |           | ndividual |           |
|           | nDetails) |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | functions |           |
|           |           |   |           | details.  |           |
|           |           |   |           | When      |           |
|           |           |   |           | included  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | request   |           |
|           |           |   |           | message,  |           |
|           |           |   |           | it lists  |           |
|           |           |   |           | the API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | functions |           |
|           |           |   |           | that the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | intends   |           |
|           |           |   |           | to        |           |
|           |           |   |           | regist    |           |
|           |           |   |           | er/update |           |
|           |           |   |           | in        |           |
|           |           |   |           | reg       |           |
|           |           |   |           | istration |           |
|           |           |   |           | or update |           |
|           |           |   |           | reg       |           |
|           |           |   |           | istration |           |
|           |           |   |           | p         |           |
|           |           |   |           | rocedure. |           |
|           |           |   |           | When      |           |
|           |           |   |           | included  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | response  |           |
|           |           |   |           | message,  |           |
|           |           |   |           | it lists  |           |
|           |           |   |           | the API   |           |
|           |           |   |           | domain    |           |
|           |           |   |           | functions |           |
|           |           |   |           | details   |           |
|           |           |   |           | that are  |           |
|           |           |   |           | r         |           |
|           |           |   |           | egistered |           |
|           |           |   |           | or        |           |
|           |           |   |           | updated   |           |
|           |           |   |           | succ      |           |
|           |           |   |           | essfully. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiPr     | string    | O | 0..1      | Generic   |           |
| ovDomInfo |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | related   |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | such as   |           |
|           |           |   |           | details   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | appl      |           |
|           |           |   |           | ications. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| suppFeat  | Supporte  | O | 0..1      | Used to   |           |
|           | dFeatures |   |           | negotiate |           |
|           |           |   |           | the       |           |
|           |           |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API as    |           |
|           |           |   |           | described |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 7.8. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | attribute |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | provided  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | and in    |           |
|           |           |   |           | the       |           |
|           |           |   |           | response  |           |
|           |           |   |           | of        |           |
|           |           |   |           | s         |           |
|           |           |   |           | uccessful |           |
|           |           |   |           | resource  |           |
|           |           |   |           | creation. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| f         | string    | O | 0..1      | Reg       |           |
| ailReason |           |   |           | istration |           |
|           |           |   |           | or update |           |
|           |           |   |           | specific  |           |
|           |           |   |           | failure   |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | of failed |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function  |           |
|           |           |   |           | regis     |           |
|           |           |   |           | trations. |           |
|           |           |   |           |           |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | response  |           |
|           |           |   |           | body if   |           |
|           |           |   |           | atleast   |           |
|           |           |   |           | one of    |           |
|           |           |   |           | the API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function  |           |
|           |           |   |           | reg       |           |
|           |           |   |           | istration |           |
|           |           |   |           | or update |           |
|           |           |   |           | reg       |           |
|           |           |   |           | istration |           |
|           |           |   |           | fails.    |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.9.4.2.3 Type: APIProviderFunctionDetails

Table 8.9.4.2.3-1: Definition of type APIProviderFunctionDetails

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| apiP      | string    | O | 0..1      | API       |           |
| rovFuncId |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | f         |           |
|           |           |   |           | unctionID |           |
|           |           |   |           | assigned  |           |
|           |           |   |           | by the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function  |           |
|           |           |   |           | while     |           |
|           |           |   |           | re        |           |
|           |           |   |           | gistering |           |
|           |           |   |           | /updating |           |
|           |           |   |           | the API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain.   |           |
|           |           |   |           | Shall not |           |
|           |           |   |           | be        |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request   |           |
|           |           |   |           | from the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | to the    |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function, |           |
|           |           |   |           | to        |           |
|           |           |   |           | register  |           |
|           |           |   |           | itself.   |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in all    |           |
|           |           |   |           | other     |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | requests  |           |
|           |           |   |           | and       |           |
|           |           |   |           | r         |           |
|           |           |   |           | esponses. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| regInfo   | Regis     | M | 1         | In        |           |
|           | trationIn |   |           | formation |           |
|           | formation |   |           | necessary |           |
|           |           |   |           | for the   |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | to        |           |
|           |           |   |           | register  |           |
|           |           |   |           | the API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function. |           |
|           |           |   |           |           |           |
|           |           |   |           | This      |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in HTTP   |           |
|           |           |   |           | POST/PUT  |           |
|           |           |   |           | request   |           |
|           |           |   |           | from API  |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | to CAPIF  |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | for API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | regi      |           |
|           |           |   |           | stration. |           |
|           |           |   |           | In the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | response  |           |
|           |           |   |           | message   |           |
|           |           |   |           | from      |           |
|           |           |   |           | CAPIF     |           |
|           |           |   |           | core      |           |
|           |           |   |           | function, |           |
|           |           |   |           | shall     |           |
|           |           |   |           | include   |           |
|           |           |   |           | the       |           |
|           |           |   |           | updated   |           |
|           |           |   |           | reg       |           |
|           |           |   |           | istration |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | for API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiPro    | A         | M | 1         | Role of   |           |
| vFuncRole | piProvide |   |           | API       |           |
|           | rFuncRole |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function. |           |
|           |           |   |           |           |           |
|           |           |   |           | The role  |           |
|           |           |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP      |           |
|           |           |   |           | POST/PUT  |           |
|           |           |   |           | request   |           |
|           |           |   |           | that the  |           |
|           |           |   |           | API       |           |
|           |           |   |           | m         |           |
|           |           |   |           | anagement |           |
|           |           |   |           | function  |           |
|           |           |   |           | intends   |           |
|           |           |   |           | to        |           |
|           |           |   |           | regist    |           |
|           |           |   |           | er/update |           |
|           |           |   |           | the API   |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function  |           |
|           |           |   |           | as. CAPIF |           |
|           |           |   |           | core      |           |
|           |           |   |           | function  |           |
|           |           |   |           | shall     |           |
|           |           |   |           | register  |           |
|           |           |   |           | the role  |           |
|           |           |   |           | of API    |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function  |           |
|           |           |   |           | as per    |           |
|           |           |   |           | the       |           |
|           |           |   |           | request.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apiPro    | string    | O | 0..1      | Generic   |           |
| vFuncInfo |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | related   |           |
|           |           |   |           | to the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | domain    |           |
|           |           |   |           | function  |           |
|           |           |   |           | such as   |           |
|           |           |   |           | details   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | API       |           |
|           |           |   |           | provider  |           |
|           |           |   |           | appl      |           |
|           |           |   |           | ications. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 8.9.4.2.4 Type: RegistrationInformation

Table 8.9.4.2.4-1: Definition of type RegistrationInformation

  ---------------- ----------- --- ------------- ----------------------------------------------------------- ---------------
  Attribute name   Data type   P   Cardinality   Description                                                 Applicability
  apiProvPubKey    string      M   1             Public Key of API Provider domain function.                 
  apiProvCert      string      O   0..1          API provider domain function's generic client certificate   
  ---------------- ----------- --- ------------- ----------------------------------------------------------- ---------------

#### 8.9.4.3 Simple data types and enumerations

##### 8.9.4.3.1 Introduction

This subclause defines simple data types and enumerations that will be
referenced from data structures defined in the previous subclauses.

##### 8.9.4.3.2 Simple data types 

The simple data types defined in table 8.9.4.3.2-1 shall be supported.

Table 8.9.4.3.2-1: Simple data types

  ----------- ----------------- ------------- ---------------
  Type Name   Type Definition   Description   Applicability
  n/a                                         
  ----------- ----------------- ------------- ---------------

##### 8.9.4.3.3 Enumeration: ApiProviderFuncRole

Table 8.9.4.3.3-1: Enumeration ApiProviderFuncRole

  ------------------- --------------------------------------------------- ---------------
  Enumeration value   Description                                         Applicability
  AEF                 API provider function is API Exposing Function.     
  APF                 API provider function is API Publishing Function.   
  AMF                 API provider function is API Management Function.   
  ------------------- --------------------------------------------------- ---------------

### 8.9.5 Error Handling

General error responses are defined in clause 7.7 of this specification.

### 8.9.6 Feature negotiation

General feature negotiation procedures are defined in clause 7.8 of this
specification.

8.10 CAPIF\_Routing\_Info\_API
------------------------------

### 8.10.1 API URI

The CAPIF\_Routing\_Info\_API service shall use the
CAPIF\_Routing\_Info\_API.

The request URIs used in HTTP requests from the API exposing function
towards the CAPIF core function shall have the Resource URI structure as
defined in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"capif-routing-info\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificSuffixes\> shall be set as described in
subclause 8.10.2.

### 8.10.2 Resources 

#### 8.10.2.1 Overview

Figure 8.10.2.1-1: Resource URI structure of the
CAPIF\_Routing\_Info\_API

Table 8.10.2.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 8.10.2.1-1: Resources and methods overview

  ------------------------------------- ------------------------------ --------------------------------- --------------------------------------------------------------------------------------------------------------------------------
  Resource name                         Resource URI                   HTTP method or custom operation   Description
  Individual Service API routing info   /service-apis/{serviceApiId}   GET                               Retrieves the API routing information for a published service API and API exposing function which applies the topology hiding.
  ------------------------------------- ------------------------------ --------------------------------- --------------------------------------------------------------------------------------------------------------------------------

#### 8.10.2.2 Resource: Individual Service API routing info

##### 8.10.2.2.1 Description

The API Routing Information resource represents the API routing
information for the service API per API Exposing Function.

##### 8.10.2.2.2 Resource Definition

Resource URI:
**{apiRoot}/capif-routing-info/\<apiVersion\>/service-apis/{serviceApiId}**

This resource shall support the resource URI variables defined in
table 8.10.2.2.2-1.

Table 8.10.2.2.2-1: Resource URI variables for this resource

  -------------- ----------- ------------------------------------------------
  Name           Data type   Definition
  apiRoot        string      See subclause 7.5
  apiVersion     string      See subclause 8.10.1
  serviceApiId   string      Identifies an individual published service API
  -------------- ----------- ------------------------------------------------

##### 8.10.2.2.3 Resource Standard Methods

###### 8.10.2.2.3.1 GET

This method shall support the URI query parameters specified in
table 8.10.2.2.3.1-1.

Table 8.10.2.2.3.1-1: URI query parameters supported by the GET method
on this resource

  ----------- ------------------- --- ------------- -----------------------------------------------------------------
  Name        Data type           P   Cardinality   Description
  aef-id      string              M   1             AEF identifier
  supp-feat   SupportedFeatures   O   0..1          To filter irrelevant responses related to unsupported features.
  ----------- ------------------- --- ------------- -----------------------------------------------------------------

This method shall support the request data structures specified in
table 8.10.2.2.3.1-2 and the response data structures and response codes
specified in table 8.10.2.2.3.1-3.

Table 8.10.2.2.3.1-2: Data structures supported by the GET Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 8.10.2.2.3.1-3: Data structures supported by the GET Response Body
on this resource

+-------------+---+-------------+----------+-----------------+
| Data type   | P | Cardinality | Response | Description     |
|             |   |             |          |                 |
|             |   |             | Codes    |                 |
+-------------+---+-------------+----------+-----------------+
| RoutingInfo | M | 1           | 200 OK   | The Routing     |
|             |   |             |          | information     |
|             |   |             |          | applicable for  |
|             |   |             |          | the service API |
|             |   |             |          | requested.      |
+-------------+---+-------------+----------+-----------------+

##### 8.10.2.2.4 Resource Custom Operations

None.

### 8.10.3 Notifications

None.

### 8.10.4 Data Model

#### 8.10.4.1 General

This subclause specifies the application data model supported by the
API. Data types listed in subclause 7.2 apply to this API.

Table 8.10.4.1-1 specifies the data types defined specifically for the
CAPIF\_Routing\_Info\_API service.

Table 8.10.4.1-1: CAPIF\_Routing\_Info\_API specific Data Types

  ------------------ ----------------- ------------------------- ---------------
  Data type          Section defined   Description               Applicability
  RoutingInfo        8.10.4.2.2        API routing information   
  RoutingRule        8.10.4.2.3        API routing rule          
  Ipv6AddressRange   8.10.4.2.4        IP address range          
  ------------------ ----------------- ------------------------- ---------------

Table 8.10.4.1-2 specifies data types re-used by the
CAPIF\_Routing\_Info\_API service.

Table 8.10.4.1-2: Re-used Data Types

  ------------------- ----------------------- ---------- ---------------
  Data type           Reference               Comments   Applicability
  Ipv4AddressRange    3GPP TS 29.510 \[28\]              
  Ipv6Addr            3GPP TS 29.122 \[14\]              
  SupportedFeatures   3GPP TS 29.571 \[19\]              
  ------------------- ----------------------- ---------- ---------------

#### 8.10.4.2 Structured data types

##### 8.10.4.2.1 Introduction

This subclause defines data structures to be used in resource
representations.

##### 8.10.4.2.2 Type: RoutingInfo

Table 8.10.4.2.2-1: Definition of type RoutingInfo

  ---------------- -------------------- --- ------------- --------------- ---------------
  Attribute name   Data type            P   Cardinality   Description     Applicability
  routingRules     array(RoutingRule)   M   1..N          Routing rules   
  ---------------- -------------------- --- ------------- --------------- ---------------

##### 8.10.4.2.3 Type: RoutingRule

Table 8.10.4.2.3-1: Definition of type RoutingRule

  ------------------------------------------------------------------------------------------------------------------------------------------- ------------------------- --- ------------- ------------------------------------------------------------------------- ---------------
  Attribute name                                                                                                                              Data type                 P   Cardinality   Description                                                               Applicability
  ipv4AddrRanges                                                                                                                              array(Ipv4AddressRange)   O   1..N          The IPv4 address range for the API invocation source IP address. (NOTE)   
  ipv6AddrRanges                                                                                                                              array(Ipv6AddressRange)   O   1..N          The IPv6 address range for the API invocation source IP address. (NOTE)   
  aefProfile                                                                                                                                  AefProfile                M   1             The target AEF profile                                                    
  NOTE: If no IP address range is provided, it means the service API invocation from any source IP address can be routed to the target AEF.                                                                                                                         
  ------------------------------------------------------------------------------------------------------------------------------------------- ------------------------- --- ------------- ------------------------------------------------------------------------- ---------------

##### 8.10.4.2.4 Type: Ipv6AddressRange

Table 8.10.4.2.4-1: Definition of type Ipv6AddressRange

  ---------------- ----------- --- ------------- ------------------------------------------------------------ ---------------
  Attribute name   Data type   P   Cardinality   Description                                                  Applicability
  start            Ipv6Addr    M   1             First value identifying the start of an IPv6 address range   
  end              Ipv6Addr    M   1             Last value identifying the end of an IPv6 address range      
  ---------------- ----------- --- ------------- ------------------------------------------------------------ ---------------

#### 8.10.4.3 Simple data types and enumerations

None.

### 8.10.5 Error Handling

General error responses are defined in subclause 7.7.

### 8.10.6 Feature negotiation

General feature negotiation procedures are defined in subclause 7.8.

Table 8.10.6-1: Supported Features

  -------------------- ------------------ -----------------
  **Feature number**   **Feature Name**   **Description**
  n/a                                     
  -------------------- ------------------ -----------------

9 AEF API Definition
====================

9.1 AEF\_Security\_API
----------------------

### 9.1.1 API URI

The AEF\_Security\_API service shall use the AEF\_Security\_API.

The request URIs used in HTTP requests from the API invoker towards the
API exposing function shall have the Resource URI structure as defined
in subclause 7.5 with the following clarifications:

\- The \<apiName\> shall be \"aef-security\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<custOpName\> shall be set as described in subclause 9.1.2a.

### 9.1.2 Resources 

There is no resource defined for this API.

##### 9.1.2.2.4 Resource Custom Operations

None.

### 9.1.2a Custom Operations without associated resources

#### 9.1.2a.1 Overview

Custom operations used for this API are summarized in table 9.1.2a.1-1.
\"{apiRoot}\" and "\<apiVersion\>" are set as described in clause 7.5
and clause 9.1.1 respectively.

Table 9.1.2a.1-1: Custom operations without associated resources

  ----------------------- ----------------------- -------------------- ----------------------------------------
  Operation name          Custom operation URI    Mapped HTTP method   Description
  check-authentication    /check-authentication   POST                 Check authentication request.
  revoke-authentication   /revoke-authorization   POST                 Revoke authorization for service APIs.
  ----------------------- ----------------------- -------------------- ----------------------------------------

#### 9.1.2a.2 Operation: check-authentication

##### 9.1.2a.2.1 Description

This custom operation allows the API invoker to confirm from the API
exposing function, that necessary authentication data is available to
authenticate the API invoker on API invocation.

##### 9.1.2a.2.2 Operation Definition

This method shall support the URI query parameters specified in
table 9.1.2a.2.2-1.

Table 9.1.2a.2.2-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This operation shall support the request and response data structures,
and response codes specified in tables 9.1.2a.2.2-2 and 9.1.2a.2.2-3.

Table 9.1.2a.2.2-2: Data structures supported by the POST Request Body
on this operation

  ------------------------ --- ------------- -----------------------------------
  Data type                P   Cardinality   Description
  CheckAuthenticationReq   M   1             Authentication check request data
  ------------------------ --- ------------- -----------------------------------

Table 9.1.2a.2.2-3: Data structures supported by the POST Response Body
on this operation

+------------------------+---+-------------+----------+-----------------------------+
| Data type              | P | Cardinality | Response | Description                 |
|                        |   |             |          |                             |
|                        |   |             | codes    |                             |
+------------------------+---+-------------+----------+-----------------------------+
| CheckAuthenticationRsp | M | 1           | 200 OK   | The request was successful. |
+------------------------+---+-------------+----------+-----------------------------+

#### 9.1.2a.3 Operation: revoke-authorization

##### 9.1.2a.3.1 Description

This custom operation allows the CAPIF core function to request the API
exposing function to revoke the authorization of the API invoker for the
indicated service APIs.

##### 9.1.2a.3.2 Operation Definition

This method shall support the URI query parameters specified in
table 9.1.2a.3.2-1.

Table 9.1.2a.3.2-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This operation shall support the request and response data structures,
and response codes specified in tables 9.1.2a.2.3-2 and 9.1.2a.2.3-3.

Table 9.1.2a.2.3-2: Data structures supported by the POST Request Body
on this operation

  ------------------------ --- ------------- ---------------------------------------
  Data type                P   Cardinality   Description
  RevokeAuthorizationReq   M   1             Authorization revocation request data
  ------------------------ --- ------------- ---------------------------------------

Table 9.1.2a.2.3-3: Data structures supported by the POST Response Body
on this operation

+------------------------+---+-------------+----------+-----------------------------+
| Data type              | P | Cardinality | Response | Description                 |
|                        |   |             |          |                             |
|                        |   |             | codes    |                             |
+------------------------+---+-------------+----------+-----------------------------+
| RevokeAuthorizationRsp | M | 1           | 200 OK   | The request was successful. |
+------------------------+---+-------------+----------+-----------------------------+

### 9.1.3 Notifications

None.

### 9.1.4 Data Model

#### 9.1.4.1 General

This subclause specifies the application data model supported by the
API. Data types listed in subclause 7.2 apply to this API.

Table 9.1.4.1-1 specifies the data types defined specifically for the
AEF\_Security\_API service.

Table 9.1.4.1-1: AEF\_Security\_API specific Data Types

  ------------------------ --------------------- ---------------------------------------- ---------------
  Data type                Section defined       Description                              Applicability
  CheckAuthenticationReq   Subclause 9.1.4.2.2   Authentication check request data        
  CheckAuthenticationRsp   Subclause 9.1.4.2.3   Authentication check response data       
  RevokeAuthorizationReq   Subclause 9.1.4.2.4   Authorization revocation request data    
  RevokeAuthorizationRsp   Subclause 9.1.4.2.5   Authorization revocation response data   
  ------------------------ --------------------- ---------------------------------------- ---------------

Table 9.1.4.1-2 specifies data types re-used by the AEF\_Security\_API
service.

Table 9.1.4.1-2: Re-used Data Types

  ---------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------
  Data type              Reference               Comments                                                                             Applicability
  SecurityNotification   Subclause 8.5.4.2.5     Information about the revoked APIs                                                   
  SupportedFeatures      3GPP TS 29.571 \[19\]   Used to negotiate the applicability of optional features defined in table 9.1.6-1.   
  ---------------------- ----------------------- ------------------------------------------------------------------------------------ ---------------

#### 9.1.4.2 Structured data types

##### 9.1.4.2.1 Introduction

This subclause defines the structures to be used in resource
representations.

##### 9.1.4.2.2 Type: CheckAuthenticationReq

Table 9.1.4.2.2-1: Definition of type CheckAuthenticationReq

  ------------------- ------------------- --- ------------- ---------------------------------------------------------------------------------------------------------- ---------------
  Attribute name      Data type           P   Cardinality   Description                                                                                                Applicability
  apiInvokerId        string              M   1             API invoker ID assigned by the CAPIF core function to the API invoker while on-boarding the API invoker.   
  supportedFeatures   SupportedFeatures   M   1             Used to negotiate the supported optional features of the API as described in subclause 7.8.                
  ------------------- ------------------- --- ------------- ---------------------------------------------------------------------------------------------------------- ---------------

##### 9.1.4.2.3 Type: CheckAuthenticationRsp

Table 9.1.4.2.3-1: Definition of type CheckAuthenticationRsp

  ------------------- ------------------- --- ------------- --------------------------------------------------------------------------------------------- ---------------
  Attribute name      Data type           P   Cardinality   Description                                                                                   Applicability
  supportedFeatures   SupportedFeatures   M   1             Used to negotiate the supported optional features of the API as described in subclause 7.8.   
  ------------------- ------------------- --- ------------- --------------------------------------------------------------------------------------------- ---------------

##### 9.1.4.2.4 Type: RevokeAuthorizationReq

Table 9.1.4.2.4-1: Definition of type RevokeAuthorizationReq

  ------------------- ---------------------- --- ------------- --------------------------------------------------------------------------------------------- ---------------
  Attribute name      Data type              P   Cardinality   Description                                                                                   Applicability
  revokeInfo          SecurityNotification   M   1             It contains detailed revocation information.                                                  
  supportedFeatures   SupportedFeatures      M   1             Used to negotiate the supported optional features of the API as described in subclause 7.8.   
  ------------------- ---------------------- --- ------------- --------------------------------------------------------------------------------------------- ---------------

##### 9.1.4.2.5 Type: RevokeAuthorizationRsp

Table 9.1.4.2.5-1: Definition of type RevokeAuthorizationRsp

  ------------------- ------------------- --- ------------- --------------------------------------------------------------------------------------------- ---------------
  Attribute name      Data type           P   Cardinality   Description                                                                                   Applicability
  supportedFeatures   SupportedFeatures   M   1             Used to negotiate the supported optional features of the API as described in subclause 7.8.   
  ------------------- ------------------- --- ------------- --------------------------------------------------------------------------------------------- ---------------

#### 9.1.4.3 Simple data types and enumerations

None.

### 9.1.5 Error Handling

General error responses are defined in the service API specification
using CAPIF.

### 9.1.6 Feature negotiation

General feature negotiation procedures are defined in the service API
specification using CAPIF.

Table 9.1.6-1: Supported Features

  -------------------- ------------------ -----------------
  **Feature number**   **Feature Name**   **Description**
  n/a                                     
  -------------------- ------------------ -----------------

10 Security
===========

10.1 General
------------

Security methods for CAPIF are specified in 3GPP TS 33.122 \[16\].

10.2 CAPIF-1/1e security
------------------------

Secure communication between API invoker and CAPIF core function over
CAPIF-1/1e reference points, using a TLS protocol based connection is
defined in 3GPP TS 33.122 \[16\].

For Onboard\_API\_Invoker service operation of the
CAPIF\_API\_Invoker\_Management\_API, the TLS protocol based connection
shall be established using server certificate as defined in
3GPP TS 33.122 \[16\].

For rest of the CAPIF APIs, the TLS protocol based connection shall be
established with certificate based mutual authentication as defined in
3GPP TS 33.122 \[16\].

10.3 CAPIF-2/2e security and securely invoking service APIs
-----------------------------------------------------------

For secure communication between API invoker and API exposing function
and ensuring secure invocations of service APIs, the API invoker:

\- shall negotiate the security method with the CAPIF core function
using the Obtain\_Security\_Method service operation of the
CAPIF\_Security\_API;

\- shall initiate the authentication with the API exposing function
using the Initiate\_Authentication service operation of the
AEF\_Security\_API; and

\- shall establish a secure connection with the API exposing function as
defined in 3GPP TS 33.122 \[16\], using the method negotiated with the
CAPIF core function.

######## Annex A (normative): OpenAPI specification

A.1 General
===========

This Annex is based on the OpenAPI 3.0.0 specification \[3\] and
provides corresponding representations of all APIs defined in the
present specification, in YAML format.

This Annex shall take precedence when being discrepant to other parts of
the specification with respect to the encoding of information elements
and methods within the API.

NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not
expressed in the OpenAPI definitions but defined in other parts of the
specification also apply.

Informative copies of the OpenAPI specification file contained in this
3GPP Technical Specification are available on a Git-based repository
that uses the GitLab software version control system (see clause 5B of
the 3GPP TR 21.900 \[27\] and clause 5.3.1 of the 3GPP TS 29.501 \[18\]
for further information).

A.2 CAPIF\_Discover\_Service\_API
=================================

openapi: 3.0.0

info:

title: CAPIF\_Discover\_Service\_API

description: \|

API for discovering service APIs.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.1.0\"

externalDocs:

description: 3GPP TS 29.222 V16.3.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/service-apis/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222.

paths:

/allServiceAPIs:

get:

description: Discover published service APIs and retrieve a collection
of APIs according to certain filter criteria.

parameters:

\- name: api-invoker-id

in: query

description: String identifying the API invoker assigned by the CAPIF
core function. It also represents the CCF identifier in the CAPIF-6/6e
interface.

required: true

schema:

type: string

\- name: api-name

in: query

description: API name, it is set as {apiName} part of the URI structure
as defined in subclause 4.4 of 3GPP TS 29.501 \[18\].

schema:

type: string

\- name: api-version

in: query

description: API major version the URI (e.g. v1).

schema:

type: string

\- name: comm-type

in: query

description: Communication type used by the API (e.g.
REQUEST\_RESPONSE).

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/CommunicationType\'

\- name: protocol

in: query

description: Protocol used by the API.

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/Protocol\'

\- name: aef-id

in: query

description: AEF identifer.

schema:

type: string

\- name: data-format

in: query

description: Data formats used by the API (e.g. serialization protocol
JSON used).

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/DataFormat\'

\- name: api-cat

in: query

description: The service API category to which the service API belongs
to.

schema:

type: string

\- name: supported-features

in: query

description: Features supported by the NF consumer for the CAPIF
Discover Service API.

schema:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

\- name: api-supported-features

in: query

description: Features supported by the discovered service API indicated
by api-name parameter. This may only be present if api-name query
parameter is present.

schema:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

responses:

\'200\':

description: The response body contains the result of the search over
the list of registered APIs.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/DiscoveredAPIs\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'414\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/414\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

DiscoveredAPIs:

type: object

properties:

serviceAPIDescriptions:

type: array

items:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/ServiceAPIDescription\'

minItems: 1

description: Description of the service API as published by the service.
Each service API description shall include AEF profiles matching the
filter criteria.

A.3 CAPIF\_Publish\_Service\_API
================================

openapi: 3.0.0

info:

title: CAPIF\_Publish\_Service\_API

description: \|

API for publishing service APIs.

© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.1.2\"

externalDocs:

description: 3GPP TS 29.222 V16.9.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/published-apis/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222.

paths:

\# APF published API

/{apfId}/service-apis:

post:

description: Publish a new API.

parameters:

\- name: apfId

in: path

required: true

schema:

type: string

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceAPIDescription\'

responses:

\'201\':

description: Service API published successfully The URI of the created
resource shall be returned in the \"Location\" HTTP header.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceAPIDescription\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/published-apis/v1/{apfId}/service-apis/{serviceApiId}\'

required: true

schema:

type: string

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

get:

description: Retrieve all published APIs.

parameters:

\- name: apfId

in: path

required: true

schema:

type: string

responses:

\'200\':

description: Definition of all service API(s) published by the API
publishing function.

content:

application/json:

schema:

type: array

items:

\$ref: \'\#/components/schemas/ServiceAPIDescription\'

minItems: 0

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

\# Individual APF published API

/{apfId}/service-apis/{serviceApiId}:

get:

description: Retrieve a published service API.

parameters:

\- name: serviceApiId

in: path

required: true

schema:

type: string

\- name: apfId

in: path

required: true

schema:

type: string

responses:

\'200\':

description: Definition of individual service API published by the API
publishing function.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceAPIDescription\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

put:

description: Update a published service API.

parameters:

\- name: serviceApiId

in: path

required: true

schema:

type: string

\- name: apfId

in: path

required: true

schema:

type: string

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceAPIDescription\'

responses:

\'200\':

description: Definition of service API updated successfully.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceAPIDescription\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

delete:

description: Unpublish a published service API.

parameters:

\- name: serviceApiId

in: path

required: true

schema:

type: string

\- name: apfId

in: path

required: true

schema:

type: string

responses:

\'204\':

description: The individual published service API matching the
serviceAPiId is deleted.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

\# Components

components:

schemas:

\# Data Type for representations

ServiceAPIDescription:

type: object

properties:

apiName:

type: string

description: API name, it is set as {apiName} part of the URI structure
as defined in subclause 4.4 of 3GPP TS 29.501.

apiId:

type: string

description: API identifier assigned by the CAPIF core function to the
published service API. Shall not be present in the HTTP POST request
from the API publishing function to the CAPIF core function. Shall be
present in the HTTP POST response from the CAPIF core function to the
API publishing function and in the HTTP GET response from the CAPIF core
function to the API invoker (discovery API).

aefProfiles:

type: array

items:

\$ref: \'\#/components/schemas/AefProfile\'

minItems: 1

description: AEF profile information, which includes the exposed API
details (e.g. protocol).

description:

type: string

description: Text description of the API

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

shareableInfo:

\$ref: \'\#/components/schemas/ShareableInformation\'

serviceAPICategory:

type: string

apiSuppFeats:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

pubApiPath:

\$ref: \'\#/components/schemas/PublishedApiPath\'

ccfId:

type: string

description: CAPIF core function identifier.

required:

\- apiName

InterfaceDescription:

type: object

properties:

ipv4Addr:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Ipv4Addr\'

ipv6Addr:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Ipv6Addr\'

port:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Port\'

securityMethods:

type: array

items:

\$ref: \'\#/components/schemas/SecurityMethod\'

minItems: 1

description: Security methods supported by the interface, it take
precedence over the security methods provided in AefProfile, for this
specific interface.

oneOf:

\- required: \[ipv4Addr\]

\- required: \[ipv6Addr\]

AefProfile:

type: object

properties:

aefId:

type: string

description: Identifier of the API exposing function

versions:

type: array

items:

\$ref: \'\#/components/schemas/Version\'

minItems: 1

description: API version

protocol:

\$ref: \'\#/components/schemas/Protocol\'

dataFormat:

\$ref: \'\#/components/schemas/DataFormat\'

securityMethods:

type: array

items:

\$ref: \'\#/components/schemas/SecurityMethod\'

minItems: 1

description: Security methods supported by the AEF

domainName:

type: string

description: Domain to which API belongs to

interfaceDescriptions:

type: array

items:

\$ref: \'\#/components/schemas/InterfaceDescription\'

minItems: 1

description: Interface details

required:

\- aefId

\- versions

oneOf:

\- required: \[domainName\]

\- required: \[interfaceDescriptions\]

Resource:

type: object

properties:

resourceName:

type: string

description: Resource name

commType:

\$ref: \'\#/components/schemas/CommunicationType\'

uri:

type: string

description: Relative URI of the API resource, it is set as
{apiSpecificResourceUriPart} part of the URI structure as defined in
subclause 4.4 of 3GPP TS 29.501.

custOpName:

type: string

description: it is set as {custOpName} part of the URI structure for a
custom operation associated with a resource as defined in subclause 4.4
of 3GPP TS 29.501.

operations:

type: array

items:

\$ref: \'\#/components/schemas/Operation\'

minItems: 1

description: Supported HTTP methods for the API resource. Only
applicable when the protocol in AefProfile indicates HTTP.

description:

type: string

description: Text description of the API resource

required:

\- resourceName

\- commType

\- uri

CustomOperation:

type: object

properties:

commType:

\$ref: \'\#/components/schemas/CommunicationType\'

custOpName:

type: string

description: it is set as {custOpName} part of the URI structure for a
custom operation without resource association as defined in
subclause 4.4 of 3GPP TS 29.501.

operations:

type: array

items:

\$ref: \'\#/components/schemas/Operation\'

minItems: 1

description: Supported HTTP methods for the API resource. Only
applicable when the protocol in AefProfile indicates HTTP.

description:

type: string

description: Text description of the custom operation

required:

\- commType

\- custOpName

Version:

type: object

properties:

apiVersion:

type: string

description: API major version in URI (e.g. v1)

expiry:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/DateTime\'

resources:

type: array

items:

\$ref: \'\#/components/schemas/Resource\'

minItems: 1

description: Resources supported by the API.

custOperations:

type: array

items:

\$ref: \'\#/components/schemas/CustomOperation\'

minItems: 1

description: Custom operations without resource association.

required:

\- apiVersion

ShareableInformation:

type: object

properties:

isShareable:

type: boolean

description: Set to \"true\" indicates that the service API and/or the
service API category can be shared to the list of CAPIF provider domain
information. Otherwise set to \"false\".

capifProvDoms:

type: array

items:

type: string

minItems: 1

description: List of CAPIF provider domains to which the service API
information to be shared.

required:

\- isShareable

PublishedApiPath:

type: object

properties:

ccfIds:

type: array

items:

type: string

minItems: 1

description: A list of CCF identifiers where the service API is already
published.

Protocol:

anyOf:

\- type: string

enum:

\- HTTP\_1\_1

\- HTTP\_2

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- HTTP\_1\_1: HTTP version 1.1

\- HTTP\_2: HTTP version 2

CommunicationType:

anyOf:

\- type: string

enum:

\- REQUEST\_RESPONSE

\- SUBSCRIBE\_NOTIFY

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- REQUEST\_RESPONSE: The communication is of the type request-response

\- SUBSCRIBE\_NOTIFY: The communication is of the type subscribe-notify

DataFormat:

anyOf:

\- type: string

enum:

\- JSON

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- JSON: JavaScript Object Notation

SecurityMethod:

anyOf:

\- type: string

enum:

\- PSK

\- PKI

\- OAUTH

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- PSK: Security method 1 (Using TLS-PSK) as described in 3GPP TS 33.122

\- PKI: Security method 2 (Using PKI) as described in 3GPP TS 33.122

\- OAUTH: Security method 3 (TLS with OAuth token) as described in 3GPP
TS 33.122

Operation:

anyOf:

\- type: string

enum:

\- GET

\- POST

\- PUT

\- PATCH

\- DELETE

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- GET: HTTP GET method

\- POST: HTTP POST method

\- PUT: HTTP PUT method

\- PATCH: HTTP PATCH method

\- DELETE: HTTP DELETE method

A.4 CAPIF\_Events\_API
======================

openapi: 3.0.0

info:

title: CAPIF\_Events\_API

description: \|

API for event subscription management.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.1.0\"

externalDocs:

description: 3GPP TS 29.222 V16.3.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/capif-events/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222

paths:

/{subscriberId}/subscriptions:

post:

description: Creates a new individual CAPIF Event Subscription.

parameters:

\- name: subscriberId

in: path

description: Identifier of the Subscriber

required: true

schema:

type: string

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/EventSubscription\'

callbacks:

notificationDestination:

\'{request.body\#/notificationDestination}\':

post:

requestBody: \# contents of the callback message

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/EventNotification\'

responses:

\'204\':

description: No Content (successful notification)

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

responses:

\'201\':

description: Created (Successful creation of subscription)

content:

application/json:

schema:

\$ref: \'\#/components/schemas/EventSubscription\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/capif-events/v1/{subscriberId}/subscriptions/{subscriptionId}\'

required: true

schema:

type: string

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/{subscriberId}/subscriptions/{subscriptionId}:

delete:

description: Deletes an individual CAPIF Event Subscription.

parameters:

\- name: subscriberId

in: path

description: Identifier of the Subscriber

required: true

schema:

type: string

\- name: subscriptionId

in: path

description: Identifier of an individual Events Subscription

required: true

schema:

type: string

responses:

\'204\':

description: The individual CAPIF Events Subscription matching the
subscriptionId is deleted.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

EventSubscription:

type: object

properties:

events:

type: array

items:

\$ref: \'\#/components/schemas/CAPIFEvent\'

minItems: 1

description: Subscribed events

eventFilters:

type: array

items:

\$ref: \'\#/components/schemas/CAPIFEventFilter\'

minItems: 1

description: Subscribed event filters

eventReq:

\$ref:
\'TS29523\_Npcf\_EventExposure.yaml\#/components/schemas/ReportingInformation\'

notificationDestination:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Uri\'

requestTestNotification:

type: boolean

description: Set to true by Subscriber to request the CAPIF core
function to send a test notification as defined in in subclause 7.6. Set
to false or omitted otherwise.

websockNotifConfig:

\$ref:
\'TS29122\_CommonData.yaml\#/components/schemas/WebsockNotifConfig\'

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- events

\- notificationDestination

EventNotification:

type: object

properties:

subscriptionId:

type: string

description: Identifier of the subscription resource to which the
notification is related -- CAPIF resource identifier

events:

\$ref: \'\#/components/schemas/CAPIFEvent\'

eventDetail:

\$ref: \'\#/components/schemas/CAPIFEventDetail\'

required:

\- subscriptionId

\- events

CAPIFEventFilter:

type: object

properties:

apiIds:

type: array

items:

type: string

minItems: 1

description: Identifier of the service API

apiInvokerIds:

type: array

items:

type: string

minItems: 1

description: Identity of the API invoker

aefIds:

type: array

items:

type: string

minItems: 1

description: Identifier of the API exposing function

CAPIFEventDetail:

type: object

properties:

serviceAPIDescriptions:

type: array

items:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/ServiceAPIDescription\'

minItems: 1

description: Description of the service API as published by the APF.

apiIds:

type: array

items:

type: string

minItems: 1

description: Identifier of the service API

apiInvokerIds:

type: array

items:

type: string

minItems: 1

description: Identity of the API invoker

accCtrlPolList:

\$ref: \'\#/components/schemas/AccessControlPolicyListExt\'

invocationLogs:

type: array

items:

\$ref:
\'TS29222\_CAPIF\_Logging\_API\_Invocation\_API.yaml\#/components/schemas/InvocationLog\'

minItems: 1

description: Invocation logs.

apiTopoHide:

\$ref: \'\#/components/schemas/TopologyHiding\'

AccessControlPolicyListExt:

allOf:

\- \$ref:
\'TS29222\_CAPIF\_Access\_Control\_Policy\_API.yaml\#/components/schemas/AccessControlPolicyList\'

\- type: object

properties:

apiId:

type: string

required:

\- apiId

TopologyHiding:

type: object

properties:

apiId:

type: string

routingRules:

type: array

items:

\$ref:
\'TS29222\_CAPIF\_Routing\_Info\_API.yaml\#/components/schemas/RoutingRule\'

minItems: 1

required:

\- apiId

\- routingRules

CAPIFEvent:

anyOf:

\- type: string

enum:

\- SERVICE\_API\_AVAILABLE

\- SERVICE\_API\_UNAVAILABLE

\- SERVICE\_API\_UPDATE

\- API\_INVOKER\_ONBOARDED

\- API\_INVOKER\_OFFBOARDED

\- SERVICE\_API\_INVOCATION\_SUCCESS

\- SERVICE\_API\_INVOCATION\_FAILURE

\- ACCESS\_CONTROL\_POLICY\_UPDATE

\- ACCESS\_CONTROL\_POLICY\_UNAVAILABLE

\- API\_INVOKER\_AUTHORIZATION\_REVOKED

\- API\_INVOKER\_UPDATED

\- API\_TOPOLOGY\_HIDING\_CREATED

\- API\_TOPOLOGY\_HIDING\_REVOKED

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- SERVICE\_API\_AVAILABLE: Events related to the availability of
service APIs after the service APIs are published.

\- SERVICE\_API\_UNAVAILABLE: Events related to the unavailability of
service APIs after the service APIs are unpublished.

\- SERVICE\_API\_UPDATE: Events related to change in service API
information.

\- API\_INVOKER\_ONBOARDED: Events related to API invoker onboarded to
CAPIF.

\- API\_INVOKER\_OFFBOARDED: Events related to API invoker offboarded
from CAPIF.

\- SERVICE\_API\_INVOCATION\_SUCCESS: Events related to the successful
invocation of service APIs.

\- SERVICE\_API\_INVOCATION\_FAILURE: Events related to the failed
invocation of service APIs.

\- ACCESS\_CONTROL\_POLICY\_UPDATE: Events related to the update for the
access control policy related to the service APIs.

\- ACCESS\_CONTROL\_POLICY\_UNAVAILABLE: Events related to the
unavailability of the access control policy related to the service APIs.

\- API\_INVOKER\_AUTHORIZATION\_REVOKED: Events related to the
revocation of the authorization of API invokers to access the service
APIs.

\- API\_INVOKER\_UPDATED: Events related to API invoker profile updated
to CAPIF.

\- API\_TOPOLOGY\_HIDING\_CREATED: Events related to the creation or
update of the API topology hiding information of the service APIs after
the service APIs are published.

\- API\_TOPOLOGY\_HIDING\_REVOKED: Events related to the revocation of
the API topology hiding information of the service APIs after the
service APIs are unpublished.

A.5 CAPIF\_API\_Invoker\_Management\_API
========================================

openapi: 3.0.0

info:

title: CAPIF\_API\_Invoker\_Management\_API

description: \|

API for API invoker management.

© 2022, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.1.1\"

externalDocs:

description: 3GPP TS 29.222 V16.10.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/api-invoker-management/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222

paths:

/onboardedInvokers:

post:

description: Creates a new individual API Invoker profile.

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIInvokerEnrolmentDetails\'

callbacks:

notificationDestination:

\'{request.body\#/notificationDestination}\':

post:

description: Notify the API Invoker about the onboarding completion

requestBody: \# contents of the callback message

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/OnboardingNotification\'

responses:

\'204\':

description: No Content (successful onboarding notification)

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

responses:

\'201\':

description: API invoker on-boarded successfully

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIInvokerEnrolmentDetails\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/api-invoker-management/v1/onboardedInvokers/{onboardingId}\'

required: true

schema:

type: string

\'202\':

description: The CAPIF core has accepted the Onboarding request and is
processing it.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/onboardedInvokers/{onboardingId}:

delete:

description: Deletes an individual API Invoker.

parameters:

\- name: onboardingId

in: path

description: String identifying an individual on-boarded API invoker
resource

required: true

schema:

type: string

responses:

\'204\':

description: The individual API Invoker matching onboardingId was
offboarded.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

put:

description: Updates an individual API invoker details.

parameters:

\- name: onboardingId

in: path

description: String identifying an individual on-boarded API invoker
resource

required: true

schema:

type: string

requestBody:

description: representation of the API invoker details to be updated in
CAPIF core function

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIInvokerEnrolmentDetails\'

callbacks:

notificationDestination:

\'{request.body\#/notificationDestination}\':

post:

description: Notify the API Invoker about the API invoker update
completion

requestBody: \# contents of the callback message

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/OnboardingNotification\'

responses:

\'204\':

description: No Content (successful API invoker update notification)

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

responses:

\'200\':

description: API invoker details updated successfully

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIInvokerEnrolmentDetails\'

\'202\':

description: The CAPIF core has accepted the API invoker update details
request and is processing it.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

OnboardingInformation:

type: object

properties:

apiInvokerPublicKey:

type: string

description: The API Invoker's public key

apiInvokerCertificate:

type: string

description: The API Invoker's generic client certificate, provided by
the CAPIF core function.

onboardingSecret:

type: string

description: The API Invoker's onboarding secret, provided by the CAPIF
core function.

required:

\- apiInvokerPublicKey

APIList:

type: object

description: Represents a list of APIs.

properties:

serviceAPIDescriptions:

type: array

items:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/ServiceAPIDescription\'

minItems: 1

description: The list of service APIs that the API Invoker is allowed to
invoke.

APIInvokerEnrolmentDetails:

type: object

properties:

apiInvokerId:

type: string

description: API invoker ID assigned by the CAPIF core function to the
API invoker while on-boarding the API invoker. Shall not be present in
the HTTP POST request from the API invoker to the CAPIF core function,
to on-board itself. Shall be present in all other HTTP requests and
responses.

readOnly: true

onboardingInformation:

\$ref: \'\#/components/schemas/OnboardingInformation\'

notificationDestination:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Uri\'

requestTestNotification:

type: boolean

description: Set to true by Subscriber to request the CAPIF core
function to send a test notification as defined in in subclause 7.6. Set
to false or omitted otherwise.

websockNotifConfig:

\$ref:
\'TS29122\_CommonData.yaml\#/components/schemas/WebsockNotifConfig\'

apiList:

\$ref: \'\#/components/schemas/APIList\'

apiInvokerInformation:

type: string

description: Generic information related to the API invoker such as
details of the device or the application.

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- onboardingInformation

\- notificationDestination

description: Information about the API Invoker that requested to onboard

OnboardingNotification:

type: object

properties:

result:

type: boolean

description: Set to \"true\" indicate successful on-boarding. Otherwise
set to \"false\"

resourceLocation:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Uri\'

apiInvokerEnrolmentDetails:

\$ref: \'\#/components/schemas/APIInvokerEnrolmentDetails\'

apiList:

\$ref: \'\#/components/schemas/APIList\'

required:

\- result

A.6 CAPIF\_Security\_API
========================

openapi: 3.0.0

info:

title: CAPIF\_Security\_API

description: \|

API for CAPIF security management.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.3\"

externalDocs:

description: 3GPP TS 29.222 V15.7.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/capif-security/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222.

paths:

/trustedInvokers/{apiInvokerId}:

get:

parameters:

\- name: apiInvokerId

in: path

description: Identifier of an individual API invoker

required: true

schema:

type: string

\- name: authenticationInfo

in: query

description: When set to \'true\', it indicates the CAPIF core function
to send the authentication information of the API invoker. Set to false
or omitted otherwise.

schema:

type: boolean

\- name: authorizationInfo

in: query

description: When set to \'true\', it indicates the CAPIF core function
to send the authorization information of the API invoker. Set to false
or omitted otherwise.

schema:

type: boolean

responses:

\'200\':

description: The security related information of the API Invoker based
on the request from the API exposing function.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceSecurity\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'414\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/414\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

put:

parameters:

\- name: apiInvokerId

in: path

description: Identifier of an individual API invoker

required: true

schema:

type: string

requestBody:

description: create a security context for an API invoker

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceSecurity\'

callbacks:

notificationDestination:

\'{request.body\#/notificationDestination}\':

post:

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SecurityNotification\'

responses:

\'204\':

description: No Content (successful notification)

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

responses:

\'201\':

description: Successful created.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceSecurity\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/capif-security/v1/trustedInvokers/{apiInvokerId}\'

required: true

schema:

type: string

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'414\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/414\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

delete:

parameters:

\- name: apiInvokerId

in: path

description: Identifier of an individual API invoker

required: true

schema:

type: string

responses:

\'204\':

description: No Content (Successful deletion of the existing
subscription)

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/trustedInvokers/{apiInvokerId}/update:

post:

parameters:

\- name: apiInvokerId

in: path

description: Identifier of an individual API invoker

required: true

schema:

type: string

requestBody:

description: Update the security context (e.g. re-negotiate the security
methods).

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceSecurity\'

responses:

\'200\':

description: Successful updated.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/ServiceSecurity\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/trustedInvokers/{apiInvokerId}/delete:

post:

parameters:

\- name: apiInvokerId

in: path

description: Identifier of an individual API invoker

required: true

schema:

type: string

requestBody:

description: Revoke the authorization of the API invoker for APIs.

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SecurityNotification\'

responses:

\'204\':

description: Successful revoked.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/securities/{securityId}/token:

post:

parameters:

\- name: securityId

in: path

description: Identifier of an individual API invoker

required: true

schema:

type: string

requestBody:

required: true

content:

application/x-www-form-urlencoded:

schema:

\$ref: \'\#/components/schemas/AccessTokenReq\'

responses:

\'200\':

description: Successful Access Token Request

content:

application/json:

schema:

\$ref: \'\#/components/schemas/AccessTokenRsp\'

\'400\':

description: Error in the Access Token Request

content:

application/json:

schema:

\$ref: \'\#/components/schemas/AccessTokenErr\'

components:

schemas:

ServiceSecurity:

type: object

properties:

securityInfo:

type: array

items:

\$ref: \'\#/components/schemas/SecurityInformation\'

minimum: 1

notificationDestination:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Uri\'

requestTestNotification:

type: boolean

description: Set to true by API invoker to request the CAPIF core
function to send a test notification as defined in in subclause 7.6. Set
to false or omitted otherwise.

websockNotifConfig:

\$ref:
\'TS29122\_CommonData.yaml\#/components/schemas/WebsockNotifConfig\'

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- securityInfo

\- notificationDestination

SecurityInformation:

type: object

properties:

interfaceDetails:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/InterfaceDescription\'

aefId:

type: string

description: Identifier of the API exposing function

prefSecurityMethods:

type: array

items:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/SecurityMethod\'

minItems: 1

description: Security methods preferred by the API invoker for the API
interface.

selSecurityMethod:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/SecurityMethod\'

authenticationInfo:

type: string

description: Authentication related information

authorizationInfo:

type: string

description: Authorization related information

required:

\- prefSecurityMethods

oneOf:

\- required: \[interfaceDetails\]

\- required: \[aefId\]

SecurityNotification:

type: object

properties:

apiInvokerId:

type: string

description: String identifying the API invoker assigned by the CAPIF
core function

aefId:

type: string

description: String identifying the AEF.

apiIds:

type: array

items:

type: string

minItems: 1

description: Identifier of the service API

cause:

\$ref: \'\#/components/schemas/Cause\'

required:

\- apiInvokerId

\- apiIds

\- cause

AccessTokenReq:

format: x-www-form-urlencoded

properties:

grant\_type:

type: string

enum:

\- client\_credentials

client\_id:

type: string

client\_secret:

type: string

scope:

type: string

required:

\- grant\_type

\- client\_id

AccessTokenRsp:

type: object

properties:

access\_token:

type: string

description: JWS Compact Serialized representation of JWS signed JSON
object (AccessTokenClaims)

token\_type:

type: string

enum:

\- Bearer

expires\_in:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DurationSec\'

scope:

type: string

required:

\- access\_token

\- token\_type

\- expires\_in

AccessTokenClaims:

type: object

properties:

iss:

type: string

scope:

type: string

exp:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DurationSec\'

required:

\- iss

\- scope

\- exp

AccessTokenErr:

type: object

properties:

error:

type: string

enum:

\- invalid\_request

\- invalid\_client

\- invalid\_grant

\- unauthorized\_client

\- unsupported\_grant\_type

\- invalid\_scope

error\_description:

type: string

error\_uri:

type: string

required:

\- error

Cause:

anyOf:

\- type: string

enum:

\- OVERLIMIT\_USAGE

\- UNEXPECTED\_REASON

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- OVERLIMIT\_USAGE: The revocation of the authorization of the API
invoker is due to the overlimit usage of the service API

\- UNEXPECTED\_REASON: The revocation of the authorization of the API
invoker is due to unexpected reason.

A.7 CAPIF\_Access\_Control\_Policy\_API
=======================================

openapi: 3.0.0

info:

title: CAPIF\_Access\_Control\_Policy\_API

description: \|

API for access control policy.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.3\"

externalDocs:

description: 3GPP TS 29.222 V15.6.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/access-control-policy/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222

paths:

/accessControlPolicyList/{serviceApiId}:

get:

description: Retrieves the access control policy list.

parameters:

\- name: serviceApiId

in: path

description: Identifier of a published service API

required: true

schema:

type: string

\- name: aef-id

in: query

required: true

description: Identifier of the AEF

schema:

type: string

\- name: api-invoker-id

in: query

description: Identifier of the API invoker

schema:

type: string

\- name: supported-features

in: query

description: To filter irrelevant responses related to unsupported
features

schema:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

responses:

\'200\':

description: OK.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/AccessControlPolicyList\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'414\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/414\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

AccessControlPolicyList:

type: object

properties:

apiInvokerPolicies:

type: array

items:

\$ref: \'\#/components/schemas/ApiInvokerPolicy\'

minItems: 0

description: Policy of each API invoker.

ApiInvokerPolicy:

type: object

properties:

apiInvokerId:

type: string

description: API invoker ID assigned by the CAPIF core function

allowedTotalInvocations:

type: integer

description: Total number of invocations allowed on the service API by
the API invoker.

allowedInvocationsPerSecond:

type: integer

description: Invocations per second allowed on the service API by the
API invoker.

allowedInvocationTimeRangeList:

type: array

items:

\$ref: \'\#/components/schemas/TimeRangeList\'

minItems: 0

description: The time ranges during which the invocations are allowed on
the service API by the API invoker.

required:

\- apiInvokerId

TimeRangeList:

type: object

properties:

startTime:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DateTime\'

stopTime:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DateTime\'

A.8 CAPIF\_Logging\_API\_Invocation\_API
========================================

openapi: 3.0.0

info:

title: CAPIF\_Logging\_API\_Invocation\_API

description: \|

API for invocation logs.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.2\"

externalDocs:

description: 3GPP TS 29.222 V15.6.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/api-invocation-logs/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222

paths:

/{aefId}/logs:

post:

description: Creates a new log entry for service API invocations.

parameters:

\- name: aefId

in: path

description: Identifier of the API exposing function

required: true

schema:

type: string

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/InvocationLog\'

responses:

\'201\':

description: Log of service API invocations provided by API exposing
function successfully stored on the CAPIF core function.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/InvocationLog\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/api-invocation-logs/v1/{aefId}/logs/{logId}\'

required: true

schema:

type: string

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/{aefId}/logs/{logId}:

description: Creates a new log entry for service API invocations.

parameters:

\- name: aefId

in: path

description: Identifier of the API exposing function

required: true

schema:

type: string

\- name: logId

in: path

description: Identifier of individual log entry

required: true

schema:

type: string

components:

schemas:

InvocationLog:

type: object

properties:

aefId:

type: string

description: Identity information of the API exposing function
requesting logging of service API invocations

apiInvokerId:

type: string

description: Identity of the API invoker which invoked the service API

logs:

type: array

items:

\$ref: \'\#/components/schemas/Log\'

minItems: 1

description: Service API invocation log

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- aefId

\- apiInvokerId

\- logs

Log:

type: object

properties:

apiId:

type: string

description: String identifying the API invoked.

apiName:

type: string

description: Name of the API which was invoked, it is set as {apiName}
part of the URI structure as defined in subclause 4.4 of 3GPP TS 29.501.

apiVersion:

type: string

description: Version of the API which was invoked

resourceName:

type: string

description: Name of the specific resource invoked

uri:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Uri\'

protocol:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/Protocol\'

operation:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/Operation\'

result:

type: string

description: For HTTP protocol, it contains HTTP status code of the
invocation

invocationTime:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DateTime\'

invocationLatency:

\$ref: \'\#/components/schemas/DurationMs\'

inputParameters:

description: List of input parameters. Can be any value - string,
number, boolean, array or object.

outputParameters:

description: List of output parameters. Can be any value - string,
number, boolean, array or object.

srcInterface:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/InterfaceDescription\'

destInterface:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/InterfaceDescription\'

fwdInterface:

type: string

description: It includes the node identifier (as defined in
IETF RFC 7239 of all forwarding entities between the API invoker and the
AEF, concatenated with comma and space, e.g. 192.0.2.43:80,
unknown:\_OBFport, 203.0.113.60

required:

\- apiId

\- apiName

\- apiVersion

\- resourceName

\- protocol

\- result

DurationMs:

type: integer

description: Unsigned integer identifying a period of time in units of
milliseconds.

minimum: 0

A.9 CAPIF\_Auditing\_API
========================

openapi: 3.0.0

info:

title: CAPIF\_Auditing\_API

description: \|

API for auditing.

© 2019, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.1\"

externalDocs:

description: 3GPP TS 29.222 V15.4.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/logs/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222.

paths:

/apiInvocationLogs:

get:

description: Query and retrieve service API invocation logs stored on
the CAPIF core function.

parameters:

\- name: aef-id

in: query

description: String identifying the API exposing function.

schema:

type: string

\- name: api-invoker-id

in: query

description: String identifying the API invoker which invoked the
service API.

schema:

type: string

\- name: time-range-start

in: query

description: Start time of the invocation time range.

schema:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DateTime\'

\- name: time-range-end

in: query

description: End time of the invocation time range.

schema:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/DateTime\'

\- name: api-id

in: query

description: String identifying the API invoked.

schema:

type: string

\- name: api-name

in: query

description: API name, it is set as {apiName} part of the URI structure
as defined in subclause 4.4 of 3GPP TS 29.501.

schema:

type: string

\- name: api-version

in: query

description: Version of the API which was invoked.

schema:

type: string

\- name: protocol

in: query

description: Protocol invoked.

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/Protocol\'

\- name: operation

in: query

description: Operation that was invoked on the API.

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/Operation\'

\- name: result

in: query

description: Result or output of the invocation.

schema:

type: string

\- name: resource-name

in: query

description: Name of the specific resource invoked.

schema:

type: string

\- name: src-interface

in: query

description: Interface description of the API invoker.

content:

application/json:

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/InterfaceDescription\'

\- name: dest-interface

in: query

description: Interface description of the API invoked.

content:

application/json:

schema:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/InterfaceDescription\'

\- name: supported-features

in: query

description: To filter irrelevant responses related to unsupported
features

schema:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

responses:

\'200\':

description: Result of the query operation along with fetched service
API invocation log data.

content:

application/json:

schema:

\$ref:
\'TS29222\_CAPIF\_Logging\_API\_Invocation\_API.yaml\#/components/schemas/InvocationLog\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'414\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/414\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

A.10 AEF\_Security\_API
=======================

openapi: 3.0.0

info:

title: AEF\_Security\_API

description: \|

API for AEF security management.

© 2019, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.1\"

externalDocs:

description: 3GPP TS 29.222 V15.4.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/aef-security/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222.

paths:

/check-authentication:

post:

summary: Check authentication.

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/CheckAuthenticationReq\'

responses:

\'200\':

description: The request was successful.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/CheckAuthenticationRsp\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/revoke-authorization:

post:

summary: Revoke authorization.

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/RevokeAuthorizationReq\'

responses:

\'200\':

description: The request was successful.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/RevokeAuthorizationRsp\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

CheckAuthenticationReq:

type: object

properties:

apiInvokerId:

type: string

description: API invoker ID assigned by the CAPIF core function to the
API invoker while on-boarding the API invoker.

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- apiInvokerId

\- supportedFeatures

CheckAuthenticationRsp:

type: object

properties:

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- supportedFeatures

RevokeAuthorizationReq:

type: object

properties:

revokeInfo:

\$ref:
\'TS29222\_CAPIF\_Security\_API.yaml\#/components/schemas/SecurityNotification\'

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- revokeInfo

\- supportedFeatures

RevokeAuthorizationRsp:

type: object

properties:

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- supportedFeatures

A.11 CAPIF\_API\_Provider\_Management\_API
==========================================

openapi: 3.0.0

info:

title: CAPIF\_API\_Provider\_Management\_API

description: \|

API for API provider domain functions management.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.0\"

externalDocs:

description: 3GPP TS 29.222 V16.3.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/api-provider-management/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222

paths:

/registrations:

post:

description: Registers a new API Provider domain with API provider
domain functions profiles.

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIProviderEnrolmentDetails\'

responses:

\'201\':

description: API provider domain registered successfully

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIProviderEnrolmentDetails\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure:
{apiRoot}/api-provider-management/v1/registrations/{registrationId}\'

required: true

schema:

type: string

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

/registrations/{registrationId}:

delete:

description: Deregisters API provider domain by deleting API provider
domain and functions.

parameters:

\- name: registrationId

in: path

description: String identifying an registered API provider domain
resource

required: true

schema:

type: string

responses:

\'204\':

description: The API provider domain matching registrationId is deleted.

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

put:

description: Updates an API provider domain\'s registration details.

parameters:

\- name: registrationId

in: path

description: String identifying an registered API provider domain
resource

required: true

schema:

type: string

requestBody:

description: representation of the API provider domain registration
details to be updated in CAPIF core function

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIProviderEnrolmentDetails\'

responses:

\'200\':

description: API provider domain registration details updated
successfully

content:

application/json:

schema:

\$ref: \'\#/components/schemas/APIProviderEnrolmentDetails\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

APIProviderEnrolmentDetails:

type: object

properties:

apiProvDomId:

type: string

description: API provider domain ID assigned by the CAPIF core function
to the API management function while registering the API provider
domain. Shall not be present in the HTTP POST request from the API
Management function to the CAPIF core function, to on-board itself.
Shall be present in all other HTTP requests and responses.

readOnly: true

regSec:

type: string

description: Security information necessary for the CAPIF core function
to validate the registration of the API provider domain. Shall be
present in HTTP POST request from API management function to CAPIF core
function for API provider domain registration.

apiProvFuncs:

type: array

items:

\$ref: \'\#/components/schemas/APIProviderFunctionDetails\'

minItems: 1

description: A list of individual API provider domain functions details.
When included by the API management function in the HTTP request
message, it lists the API provider domain functions that the API
management function intends to register/update in registration or update
registration procedure. When included by the CAPIF core function in the
HTTP response message, it lists the API domain functions details that
are registered or updated successfully.

apiProvDomInfo:

type: string

description: Generic information related to the API provider domain such
as details of the API provider applications.

suppFeat:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

failReason:

type: string

description: Registration or update specific failure information of
failed API provider domain function registrations.Shall be present in
the HTTP response body if atleast one of the API provider domain
function registration or update registration fails.

required:

\- regSec

APIProviderFunctionDetails:

type: object

properties:

apiProvFuncId:

type: string

description: API provider domain functionID assigned by the CAPIF core
function to the API provider domain function while registering/updating
the API provider domain. Shall not be present in the HTTP POST request
from the API management function to the CAPIF core function, to register
itself. Shall be present in all other HTTP requests and responses.

regInfo:

\$ref: \'\#/components/schemas/RegistrationInformation\'

apiProvFuncRole:

\$ref: \'\#/components/schemas/ApiProviderFuncRole\'

apiProvFuncInfo:

type: string

description: Generic information related to the API provider domain
function such as details of the API provider applications.

required:

\- regInfo

\- apiProvFuncRole

RegistrationInformation:

type: object

properties:

apiProvPubKey:

type: string

description: Public Key of API Provider domain function.

apiProvCert:

type: string

description: API provider domain function\'s client certificate

required:

\- apiProvPubKey

ApiProviderFuncRole:

anyOf:

\- type: string

enum:

\- AEF

\- APF

\- AMF

\- type: string

description: \>

This string provides forward-compatiblity with future extensions to the
enumeration but is not used to encode content defined in the present
version of this API.

description: \>

Possible values are

\- AEF: API provider function is API Exposing Function.

\- APF: API provider function is API Publishing Function.

\- AMF: API Provider function is API Management Function.

A.12 CAPIF\_Routing\_Info\_API
==============================

openapi: 3.0.0

info:

title: CAPIF\_Routing\_Info\_API

description: \|

API for Routing information.

© 2020, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

version: \"1.0.0\"

externalDocs:

description: 3GPP TS 29.222 V16.3.0 Common API Framework for 3GPP
Northbound APIs

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.222/

servers:

\- url: \'{apiRoot}/capif-routing-info/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 7.5 of 3GPP TS 29.222

paths:

/service-apis/{serviceApiId}:

get:

description: Retrieves the API routing information.

parameters:

\- name: serviceApiId

in: path

description: Identifier of a published service API

required: true

schema:

type: string

\- name: aef-id

in: query

required: true

description: Identifier of the AEF

schema:

type: string

\- name: supp-feat

in: query

required: false

description: To filter irrelevant responses related to unsupported
features

schema:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

responses:

\'200\':

description: OK.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/RoutingInfo\'

\'400\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/406\'

\'414\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/414\'

\'429\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29122\_CommonData.yaml\#/components/responses/default\'

components:

schemas:

RoutingInfo:

type: object

properties:

routingRules:

type: array

items:

\$ref: \'\#/components/schemas/RoutingRule\'

minItems: 1

required:

\- routingRules

RoutingRule:

type: object

properties:

ipv4AddrRanges:

type: array

items:

\$ref:
\'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/Ipv4AddressRange\'

minItems: 1

ipv6AddrRanges:

type: array

items:

\$ref: \'\#/components/schemas/Ipv6AddressRange\'

minItems: 1

aefProfile:

\$ref:
\'TS29222\_CAPIF\_Publish\_Service\_API.yaml\#/components/schemas/AefProfile\'

required:

\- aefProfile

Ipv6AddressRange:

type: object

properties:

start:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Ipv6Addr\'

end:

\$ref: \'TS29122\_CommonData.yaml\#/components/schemas/Ipv6Addr\'

required:

\- start

\- end

######## Annex B (informative): Change history

+-------+-------+-------+-------+-------+-------+-------+-------+
| **C   |       |       |       |       |       |       |       |
| hange |       |       |       |       |       |       |       |
| hist  |       |       |       |       |       |       |       |
| ory** |       |       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| **D   | *     | **T   | *     | **    | **    | **Su  | **New |
| ate** | *Meet | Doc** | *CR** | Rev** | Cat** | bject | vers  |
|       | ing** |       |       |       |       | /Comm | ion** |
|       |       |       |       |       |       | ent** |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | C3-1  |       |       |       | TS    | 0.0.0 |
| 18-03 | 3\#95 | 81278 |       |       |       | ske   |       |
|       |       |       |       |       |       | leton |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | ommon |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | Fram  |       |
|       |       |       |       |       |       | ework |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | 3GPP  |       |
|       |       |       |       |       |       | North |       |
|       |       |       |       |       |       | bound |       |
|       |       |       |       |       |       | APIs  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | C3-1  |       |       |       | Incl  | 0.1.0 |
| 18-03 | 3\#95 | 81378 |       |       |       | usion |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | docu  |       |
|       |       |       |       |       |       | ments |       |
|       |       |       |       |       |       | a     |       |
|       |       |       |       |       |       | greed |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | CT3\  |       |
|       |       |       |       |       |       | #95:\ |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1281, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1282, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1283, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1284, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1285, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1286, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1287, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1321, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 1322, |       |
|       |       |       |       |       |       | Rappo |       |
|       |       |       |       |       |       | rteur |       |
|       |       |       |       |       |       | ch    |       |
|       |       |       |       |       |       | anges |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | C3-1  |       |       |       | Incl  | 0.2.0 |
| 18-04 | 3\#96 | 82527 |       |       |       | usion |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | docu  |       |
|       |       |       |       |       |       | ments |       |
|       |       |       |       |       |       | a     |       |
|       |       |       |       |       |       | greed |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | CT3\  |       |
|       |       |       |       |       |       | #96:\ |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2204, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2387, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2393, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2395, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2468, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2469, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2470, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2483, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 2484, |       |
|       |       |       |       |       |       | C3-1  |       |
|       |       |       |       |       |       | 82485 |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    |       |       |       |       | Incl  | 0.3.0 |
| 18-05 | 3\#97 |       |       |       |       | usion |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | docu  |       |
|       |       |       |       |       |       | ments |       |
|       |       |       |       |       |       | a     |       |
|       |       |       |       |       |       | greed |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | CT3   |       |
|       |       |       |       |       |       | \#97: |       |
|       |       |       |       |       |       |       |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3271, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3274, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3275, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3372, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3376, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3377, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3378, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3379, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3598, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3599, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3602, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3603, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3604, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3798, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3799, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3809, |       |
|       |       |       |       |       |       | C3-18 |       |
|       |       |       |       |       |       | 3841, |       |
|       |       |       |       |       |       | C3-1  |       |
|       |       |       |       |       |       | 83842 |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  |       |       |       | TS    | 1.0.0 |
| 18-06 | T\#80 | 81037 |       |       |       | sent  |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | pl    |       |
|       |       |       |       |       |       | enary |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | app   |       |
|       |       |       |       |       |       | roval |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  |       |       |       | TS    | 1     |
| 18-06 | T\#80 | 81037 |       |       |       | app   | 5.0.0 |
|       |       |       |       |       |       | roved |       |
|       |       |       |       |       |       | by    |       |
|       |       |       |       |       |       | pl    |       |
|       |       |       |       |       |       | enary |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0001  | 1     | F     | Ch    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | anges | 5.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | lause |       |
|       |       |       |       |       |       | 4 --  |       |
|       |       |       |       |       |       | Ove   |       |
|       |       |       |       |       |       | rview |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0003  | 2     | F     | Ch    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | anges | 5.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | Pu    |       |
|       |       |       |       |       |       | blish |       |
|       |       |       |       |       |       | Se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | subc  |       |
|       |       |       |       |       |       | lause |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0004  | 2     | F     | Ch    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | anges | 5.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | E     |       |
|       |       |       |       |       |       | vents |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | subc  |       |
|       |       |       |       |       |       | lause |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0005  | 4     | F     | Ch    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | anges | 5.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | In    |       |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | Manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | subc  |       |
|       |       |       |       |       |       | lause |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0006  | 4     | F     | Ch    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | anges | 5.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | Auth  |       |
|       |       |       |       |       |       | entic |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | Aut   |       |
|       |       |       |       |       |       | horiz |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | subc  |       |
|       |       |       |       |       |       | lause |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0007  | 3     | F     | U     | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | pdate | 5.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | types |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | S     |       |
|       |       |       |       |       |       | ervic |       |
|       |       |       |       |       |       | eAPID |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | Query |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0008  | 5     | F     | Defin | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | ition | 5.1.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _Acce |       |
|       |       |       |       |       |       | ss\_C |       |
|       |       |       |       |       |       | ontro |       |
|       |       |       |       |       |       | l\_Po |       |
|       |       |       |       |       |       | licy\ |       |
|       |       |       |       |       |       | _API, |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | chema |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0009  | 4     | F     | CAP   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | IF\_E | 5.1.0 |
|       |       |       |       |       |       | vents |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | chema |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0010  | 4     | F     | AEF\  | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | _Auth | 5.1.0 |
|       |       |       |       |       |       | entic |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | chema |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0011  | 1     | F     | CAPI  | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | F\_Di | 5.1.0 |
|       |       |       |       |       |       | scove |       |
|       |       |       |       |       |       | r\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API - |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0012  | 3     | F     | CAPIF | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | \_dis | 5.1.0 |
|       |       |       |       |       |       | cover |       |
|       |       |       |       |       |       | y\_se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | file  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0013  | 4     | F     | CAP   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | IF\_P | 5.1.0 |
|       |       |       |       |       |       | ublis |       |
|       |       |       |       |       |       | h\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API - |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | file  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0014  | 4     | F     | AEF\  | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | _Auth | 5.1.0 |
|       |       |       |       |       |       | entic |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | API - |       |
|       |       |       |       |       |       | Edit  |       |
|       |       |       |       |       |       | or\'s |       |
|       |       |       |       |       |       | notes |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0015  | 4     | F     | C     | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | orrec | 5.1.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0016  | 1     | F     | API   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | Invok | 5.1.0 |
|       |       |       |       |       |       | er\'s |       |
|       |       |       |       |       |       | I     |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | A     |       |
|       |       |       |       |       |       | PIInv |       |
|       |       |       |       |       |       | okerE |       |
|       |       |       |       |       |       | nrolm |       |
|       |       |       |       |       |       | entDe |       |
|       |       |       |       |       |       | tails |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0017  | 1     | F     | C     | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | orrec | 5.1.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | O     |       |
|       |       |       |       |       |       | nboar |       |
|       |       |       |       |       |       | dingI |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0018  | 2     | F     | Sec   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | urity | 5.1.0 |
|       |       |       |       |       |       | m     |       |
|       |       |       |       |       |       | ethod |       |
|       |       |       |       |       |       | prefe |       |
|       |       |       |       |       |       | rence |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0019  | 1     | F     | Clar  | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | ifica | 5.1.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | O     |       |
|       |       |       |       |       |       | btain |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | \_Inv |       |
|       |       |       |       |       |       | oker\ |       |
|       |       |       |       |       |       | _Info |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | oper  |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0020  | 1     | F     | Subsc | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | ribed | 5.1.0 |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | S     |       |
|       |       |       |       |       |       | ubscr |       |
|       |       |       |       |       |       | ibing |       |
|       |       |       |       |       |       | funct |       |
|       |       |       |       |       |       | ional |       |
|       |       |       |       |       |       | e     |       |
|       |       |       |       |       |       | ntity |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0021  | 1     | F     | Mis   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | cella | 5.1.0 |
|       |       |       |       |       |       | neous |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0023  | 1     | F     | D     | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | efini | 5.1.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | abb   |       |
|       |       |       |       |       |       | revia |       |
|       |       |       |       |       |       | tions |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0024  | 1     | F     | Refer | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | enced | 5.1.0 |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | types |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | en    |       |
|       |       |       |       |       |       | umera |       |
|       |       |       |       |       |       | tions |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0025  | 2     | F     | CAPIF | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | \_Sec | 5.1.0 |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | chema |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0026  | 1     | F     | CAPIF | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | disc  | 5.1.0 |
|       |       |       |       |       |       | overy |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | retr  |       |
|       |       |       |       |       |       | ieves |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | i     |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | using |       |
|       |       |       |       |       |       | GET   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0028  | 2     | F     | CAPIF | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | \_Aud | 5.1.0 |
|       |       |       |       |       |       | iting |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | fun   |       |
|       |       |       |       |       |       | ction |       |
|       |       |       |       |       |       | retr  |       |
|       |       |       |       |       |       | ieves |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | i     |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | logs  |       |
|       |       |       |       |       |       | using |       |
|       |       |       |       |       |       | GET   |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | doc   |       |
|       |       |       |       |       |       | ument |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0029  | 3     | F     | API   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | Names | 5.1.0 |
|       |       |       |       |       |       | ch    |       |
|       |       |       |       |       |       | anges |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | lause |       |
|       |       |       |       |       |       | 5     |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0030  |       | F     | C     | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | hange | 5.1.0 |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | ecuri |       |
|       |       |       |       |       |       | ty-re |       |
|       |       |       |       |       |       | lated |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | names |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | lause |       |
|       |       |       |       |       |       | 8 and |       |
|       |       |       |       |       |       | 10    |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0031  | 2     | F     | Des   | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | cribe | 5.1.0 |
|       |       |       |       |       |       | res   |       |
|       |       |       |       |       |       | ponse |       |
|       |       |       |       |       |       | code  |       |
|       |       |       |       |       |       | 202   |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | O     |       |
|       |       |       |       |       |       | nboar |       |
|       |       |       |       |       |       | d\_AP |       |
|       |       |       |       |       |       | I\_In |       |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | POST  |       |
|       |       |       |       |       |       | m     |       |
|       |       |       |       |       |       | ethod |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0032  |       | F     | Co    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | rrect | 5.1.0 |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | ardin |       |
|       |       |       |       |       |       | ality |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | onb   |       |
|       |       |       |       |       |       | oardi |       |
|       |       |       |       |       |       | ngNot |       |
|       |       |       |       |       |       | ifica |       |
|       |       |       |       |       |       | tionD |       |
|       |       |       |       |       |       | estin |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0033  |       | F     | Co    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | rrect | 5.1.0 |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | ardin |       |
|       |       |       |       |       |       | ality |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | ecuri |       |
|       |       |       |       |       |       | tyNot |       |
|       |       |       |       |       |       | ifica |       |
|       |       |       |       |       |       | tionD |       |
|       |       |       |       |       |       | estin |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0034  | 1     | F     | Co    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | rrect | 5.1.0 |
|       |       |       |       |       |       | pro   |       |
|       |       |       |       |       |       | tocol |       |
|       |       |       |       |       |       | type  |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Inte  |       |
|       |       |       |       |       |       | rface |       |
|       |       |       |       |       |       | D     |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0036  | 1     | F     | Query | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | para  | 5.1.0 |
|       |       |       |       |       |       | meter |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | retri |       |
|       |       |       |       |       |       | eving |       |
|       |       |       |       |       |       | a     |       |
|       |       |       |       |       |       | ccess |       |
|       |       |       |       |       |       | co    |       |
|       |       |       |       |       |       | ntrol |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0037  | 1     | F     | Aut   | 1     |
| 18-09 | T\#81 | 82037 |       |       |       | horiz | 5.1.0 |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | end   |       |
|       |       |       |       |       |       | point |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | token |       |
|       |       |       |       |       |       | re    |       |
|       |       |       |       |       |       | quest |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0038  | 1     | F     | CAPIF | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | E     | 5.1.0 |
|       |       |       |       |       |       | vents |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0040  | 1     | F     | C     | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | orrec | 5.1.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | res   |       |
|       |       |       |       |       |       | ource |       |
|       |       |       |       |       |       | fi    |       |
|       |       |       |       |       |       | gures |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0041  | 1     | F     | CAPIF | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | \_Aud | 5.1.0 |
|       |       |       |       |       |       | iting |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | -     |       |
|       |       |       |       |       |       | \'qu  |       |
|       |       |       |       |       |       | ery\' |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | ustom |       |
|       |       |       |       |       |       | oper  |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0042  | 2     | F     | Op    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | enAPI | 5.1.0 |
|       |       |       |       |       |       | -     |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _API\ |       |
|       |       |       |       |       |       | _Invo |       |
|       |       |       |       |       |       | ker\_ |       |
|       |       |       |       |       |       | Manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | API   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0043  | 2     | F     | Op    | 1     |
| 18-09 | T\#81 | 82016 |       |       |       | enAPI | 5.1.0 |
|       |       |       |       |       |       | -     |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _Logg |       |
|       |       |       |       |       |       | ing\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Invoc |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | API   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0047  |       | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | erver |       |
|       |       |       |       |       |       | defin |       |
|       |       |       |       |       |       | ition |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0027  | 2     | F     | Sec   | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | urity | 5.2.0 |
|       |       |       |       |       |       | adapt |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | Nnef  |       |
|       |       |       |       |       |       | north |       |
|       |       |       |       |       |       | bound |       |
|       |       |       |       |       |       | APIs  |       |
|       |       |       |       |       |       | with  |       |
|       |       |       |       |       |       | CAPIF |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0045  | 1     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | sec   |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | subc  |       |
|       |       |       |       |       |       | lause |       |
|       |       |       |       |       |       | 5.    |       |
|       |       |       |       |       |       | 6.2.1 |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0046  | 1     | F     | R     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | emove | 5.2.0 |
|       |       |       |       |       |       | Event |       |
|       |       |       |       |       |       | opera |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | from  |       |
|       |       |       |       |       |       | CAPI  |       |
|       |       |       |       |       |       | F\_Pu |       |
|       |       |       |       |       |       | blish |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0048  |       | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | ser   |       |
|       |       |       |       |       |       | vices |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0049  | 2     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | api   |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CAP   |       |
|       |       |       |       |       |       | IF\_P |       |
|       |       |       |       |       |       | ublis |       |
|       |       |       |       |       |       | h\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0050  | 2     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | api   |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CAPI  |       |
|       |       |       |       |       |       | F\_Di |       |
|       |       |       |       |       |       | scove |       |
|       |       |       |       |       |       | r\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0051  | 4     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAP   |       |
|       |       |       |       |       |       | IF\_P |       |
|       |       |       |       |       |       | ublis |       |
|       |       |       |       |       |       | h\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0052  | 1     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAPI  |       |
|       |       |       |       |       |       | F\_Di |       |
|       |       |       |       |       |       | scove |       |
|       |       |       |       |       |       | r\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0053  | 4     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _Logg |       |
|       |       |       |       |       |       | ing\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Invoc |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0054  | 3     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Aud |       |
|       |       |       |       |       |       | iting |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0055  | 2     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Sec |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0055  | 3     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Sec |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0057  |       | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Acc |       |
|       |       |       |       |       |       | ess\_ |       |
|       |       |       |       |       |       | Contr |       |
|       |       |       |       |       |       | ol\_P |       |
|       |       |       |       |       |       | olicy |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0058  | 2     | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | -     |       |
|       |       |       |       |       |       | CAPI  |       |
|       |       |       |       |       |       | F\_Di |       |
|       |       |       |       |       |       | scove |       |
|       |       |       |       |       |       | r\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0059  |       | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | 002 - |       |
|       |       |       |       |       |       | CAP   |       |
|       |       |       |       |       |       | IF\_P |       |
|       |       |       |       |       |       | ublis |       |
|       |       |       |       |       |       | h\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0060  | 1     | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | 003 - |       |
|       |       |       |       |       |       | CAP   |       |
|       |       |       |       |       |       | IF\_E |       |
|       |       |       |       |       |       | vents |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0061  |       | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | 004 - |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _API\ |       |
|       |       |       |       |       |       | _Invo |       |
|       |       |       |       |       |       | ker\_ |       |
|       |       |       |       |       |       | Manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0062  |       | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | 005 - |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Sec |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0063  | 2     | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | -     |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Acc |       |
|       |       |       |       |       |       | ess\_ |       |
|       |       |       |       |       |       | Contr |       |
|       |       |       |       |       |       | ol\_P |       |
|       |       |       |       |       |       | olicy |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0064  |       | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | 007 - |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _Logg |       |
|       |       |       |       |       |       | ing\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Invoc |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0065  | 2     | F     | su    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pport | 5.2.0 |
|       |       |       |       |       |       | edFea |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | -     |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Aud |       |
|       |       |       |       |       |       | iting |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0067  |       | F     | Redu  | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | ndant | 5.2.0 |
|       |       |       |       |       |       | Edit  |       |
|       |       |       |       |       |       | or\'s |       |
|       |       |       |       |       |       | note  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0068  | 1     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _API\ |       |
|       |       |       |       |       |       | _Invo |       |
|       |       |       |       |       |       | ker\_ |       |
|       |       |       |       |       |       | Manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0070  |       | F     | Mi    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | ssing | 5.2.0 |
|       |       |       |       |       |       | ge    |       |
|       |       |       |       |       |       | neral |       |
|       |       |       |       |       |       | d     |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | A.1   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0071  | 1     | F     | U     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | pdate | 5.2.0 |
|       |       |       |       |       |       | mand  |       |
|       |       |       |       |       |       | atory |       |
|       |       |       |       |       |       | error |       |
|       |       |       |       |       |       | s     |       |
|       |       |       |       |       |       | tatus |       |
|       |       |       |       |       |       | code  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0072  | 3     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | res   |       |
|       |       |       |       |       |       | ource |       |
|       |       |       |       |       |       | model |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | add   |       |
|       |       |       |       |       |       | mi    |       |
|       |       |       |       |       |       | ssing |       |
|       |       |       |       |       |       | func  |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Sec |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0074  | 2     | F     | Co    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rrect | 5.2.0 |
|       |       |       |       |       |       | res   |       |
|       |       |       |       |       |       | ource |       |
|       |       |       |       |       |       | model |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | add   |       |
|       |       |       |       |       |       | mi    |       |
|       |       |       |       |       |       | ssing |       |
|       |       |       |       |       |       | fun   |       |
|       |       |       |       |       |       | ction |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | AEF\  |       |
|       |       |       |       |       |       | _Auth |       |
|       |       |       |       |       |       | entic |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0075  | 1     | F     | ex    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | terna | 5.2.0 |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | field |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | docu  |       |
|       |       |       |       |       |       | ments |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0076  | 3     | F     | loc   | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | ation | 5.2.0 |
|       |       |       |       |       |       | h     |       |
|       |       |       |       |       |       | eader |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | docu  |       |
|       |       |       |       |       |       | ments |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0077  | 1     | F     | ve    | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | rsion | 5.2.0 |
|       |       |       |       |       |       | n     |       |
|       |       |       |       |       |       | umber |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | docu  |       |
|       |       |       |       |       |       | ments |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0078  | 2     | F     | c     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | orrec | 5.2.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Acc |       |
|       |       |       |       |       |       | ess\_ |       |
|       |       |       |       |       |       | Contr |       |
|       |       |       |       |       |       | ol\_P |       |
|       |       |       |       |       |       | olicy |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0079  | 1     | F     | c     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | orrec | 5.2.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _Logg |       |
|       |       |       |       |       |       | ing\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Invoc |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0079  | 2     | F     | Sec   | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | urity | 5.2.0 |
|       |       |       |       |       |       | adapt |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | T8    |       |
|       |       |       |       |       |       | APIs  |       |
|       |       |       |       |       |       | with  |       |
|       |       |       |       |       |       | CAPIF |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0080  |       | F     | c     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | orrec | 5.2.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | Ev    |       |
|       |       |       |       |       |       | entNo |       |
|       |       |       |       |       |       | tific |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0081  |       | F     | c     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | orrec | 5.2.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | Subsc |       |
|       |       |       |       |       |       | riber |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0082  |       | F     | r     | 1     |
| 18-12 | T\#82 | 83109 |       |       |       | emove | 5.2.0 |
|       |       |       |       |       |       | \'On  |       |
|       |       |       |       |       |       | board |       |
|       |       |       |       |       |       | ingRe |       |
|       |       |       |       |       |       | quest |       |
|       |       |       |       |       |       | Ack\' |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0083  | 1     | F     | Co    | 1     |
| 19-03 | T\#83 | 90119 |       |       |       | rrect | 5.3.0 |
|       |       |       |       |       |       | GET   |       |
|       |       |       |       |       |       | d     |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | retri |       |
|       |       |       |       |       |       | eving |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | i     |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0084  | 1     | F     | Co    | 1     |
| 19-03 | T\#83 | 90119 |       |       |       | rrect | 5.3.0 |
|       |       |       |       |       |       | PUT   |       |
|       |       |       |       |       |       | me    |       |
|       |       |       |       |       |       | ssage |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | upd   |       |
|       |       |       |       |       |       | ating |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | APIs  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0085  | 2     | F     | Co    | 1     |
| 19-03 | T\#83 | 90119 |       |       |       | rrect | 5.3.0 |
|       |       |       |       |       |       | AEF   |       |
|       |       |       |       |       |       | opera |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | re    |       |
|       |       |       |       |       |       | lated |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | obta  |       |
|       |       |       |       |       |       | ining |       |
|       |       |       |       |       |       | sec   |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | info  |       |
|       |       |       |       |       |       | or    |       |
|       |       |       |       |       |       | rev   |       |
|       |       |       |       |       |       | oking |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | inv   |       |
|       |       |       |       |       |       | okers |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0086  | 1     | F     | Corre | 1     |
| 19-03 | T\#83 | 90119 |       |       |       | ction | 5.3.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | defin |       |
|       |       |       |       |       |       | ition |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | obta  |       |
|       |       |       |       |       |       | ining |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | co    |       |
|       |       |       |       |       |       | rrect |       |
|       |       |       |       |       |       | res   |       |
|       |       |       |       |       |       | ource |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Sec   |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | APIs  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0089  | 1     | F     | Co    | 1     |
| 19-03 | T\#83 | 90119 |       |       |       | rrect | 5.3.0 |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | veral |       |
|       |       |       |       |       |       | de    |       |
|       |       |       |       |       |       | scrip |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | lause |       |
|       |       |       |       |       |       | 8     |       |
|       |       |       |       |       |       | t     |       |
|       |       |       |       |       |       | ables |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0090  | 1     | F     | Co    | 1     |
| 19-06 | T\#84 | 91088 |       |       |       | rrect | 5.4.0 |
|       |       |       |       |       |       | CAPI  |       |
|       |       |       |       |       |       | F\_Lo |       |
|       |       |       |       |       |       | gging |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | yaml  |       |
|       |       |       |       |       |       | file  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0091  | 1     | F     | Copy  | 1     |
| 19-06 | T\#84 | 91221 |       |       |       | right | 5.4.0 |
|       |       |       |       |       |       | n     |       |
|       |       |       |       |       |       | otice |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | YAML  |       |
|       |       |       |       |       |       | files |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0092  | 1     | F     | API   | 1     |
| 19-06 | T\#84 | 91222 |       |       |       | ve    | 5.4.0 |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | u     |       |
|       |       |       |       |       |       | pdate |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0093  | 3     | F     | North | 1     |
| 19-09 | T\#85 | 92158 |       |       |       | bound | 6.0.0 |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | reg   |       |
|       |       |       |       |       |       | ister |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | disc  |       |
|       |       |       |       |       |       | overy |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0095  | 1     | A     | Co    | 1     |
| 19-12 | T\#86 | 93194 |       |       |       | rrect | 6.1.0 |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | ardin |       |
|       |       |       |       |       |       | ality |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | event |       |
|       |       |       |       |       |       | API   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0096  | 4     | B     | Refe  | 1     |
| 19-12 | T\#86 | 93199 |       |       |       | rence | 6.1.0 |
|       |       |       |       |       |       | up    |       |
|       |       |       |       |       |       | date: |       |
|       |       |       |       |       |       | RFC   |       |
|       |       |       |       |       |       | 8259  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0097  |       | F     | Det   | 1     |
| 19-12 | T\#86 | 93199 |       |       |       | ailed | 6.1.0 |
|       |       |       |       |       |       | i     |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | event |       |
|       |       |       |       |       |       | no    |       |
|       |       |       |       |       |       | tific |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0101  | 4     | B     | Up    | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | dates | 6.1.0 |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | Se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | Ar    |       |
|       |       |       |       |       |       | chite |       |
|       |       |       |       |       |       | cture |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | funct |       |
|       |       |       |       |       |       | ional |       |
|       |       |       |       |       |       | ent   |       |
|       |       |       |       |       |       | ities |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0103  | 1     | A     | C     | 1     |
| 19-12 | T\#86 | 93194 |       |       |       | lause | 6.1.0 |
|       |       |       |       |       |       | refe  |       |
|       |       |       |       |       |       | rence |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0105  | 1     | A     | C     | 1     |
| 19-12 | T\#86 | 93194 |       |       |       | onven | 6.1.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | Open  |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | spe   |       |
|       |       |       |       |       |       | cific |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | files |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0106  | 1     | B     | Updat | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | e-to- | 6.1.0 |
|       |       |       |       |       |       | Servi |       |
|       |       |       |       |       |       | ce-Ar |       |
|       |       |       |       |       |       | chite |       |
|       |       |       |       |       |       | cture |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0107  | 2     | B     | Upda  | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | te-to | 6.1.0 |
|       |       |       |       |       |       | -Serv |       |
|       |       |       |       |       |       | ice-A |       |
|       |       |       |       |       |       | PI-Pu |       |
|       |       |       |       |       |       | blish |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0108  | 1     | B     | Inter | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | conne | 6.1.0 |
|       |       |       |       |       |       | ction |       |
|       |       |       |       |       |       | -Serv |       |
|       |       |       |       |       |       | ice-A |       |
|       |       |       |       |       |       | PI-Pu |       |
|       |       |       |       |       |       | blish |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0109  | 2     | B     | Updat | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | e-to- | 6.1.0 |
|       |       |       |       |       |       | Disco |       |
|       |       |       |       |       |       | ver-S |       |
|       |       |       |       |       |       | ervic |       |
|       |       |       |       |       |       | e-API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0111  | 1     | B     | Supp  | 1     |
| 19-12 | T\#86 | 93199 |       |       |       | orted | 6.1.0 |
|       |       |       |       |       |       | fe    |       |
|       |       |       |       |       |       | ature |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | pu    |       |
|       |       |       |       |       |       | blish |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0112  | 1     | B     | API   | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | in    | 6.1.0 |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | de    |       |
|       |       |       |       |       |       | tails |       |
|       |       |       |       |       |       | u     |       |
|       |       |       |       |       |       | pdate |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | Se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | Defin |       |
|       |       |       |       |       |       | ition |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0113  | 1     | B     | API   | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | in    | 6.1.0 |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | de    |       |
|       |       |       |       |       |       | tails |       |
|       |       |       |       |       |       | u     |       |
|       |       |       |       |       |       | pdate |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | Defin |       |
|       |       |       |       |       |       | ition |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0114  | 1     | B     | API   | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | Pro   | 6.1.0 |
|       |       |       |       |       |       | vider |       |
|       |       |       |       |       |       | Re    |       |
|       |       |       |       |       |       | gistr |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | U     |       |
|       |       |       |       |       |       | pdate |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | Se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | Defin |       |
|       |       |       |       |       |       | ition |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0115  | 3     | B     | API   | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | Pro   | 6.1.0 |
|       |       |       |       |       |       | vider |       |
|       |       |       |       |       |       | Re    |       |
|       |       |       |       |       |       | gistr |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | U     |       |
|       |       |       |       |       |       | pdate |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | Defin |       |
|       |       |       |       |       |       | ition |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0116  | 1     | B     | Su    | 1     |
| 19-12 | T\#86 | 93195 |       |       |       | pport | 6.1.0 |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | 3rd   |       |
|       |       |       |       |       |       | party |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | pro   |       |
|       |       |       |       |       |       | vider |       |
|       |       |       |       |       |       | d     |       |
|       |       |       |       |       |       | omain |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0118  | 1     | A     | Co    | 1     |
| 19-12 | T\#86 | 93194 |       |       |       | rrect | 6.1.0 |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | not   |       |
|       |       |       |       |       |       | ifica |       |
|       |       |       |       |       |       | tionD |       |
|       |       |       |       |       |       | estin |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | Servi |       |
|       |       |       |       |       |       | ceSec |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | o     |       |
|       |       |       |       |       |       | bject |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | yaml  |       |
|       |       |       |       |       |       | file  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0120  | 1     | A     | Align | 1     |
| 19-12 | T\#86 | 93194 |       |       |       | the   | 6.1.0 |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | Init  |       |
|       |       |       |       |       |       | iate\ |       |
|       |       |       |       |       |       | _Auth |       |
|       |       |       |       |       |       | entic |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-1  | 0121  |       | F     | U     | 1     |
| 19-12 | T\#86 | 93212 |       |       |       | pdate | 6.1.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | TS    |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | file  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0123  | 1     | B     | Publ  | 1     |
| 20-03 | \#87e | 00205 |       |       |       | ished | 6.2.0 |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | path  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0124  |       | B     | API   | 1     |
| 20-03 | \#87e | 00205 |       |       |       | In    | 6.2.0 |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | U     |       |
|       |       |       |       |       |       | dpate |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | Event |       |
|       |       |       |       |       |       | Up    |       |
|       |       |       |       |       |       | dates |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0125  | 2     | B     | API   | 1     |
| 20-03 | \#87e | 00205 |       |       |       | Pro   | 6.2.0 |
|       |       |       |       |       |       | vider |       |
|       |       |       |       |       |       | Manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | --    |       |
|       |       |       |       |       |       | Open  |       |
|       |       |       |       |       |       | API   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0126  |       | F     | 2     | 1     |
| 20-03 | \#87e | 00216 |       |       |       | 9.222 | 6.2.0 |
|       |       |       |       |       |       | R     |       |
|       |       |       |       |       |       | el-16 |       |
|       |       |       |       |       |       | U     |       |
|       |       |       |       |       |       | pdate |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | TS    |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | field |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0128  | 3     | B     | Se    | 1     |
| 20-06 | \#88e | 01277 |       |       |       | rvice | 6.3.0 |
|       |       |       |       |       |       | d     |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | opera |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CA    |       |
|       |       |       |       |       |       | PIF\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Routi |       |
|       |       |       |       |       |       | ng\_P |       |
|       |       |       |       |       |       | olicy |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0129  | 3     | B     | API   | 1     |
| 20-06 | \#88e | 01277 |       |       |       | defin | 6.3.0 |
|       |       |       |       |       |       | ition |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CA    |       |
|       |       |       |       |       |       | PIF\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Routi |       |
|       |       |       |       |       |       | ng\_P |       |
|       |       |       |       |       |       | olicy |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0130  | 3     | B     | API   | 1     |
| 20-06 | \#88e | 01278 |       |       |       | Top   | 6.3.0 |
|       |       |       |       |       |       | ology |       |
|       |       |       |       |       |       | h     |       |
|       |       |       |       |       |       | iding |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0133  |       | A     | Co    | 1     |
| 20-06 | \#88e | 01230 |       |       |       | rrect | 6.3.0 |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | pu    |       |
|       |       |       |       |       |       | blish |       |
|       |       |       |       |       |       | proc  |       |
|       |       |       |       |       |       | edure |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0131  | 1     | F     | API   | 1     |
| 20-06 | \#88e | 01231 |       |       |       | Pro   | 6.3.0 |
|       |       |       |       |       |       | vider |       |
|       |       |       |       |       |       | manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | attr  |       |
|       |       |       |       |       |       | ibute |       |
|       |       |       |       |       |       | name  |       |
|       |       |       |       |       |       | op    |       |
|       |       |       |       |       |       | timiz |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0135  | 1     | F     | Co    | 1     |
| 20-06 | \#88e | 01231 |       |       |       | rrect | 6.3.0 |
|       |       |       |       |       |       | S     |       |
|       |       |       |       |       |       | ervic |       |
|       |       |       |       |       |       | eAPID |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0136  | 2     | F     | Co    | 1     |
| 20-06 | \#88e | 01231 |       |       |       | rrect | 6.3.0 |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | disc  |       |
|       |       |       |       |       |       | overy |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | inter |       |
|       |       |       |       |       |       | conne |       |
|       |       |       |       |       |       | ction |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0137  | 1     | F     | Co    | 1     |
| 20-06 | \#88e | 01231 |       |       |       | rrect | 6.3.0 |
|       |       |       |       |       |       | shar  |       |
|       |       |       |       |       |       | eable |       |
|       |       |       |       |       |       | i     |       |
|       |       |       |       |       |       | nform |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0138  | 1     | F     | Co    | 1     |
| 20-06 | \#88e | 01235 |       |       |       | rrect | 6.3.0 |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | supp  |       |
|       |       |       |       |       |       | orted |       |
|       |       |       |       |       |       | fea   |       |
|       |       |       |       |       |       | tures |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | publ  |       |
|       |       |       |       |       |       | ished |       |
|       |       |       |       |       |       | API   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0139  | 1     | F     | U     | 1     |
| 20-06 | \#88e | 01235 |       |       |       | pdate | 6.3.0 |
|       |       |       |       |       |       | ge    |       |
|       |       |       |       |       |       | neral |       |
|       |       |       |       |       |       | subc  |       |
|       |       |       |       |       |       | lause |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | spe   |       |
|       |       |       |       |       |       | cific |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0140  | 1     | F     | URI   | 1     |
| 20-06 | \#88e | 01256 |       |       |       | of    | 6.3.0 |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | APIs  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0141  | 1     | B     | Add   | 1     |
| 20-06 | \#88e | 01231 |       |       |       | API   | 6.3.0 |
|       |       |       |       |       |       | cat   |       |
|       |       |       |       |       |       | egory |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | disc  |       |
|       |       |       |       |       |       | overy |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0142  |       | F     | O     | 1     |
| 20-06 | \#88e | 01235 |       |       |       | ption | 6.3.0 |
|       |       |       |       |       |       | ality |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | Prob  |       |
|       |       |       |       |       |       | lemDe |       |
|       |       |       |       |       |       | tails |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0144  | 1     | A     | C     | 1     |
| 20-06 | \#88e | 01230 |       |       |       | lause | 6.3.0 |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | refe  |       |
|       |       |       |       |       |       | rence |       |
|       |       |       |       |       |       | point |       |
|       |       |       |       |       |       | corre |       |
|       |       |       |       |       |       | ction |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0145  | 1     | F     | Align | 1     |
| 20-06 | \#88e | 01231 |       |       |       | inte  | 6.3.0 |
|       |       |       |       |       |       | rface |       |
|       |       |       |       |       |       | names |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0146  | 1     | F     | Supp  | 1     |
| 20-06 | \#88e | 01235 |       |       |       | orted | 6.3.0 |
|       |       |       |       |       |       | hea   |       |
|       |       |       |       |       |       | ders, |       |
|       |       |       |       |       |       | Res   |       |
|       |       |       |       |       |       | ource |       |
|       |       |       |       |       |       | Data  |       |
|       |       |       |       |       |       | type, |       |
|       |       |       |       |       |       | Oper  |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | Name  |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | yaml  |       |
|       |       |       |       |       |       | ma    |       |
|       |       |       |       |       |       | pping |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0147  |       | F     | U     | 1     |
| 20-06 | \#88e | 01255 |       |       |       | pdate | 6.3.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | TS    |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | field |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0149  |       | A     | Req   | 1     |
| 20-06 | \#88e | 01319 |       |       |       | uired | 6.3.0 |
|       |       |       |       |       |       | attr  |       |
|       |       |       |       |       |       | ibute |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | Open  |       |
|       |       |       |       |       |       | APIs  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0151  | 1     | F     | Mi    | 1     |
| 20-09 | \#89e | 02064 |       |       |       | ssing | 6.4.0 |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | consi |       |
|       |       |       |       |       |       | stent |       |
|       |       |       |       |       |       | "a    |       |
|       |       |       |       |       |       | piVer |       |
|       |       |       |       |       |       | sion" |       |
|       |       |       |       |       |       | nota  |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | Loc   |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | h     |       |
|       |       |       |       |       |       | eader |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0152  | 1     | F     | CAPIF | 1     |
| 20-09 | \#89e | 02064 |       |       |       | Ro    | 6.4.0 |
|       |       |       |       |       |       | uting |       |
|       |       |       |       |       |       | Info  |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0153  |       | F     | CAPIF | 1     |
| 20-09 | \#89e | 02064 |       |       |       | top   | 6.4.0 |
|       |       |       |       |       |       | ology |       |
|       |       |       |       |       |       | h     |       |
|       |       |       |       |       |       | iding |       |
|       |       |       |       |       |       | corre |       |
|       |       |       |       |       |       | ction |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0155  | 3     | A     | Co    | 1     |
| 20-09 | \#89e | 02233 |       |       |       | rrect | 6.4.0 |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | sec   |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | API   |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0157  | 1     | A     | Co    | 1     |
| 20-09 | \#89e | 02063 |       |       |       | rrect | 6.4.0 |
|       |       |       |       |       |       | api   |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | voker |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | ertif |       |
|       |       |       |       |       |       | icate |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | onboa |       |
|       |       |       |       |       |       | rding |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0158  |       | F     | U     | 1     |
| 20-09 | \#89e | 02084 |       |       |       | pdate | 6.4.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | Op    |       |
|       |       |       |       |       |       | enAPI |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | TS    |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | field |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0160  | 1     | F     | Esse  | 1     |
| 20-12 | \#90e | 03139 |       |       |       | ntial | 6.5.0 |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | orrec |       |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | align |       |
|       |       |       |       |       |       | ments |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0162  | 1     | A     | Co    | 1     |
| 20-12 | \#90e | 03126 |       |       |       | rrect | 6.5.0 |
|       |       |       |       |       |       | inc   |       |
|       |       |       |       |       |       | onsis |       |
|       |       |       |       |       |       | tency |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | Secur |       |
|       |       |       |       |       |       | ityNo |       |
|       |       |       |       |       |       | tific |       |
|       |       |       |       |       |       | ation |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0163  | 1     | F     | St    | 1     |
| 20-12 | \#90e | 03139 |       |       |       | orage | 6.5.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | YAML  |       |
|       |       |       |       |       |       | files |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | 3GPP  |       |
|       |       |       |       |       |       | Forge |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0164  | 1     | F     | CAPIF | 1     |
| 21-03 | \#91e | 10239 |       |       |       | \_Sec | 6.6.0 |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | ve    |       |
|       |       |       |       |       |       | rsion |       |
|       |       |       |       |       |       | corre |       |
|       |       |       |       |       |       | ction |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0184  |       | A     | Secu  | 1     |
| 21-06 | \#92e | 11216 |       |       |       | rityM | 6.7.0 |
|       |       |       |       |       |       | ethod |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
|       |       |       |       |       |       | i     |       |
|       |       |       |       |       |       | ncorr |       |
|       |       |       |       |       |       | ectly |       |
|       |       |       |       |       |       | wr    |       |
|       |       |       |       |       |       | itten |       |
|       |       |       |       |       |       | some  |       |
|       |       |       |       |       |       | parts |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | CAP   |       |
|       |       |       |       |       |       | IF\_P |       |
|       |       |       |       |       |       | ublis |       |
|       |       |       |       |       |       | h\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
|       |       |       |       |       |       | d     |       |
|       |       |       |       |       |       | escri |       |
|       |       |       |       |       |       | ption |       |
|       |       |       |       |       |       | c     |       |
|       |       |       |       |       |       | lause |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0220  |       | A     | Co    | 1     |
| 22-03 | \#95e | 20168 |       |       |       | rrect | 6.8.0 |
|       |       |       |       |       |       | incon |       |
|       |       |       |       |       |       | siste |       |
|       |       |       |       |       |       | ncies |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0229  |       | F     | U     | 1     |
| 22-03 | \#95e | 20177 |       |       |       | pdate | 6.8.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | info  |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | f     |       |
|       |       |       |       |       |       | ields |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-2  | 0236  | 1     | A     | Corre | 1     |
| 22-06 | T\#96 | 21124 |       |       |       | cting | 6.9.0 |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | APF   |       |
|       |       |       |       |       |       | ident |       |
|       |       |       |       |       |       | ifier |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-2  | 0239  | 1     | A     | Corre | 1     |
| 22-06 | T\#96 | 21124 |       |       |       | cting | 6.9.0 |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | se    |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | API   |       |
|       |       |       |       |       |       | Ident |       |
|       |       |       |       |       |       | ifier |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-2  | 0242  |       | A     | Corre | 1     |
| 22-06 | T\#96 | 21124 |       |       |       | cting | 6.9.0 |
|       |       |       |       |       |       | query |       |
|       |       |       |       |       |       | param |       |
|       |       |       |       |       |       | eters |       |
|       |       |       |       |       |       | names |       |
|       |       |       |       |       |       | in    |       |
|       |       |       |       |       |       | the   |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Sec |       |
|       |       |       |       |       |       | urity |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-2  | 0246  | 1     | A     | Co    | 1     |
| 22-06 | T\#96 | 21124 |       |       |       | rrect | 6.9.0 |
|       |       |       |       |       |       | token |       |
|       |       |       |       |       |       | re    |       |
|       |       |       |       |       |       | quest |       |
|       |       |       |       |       |       | co    |       |
|       |       |       |       |       |       | ntent |       |
|       |       |       |       |       |       | type  |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-2  | 0249  |       | F     | U     | 1     |
| 22-06 | T\#96 | 21150 |       |       |       | pdate | 6.9.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | info  |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | f     |       |
|       |       |       |       |       |       | ields |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0261  | 2     | A     | C     | 16    |
| 22-12 | \#98e | 23234 |       |       |       | orrec | .10.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _API\ |       |
|       |       |       |       |       |       | _Invo |       |
|       |       |       |       |       |       | ker\_ |       |
|       |       |       |       |       |       | Manag |       |
|       |       |       |       |       |       | ement |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0269  |       | A     | C     | 16    |
| 22-12 | \#98e | 23169 |       |       |       | orrec | .10.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | on    |       |
|       |       |       |       |       |       | E     |       |
|       |       |       |       |       |       | numer |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | Pro   |       |
|       |       |       |       |       |       | tocol |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CAP   |       |
|       |       |       |       |       |       | IF\_P |       |
|       |       |       |       |       |       | ublis |       |
|       |       |       |       |       |       | h\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0272  | 1     | A     | C     | 16    |
| 22-12 | \#98e | 23169 |       |       |       | orrec | .10.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | on    |       |
|       |       |       |       |       |       | POST  |       |
|       |       |       |       |       |       | re    |       |
|       |       |       |       |       |       | quest |       |
|       |       |       |       |       |       | body  |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | C     |       |
|       |       |       |       |       |       | APIF\ |       |
|       |       |       |       |       |       | _Logg |       |
|       |       |       |       |       |       | ing\_ |       |
|       |       |       |       |       |       | API\_ |       |
|       |       |       |       |       |       | Invoc |       |
|       |       |       |       |       |       | ation |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0275  |       | A     | C     | 16    |
| 22-12 | \#98e | 23169 |       |       |       | orrec | .10.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | on    |       |
|       |       |       |       |       |       | res   |       |
|       |       |       |       |       |       | ource |       |
|       |       |       |       |       |       | URI   |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CAPI  |       |
|       |       |       |       |       |       | F\_Di |       |
|       |       |       |       |       |       | scove |       |
|       |       |       |       |       |       | r\_Se |       |
|       |       |       |       |       |       | rvice |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0278  |       | A     | C     | 16    |
| 22-12 | \#98e | 23169 |       |       |       | orrec | .10.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | on    |       |
|       |       |       |       |       |       | Time  |       |
|       |       |       |       |       |       | Range |       |
|       |       |       |       |       |       | List  |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Acc |       |
|       |       |       |       |       |       | ess\_ |       |
|       |       |       |       |       |       | Contr |       |
|       |       |       |       |       |       | ol\_P |       |
|       |       |       |       |       |       | olicy |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0281  | 1     | A     | C     | 16    |
| 22-12 | \#98e | 23236 |       |       |       | orrec | .10.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | for   |       |
|       |       |       |       |       |       | data  |       |
|       |       |       |       |       |       | type  |       |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | ser   |       |
|       |       |       |       |       |       | vices |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | CT    | CP-2  | 0283  |       | F     | U     | 16    |
| 22-12 | \#98e | 23187 |       |       |       | pdate | .10.0 |
|       |       |       |       |       |       | of    |       |
|       |       |       |       |       |       | info  |       |
|       |       |       |       |       |       | and   |       |
|       |       |       |       |       |       | ex    |       |
|       |       |       |       |       |       | terna |       |
|       |       |       |       |       |       | lDocs |       |
|       |       |       |       |       |       | f     |       |
|       |       |       |       |       |       | ields |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 20    | C     | CP-2  | 0292  |       | A     | C     | 16    |
| 23-03 | T\#99 | 30135 |       |       |       | orrec | .11.0 |
|       |       |       |       |       |       | tions |       |
|       |       |       |       |       |       | to    |       |
|       |       |       |       |       |       | CAPIF |       |
|       |       |       |       |       |       | \_Aud |       |
|       |       |       |       |       |       | iting |       |
|       |       |       |       |       |       | \_API |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
