![](media/image1.jpeg){width="7.0875in" height="3.4229166666666666in"}

 

Contents
========

[5](#foreword)

[6](#scope)

[6](#references)

[7](#definitions-and-abbreviations)

[7](#definitions)

[7](#abbreviations)

[7](#binding-support-management-service)

[7](#service-description)

[7](#overview)

[8](#service-architecture)

[8](#network-functions)

[8](#binding-support-function-bsf)

[9](#nf-service-consumers)

[9](#service-operations)

[9](#introduction)

[9](#nbsf_management_register-service-operation)

[9](#general)

[10](#register-a-new-pcf-session-binding-information)

[12](#nbsf_management_deregister-service-operation)

[12](#general-1)

[12](#deregister-an-individual-pcf-session-binding-information)

[13](#nbsf_management_discovery-service-operation)

[13](#general-2)

[13](#retrieve-the-pcf-session-binding-information-for-a-given-tuple)

[14](#nbsf_management_update-service-operation)

[14](#general-3)

[14](#update-an-existing-pcf-session-binding-information)

[15](#nbsf_management-service-api)

[15](#introduction-1)

[16](#usage-of-http)

[16](#general-4)

[16](#http-standard-headers)

[16](#general-5)

[16](#content-type)

[16](#http-custom-headers)

[16](#general-6)

[16](#resources)

[16](#resource-structure)

[17](#resource-pcf-session-bindings)

[17](#description)

[17](#resource-definition)

[18](#resource-standard-methods)

[18](#post)

[18](#get)

[19](#resource-individual-pcf-session-binding)

[19](#description-1)

[19](#resource-definition-1)

[20](#resource-standard-methods-1)

[20](#delete)

[21](#patch)

[22](#custom-operations-without-associated-resources)

[22](#notifications)

[22](#data-model)

[22](#general-7)

[23](#structured-data-types)

[23](#introduction-2)

[24](#type-pcfbinding)

[25](#type-pcfbindingpatch)

[26](#type-parametercombination)

[26](#type-extproblemdetails)

[26](#type-bindingresp)

[26](#simple-data-types-and-enumerations)

[26](#introduction-3)

[26](#simple-data-types)

[27](#enumeration-bindinglevel)

[27](#error-handling)

[27](#general-8)

[27](#protocol-errors)

[27](#application-errors)

[27](#feature-negotiation)

[28](#security)

[29](#annex-a-normative-openapi-specification)

[29](#a.1-general)

[29](#a.2-nbsf_management-api)

[34](#annex-b-informative-deployment-option-to-support-bsf-and-dra-coexistence-due-to-network-migration)

[36](#annex-c-informative-change-history)Foreword 1 Scope 2 References 3
Definitions and abbreviations 3.1 Definitions 3.2 Abbreviations 4
Binding Support Management Service 4.1 Service Description 4.1.1
Overview 4.1.2 Service Architecture 4.1.3 Network Functions 4.1.3.1
Binding Support Function (BSF) 4.1.3.2 NF Service Consumers 4.2 Service
Operations 4.2.1 Introduction 4.2.2 Nbsf\_Management\_Register Service
Operation 4.2.2.1 General 4.2.2.2 Register a new PCF Session binding
information 4.2.3 Nbsf\_Management\_Deregister Service Operation 4.2.3.1
General 4.2.3.2 Deregister an individual PCF Session binding information
4.2.4 Nbsf\_Management\_Discovery Service Operation 4.2.4.1 General
4.2.4.2 Retrieve the PCF Session binding information for a given tuple
4.2.5 Nbsf\_Management\_Update Service Operation 4.2.5.1 General 4.2.5.2
Update an existing PCF Session binding information 5 Nbsf\_Management
Service API 5.1 Introduction 5.2 Usage of HTTP 5.2.1 General 5.2.2 HTTP
standard headers 5.2.2.1 General 5.2.2.2 Content type 5.2.3 HTTP custom
headers 5.2.3.1 General 5.3 Resources 5.3.1 Resource Structure 5.3.2
Resource: PCF Session Bindings 5.3.2.1 Description 5.3.2.2 Resource
definition 5.3.2.3 Resource Standard Methods 5.3.2.3.1 POST 5.3.2.3.2
GET 5.3.3 Resource: Individual PCF Session Binding 5.3.3.1 Description
5.3.3.2 Resource definition 5.3.3.3 Resource Standard Methods 5.3.3.3.1
DELETE 5.3.3.3.2 PATCH 5.4 Custom Operations without associated
resources 5.5 Notifications 5.6 Data Model 5.6.1 General 5.6.2
Structured data types 5.6.2.1 Introduction 5.6.2.2 Type PcfBinding
5.6.2.3 Type PcfBindingPatch 5.6.2.4 Type ParameterCombination 5.6.2.5
Type ExtProblemDetails 5.6.2.6 Type BindingResp 5.6.3 Simple data types
and enumerations 5.6.3.1 Introduction 5.6.3.2 Simple data types 5.6.3.3
Enumeration: BindingLevel 5.7 Error handling 5.7.1 General 5.7.2
Protocol Errors 5.7.3 Application Errors 5.8 Feature negotiation 5.9
Security Annex A (normative): OpenAPI specification A.1 General A.2
Nbsf\_Management API Annex B (informative): Deployment option to support
BSF and DRA coexistence due to network migration Annex C (informative):
Change history

Foreword
========

This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

1 Scope
=======

The present specification provides the stage 3 definition of the Binding
Support Management Service of the 5G System.

The 5G System Architecture is defined in 3GPP TS 23.501 \[2\]. The stage
2 definition and related procedures for Binding Support Management
Service is specified in 3GPP TS 23.502 \[3\] and 3GPP TS 23.503 \[4\].

The 5G System stage 3 call flows are provided in 3GPP TS 29.513 \[5\].

The Technical Realization of the Service Based Architecture and the
Principles and Guidelines for Services Definition are specified in
3GPP TS 29.500 \[6\] and 3GPP TS 29.501 \[7\].

The Binding Support Management Service is provided by the Binding
Support Function (BSF).

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".

\[2\] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage
2\".

\[3\] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".

\[4\] 3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G
System; Stage 2\".

\[5\] 3GPP TS 29.513: \"5G System; Policy and Charging Control
signalling flows and QoS parameter mapping; Stage 3\".

\[6\] 3GPP TS 29.500: \"5G System; Technical Realization of Service
Based Architecture; Stage 3\".

\[7\] 3GPP TS 29.501: \"5G System; Principles and Guidelines for
Services Definition; Stage 3\".

\[8\] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".

\[9\] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data
Interchange Format\".

\[10\] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces Stage 3\".

\[11\] OpenAPI: \"OpenAPI 3.0.0 Specification\",
[[https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md]{.underline}](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md).

\[12\] 3GPP TS 29.510: \"5G System; Network Function Repository
Services; Stage 3\".

\[13\] IETF RFC 7807: \"Problem Details for HTTP APIs\".

\[14\] 3GPP TS 29.213: \" Policy and Charging Control signalling flows
and Quality of Service (QoS) parameter mapping\".

\[15\] 3GPP TS 33.501: \"Security architecture and procedures for 5G
system\".

\[16\] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".

\[17\] 3GPP TS 23.527: \"5G System; Restoration Procedures\".

\[18\] 3GPP TR 21.900: \"Technical Specification Group working
methods\".

\[19\] 3GPP TS 23.316: \"Wireless and wireline convergence access
support for the 5G System (5GS)\".

\[20\] IETF RFC 7396: \"JSON Merge Patch\".

\[21\] 3GPP TS 29.512: \"5G System; Session Management Policy Control
Service; Stage 3\".

3 Definitions and abbreviations
===============================

3.1 Definitions
---------------

For the purposes of the present document, the terms and definitions
given in 3GPP TR 21.905 \[1\] and the following apply. A term defined in
the present document takes precedence over the definition of the same
term, if any, in 3GPP TR 21.905 \[1\].

3.2 Abbreviations
-----------------

For the purposes of the present document, the abbreviations given in
3GPP TR 21.905 \[1\] and the following apply. An abbreviation defined in
the present document takes precedence over the definition of the same
abbreviation, if any, in 3GPP TR 21.905 \[1\].

5G-RG 5G Residential Gateway

AF Application Function

BSF Binding Support Function

DNN Data Network Name

DRA Diameter Routing Agent

HTTP Hypertext Transfer Protocol

FN-RG Fixed Network Residential Gateway

FQDN Fully Qualified Domain Name

GPSI Generic Public Subscription Identifier

JSON JavaScript Object Notation HTTP Hypertext Transfer Protocol

MAC Media Access Control

NEF Network Exposure Function

NRF Network Repository Function

NWDAF Network Data Analytics Function

PCF Policy Control Function

SMF Session Management Function

S-NSSAI Single Network Slice Selection Assistance Information

SUPI Subscription Permanent Identifier

UDR Unified Data Repository

4 Binding Support Management Service
====================================

4.1 Service Description
-----------------------

### 4.1.1 Overview

The Binding Support Management Service as defined in
3GPP TS 23.502 \[3\] and 3GPP TS 23.503 \[4\], is provided by the
Binding Support Function (BSF).

The Nbsf\_Management service is used to provide a PDU session binding
functionality, which ensures that an AF request for a certain PDU
Session reaches the relevant PCF holding that PDU Session information,
or ensures that the same PCF is selected for multiple PDU sessions.

This service:

\- allows NF service consumers to register, update and remove binding
information; and

\- allows NF service consumers to retrieve binding information.

### 4.1.2 Service Architecture

The 5G System Architecture is defined in 3GPP TS 23.501 \[2\]. The
Policy and Charging related 5G architecture is also described in
3GPP TS 23.503 \[4\] and 3GPP TS 29.513 \[5\].

The Binding Support Management Service (Nbsf\_Management) is exhibited
by the Binding Support Function (BSF).

The known consumers of the Nbsf\_Management service are:

\- Policy Control Function (PCF)

\- Network Exposure Function (NEF)

\- Application Function (AF); and

\- Network Data Analytics Function (NWDAF)

As described in 3GPP TS 23.503 \[4\], the BSF is a function that can be
deployed standalone or as a functionality provided by other network
functions, such as PCF, UDR, NRF, SMF.

NOTE 1: The PCF accesses the Nbsf\_Management service at the BSF via an
internal interface when it is collocated with BSF.

NOTE 2: The DRA decides to select a BSF based on user IP address range
when the DRA has no binding information for the subscriber to get the
relevant PCF address. DRA and BSF coexistence is described in
3GPP TS 29.513 \[5\], Annex A.

Figure 4.1.2-1: Reference Architecture for the Nbsf\_Management service;
SBI representation

### 4.1.3 Network Functions

#### 4.1.3.1 Binding Support Function (BSF)

The BSF:

\- stores the binding information for a certain PDU Session; and

\- enables the discovery of binding information (e.g. the address
information of the selected PCF).

The BSF allows NF service consumers (e.g. PCF) to register, update and
remove a binding information, and allows NF service consumers (e.g. AF,
NEF, NWDAF) to discover a binding information (e.g. the address
information of the selected PCF).

The BSF can be deployed standalone or collocated with other network
functions, such as PCF, UDR, NRF and SMF.

#### 4.1.3.2 NF Service Consumers

The Policy Control Function (PCF):

\- registers binding information in the BSF for a UE when an IPv4
address and/or IPv6 prefix is allocated, or a MAC address is used for
the PDU session;

\- updates binding information in the BSF when a UE address information
is changed for the PDU Session; and

\- removes binding information in the BSF when an IPv4 address and/or
IPv6 prefix is released, or a MAC address is not used for the PDU
Session.

The Network Exposure Function (NEF):

\- provides means for the Application Functions to securely interact
with the Policy framework for policy control to 3GPP network. During the
procedure, it needs to discover the selected PCF by using the
Nbsf\_Management\_Discovery service operation.

The Application Function (AF):

\- discovers the selected PCF by using the Nbsf\_Management\_Discovery
service operation when it is allowed to interact directly with the
policy framework for policy control.

The Network Data Analytics Function (NWDAF):

\- discovers the selected PCF by using the Nbsf\_Management\_Discovery
service operation.

4.2 Service Operations
----------------------

### 4.2.1 Introduction

Table 4.2.1-1: Operations of the Nbsf\_Management Service

  ------------------------------ -------------------------------------------------------------------------------------------- --------------------------------------
  Service operation name         Description                                                                                  Initiated by
  Nbsf\_Management\_Register     This service operation is used to register the binding information for a UE.                 NF service consumer (PCF)
  Nbsf\_Management\_Deregister   This service operation is used to deregister the binding information for a UE.               NF service consumer (PCF)
  Nbsf\_Management\_Discovery    This service operation is used by an NEF or AF or NWDAF to discover a selected PCF.          NF service consumer (NEF, AF, NWDAF)
  Nbsf\_Management\_Update       This service operation is used to update an existing session binding information for a UE.   NF service consumer (PCF)
  ------------------------------ -------------------------------------------------------------------------------------------- --------------------------------------

### 4.2.2 Nbsf\_Management\_Register Service Operation

#### 4.2.2.1 General

This service operation allows a NF service consumer (e.g. PCF) to
register the session binding information for a UE in the BSF by
providing the user identity, the DNN, the UE address(es) and the
selected PCF address for a certain PDU Session to the BSF, and BSF
stores the information.

If the BindingUpdate feature is not supported and the NF service
consumer (e.g. PCF) receives a new UE address (e.g. IPv6 prefix) and has
already registered session binding information for this PDU session, the
NF service consumer (e.g. PCF) shall register a new session binding
information in the BSF.

If the SamePcf feature or the ExtendedSamePcf feature is supported, this
service operation allows the PCF to check whether PCF addressing
information for Npcf\_SMPolicyControl service is already registered in
the BSF by another PCF for a combination of the UE ID, DNN and S-NSSAI
parameters of the PDU session.

#### 4.2.2.2 Register a new PCF Session binding information

![](media/image4.wmf){width="6.031944444444444in"
height="1.4694444444444446in"}

Figure 4.2.2.2-1: NF service consumer register a new PCF Session binding
information

The NF service consumer shall invoke the Nbsf\_Management\_Register
service operation to register the session binding information for a UE
in the BSF. The NF service consumer shall send for this an HTTP POST
request with \"{apiRoot}/nbsf-management/v1/pcfBindings\" as Resource
URI representing the \"PCF Session Bindings\", as shown in
figure 4.2.2.2-1, step 1, to create a binding information for an
\"Individual PCF Session Binding\" according to the information (e.g. UE
address(es), SUPI, GPSI, DNN, S-NSSAI) in the message body. When the
\"ExtendedSamePcf\" feature is not supported, the \"PcfBinding\" data
structure provided in the request body shall include:

\- if the \"MultiUeAddr\" feature is not supported or not yet known,
address information of the served UE consisting of:

\(i\) either IP address information consisting of:

\+ the IPv4 address encoded as \"ipv4Addr\" attribute; and/or

\+ the /128 IPv6 address, the IPv6 address prefix or an IPv6 prefix
shorter than /64 encoded as \"ipv6Prefix\" attribute; or

\(ii\) the MAC address encoded as \"macAddr48\" attribute;

> Otherwise, address information of the served UE consisting of:

\(i\) any IP address information consisting of:

\+ the IPv4 address encoded as \"ipv4Addr\" attribute;

\+ the /128 IPv6 address, the IPv6 address prefix or an IPv6 prefix
shorter than /64 encoded as \"ipv6Prefix\" attribute; and/or

\+ the additional /128 IPv6 addresses, the IPv6 address prefixes or IPv6
prefixes shorter than /64 encoded as \"addIpv6Prefixes\" attribute; or

\(ii\) the MAC address encoded as \"macAddr48\" attribute and/or the
additional MAC addresses encoded as \"addMacAddrs\" attribute;

\- PCF address information consisting of:

\(i\) if the PCF supports the Npcf\_PolicyAuthorization service:

\+ the FQDN of the PCF encoded as \"pcfFqdn\" attribute; and/or

\+ a description of IP endpoints at the PCF hosting the
Npcf\_PolicyAuthorization service encoded as \"pcfIpEndPoints\"
attribute; and

\(ii\) if the PCF supports the Rx interface:

\+ the Diameter host id of the PCF encoded as \"pcfDiamHost\"; and

\+ the Diameter realm of the PCF encoded as\"pcfDiamRealm\" attributes;

\- DNN encoded as \"dnn\" attribute;

\- S-NSSAI encoded as \"snssai\" attribute; and

\- if the \"SamePcf\" feature defined in subclause 5.8 is supported and
the PCF determines based on operator policies that the same PCF shall be
selected for the SM Policy associations:

\(i\) PCF address information for Npcf\_SMPolicyControl service
consisting of:

\+ the FQDN of the PCF encoded as \"pcfSmFqdn\" attribute; or

\+ a description of IP endpoints at the PCF hosting the
Npcf\_SMPolicyControl service encoded as \"pcfSmIpEndPoints\" attribute;
and

\(ii\) the parameters combination for selecting the same PCF encoded
within the \"paraCom\" attribute if the PCF registers the binding
information for the indicated parameter combination for the first time.

NOTE 1: When the \"SamePcf\" feature is supported, the PCF omits the
\"paraCom\" attribute when creates the corresponding binding information
related to the subsequent PDU sessions for the same parameter
combination.

and may include:

\- SUPI encoded as \"supi\" attribute;

\- GPSI encoded as \"gpsi\" attribute;

\- IPv4 address domain encoded as \"ipDomain\" attribute; and

\- framed routes consisting of:

\(i\) one or more framed routes within the \"ipv4FrameRouteList\"
attribute for IPv4; and/or

\(ii\) one or more framed routes within the \"ipv6FrameRouteList\"
attribute for IPv6.

When the \"TimeSensitiveNetworking\" feature is supported by the PCF as
defined in subclause 5.8 of 3GPP TS 29.512 \[21\], the address
information of the served UE contains the MAC address of the DS-TT
encoded in the \"macAddr48\" attribute as received by the PCF when
reporting the bridge information attribute.

When the \"ExtendedSamePcf\" feature is supported the address
information of the served UE may be provided if available, i.e., the
\"ipv4Addr\", the \"ipv6Prefix\" and/or \"addIpv6Prefixes\" attributes
or the \"macAddr48\" and/or \"addMacAddrs\" attributes may be provided
if available.

When the \"ExtendedSamePcf\" feature is supported the PCF address for
the Npcf\_PolicyAuthorization and/or Rx interface may be provided if
available, i.e., the \"pcfFqdn\" and/or the \"pcfIpEndPoints\"
attributes, and/or the \"pcfDiamHost\" and/or the \"pcfDiamRealm\"
attributes may be provided if available.

NOTE 2: Before requesting the BSF to check if there is an existing PCF
binding information for the same UE ID, S-NSSAI and DNN combination
registered by other PCF(s), the PCF determines whether the BSF supports
the \"SamePcf\" and/or \"ExtendedSamePcf\" features either via local
configuration or by checking the BSF profile retrieved from the NRF as
specified in 3GPP TS 29.510 \[12\].

Upon the reception of an HTTP POST request with:
\"{apiRoot}/nbsf-management/v1/pcfBindings\" as Resource URI and
\"PcfBinding\" data structure as request body, the BSF shall:

\- create new binding information;

\- assign a bindingId; and

\- store the binding information.

The PCF as NF service consumer may provide PCF Id in \"pcfId\" attribute
and recovery timestamp in \"recoveryTime\" attribute. The BSF may use
the \"pcfId\" attribute to supervise the status of the PCF as described
in subclause 5.2 of 3GPP TS 29.510 \[12\] and perform necessary clean up
upon status change of the PCF later, and/or both the \"pcfId\" attribute
and the \"recoveryTime\" attribute in clean up procedure as described in
subclause 6.4 of 3GPP TS 23.527 \[17\].

The PCF as a NF service consumer may provide PCF Set Id within the
\"pcfSetId\" attribute and \"bindLevel\" attribute set to NF\_SET or
provide PCF Set Id within the \"pcfSetId\" attribute, PCF instance Id
within the \"pcfId\" attribute and \"bindLevel\" attribute set to
NF\_INSTANCE.

If the BSF created an \"Individual PCF Session Binding\" resource, the
BSF shall respond with \"201 Created\" status code with the message body
containing a representation of the created binding information, as shown
in figure 4.2.2.2-1, step 2. The BSF shall include a Location HTTP
header field containing the URI of the created binding information, i.e.
\"{apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}\".

If errors occur when processing the HTTP POST request, the PCF shall
apply error handling procedures as specified in subclause 5.7.

If the \"SamePcf\" feature defined in subclause 5.8 is supported and the
\"paraCom\" attribute is included in the HTTP POST message, the BSF
shall check the received \"paraCom\" attribute. If the BSF detects that
there is an existing PCF binding information including the same \"dnn\",
\"snssai\" and \"supi\" attribute values as each of the corresponding
attribute values within the \"paraCom\" attribute, the BSF shall reject
the request with an HTTP \"403 Forbidden\" status code and shall include
in the response the \"ExtProblemDetails\" data structure including the
FQDN of the existing PCF hosting the Npcf\_SMPolicyControl service
within the \"pcfSmFqdn\" attribute or the description of IP endpoints at
the existing PCF hosting the Npcf\_SMPolicyControl service within the
\"pcfSmIpEndPoints\" attribute of \"BindingResp\" data structure, and
the \"cause\" attribute of the \"ProblemDetails\" data structure set to
\"EXISTING\_BINDING\_INFO\_FOUND\".

### 4.2.3 Nbsf\_Management\_Deregister Service Operation

#### 4.2.3.1 General

This service operation allows the service consumer to remove the session
binding information for a UE in the BSF. It is executed by deleting a
given resource identified by an \"Individual PCF Session Binding\"
resource identifier. The operation is invoked by issuing an HTTP DELETE
request on the URI representing the specific session binding
information.

#### 4.2.3.2 Deregister an individual PCF Session binding information 

Figure 4.2.3.2-1: Session Binding Information Deregistration

The NF service consumer shall invoke the Nbsf\_Management\_Deregister
service operation to deregister the session binding information for a UE
in the BSF. The NF service consumer shall send an HTTP DELETE request
with \"{apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}\" as
Resource URI, where \"{bindingId}\" is the \"Individual PCF Session
Binding\" resource identifier that is to be deleted, as shown in
figure 4.2.3.2-1, step 1.

Upon the reception of an HTTP DELETE request with:
\"{apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}\" as Resource
URI, the BSF shall:

\- remove the corresponding binding information.

If the HTTP DELETE request message from the NF service consumer is
accepted, the BSF shall respond with \"204 No Content\" status code, as
shown in figure 4.2.3.2-1, step 2.

If errors occur when processing the HTTP DELETE request, the BSF shall
send an HTTP error response as specified in subclause 5.7.

If the Individual PCF Session Binding resource does not exist, the BSF
shall respond with \"404 Not Found\" error code.

If the feature \"ES3XX\" is supported, and the BSF determines the
received HTTP DELETE request needs to be redirected, the BSF shall send
an HTTP redirect response as specified in subclause 6.10.9 of
3GPP TS 29.500 \[6\].

### 4.2.4 Nbsf\_Management\_Discovery Service Operation

#### 4.2.4.1 General

This service operation allows the service consumer to use the HTTP GET
method to obtain the address information of the selected PCF.

#### 4.2.4.2 Retrieve the PCF Session binding information for a given tuple

![](media/image6.wmf){width="6.0256944444444445in" height="1.64375in"}

Figure 4.2.4.2-1: NF service consumer retrieve the PCF Session binding
information for a given tuple

The NF service consumer shall invoke the Nbsf\_Management\_Discovery
service operation to obtain address information of the selected PCF for
a PDU session in the BSF. The NF service consumer shall send an HTTP GET
request with \"{apiRoot}/nbsf-management/v1/pcfBindings\" as Resource
URI, and \"query parameters\" that shall include:

\- UE address;

and may include:

\- SUPI or GPSI;

\- DNN and optionally S-NSSAI; and

\- IPv4 address domain.

NOTE: The query parameters S-NSSAI and/or IPv4 address domain are
helpful in the scenario of IPv4 address overlapping where the same IPv4
address may be allocated to UE PDU sessions.

Upon the reception of an HTTP GET request with:
\"{apiRoot}/nbsf-management/v1/pcfBindings\" as Resource URI, the BSF
shall search the corresponding binding information. If \"ipv6Prefix\" is
used as an UE IPv6 address in the query parameters, the BSF shall use
the longest prefix match to find a matching IPv6 prefix so that the IPv6
address in the query parameters is within the address range covered by
that matching IPv6 prefix. The IPv6 address in the query parameters
shall be formatted as an IPv6 prefix value including the trailing prefix
length \"/128\". If the framed routes exist in the binding information,
the BSF shall use framed routes to match the UE address in the query
parameters.

If the HTTP request message from the NF service consumer is accepted and
a session binding resource matching the query parameters exists, the BSF
shall reply with an HTTP \"200 OK\" response, as shown in
figure 4.2.4.2-1, step 2, containing the corresponding \"PcfBinding\"
data structure, as provided by the PCF during the
Nbsf\_Management\_Register Service Operation, in the response body
containing PCF addressing information, and if available, the related PCF
Set Id and PCF instance Id. If there is no PCF session binding
information matching the query parameters, the BSF shall respond with an
HTTP \"204 No Content\".

NOTE 2: If the NF service consumer (such as the AF or NEF) is not able
to reach the received PCF address(es), the NF service consumer can use
the PCF Set Id and the PCF instance Id as specified in
3GPP TS 29.513 \[5\] subclause 6.2.

If the \"PCF Session Bindings\" resource does not exist, the BSF shall
respond with \"404 Not Found\" HTTP error code. If an invalid
combination of query parameters (i.e. a combination without UE address)
is contained in the request URI, the BSF shall respond with an HTTP
\"400 Bad Request\" error code containing
\"MANDATORY\_QUERY\_PARAM\_MISSING\" as application error within the
ProblemDetails IE. If more than one PCF Session Binding resources are
found, the BSF shall respond with an HTTP \"400 Bad Request\" error code
containing \"MULTIPLE\_BINDING\_INFO\_FOUND\" as application error
within the ProblemDetails IE.

### 4.2.5 Nbsf\_Management\_Update Service Operation

#### 4.2.5.1 General

This service operation allows the NF service consumer to update an
existing session binding information for a UE in the BSF by providing
information to be updated (e.g. the UE address(es)) for a PDU Session,
and BSF updates the session binding information.

#### 4.2.5.2 Update an existing PCF Session binding information

![](media/image7.wmf){width="5.990277777777778in"
height="1.6493055555555556in"}

Figure 4.2.5.2-1: NF service consumer update an existing PCF Session
binding information

If the feature \"BindingUpdate\" is supported, the NF service consumer
shall invoke the Nbsf\_Management\_Update service operation to update
the session binding information for a UE in the BSF. The NF service
consumer shall send an HTTP PATCH request with
\"{apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}\" as Resource
URI, where \"{bindingId}\" is the \"Individual PCF Session Binding\"
resource identifier that is to be updated, as shown in figure 4.2.5.2-1,
step 1. The \"PcfBindingPatch\" data structure provided in the request
body shall contain the information to be updated as follows.

The \"PcfBindingPatch\" data structure:

\- for the IP address information of the served UE:

a\) shall contain the \"ipv4Addr\" attribute if the IPv4 address is
modified, or if the \"ExtendedSamePcf\" feature is supported, if the
IPv4 address was not previously provided, and may contain the
\"ipDomain\" attribute if the IPv4 address domain is modified or if the
\"ExtendedSamePcf\" feature is supported, if the IPv4 address domain was
not previously provided and applies. To remove the IPv4 address the
\"ipv4Addr\" attribute shall be set to \"null\" and if applicable, the
\"ipDomain\" attribute shall be set to \"null\"; and/or

b\) shall contain the \"ipv6Prefix\" attribute if the IPv6 address
information is modified, or if the \"ExtendedSamePcf\" feature is
supported, if the IPv6 address information was not previously provided.
The \"ipv6Prefix\" attribute shall be set to \"null\" if the IPv6
address information is removed; and/or

c\) if the \"MultiUeAddr\" feature is supported, shall contain:

1\) the \"addIpv6Prefixes\" attribute containing the new complete list
of additional IPv6 Address Prefixes if the additional IPv6 address
information is modified, or if the \"ExtendedSamePcf\" feature is
supported, the current list of IPv6 address prefixes if it was not
previously provided; or

2\) the \"addIpv6Prefixes\" attribute set to \"null\" if all additional
IPv6 Address Prefixes are removed; or

\- for the MAC address information of the served UE:

a\) shall contain the \"macAddr48\" attribute if the MAC address is
modified, or if the \"ExtendedSamePcf\" feature is supported, if the MAC
address was not previously provided. The \"macAddr48\" attribute shall
be set to \"null\" if the MAC address is removed; and/or

b\) if the \"MultiUeAddr\" feature is supported, shall contain:

1\) the \"addMacAddrs\" attribute containing the new complete list of
additional MAC addresses if the additional MAC address information is
modified, or if the \"ExtendedSamePcf\" feature is supported, the
current list of MAC address(es) if it was not previously provided; or

2\) the \"addMacAddrs\" attribute set to \"null\" if all additional MAC
addresses are removed; or

\- for the PCF instance and the associated PCF address information of
the PCF holding the SM policy association, should contain if a new PCF
instance is selected:

a\) the PCF instance ID encoded as \"pcfId\" attribute;

b\) if the PCF supports the Npcf\_PolicyAuthorization service:

1\) the FQDN of the PCF encoded as \"pcfFqdn\" attribute; and/or

2\) a description of IP endpoints at the PCF hosting the
Npcf\_PolicyAuthorization service encoded as \"pcfIpEndPoints\"
attribute; and/or

c\) if the PCF supports the Rx interface:

1\) the Diameter host id of the PCF encoded as \"pcfDiamHost\"; and

2\) the Diameter realm of the PCF and \"pcfDiamRealm\" attributes.

If the BSF cannot successfully fulfil the received HTTP PATCH request
due to the internal BSF error or due to the error in the HTTP PATCH
request, the BSF shall send the HTTP error response as specified in
subclause 5.7.

Otherwise, upon the reception of the HTTP PATCH request with:
\"{apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}\" as Resource URI
and the \"PcfBindingPatch\" data structure as request body, the BSF
shall update the binding information.

If the BSF successfully updated an \"Individual PCF Session Binding\"
resource, the BSF shall respond with \"200 OK\" status code with the
message body containing the resource representation with the updated
session binding information in the \"PcfBinding\" data structure, as
shown in figure 4.2.5.2-1, step 2.

If errors occur when processing the HTTP PATCH request, the BSF shall
send an HTTP error response as specified in subclause 5.7.

If the feature \"ES3XX\" is supported, and the BSF determines the
received HTTP PATCH request needs to be redirected, the BSF shall send
an HTTP redirect response as specified in subclause 6.10.9 of
3GPP TS 29.500 \[6\].

5 Nbsf\_Management Service API
==============================

5.1 Introduction
----------------

The Nbsf\_Management Service shall use the Nbsf\_Management API.

The API URI of the Nbsf\_Management API shall be:

**{apiRoot}/\<apiName\>/\<apiVersion\>/**

The request URIs used in HTTP requests from the NF service consumer
towards the BSF shall have the Resource URI structure defined in
subclause 4.4.1 of 3GPP TS 29.501 \[7\], i.e.:

**{apiRoot}/\<apiName\>/\<apiVersion\>/\<apiSpecificResourceUriPart\>**

with the following components:

\- The {apiRoot} shall be set as described in 3GPP TS 29.501 \[7\].

\- The \<apiName\> shall be \"nbsf-management\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificResourceUriPart\> shall be set as described in
subclause 5.3.

5.2 Usage of HTTP
-----------------

### 5.2.1 General

HTTP/2, IETF RFC 7540 \[8\], shall be used as specified in clause 5 of
3GPP TS 29.500 \[6\].

HTTP/2 shall be transported as specified in subclause 5.3 of
3GPP TS 29.500 \[6\].

The OpenAPI \[11\] specification of HTTP messages and content bodies for
the Nbsf\_Management is contained in Annex A.

### 5.2.2 HTTP standard headers

#### 5.2.2.1 General

See subclause 5.2.2 of 3GPP TS 29.500 \[6\] for the usage of HTTP
standard headers.

#### 5.2.2.2 Content type

JSON, IETF RFC 8259 \[9\], shall be used as content type of the HTTP
bodies specified in the present specification as specified in
subclause 5.4 of 3GPP TS 29.500 \[6\]. The use of the JSON format shall
be signalled by the content type \"application/json\".

\"Problem Details\" JSON object shall be used to indicate additional
details of the error in a HTTP response body and shall be signalled by
the content type \"application/problem+json\", as defined in
IETF RFC 7807 \[13\].

JSON object used in the HTTP PATCH request shall be encoded according to
\"JSON Merge Patch\" and shall be signalled by the content type
\"application/merge-patch+json\", as defined in IETF RFC 7396 \[20\].

### 5.2.3 HTTP custom headers

#### 5.2.3.1 General

The Nbsf\_Management Service API shall support HTTP custom header fields
specified in subclause 5.2.3.2 of 3GPP TS 29.500 \[6\].

In this release of the specification, no specific custom headers are
defined for the Nbsf\_Management Service API.

5.3 Resources
-------------

### 5.3.1 Resource Structure

The structure of the Resource URI of the Nbsf\_Management service is
shown in figure 5.3.1-1.

Figure 5.3.1-1: Resource URI structure of the Nbsf\_Management API

Table 5.3.1-1 provides an overview of the resources and applicable HTTP
methods.

Table 5.3.1-1: Resources and methods overview

  -------------------------------- --------------- --------------------------------- --------------------------------------------------------------------------------------------------------------------------------
  Resource name                    Resource URI    HTTP method or custom operation   Description

  PCF Session Bindings             /pcfBindings    POST                              Register a new PCF Session binding information of a given UE address in the BSF.

                                                   GET                               Retrieve the Session binding information i.e. PCF address information of a given tuple (UE address, SUPI; GPSI, DNN, S-NSSAI).

  Individual PCF Session Binding   /pcfBindings\   DELETE                            Deregister an existing PCF Session binding information from the BSF.
                                   /{bindingId}                                      

                                                   PATCH                             Update an existing PCF Session binding information in the BSF.
  -------------------------------- --------------- --------------------------------- --------------------------------------------------------------------------------------------------------------------------------

### 5.3.2 Resource: PCF Session Bindings

#### 5.3.2.1 Description

This resource represents a collection of the different PCF Session
binding information of given UE address(es) registered in the BSF.

#### 5.3.2.2 Resource definition

Resource URI: {apiRoot}/nbsf-management/v1/pcfBindings

This resource shall support the resource URI variables defined in
table 5.3.2.2-1.

Table 5.3.2.2-1: Resource URI variables for this resource

  --------- ----------- -------------------
  Name      Data type   Definition
  apiRoot   string      See subclause 5.1
  --------- ----------- -------------------

#### 5.3.2.3 Resource Standard Methods

##### 5.3.2.3.1 POST

This method shall support the URI query parameters specified in
table 5.3.2.3.1-1.

Table 5.3.2.3.1-1: URI query parameters supported by the POST method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 5.3.2.3.1-2 and the response data structures and response codes
specified in table 5.3.2.3.1-3.

Table 5.3.2.3.1-2: Data structures supported by the POST Request Body on
this resource

  ------------ --- ------------- ----------------------------------------------------
  Data type    P   Cardinality   Description
  PcfBinding   M   1             Register a new Individual PCF binding information.
  ------------ --- ------------- ----------------------------------------------------

Table 5.3.2.3.1-3: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| PcfBinding    | M | 1           | 201 Created   | The creation  |
|               |   |             |               | of an         |
|               |   |             |               | individual    |
|               |   |             |               | PCF session   |
|               |   |             |               | biding.       |
+---------------+---+-------------+---------------+---------------+
| ExtP          | O | 0..1        | 403 Forbidden | The existing  |
| roblemDetails |   |             |               | PCF binding   |
|               |   |             |               | information   |
|               |   |             |               | stored in the |
|               |   |             |               | BSF for the   |
|               |   |             |               | indicated     |
|               |   |             |               | combination   |
|               |   |             |               | is returned.  |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| mandatory     |   |             |               |               |
| HTTP error    |   |             |               |               |
| status codes  |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in            |   |             |               |               |
| ta            |   |             |               |               |
| ble 5.2.7.1-1 |   |             |               |               |
| of            |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[6\] |   |             |               |               |
| shall also    |   |             |               |               |
| apply.        |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 5.3.2.3.1-4: Headers supported by the 201 Response Code on this
resource

  ---------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------------------------------------
  Name       Data type   P   Cardinality   Description
  Location   string      M   1             Contains the URI of the newly created resource, according to the structure: {apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}
  ---------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------------------------------------

##### 5.3.2.3.2 GET

This method shall support the URI query parameters specified in
table 5.3.2.3.2-1.

Table 5.3.2.3.2-1: URI query parameters supported by the GET method on
this resource

+---------------+---------------+---+-------------+---------------+
| Name          | Data type     | P | Cardinality | Description   |
+---------------+---------------+---+-------------+---------------+
| ipv4Addr      | Ipv4Addr      | C | 0..1        | The IPv4      |
|               |               |   |             | Address of    |
|               |               |   |             | the served    |
|               |               |   |             | UE. (NOTE 1)  |
|               |               |   |             | (NOTE 3)      |
+---------------+---------------+---+-------------+---------------+
| ipv6Prefix    | Ipv6Prefix    | C | 0..1        | The IPv6      |
|               |               |   |             | Address of    |
|               |               |   |             | the served    |
|               |               |   |             | UE. (NOTE 1)  |
|               |               |   |             | (NOTE 3)      |
|               |               |   |             |               |
|               |               |   |             | The NF        |
|               |               |   |             | service       |
|               |               |   |             | consumer      |
|               |               |   |             | shall append  |
|               |               |   |             | \'/128\' to   |
|               |               |   |             | the IPv6      |
|               |               |   |             | address in    |
|               |               |   |             | the attribute |
|               |               |   |             | value. E.g.   |
|               |               |   |             | \'2001:db8:   |
|               |               |   |             | 85a3::8a2e:37 |
|               |               |   |             | 0:7334/128\'. |
+---------------+---------------+---+-------------+---------------+
| macAddr48     | MacAddr48     | C | 0..1        | The MAC       |
|               |               |   |             | Address of    |
|               |               |   |             | the served    |
|               |               |   |             | UE. (NOTE 1)  |
+---------------+---------------+---+-------------+---------------+
| dnn           | Dnn           | O | 0..1        | DNN           |
+---------------+---------------+---+-------------+---------------+
| supi          | Supi          | O | 0..1        | Subscription  |
|               |               |   |             | Permanent     |
|               |               |   |             | Identifier    |
+---------------+---------------+---+-------------+---------------+
| gpsi          | Gpsi          | O | 0..1        | Generic       |
|               |               |   |             | Public        |
|               |               |   |             | Subscription  |
|               |               |   |             | Identifier    |
+---------------+---------------+---+-------------+---------------+
| snssai        | Snssai        | O | 0..1        | The           |
|               |               |   |             | i             |
|               |               |   |             | dentification |
|               |               |   |             | of slice.     |
|               |               |   |             | (NOTE 2)      |
+---------------+---------------+---+-------------+---------------+
| ipDomain      | string        | O | 0..1        | The IPv4      |
|               |               |   |             | address       |
|               |               |   |             | domain        |
|               |               |   |             | identifier.   |
|               |               |   |             | (NOTE 2)      |
+---------------+---------------+---+-------------+---------------+
| supp-feat     | Supp          | O | 0..1        | To filter     |
|               | ortedFeatures |   |             | irrelevant    |
|               |               |   |             | responses     |
|               |               |   |             | related to    |
|               |               |   |             | unsupported   |
|               |               |   |             | features.     |
+---------------+---------------+---+-------------+---------------+
| NOTE 1: One   |               |   |             |               |
| and only one  |               |   |             |               |
| of query      |               |   |             |               |
| parameter     |               |   |             |               |
| ipv4Addr,     |               |   |             |               |
| ipv6Prefix or |               |   |             |               |
| macAddr48     |               |   |             |               |
| shall be      |               |   |             |               |
| present.      |               |   |             |               |
|               |               |   |             |               |
| NOTE 2: The   |               |   |             |               |
| query         |               |   |             |               |
| parameters    |               |   |             |               |
| snssai and/or |               |   |             |               |
| ipDomain, if  |               |   |             |               |
| applicable    |               |   |             |               |
| (IPv4 address |               |   |             |               |
| overlapping), |               |   |             |               |
| shall be      |               |   |             |               |
| present with  |               |   |             |               |
| query         |               |   |             |               |
| parameter     |               |   |             |               |
| ipv4Addr.     |               |   |             |               |
|               |               |   |             |               |
| NOTE 3: 5G-RG |               |   |             |               |
| and FN-RG     |               |   |             |               |
| replaces UE   |               |   |             |               |
| for wireline  |               |   |             |               |
| access        |               |   |             |               |
| support. See  |               |   |             |               |
| 3GPP TS 2     |               |   |             |               |
| 3.316 \[19\]. |               |   |             |               |
|               |               |   |             |               |
| NOTE 4: The   |               |   |             |               |
| ipv4Addr and  |               |   |             |               |
| ipv6Prefix    |               |   |             |               |
| query         |               |   |             |               |
| parameters    |               |   |             |               |
| may include   |               |   |             |               |
| the IP        |               |   |             |               |
| address of    |               |   |             |               |
| devices in    |               |   |             |               |
| networks      |               |   |             |               |
| behind the UE |               |   |             |               |
| (see          |               |   |             |               |
| sub           |               |   |             |               |
| clause 5.6.14 |               |   |             |               |
| of            |               |   |             |               |
| 3GPP TS 2     |               |   |             |               |
| 3.501 \[2\]). |               |   |             |               |
+---------------+---------------+---+-------------+---------------+

This method shall support the request data structures specified in
table 5.3.2.3.2-2 and the response data structures and response codes
specified in table 5.3.2.3.2-3.

Table 5.3.2.3.2-2: Data structures supported by the GET Request Body on
this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 5.3.2.3.2-3: Data structures supported by the GET Response Body on
this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| PcfBinding    | M | 1           | 200 OK        | The           |
|               |   |             |               | individual    |
|               |   |             |               | PCF session   |
|               |   |             |               | binding       |
|               |   |             |               | information   |
|               |   |             |               | resource      |
|               |   |             |               | matching the  |
|               |   |             |               | query         |
|               |   |             |               | parameter(s)  |
|               |   |             |               | is returned.  |
+---------------+---+-------------+---------------+---------------+
| n/a           |   |             | 204 No        | There is no   |
|               |   |             | Content       | PCF session   |
|               |   |             |               | binding       |
|               |   |             |               | information   |
|               |   |             |               | matching the  |
|               |   |             |               | query         |
|               |   |             |               | parameter(s). |
+---------------+---+-------------+---------------+---------------+
| P             | O | 0..1        | 400 Bad       | More than one |
| roblemDetails |   |             | Request       | binding       |
|               |   |             |               | information   |
|               |   |             |               | is found.     |
|               |   |             |               | (NOTE 2)      |
+---------------+---+-------------+---------------+---------------+
| NOTE 1: The   |   |             |               |               |
| mandatory     |   |             |               |               |
| HTTP error    |   |             |               |               |
| status codes  |   |             |               |               |
| for the GET   |   |             |               |               |
| method listed |   |             |               |               |
| in            |   |             |               |               |
| ta            |   |             |               |               |
| ble 5.2.7.1-1 |   |             |               |               |
| of            |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[6\] |   |             |               |               |
| shall also    |   |             |               |               |
| apply.        |   |             |               |               |
|               |   |             |               |               |
| NOTE 2:       |   |             |               |               |
| Failure cases |   |             |               |               |
| are described |   |             |               |               |
| in            |   |             |               |               |
| s             |   |             |               |               |
| ubclause 5.7. |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

### 5.3.3 Resource: Individual PCF Session Binding

#### 5.3.3.1 Description

This resource represents a collection of the different PCF Session
binding information of given UE address(es) registered in the BSF.

#### 5.3.3.2 Resource definition

Resource URI: **{apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}**

This resource shall support the resource URI variables defined in
table 5.3.3.2-1.

Table 5.3.3.2-1: Resource URI variables for this resource

+-----------+-----------+--------------------------------------------+
| Name      | Data type | Definition                                 |
+-----------+-----------+--------------------------------------------+
| apiRoot   | string    | See subclause 5.1                          |
+-----------+-----------+--------------------------------------------+
| bindingId | string    | Represents the individual PCF Session      |
|           |           | Binding.                                   |
|           |           |                                            |
|           |           | To enable that the value is used as part   |
|           |           | of a URI, the string shall only contain    |
|           |           | characters allowed according to the        |
|           |           | \"lower-with-hyphen\" naming convention    |
|           |           | defined in 3GPP TS 29.501 \[7\].           |
+-----------+-----------+--------------------------------------------+

#### 5.3.3.3 Resource Standard Methods

##### 5.3.3.3.1 DELETE

This method shall support the URI query parameters specified in
table 5.3.3.3.2-1.

Table 5.3.3.3.1-1: URI query parameters supported by the DELETE method
on this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 5.3.3.3.1-2 and the response data structures and response codes
specified in table 5.3.3.3.1-3.

Table 5.3.3.3.1-2: Data structures supported by the DELETE Request Body
on this resource

  ----------- --- ------------- -------------
  Data type   P   Cardinality   Description
  n/a                           
  ----------- --- ------------- -------------

Table 5.3.3.3.1-3: Data structures supported by the DELETE Response Body
on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| n/a           |   |             | 204 No        | Successful    |
|               |   |             | Content       | case: The     |
|               |   |             |               | Individual    |
|               |   |             |               | PCF session   |
|               |   |             |               | binding       |
|               |   |             |               | information   |
|               |   |             |               | resource is   |
|               |   |             |               | deleted.      |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection,  |
|               |   |             |               | during        |
|               |   |             |               | Individual    |
|               |   |             |               | PCF Session   |
|               |   |             |               | Binding       |
|               |   |             |               | deletion. The |
|               |   |             |               | response      |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing an |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located in an |
|               |   |             |               | alternative   |
|               |   |             |               | BSF (service) |
|               |   |             |               | instance.     |
|               |   |             |               |               |
|               |   |             |               | Applicable if |
|               |   |             |               | the feature   |
|               |   |             |               | \"ES3XX\" is  |
|               |   |             |               | supported.    |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection,  |
|               |   |             |               | during        |
|               |   |             |               | Individual    |
|               |   |             |               | PCF Session   |
|               |   |             |               | Binding       |
|               |   |             |               | deletion. The |
|               |   |             |               | response      |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing an |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located in an |
|               |   |             |               | alternative   |
|               |   |             |               | BSF (service) |
|               |   |             |               | instance.     |
|               |   |             |               |               |
|               |   |             |               | Applicable if |
|               |   |             |               | the feature   |
|               |   |             |               | \"ES3XX\" is  |
|               |   |             |               | supported.    |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| mandatory     |   |             |               |               |
| HTTP error    |   |             |               |               |
| status codes  |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in            |   |             |               |               |
| ta            |   |             |               |               |
| ble 5.2.7.1-1 |   |             |               |               |
| of            |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[6\] |   |             |               |               |
| shall also    |   |             |               |               |
| apply.        |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 5.3.3.3.1-4: Headers supported by the 307 Response Code on this
resource

  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------
  Name                    Data type   P   Cardinality   Description
  Location                string      M   1             An alternative URI of the resource located in an alternative BSF (service) instance.
  3gpp-Sbi-Target-Nf-Id   string      O   0..1          Identifier of the target NF (service) instance towards which the request is redirected.
  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------

Table 5.3.3.3.1-5: Headers supported by the 308 Response Code on this
resource

  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------
  Name                    Data type   P   Cardinality   Description
  Location                string      M   1             An alternative URI of the resource located in an alternative BSF (service) instance.
  3gpp-Sbi-Target-Nf-Id   string      O   0..1          Identifier of the target NF (service) instance towards which the request is redirected.
  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------

##### 5.3.3.3.2 PATCH

This method shall support the URI query parameters specified in
table 5.3.3.3.2-1.

Table 5.3.3.3.2-1: URI query parameters supported by the PATCH method on
this resource

  ------ ----------- --- ------------- -------------
  Name   Data type   P   Cardinality   Description
  n/a                                  
  ------ ----------- --- ------------- -------------

This method shall support the request data structures specified in
table 5.3.3.3.2-2 and the response data structures and response codes
specified in table 5.3.3.3.2-3.

Table 5.3.3.3.2-2: Data structures supported by the PATCH Request Body
on this resource

  ----------------- --- ------------- -----------------------------------------------
  Data type         P   Cardinality   Description
  PcfBindingPatch   M   1             Update an individual PCF binding information.
  ----------------- --- ------------- -----------------------------------------------

Table 5.3.3.3.2-3: Data structures supported by the PATCH Response Body
on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| PcfBinding    | M | 1           | 200 OK        | Successful    |
|               |   |             |               | case: The     |
|               |   |             |               | Individual    |
|               |   |             |               | PCF session   |
|               |   |             |               | binding       |
|               |   |             |               | information   |
|               |   |             |               | resource is   |
|               |   |             |               | updated.      |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection,  |
|               |   |             |               | during        |
|               |   |             |               | Individual    |
|               |   |             |               | PCF Session   |
|               |   |             |               | Binding       |
|               |   |             |               | modification. |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing an |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located in an |
|               |   |             |               | alternative   |
|               |   |             |               | BSF (service) |
|               |   |             |               | instance.     |
|               |   |             |               |               |
|               |   |             |               | Applicable if |
|               |   |             |               | the feature   |
|               |   |             |               | \"ES3XX\" is  |
|               |   |             |               | supported.    |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection,  |
|               |   |             |               | during        |
|               |   |             |               | Individual    |
|               |   |             |               | PCF Session   |
|               |   |             |               | Binding       |
|               |   |             |               | modification. |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing an |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located in an |
|               |   |             |               | alternative   |
|               |   |             |               | BSF (service) |
|               |   |             |               | instance.     |
|               |   |             |               |               |
|               |   |             |               | Applicable if |
|               |   |             |               | the feature   |
|               |   |             |               | \"ES3XX\" is  |
|               |   |             |               | supported.    |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| mandatory     |   |             |               |               |
| HTTP error    |   |             |               |               |
| status codes  |   |             |               |               |
| for the PATCH |   |             |               |               |
| method listed |   |             |               |               |
| in            |   |             |               |               |
| ta            |   |             |               |               |
| ble 5.2.7.1-1 |   |             |               |               |
| of            |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[6\] |   |             |               |               |
| shall also    |   |             |               |               |
| apply.        |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 5.3.3.3.2-4: Headers supported by the 307 Response Code on this
resource

  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------
  Name                    Data type   P   Cardinality   Description
  Location                string      M   1             An alternative URI of the resource located in an alternative BSF (service) instance.
  3gpp-Sbi-Target-Nf-Id   string      O   0..1          Identifier of the target NF (service) instance towards which the request is redirected.
  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------

Table 5.3.3.3.2-5: Headers supported by the 308 Response Code on this
resource

  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------
  Name                    Data type   P   Cardinality   Description
  Location                string      M   1             An alternative URI of the resource located in an alternative BSF (service) instance.
  3gpp-Sbi-Target-Nf-Id   string      O   0..1          Identifier of the target NF (service) instance towards which the request is redirected.
  ----------------------- ----------- --- ------------- -----------------------------------------------------------------------------------------

5.4 Custom Operations without associated resources
--------------------------------------------------

None in this release of this specification.

5.5 Notifications
-----------------

None in this release of this specification.

5.6 Data Model
--------------

### 5.6.1 General

This subclause specifies the application data model supported by the
API.

Table 5.6.1-1 specifies the data types defined for the Nbsf\_Management
service based interface protocol.

Table 5.6.1-1: Nbsf\_Management specific Data Types

  ---------------------- ----------------- ------------------------------------------------------------------------------------------------------------------------------------------------------ ---------------
  Data type              Section defined   Description                                                                                                                                            Applicability
  BindingResp            5.6.2.6           Contains the binding information.                                                                                                                      SamePcf
  BindingLevel           5.6.3.3           Contains the binding level.                                                                                                                            
  ParameterCombination   5.6.2.4           The combination used by the BSF to check whether there is an existing PCF binding information.                                                         SamePcf
  ExtProblemDetails      5.6.2.5           Contains the FQDN or IP endpoints of the existing PCF and cause value if there is an existing PCF binding information for the indicated combination.   SamePcf
  PcfBinding             5.6.2.2           Identifies an Individual PCF binding.                                                                                                                  
  PcfBindingPatch        5.6.2.3           Identifies an Individual PCF binding used for Patch method.                                                                                            BindingUpdate
  ---------------------- ----------------- ------------------------------------------------------------------------------------------------------------------------------------------------------ ---------------

Table 5.6.1-2 specifies data types re-used by the Nbsf\_Management
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the Nbsf\_Management service based
interface.

Table 5.6.1-2: Nbsf\_Management re-used Data Types

  ------------------- ----------------------- -------------------------------------------------------------------------------------- ---------------
  Data type           Reference               Comments                                                                               Applicability
  DateTime            3GPP TS 29.571 \[10\]                                                                                          
  DiameterIdentity    3GPP TS 29.571 \[10\]                                                                                          
  Dnn                 3GPP TS 29.571 \[10\]                                                                                          
  Fqdn                3GPP TS 29.510 \[12\]                                                                                          
  Gpsi                3GPP TS 29.571 \[10\]                                                                                          
  IpEndPoint          3GPP TS 29.510 \[12\]                                                                                          
  Ipv4Addr            3GPP TS 29.571 \[10\]                                                                                          
  Ipv4AddrMask        3GPP TS 29.571 \[11\]   String identifying an IPv4 address mask.                                               
  Ipv4AddrRm          3GPP TS 29.571 \[10\]                                                                                          
  Ipv6Prefix          3GPP TS 29.571 \[10\]                                                                                          
  Ipv6PrefixRm        3GPP TS 29.571 \[10\]                                                                                          
  MacAddr48           3GPP TS 29.571 \[10\]                                                                                          
  MacAddr48Rm         3GPP TS 29.571 \[10\]                                                                                          
  NfInstanceId        3GPP TS 29.571 \[10\]                                                                                          
  NfSetId             3GPP TS 29.571 \[10\]                                                                                          
  ProblemDetails      3GPP TS 29.571 \[10\]   Used in error responses to provide more detailed information about an error.           
  RedirectResponse    3GPP TS 29.571 \[10\]   Contains redirection related information.                                              ES3XX
  Snssai              3GPP TS 29.571 \[10\]                                                                                          
  Supi                3GPP TS 29.571 \[10\]                                                                                          
  SupportedFeatures   3GPP TS 29.571 \[10\]   Used to negotiate the applicability of the optional features defined in table 5.8-1.   
  ------------------- ----------------------- -------------------------------------------------------------------------------------- ---------------

### 5.6.2 Structured data types

#### 5.6.2.1 Introduction

This subclause defines the structures to be used in resource
representations.

#### 5.6.2.2 Type PcfBinding

Table 5.6.2.2-1: Definition of type PcfBinding

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| supi      | Supi      | O | 0..1      | Sub       |           |
|           |           |   |           | scription |           |
|           |           |   |           | Permanent |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
+-----------+-----------+---+-----------+-----------+-----------+
| gpsi      | Gpsi      | O | 0..1      | Generic   |           |
|           |           |   |           | Public    |           |
|           |           |   |           | Sub       |           |
|           |           |   |           | scription |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ipv4Addr  | Ipv4Addr  | C | 0..1      | The IPv4  |           |
|           |           |   |           | Address   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 4)  |           |
|           |           |   |           | (NOTE 8)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| i         | I         | C | 0..1      | The IPv6  |           |
| pv6Prefix | pv6Prefix |   |           | Address   |           |
|           |           |   |           | Prefix of |           |
|           |           |   |           | the       |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 4)  |           |
|           |           |   |           | (NOTE 5)  |           |
|           |           |   |           | (NOTE 8)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| addIpv    | array(Ip  | O | 1..N      | The       | Mu        |
| 6Prefixes | v6Prefix) |   |           | a         | ltiUeAddr |
|           |           |   |           | dditional |           |
|           |           |   |           | IPv6      |           |
|           |           |   |           | Address   |           |
|           |           |   |           | Prefixes  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 4)  |           |
|           |           |   |           | (NOTE 5)  |           |
|           |           |   |           | (NOTE 8)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ipDomain  | string    | O | 0..1      | IPv4      |           |
|           |           |   |           | address   |           |
|           |           |   |           | domain    |           |
|           |           |   |           | id        |           |
|           |           |   |           | entifier. |           |
|           |           |   |           | (NOTE 1)  |           |
|           |           |   |           | (NOTE 8)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| macAddr48 | MacAddr48 | C | 0..1      | The MAC   |           |
|           |           |   |           | Address   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 8)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ad        | array(M   | O | 1..N      | The       | Mu        |
| dMacAddrs | acAddr48) |   |           | a         | ltiUeAddr |
|           |           |   |           | dditional |           |
|           |           |   |           | MAC       |           |
|           |           |   |           | Addresses |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 8)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| dnn       | Dnn       | M | 1         | DNN, a    |           |
|           |           |   |           | full DNN  |           |
|           |           |   |           | with both |           |
|           |           |   |           | the       |           |
|           |           |   |           | Network   |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | and       |           |
|           |           |   |           | Operator  |           |
|           |           |   |           | Id        |           |
|           |           |   |           | entifier, |           |
|           |           |   |           | or a DNN  |           |
|           |           |   |           | with the  |           |
|           |           |   |           | Network   |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | only.     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfFqdn   | Fqdn      | C | 0..1      | FQDN of   |           |
|           |           |   |           | the PCF   |           |
|           |           |   |           | hosting   |           |
|           |           |   |           | the       |           |
|           |           |   |           | Npcf\_P   |           |
|           |           |   |           | olicyAuth |           |
|           |           |   |           | orization |           |
|           |           |   |           | service.  |           |
|           |           |   |           | (NOTE 2)  |           |
|           |           |   |           | (NOTE 9)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfIp     | array(Ip  | C | 1..N      | IP end    |           |
| EndPoints | EndPoint) |   |           | points of |           |
|           |           |   |           | the PCF   |           |
|           |           |   |           | hosting   |           |
|           |           |   |           | the       |           |
|           |           |   |           | Npcf\_P   |           |
|           |           |   |           | olicyAuth |           |
|           |           |   |           | orization |           |
|           |           |   |           | service.  |           |
|           |           |   |           | (NOTE 2)  |           |
|           |           |   |           | (NOTE 9)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pc        | Diamete   | C | 0..1      | The       |           |
| fDiamHost | rIdentity |   |           | diameter  |           |
|           |           |   |           | host for  |           |
|           |           |   |           | an        |           |
|           |           |   |           | i         |           |
|           |           |   |           | ndividual |           |
|           |           |   |           | PCF.      |           |
|           |           |   |           | (NOTE 3)  |           |
|           |           |   |           | (NOTE 9)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcf       | Diamete   | C | 0..1      | The       |           |
| DiamRealm | rIdentity |   |           | diameter  |           |
|           |           |   |           | realm for |           |
|           |           |   |           | an        |           |
|           |           |   |           | i         |           |
|           |           |   |           | ndividual |           |
|           |           |   |           | PCF.      |           |
|           |           |   |           | (NOTE 3)  |           |
|           |           |   |           | (NOTE 9)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfSmFqdn | Fqdn      | O | 0..1      | FQDN of   | SamePcf   |
|           |           |   |           | the PCF   |           |
|           |           |   |           | hosting   |           |
|           |           |   |           | the       |           |
|           |           |   |           | Npc       |           |
|           |           |   |           | f\_SMPoli |           |
|           |           |   |           | cyControl |           |
|           |           |   |           | service.  |           |
|           |           |   |           | (NOTE 7)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfSmIp   | array(Ip  | O | 1..N      | IP end    | SamePcf   |
| EndPoints | EndPoint) |   |           | points of |           |
|           |           |   |           | the PCF   |           |
|           |           |   |           | hosting   |           |
|           |           |   |           | the       |           |
|           |           |   |           | Npc       |           |
|           |           |   |           | f\_SMPoli |           |
|           |           |   |           | cyControl |           |
|           |           |   |           | service.  |           |
|           |           |   |           | (NOTE 7)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| snssai    | Snssai    | M | 1         | The       |           |
|           |           |   |           | ident     |           |
|           |           |   |           | ification |           |
|           |           |   |           | of slice. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| suppFeat  | Supporte  | C | 0..1      | Used to   |           |
|           | dFeatures |   |           | negotiate |           |
|           |           |   |           | the       |           |
|           |           |   |           | supported |           |
|           |           |   |           | optional  |           |
|           |           |   |           | features  |           |
|           |           |   |           | as        |           |
|           |           |   |           | described |           |
|           |           |   |           | in        |           |
|           |           |   |           | subcl     |           |
|           |           |   |           | ause 5.8. |           |
|           |           |   |           |           |           |
|           |           |   |           | Shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP POST |           |
|           |           |   |           | request/  |           |
|           |           |   |           | response; |           |
|           |           |   |           | or in the |           |
|           |           |   |           | HTTP GET  |           |
|           |           |   |           | response  |           |
|           |           |   |           | if the    |           |
|           |           |   |           | \"su      |           |
|           |           |   |           | pp-feat\" |           |
|           |           |   |           | attribute |           |
|           |           |   |           | query     |           |
|           |           |   |           | parameter |           |
|           |           |   |           | is        |           |
|           |           |   |           | included  |           |
|           |           |   |           | in the    |           |
|           |           |   |           | HTTP GET  |           |
|           |           |   |           | request.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfId     | NfI       | O | 0..1      | PCF       |           |
|           | nstanceId |   |           | instance  |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentifier |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfSetId  | NfSetId   | O | 0..1      | The PCF   |           |
|           |           |   |           | set Id    |           |
+-----------+-----------+---+-----------+-----------+-----------+
| rec       | DateTime  | O | 0..1      | Recovery  |           |
| overyTime |           |   |           | time of   |           |
|           |           |   |           | the PCF   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| paraCom   | Pa        | O | 0..1      | If it is  | SamePcf   |
|           | rameterCo |   |           | included, |           |
|           | mbination |   |           | the BSF   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | check     |           |
|           |           |   |           | whether   |           |
|           |           |   |           | there is  |           |
|           |           |   |           | an        |           |
|           |           |   |           | existing  |           |
|           |           |   |           | PCF       |           |
|           |           |   |           | binding   |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | for the   |           |
|           |           |   |           | indicated |           |
|           |           |   |           | com       |           |
|           |           |   |           | bination. |           |
|           |           |   |           | (NOTE 6)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| bindLevel | Bin       | O | 0..1      | Contains  |           |
|           | dingLevel |   |           | the level |           |
|           |           |   |           | of        |           |
|           |           |   |           | binding.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ipv4Frame | a         | O | 1..N      | List of   |           |
| RouteList | rray(Ipv4 |   |           | Framed    |           |
|           | AddrMask) |   |           | Route     |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | of IPv4.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ipv6Frame | array(Ip  | O | 1..N      | List of   |           |
| RouteList | v6Prefix) |   |           | Framed    |           |
|           |           |   |           | Route     |           |
|           |           |   |           | in        |           |
|           |           |   |           | formation |           |
|           |           |   |           | of IPv6.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE 1:   |           |   |           |           |           |
| The       |           |   |           |           |           |
| ipDomain  |           |   |           |           |           |
| attribute |           |   |           |           |           |
| may only  |           |   |           |           |           |
| be        |           |   |           |           |           |
| provided  |           |   |           |           |           |
| if the    |           |   |           |           |           |
| ipv4Addr  |           |   |           |           |           |
| attribute |           |   |           |           |           |
| is        |           |   |           |           |           |
| present.  |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 2:   |           |   |           |           |           |
| When the  |           |   |           |           |           |
| \         |           |   |           |           |           |
| "Extended |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is not    |           |   |           |           |           |
| s         |           |   |           |           |           |
| upported, |           |   |           |           |           |
| at least  |           |   |           |           |           |
| one of    |           |   |           |           |           |
| \"        |           |   |           |           |           |
| pcfFqdn\" |           |   |           |           |           |
| or        |           |   |           |           |           |
| \"pcfIpEn |           |   |           |           |           |
| dPoints\" |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| included  |           |   |           |           |           |
| if the    |           |   |           |           |           |
| PCF       |           |   |           |           |           |
| supports  |           |   |           |           |           |
| the       |           |   |           |           |           |
| Npcf\_P   |           |   |           |           |           |
| olicyAuth |           |   |           |           |           |
| orization |           |   |           |           |           |
| service.  |           |   |           |           |           |
| When the  |           |   |           |           |           |
| \         |           |   |           |           |           |
| "Extended |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is        |           |   |           |           |           |
| supported |           |   |           |           |           |
| these     |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| may be    |           |   |           |           |           |
| provided  |           |   |           |           |           |
| if        |           |   |           |           |           |
| a         |           |   |           |           |           |
| vailable. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 3:   |           |   |           |           |           |
| When the  |           |   |           |           |           |
| \         |           |   |           |           |           |
| "Extended |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is not    |           |   |           |           |           |
| s         |           |   |           |           |           |
| upported, |           |   |           |           |           |
| both      |           |   |           |           |           |
| pc        |           |   |           |           |           |
| fDiamHost |           |   |           |           |           |
| and       |           |   |           |           |           |
| pcf       |           |   |           |           |           |
| DiamRealm |           |   |           |           |           |
| are       |           |   |           |           |           |
| provided  |           |   |           |           |           |
| if the    |           |   |           |           |           |
| PCF       |           |   |           |           |           |
| supports  |           |   |           |           |           |
| Rx        |           |   |           |           |           |
| i         |           |   |           |           |           |
| nterface. |           |   |           |           |           |
| When the  |           |   |           |           |           |
| \         |           |   |           |           |           |
| "Extended |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is        |           |   |           |           |           |
| supported |           |   |           |           |           |
| these     |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| may       |           |   |           |           |           |
| provided  |           |   |           |           |           |
| if        |           |   |           |           |           |
| a         |           |   |           |           |           |
| vailable. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 4:   |           |   |           |           |           |
| 5G-RG and |           |   |           |           |           |
| FN-RG     |           |   |           |           |           |
| replaces  |           |   |           |           |           |
| UE for    |           |   |           |           |           |
| wireline  |           |   |           |           |           |
| access    |           |   |           |           |           |
| support.  |           |   |           |           |           |
| See       |           |   |           |           |           |
| 3GPP      |           |   |           |           |           |
|  TS 23.31 |           |   |           |           |           |
| 6 \[19\]. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 5:   |           |   |           |           |           |
| IPv6      |           |   |           |           |           |
| p         |           |   |           |           |           |
| refix(es) |           |   |           |           |           |
| shorter   |           |   |           |           |           |
| than /64  |           |   |           |           |           |
| or full   |           |   |           |           |           |
| IPv6      |           |   |           |           |           |
| add       |           |   |           |           |           |
| ress(es\_ |           |   |           |           |           |
| with a    |           |   |           |           |           |
| /128      |           |   |           |           |           |
| prefix    |           |   |           |           |           |
| may be    |           |   |           |           |           |
| encoded   |           |   |           |           |           |
| as the    |           |   |           |           |           |
| \"ipv     |           |   |           |           |           |
| 6Prefix\" |           |   |           |           |           |
| and       |           |   |           |           |           |
| \         |           |   |           |           |           |
| "addIpv6P |           |   |           |           |           |
| refixes\" |           |   |           |           |           |
| at        |           |   |           |           |           |
| tributes, |           |   |           |           |           |
| according |           |   |           |           |           |
| to        |           |   |           |           |           |
| 3GPP      |           |   |           |           |           |
|  TS 23.31 |           |   |           |           |           |
| 6 \[19\], |           |   |           |           |           |
| subclau   |           |   |           |           |           |
| se 8.3.1. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 6:   |           |   |           |           |           |
| If the    |           |   |           |           |           |
| BSF finds |           |   |           |           |           |
| that      |           |   |           |           |           |
| there is  |           |   |           |           |           |
| an        |           |   |           |           |           |
| existing  |           |   |           |           |           |
| I         |           |   |           |           |           |
| ndividual |           |   |           |           |           |
| PCF       |           |   |           |           |           |
| Session   |           |   |           |           |           |
| binding   |           |   |           |           |           |
| resource  |           |   |           |           |           |
| for the   |           |   |           |           |           |
| indicated |           |   |           |           |           |
| co        |           |   |           |           |           |
| mbination |           |   |           |           |           |
| c         |           |   |           |           |           |
| ontaining |           |   |           |           |           |
| Npc       |           |   |           |           |           |
| f\_SMPoli |           |   |           |           |           |
| cyControl |           |   |           |           |           |
| service   |           |   |           |           |           |
| a         |           |   |           |           |           |
| ddressing |           |   |           |           |           |
| inf       |           |   |           |           |           |
| ormation, |           |   |           |           |           |
| the BSF   |           |   |           |           |           |
| shall not |           |   |           |           |           |
| check     |           |   |           |           |           |
| other     |           |   |           |           |           |
| I         |           |   |           |           |           |
| ndividual |           |   |           |           |           |
| PCF       |           |   |           |           |           |
| Session   |           |   |           |           |           |
| binding   |           |   |           |           |           |
| resources |           |   |           |           |           |
| and shall |           |   |           |           |           |
| reject    |           |   |           |           |           |
| the       |           |   |           |           |           |
| ongoing   |           |   |           |           |           |
| regi      |           |   |           |           |           |
| stration, |           |   |           |           |           |
| and       |           |   |           |           |           |
| return    |           |   |           |           |           |
| the FQDN  |           |   |           |           |           |
| or IP     |           |   |           |           |           |
| endpoints |           |   |           |           |           |
| of the    |           |   |           |           |           |
| Npc       |           |   |           |           |           |
| f\_SMPoli |           |   |           |           |           |
| cyControl |           |   |           |           |           |
| service   |           |   |           |           |           |
| of the    |           |   |           |           |           |
| matching  |           |   |           |           |           |
| I         |           |   |           |           |           |
| ndividual |           |   |           |           |           |
| PCF       |           |   |           |           |           |
| Session   |           |   |           |           |           |
| binding   |           |   |           |           |           |
| resource  |           |   |           |           |           |
| to the    |           |   |           |           |           |
| r         |           |   |           |           |           |
| equesting |           |   |           |           |           |
| PCF.      |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 7:   |           |   |           |           |           |
| At least  |           |   |           |           |           |
| one of    |           |   |           |           |           |
| the       |           |   |           |           |           |
| \"pc      |           |   |           |           |           |
| fSmFqdn\" |           |   |           |           |           |
| attribute |           |   |           |           |           |
| or the    |           |   |           |           |           |
| \"        |           |   |           |           |           |
| pcfSmIpEn |           |   |           |           |           |
| dPoints\" |           |   |           |           |           |
| attribute |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| included  |           |   |           |           |           |
| in the    |           |   |           |           |           |
| binding   |           |   |           |           |           |
| inf       |           |   |           |           |           |
| ormation, |           |   |           |           |           |
| if the    |           |   |           |           |           |
| binding   |           |   |           |           |           |
| refers to |           |   |           |           |           |
| an SM     |           |   |           |           |           |
| Policy    |           |   |           |           |           |
| as        |           |   |           |           |           |
| sociation |           |   |           |           |           |
| and if    |           |   |           |           |           |
| the       |           |   |           |           |           |
| \"        |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is        |           |   |           |           |           |
| supported |           |   |           |           |           |
| and the   |           |   |           |           |           |
| PCF       |           |   |           |           |           |
| d         |           |   |           |           |           |
| etermines |           |   |           |           |           |
| that the  |           |   |           |           |           |
| same PCF  |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| selected  |           |   |           |           |           |
| for the   |           |   |           |           |           |
| SM Policy |           |   |           |           |           |
| ass       |           |   |           |           |           |
| ociations |           |   |           |           |           |
| with the  |           |   |           |           |           |
| same      |           |   |           |           |           |
| SUPI/DN   |           |   |           |           |           |
| N/S-NSSAI |           |   |           |           |           |
| parameter |           |   |           |           |           |
| co        |           |   |           |           |           |
| mbination |           |   |           |           |           |
| in the    |           |   |           |           |           |
| no        |           |   |           |           |           |
| n-roaming |           |   |           |           |           |
| or        |           |   |           |           |           |
| ho        |           |   |           |           |           |
| me-routed |           |   |           |           |           |
| scenario  |           |   |           |           |           |
| based on  |           |   |           |           |           |
| op        |           |   |           |           |           |
| erator\'s |           |   |           |           |           |
| policies  |           |   |           |           |           |
| and       |           |   |           |           |           |
| confi     |           |   |           |           |           |
| guration. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 8:   |           |   |           |           |           |
| When the  |           |   |           |           |           |
| \         |           |   |           |           |           |
| "Extended |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is not    |           |   |           |           |           |
| supported |           |   |           |           |           |
| the       |           |   |           |           |           |
| address   |           |   |           |           |           |
| in        |           |   |           |           |           |
| formation |           |   |           |           |           |
| of the    |           |   |           |           |           |
| served UE |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| provided, |           |   |           |           |           |
| i.e.,     |           |   |           |           |           |
| either    |           |   |           |           |           |
| the       |           |   |           |           |           |
| \"ip      |           |   |           |           |           |
| v4Addr\", |           |   |           |           |           |
| the       |           |   |           |           |           |
| \"ipv     |           |   |           |           |           |
| 6Prefix\" |           |   |           |           |           |
| and/or    |           |   |           |           |           |
| \         |           |   |           |           |           |
| "addIpv6P |           |   |           |           |           |
| refixes\" |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| or the    |           |   |           |           |           |
| \"ma      |           |   |           |           |           |
| cAddr48\" |           |   |           |           |           |
| and/or    |           |   |           |           |           |
| \"addM    |           |   |           |           |           |
| acAddrs\" |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| provided  |           |   |           |           |           |
| as        |           |   |           |           |           |
| specified |           |   |           |           |           |
| in        |           |   |           |           |           |
| subclause |           |   |           |           |           |
|  4.2.2.2. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 9:   |           |   |           |           |           |
| When the  |           |   |           |           |           |
| \         |           |   |           |           |           |
| "Extended |           |   |           |           |           |
| SamePcf\" |           |   |           |           |           |
| feature   |           |   |           |           |           |
| is not    |           |   |           |           |           |
| supported |           |   |           |           |           |
| the       |           |   |           |           |           |
| address   |           |   |           |           |           |
| in        |           |   |           |           |           |
| formation |           |   |           |           |           |
| of the    |           |   |           |           |           |
| Npcf\_P   |           |   |           |           |           |
| olicyAuth |           |   |           |           |           |
| orization |           |   |           |           |           |
| service   |           |   |           |           |           |
| and/or Rx |           |   |           |           |           |
| interface |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| provided, |           |   |           |           |           |
| i.e.,     |           |   |           |           |           |
| both      |           |   |           |           |           |
| \"pcfD    |           |   |           |           |           |
| iamHost\" |           |   |           |           |           |
| and       |           |   |           |           |           |
| \"pcfDi   |           |   |           |           |           |
| amRealm\" |           |   |           |           |           |
| and/or at |           |   |           |           |           |
| least one |           |   |           |           |           |
| of the    |           |   |           |           |           |
| \"        |           |   |           |           |           |
| pcfFqdn\" |           |   |           |           |           |
| or        |           |   |           |           |           |
| \"pcfEn   |           |   |           |           |           |
| dPoints\" |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| provided  |           |   |           |           |           |
| as        |           |   |           |           |           |
| specified |           |   |           |           |           |
| in        |           |   |           |           |           |
| subclause |           |   |           |           |           |
|  4.2.2.2. |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

#### 5.6.2.3 Type PcfBindingPatch

Table 5.6.2.3-1: Definition of type PcfBindingPatch

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| ipv4Addr  | I         | O | 0..1      | The IPv4  |           |
|           | pv4AddrRm |   |           | Address   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 2)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ipDomain  | string    | O | 0..1      | IPv4      |           |
|           |           |   |           | address   |           |
|           |           |   |           | domain    |           |
|           |           |   |           | id        |           |
|           |           |   |           | entifier. |           |
|           |           |   |           | (NOTE 1)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| i         | Ipv       | O | 0..1      | The IPv6  |           |
| pv6Prefix | 6PrefixRm |   |           | Address   |           |
|           |           |   |           | Prefix of |           |
|           |           |   |           | the       |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 2)  |           |
|           |           |   |           | (NOTE 3)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| addIpv    | array(Ip  | O | 1..N      | The       | Mu        |
| 6Prefixes | v6Prefix) |   |           | a         | ltiUeAddr |
|           |           |   |           | dditional |           |
|           |           |   |           | IPv6      |           |
|           |           |   |           | Address   |           |
|           |           |   |           | Prefixes  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
|           |           |   |           | (NOTE 2)  |           |
|           |           |   |           | (NOTE 3)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| macAddr48 | Ma        | O | 0..1      | The MAC   |           |
|           | cAddr48Rm |   |           | Address   |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| ad        | array(M   | O | 1..N      | The       | Mu        |
| dMacAddrs | acAddr48) |   |           | a         | ltiUeAddr |
|           |           |   |           | dditional |           |
|           |           |   |           | MAC       |           |
|           |           |   |           | Addresses |           |
|           |           |   |           | of the    |           |
|           |           |   |           | served    |           |
|           |           |   |           | UE.       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfId     | NfI       | O | 0..1      | PCF       |           |
|           | nstanceId |   |           | instance  |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentifier |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfFqdn   | Fqdn      | O | 0..1      | FQDN of   |           |
|           |           |   |           | the PCF   |           |
|           |           |   |           | hosting   |           |
|           |           |   |           | the       |           |
|           |           |   |           | Npcf\_P   |           |
|           |           |   |           | olicyAuth |           |
|           |           |   |           | orization |           |
|           |           |   |           | service.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcfIp     | array(Ip  | O | 1..N      | IP end    |           |
| EndPoints | EndPoint) |   |           | points of |           |
|           |           |   |           | the PCF   |           |
|           |           |   |           | hosting   |           |
|           |           |   |           | the       |           |
|           |           |   |           | Npcf\_P   |           |
|           |           |   |           | olicyAuth |           |
|           |           |   |           | orization |           |
|           |           |   |           | service.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pc        | Diamete   | O | 0..1      | The       |           |
| fDiamHost | rIdentity |   |           | diameter  |           |
|           |           |   |           | host for  |           |
|           |           |   |           | an        |           |
|           |           |   |           | i         |           |
|           |           |   |           | ndividual |           |
|           |           |   |           | PCF.      |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pcf       | Diamete   | O | 0..1      | The       |           |
| DiamRealm | rIdentity |   |           | diameter  |           |
|           |           |   |           | realm for |           |
|           |           |   |           | an        |           |
|           |           |   |           | i         |           |
|           |           |   |           | ndividual |           |
|           |           |   |           | PCF.      |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE 1:   |           |   |           |           |           |
| If        |           |   |           |           |           |
| ap        |           |   |           |           |           |
| plicable, |           |   |           |           |           |
| the       |           |   |           |           |           |
| consumer  |           |   |           |           |           |
| (e.g.     |           |   |           |           |           |
| PCF)      |           |   |           |           |           |
| shall     |           |   |           |           |           |
| also      |           |   |           |           |           |
| request   |           |   |           |           |           |
| to remove |           |   |           |           |           |
| the       |           |   |           |           |           |
| ipDomain  |           |   |           |           |           |
| attribute |           |   |           |           |           |
| if the    |           |   |           |           |           |
| ipv4Addr  |           |   |           |           |           |
| attribute |           |   |           |           |           |
| is        |           |   |           |           |           |
| requested |           |   |           |           |           |
| to be     |           |   |           |           |           |
| removed.  |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 2:   |           |   |           |           |           |
| 5G-RG and |           |   |           |           |           |
| FN-RG     |           |   |           |           |           |
| replaces  |           |   |           |           |           |
| UE for    |           |   |           |           |           |
| wireline  |           |   |           |           |           |
| access    |           |   |           |           |           |
| support.  |           |   |           |           |           |
| See       |           |   |           |           |           |
| 3GPP      |           |   |           |           |           |
|  TS 23.31 |           |   |           |           |           |
| 6 \[19\]. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 3:   |           |   |           |           |           |
| IPv6      |           |   |           |           |           |
| p         |           |   |           |           |           |
| refix(es) |           |   |           |           |           |
| shorter   |           |   |           |           |           |
| than /64  |           |   |           |           |           |
| or full   |           |   |           |           |           |
| IPv6      |           |   |           |           |           |
| ad        |           |   |           |           |           |
| dress(es) |           |   |           |           |           |
| with a    |           |   |           |           |           |
| /128      |           |   |           |           |           |
| prefix    |           |   |           |           |           |
| can be    |           |   |           |           |           |
| encoded   |           |   |           |           |           |
| as the    |           |   |           |           |           |
| \"ipv     |           |   |           |           |           |
| 6Prefix\" |           |   |           |           |           |
| and       |           |   |           |           |           |
| \         |           |   |           |           |           |
| "addIpv6P |           |   |           |           |           |
| refixes\" |           |   |           |           |           |
| at        |           |   |           |           |           |
| tributes, |           |   |           |           |           |
| according |           |   |           |           |           |
| to        |           |   |           |           |           |
| 3GPP      |           |   |           |           |           |
|  TS 23.31 |           |   |           |           |           |
| 6 \[19\], |           |   |           |           |           |
| subclau   |           |   |           |           |           |
| se 8.3.1. |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

#### 5.6.2.4 Type ParameterCombination

Table 5.6.2.4-1: Definition of type ParameterCombination

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+-----------+-----------+---+-----------+-----------+-----------+
| supi      | Supi      | O | 0..1      | Sub       |           |
|           |           |   |           | scription |           |
|           |           |   |           | Permanent |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
+-----------+-----------+---+-----------+-----------+-----------+
| dnn       | Dnn       | O | 0..1      | DNN, a    |           |
|           |           |   |           | full DNN  |           |
|           |           |   |           | with both |           |
|           |           |   |           | the       |           |
|           |           |   |           | Network   |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | and       |           |
|           |           |   |           | Operator  |           |
|           |           |   |           | Id        |           |
|           |           |   |           | entifier, |           |
|           |           |   |           | or a DNN  |           |
|           |           |   |           | with the  |           |
|           |           |   |           | Network   |           |
|           |           |   |           | I         |           |
|           |           |   |           | dentifier |           |
|           |           |   |           | only.     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| snssai    | Snssai    | O | 0..1      | The       |           |
|           |           |   |           | ident     |           |
|           |           |   |           | ification |           |
|           |           |   |           | of slice. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE 1:   |           |   |           |           |           |
| At least  |           |   |           |           |           |
| one of    |           |   |           |           |           |
| the       |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| in this   |           |   |           |           |           |
| table     |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| included. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 2:   |           |   |           |           |           |
| The       |           |   |           |           |           |
| a         |           |   |           |           |           |
| pplicable |           |   |           |           |           |
| parameter |           |   |           |           |           |
| com       |           |   |           |           |           |
| binations |           |   |           |           |           |
| in a      |           |   |           |           |           |
| given     |           |   |           |           |           |
| d         |           |   |           |           |           |
| eployment |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| disjoint  |           |   |           |           |           |
| comb      |           |   |           |           |           |
| inations. |           |   |           |           |           |
| E.g., if  |           |   |           |           |           |
| a         |           |   |           |           |           |
| d         |           |   |           |           |           |
| eployment |           |   |           |           |           |
| requires  |           |   |           |           |           |
| a         |           |   |           |           |           |
| parameter |           |   |           |           |           |
| co        |           |   |           |           |           |
| mbination |           |   |           |           |           |
| that      |           |   |           |           |           |
| includes  |           |   |           |           |           |
| a SUPI    |           |   |           |           |           |
| value for |           |   |           |           |           |
| a         |           |   |           |           |           |
| DN        |           |   |           |           |           |
| N/S-NSSAI |           |   |           |           |           |
| com       |           |   |           |           |           |
| bination, |           |   |           |           |           |
| s         |           |   |           |           |           |
| ubsequent |           |   |           |           |           |
| parameter |           |   |           |           |           |
| com       |           |   |           |           |           |
| binations |           |   |           |           |           |
| of that   |           |   |           |           |           |
| DN        |           |   |           |           |           |
| N/S-NSSAI |           |   |           |           |           |
| co        |           |   |           |           |           |
| mbination |           |   |           |           |           |
| shall     |           |   |           |           |           |
| also      |           |   |           |           |           |
| include   |           |   |           |           |           |
| the       |           |   |           |           |           |
| corr      |           |   |           |           |           |
| esponding |           |   |           |           |           |
| SUPI      |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttribute. |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

#### 5.6.2.5 Type ExtProblemDetails

Table 5.6.2.5-1: Definition of type ExtProblemDetails as a list of to be
combined data types

  ---------------- --- ------------- ------------------------- ---------------
  Data Type        P   Cardinality   Description               Applicability
  ProblemDetails   O   0..1          Problem Details           
  BindingResp      O   0..1          PCF Binding Information   
  ---------------- --- ------------- ------------------------- ---------------

#### 5.6.2.6 Type BindingResp

Table 5.6.2.6-1: Definition of type BindingResp

  --------------------------------------------------------------------------------------------------- ------------------- --- ------------- ---------------------------------------------------------------------------- ---------------
  Attribute name                                                                                      Data type           P   Cardinality   Description                                                                  Applicability
  pcfSmFqdn                                                                                           Fqdn                O   0..1          FQDN of the PCF hosting the Npcf\_SMPolicyControl service. (NOTE)            
  pcfSmIpEndPoints                                                                                    array(IpEndPoint)   O   1..N          IP end points of the PCF hosting the Npcf\_SMPolicyControl service. (NOTE)   
  NOTE: Either the \"pcfSmFqdn\" attribute or the \"pcfSmIpEndPoints\" attribute shall be included.                                                                                                                      
  --------------------------------------------------------------------------------------------------- ------------------- --- ------------- ---------------------------------------------------------------------------- ---------------

### 5.6.3 Simple data types and enumerations

#### 5.6.3.1 Introduction

This subclause defines simple data types and enumerations that can be
referenced from data structures defined in the previous subclauses.

#### 5.6.3.2 Simple data types

The simple data types defined in table 5.6.3.2-1 shall be supported.

Table 5.6.3.2-1: Simple data types

  ----------- ----------------- ------------- ---------------
  Type Name   Type Definition   Description   Applicability
  n/a                                         
  ----------- ----------------- ------------- ---------------

#### 5.6.3.3 Enumeration: BindingLevel

Table 5.6.3.3-1: Enumeration BindingLevel

  ------------------- --------------------------------------------- ---------------
  Enumeration value   Description                                   Applicability
  NF\_SET             Indicates the NF set level of binding.        
  NF\_INSTANCE        Indicates the NF instance level of binding.   
  ------------------- --------------------------------------------- ---------------

5.7 Error handling
------------------

### 5.7.1 General

HTTP error handling shall be supported as specified in subclause 5.2.4
of 3GPP TS 29.500 \[6\].

For the Nbsf\_Management Service API, HTTP error responses shall be
supported as specified in subclause 4.8 of 3GPP TS 29.501 \[7\].
Protocol errors and application errors specified in table 5.2.7.2-1 of
3GPP TS 29.500 \[6\] shall be supported for an HTTP method if the
corresponding HTTP status codes are specified as mandatory for that HTTP
method in table 5.2.7.1-1 of 3GPP TS 29.500 \[6\].

In addition, the requirements in the following subclauses shall apply.

### 5.7.2 Protocol Errors

In this Release of the specification, there are no additional protocol
errors applicable for the Nbsf\_Management Service API.

### 5.7.3 Application Errors

The application errors defined for the Nbsf\_Management Service API are
listed in table 5.7.3-1.

Table 5.7.3-1: Application errors

+------------------------+------------------+------------------------+
| Application Error      | HTTP status code | Description            |
+------------------------+------------------+------------------------+
| MULTIPLE               | 400 Bad Request  | Indicates that the BSF |
| \_BINDING\_INFO\_FOUND |                  | found more than one    |
|                        |                  | binding resource so it |
|                        |                  | cannot provide the     |
|                        |                  | selected PCF to the    |
|                        |                  | consumer. (NOTE 1)     |
+------------------------+------------------+------------------------+
| EXISTING               | 403 Forbidden    | Indicates that the BSF |
| \_BINDING\_INFO\_FOUND |                  | found an existing PCF  |
|                        |                  | binding information    |
|                        |                  | for the indicated      |
|                        |                  | combination. (NOTE 2)  |
+------------------------+------------------+------------------------+
| NOTE 1: This           |                  |                        |
| application error is   |                  |                        |
| included in the        |                  |                        |
| responses to the GET   |                  |                        |
| request.               |                  |                        |
|                        |                  |                        |
| NOTE 2: This           |                  |                        |
| application error is   |                  |                        |
| included in the        |                  |                        |
| responses to the POST  |                  |                        |
| request.               |                  |                        |
|                        |                  |                        |
| NOTE 3: Including a    |                  |                        |
| \"ProblemDetails\"     |                  |                        |
| data structure with    |                  |                        |
| the \"cause\"          |                  |                        |
| attribute in the HTTP  |                  |                        |
| response is optional   |                  |                        |
| unless explicitly      |                  |                        |
| mandated in the        |                  |                        |
| service operation      |                  |                        |
| subclauses.            |                  |                        |
+------------------------+------------------+------------------------+

5.8 Feature negotiation
-----------------------

The optional features in table 5.8-1 are defined for the
Nbsf\_Management Service API. They shall be negotiated using the
extensibility mechanism defined in subclause 6.6 of
3GPP TS 29.500 \[6\].

Table 5.8-1: Supported Features

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Feature number                                                                                                                                                                                                                                                                                                                                                                           Feature Name      Description

  1                                                                                                                                                                                                                                                                                                                                                                                        MultiUeAddr       This feature indicates the support of multiple UE addresses (IPv6 prefixes or MAC addresses) in the same binding information.

  2                                                                                                                                                                                                                                                                                                                                                                                        BindingUpdate     The consumer can use this feature for updating the session binding information.

  3                                                                                                                                                                                                                                                                                                                                                                                        SamePcf           This feature indicates the support of same PCF selection for the indicated combination.\
                                                                                                                                                                                                                                                                                                                                                                                                             (NOTE)

  4                                                                                                                                                                                                                                                                                                                                                                                        ES3XX             Extended Support for 3xx redirections. This feature indicates the support of redirection for any service operation, according to Stateless NF procedures as specified in subclauses 6.5.3.2 and 6.5.3.3 of 3GPP TS 29.500 \[6\] and according to HTTP redirection principles for indirect communication, as specified in subclause 6.10.9 of 3GPP TS 29.500 \[6\].

  5                                                                                                                                                                                                                                                                                                                                                                                        ExtendedSamePcf   This feature extends the support of same PCF selection for the indicated combination. This feature requires the support of SamePcf feature.\
                                                                                                                                                                                                                                                                                                                                                                                                             (NOTE)

  NOTE: The \"SamePcf\" feature is applicable to the deployments where the N5 and/or Rx interface apply and the UE address is available in the PCF at the creation of the SM Policy Association. The \"ExtendedSamePcf\" feature is applicable for any PCF deployment, regardless of UE address availability at the creation of SM Policy association and/or N5 and/or Rx applicability.                     
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

5.9 Security
------------

As indicated in 3GPP TS 33.501 \[15\] and 3GPP TS 29.500 \[6\], the
access to the Nbsf\_Management API may be authorized by means of the
OAuth2 protocol (see IETF RFC 6749 \[16\]), based on local
configuration, using the \"Client Credentials\" authorization grant,
where the NRF (see 3GPP TS 29.510 \[12\]) plays the role of the
authorization server.

If OAuth2 is used, a n NF Service Consumer, prior to consuming services
offered by the Nbsf\_Management API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 \[12\], subclause 5.4.2.2.

NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used
for discovering the Nbsf\_Management service.

The Nbsf\_Management API defines a single scope \"nbsf-management\" for
the entire service, and it does not define any additional scopes at
resource or operation level.

######## Annex A (normative): OpenAPI specification

A.1 General
===========

The present Annex contains an OpenAPI \[11\] specification of HTTP
messages and content bodies used by the Nbsf\_Management API.

This Annex shall take precedence when being discrepant to other parts of
the specification with respect to the encoding of information elements
and methods within the API.

NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not
expressed in the OpenAPI definitions but defined in other parts of the
specification also apply.

Informative copies of the OpenAPI specification file contained in this
3GPP Technical Specification are available on a Git-based repository,
that uses the GitLab software version control system (see clause 5B of
the 3GPP TR 21.900 \[18\] and subclause 5.3.1 of the
3GPP TS 29.501 \[7\] for further information).

A.2 Nbsf\_Management API
========================

openapi: 3.0.0

info:

version: 1.1.2

title: Nbsf\_Management

description: \|

Binding Support Management Service API.

© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

externalDocs:

description: 3GPP TS 29.521 V16.8.0; 5G System; Binding Support
Management Service.

url: \'http://www.3gpp.org/ftp/Specs/archive/29\_series/29.521/\'

servers:

\- url: \'{apiRoot}/nbsf-management/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in subclause 4.4 of 3GPP TS 29.501.

security:

\- {}

\- oAuth2ClientCredentials:

\- nbsf-management

paths:

/pcfBindings:

post:

summary: Create a new Individual PCF binding information

operationId: CreatePCFBinding

tags:

\- PCF Bindings (Collection)

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/PcfBinding\'

responses:

\'201\':

description: The creation of an individual PCF session binding.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/PcfBinding\'

headers:

Location:

description: \'Contains the URI of the newly created resource, according
to the structure: {apiRoot}/nbsf-management/v1/pcfBindings/{bindingId}\'

required: true

schema:

type: string

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/401\'

\'403\':

description: The existing PCF binding information stored in the BSF for
the indicated combination is returned.

content:

application/problem+json:

schema:

\$ref: \'\#/components/schemas/ExtProblemDetails\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

get:

summary: Read PCF Bindings information

operationId: GetPCFBindings

tags:

\- PCF Bindings (Collection)

parameters:

\- name: ipv4Addr

in: query

description: The IPv4 Address of the served UE.

required: false

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv4Addr\'

\- name: ipv6Prefix

in: query

description: The IPv6 Address of the served UE. The NF service consumer
shall append \'/128\' to the IPv6 address in the attribute value. E.g.
\'2001:db8:85a3::8a2e:370:7334/128\'.

required: false

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv6Prefix\'

\- name: macAddr48

in: query

description: The MAC Address of the served UE.

required: false

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/MacAddr48\'

\- name: dnn

in: query

description: DNN.

required: false

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Dnn\'

\- name: supi

in: query

description: Subscription Permanent Identifier.

required: false

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Supi\'

\- name: gpsi

in: query

description: Generic Public Subscription Identifier

required: false

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Gpsi\'

\- name: snssai

in: query

description: The identification of slice.

required: false

content:

application/json:

schema:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Snssai\'

\- name: ipDomain

in: query

description: The IPv4 address domain identifier.

required: false

schema:

type: string

\- name: supp-feat

in: query

description: To filter irrelevant responses related to unsupported
features

schema:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

responses:

\'200\':

description: The individual PCF session binding session binding
information resource matching the query parameter(s) is returned.

content:

application/json:

schema:

\$ref: \'\#/components/schemas/PcfBinding\'

\'204\':

description: There is no PCF session binding information matching the
query parameter(s).

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/406\'

\'414\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/414\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

/pcfBindings/{bindingId}:

delete:

summary: Delete an existing Individual PCF Binding information

operationId: DeleteIndPCFBinding

tags:

\- Individual PCF Binding (Document)

parameters:

\- name: bindingId

in: path

description: Represents the individual PCF Session Binding.

required: true

schema:

type: string

responses:

\'204\':

description: No Content. The Individual PCF session binding information
resource is deleted.

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

patch:

summary: Update an existing Individual PCF Binding information

operationId: UpdateIndPCFBinding

tags:

\- Individual PCF Binding (Document)

parameters:

\- name: bindingId

in: path

description: Represents the individual PCF Session Binding.

required: true

schema:

type: string

requestBody:

description: Parameters to update the existing session binding

required: true

content:

application/merge-patch+json:

schema:

\$ref: \'\#/components/schemas/PcfBindingPatch\'

responses:

\'200\':

description: OK (Successful update of the session binding)

content:

application/json:

schema:

\$ref: \'\#/components/schemas/PcfBinding\'

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'401\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/401\'

\'403\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/403\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'411\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

components:

securitySchemes:

oAuth2ClientCredentials:

type: oauth2

flows:

clientCredentials:

tokenUrl: \'{nrfApiRoot}/oauth2/token\'

scopes:

nbsf-management: Access to the Nbsf\_Management API

schemas:

PcfBinding:

type: object

properties:

supi:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Supi\'

gpsi:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Gpsi\'

ipv4Addr:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv4Addr\'

ipv6Prefix:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv6Prefix\'

addIpv6Prefixes:

type: array

items:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv6Prefix\'

minItems: 1

description: The additional IPv6 Address Prefixes of the served UE.

ipDomain:

type: string

macAddr48:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/MacAddr48\'

addMacAddrs:

type: array

items:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/MacAddr48\'

minItems: 1

description: The additional MAC Addresses of the served UE.

dnn:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Dnn\'

pcfFqdn:

\$ref: \'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/Fqdn\'

pcfIpEndPoints:

type: array

items:

\$ref:
\'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/IpEndPoint\'

minItems: 1

description: IP end points of the PCF hosting the
Npcf\_PolicyAuthorization service.

pcfDiamHost:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/DiameterIdentity\'

pcfDiamRealm:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/DiameterIdentity\'

pcfSmFqdn:

\$ref: \'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/Fqdn\'

pcfSmIpEndPoints:

type: array

items:

\$ref:
\'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/IpEndPoint\'

minItems: 1

description: IP end points of the PCF hosting the Npcf\_SMPolicyControl
service.

snssai:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Snssai\'

suppFeat:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

pcfId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/NfInstanceId\'

pcfSetId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/NfSetId\'

recoveryTime:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/DateTime\'

paraCom:

\$ref: \'\#/components/schemas/ParameterCombination\'

bindLevel:

\$ref: \'\#/components/schemas/BindingLevel\'

ipv4FrameRouteList:

type: array

items:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv4AddrMask\'

minItems: 1

ipv6FrameRouteList:

type: array

items:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv6Prefix\'

minItems: 1

required:

\- dnn

\- snssai

PcfBindingPatch:

type: object

properties:

ipv4Addr:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv4AddrRm\'

ipDomain:

type: string

nullable: true

ipv6Prefix:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv6PrefixRm\'

addIpv6Prefixes:

type: array

items:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Ipv6Prefix\'

minItems: 1

description: The additional IPv6 Address Prefixes of the served UE.

nullable: true

macAddr48:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/MacAddr48Rm\'

addMacAddrs:

type: array

items:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/MacAddr48\'

minItems: 1

description: The additional MAC Addresses of the served UE.

nullable: true

pcfId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/NfInstanceId\'

pcfFqdn:

\$ref: \'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/Fqdn\'

pcfIpEndPoints:

type: array

items:

\$ref:
\'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/IpEndPoint\'

minItems: 1

description: IP end points of the PCF hosting the
Npcf\_PolicyAuthorization service.

pcfDiamHost:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/DiameterIdentity\'

pcfDiamRealm:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/DiameterIdentity\'

ParameterCombination:

type: object

properties:

supi:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Supi\'

dnn:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Dnn\'

snssai:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Snssai\'

ExtProblemDetails:

allOf:

\- \$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/ProblemDetails\'

\- \$ref: \'\#/components/schemas/BindingResp\'

BindingResp:

type: object

properties:

pcfSmFqdn:

\$ref: \'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/Fqdn\'

pcfSmIpEndPoints:

type: array

items:

\$ref:
\'TS29510\_Nnrf\_NFManagement.yaml\#/components/schemas/IpEndPoint\'

minItems: 1

description: IP end points of the PCF hosting the Npcf\_SMPolicyControl
service.

BindingLevel:

anyOf:

\- type: string

enum:

\- NF\_SET

\- NF\_INSTANCE

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- \"NF\_SET\"

\- \"NF\_INSTANCE\"

######## Annex B (informative): Deployment option to support BSF and DRA coexistence due to network migration

As described in Annex B of 3GPP TS 23.503 \[4\], the Diameter Routing
Agent (DRA) and the BSF can coexist in an operator\'s network during the
network migration to 5GC. The DRA is described in 3GPP TS 29.213 \[14\]
and can be a service consumer of the Nbsf\_Management service.

During the Rx session establishment, the DRA can discover the selected
PCF for the related subscriber by using the Nbsf\_Management\_Discovery
service operation to obtain the related PCF address if it has no stored
binding information derived from an ongoing Gx session for that
subscriber.

NOTE 1: For a UE in the EPC there is a Gx session and the DRA stores the
binding information. For a UE in the 5GC the Npcf\_SmPolicyControl
service is used and the BSF stores the binding information.

NOTE 2: If the DRA has no stored binding information derived from an
ongoing Gx session for a subscriber, the DRA needs to request new
binding information for each Rx session establishment because the
information in the BSF could have changed compared to any previous
binding information the DRA requested.

######## Annex C (informative): Change history

  -------------------- ------------ -------------- -------- --------- --------- ------------------------------------------------------------------------------------------------------------------------ ---------
  **Change history**                                                                                                                                                                                     
  **Date**             **TSG \#**   **TSG Doc.**   **CR**   **Rev**   **Cat**   **Subject/Comment**                                                                                                      **New**
  2018-01                                                                       TS skeleton of Binding Support Management Service specification                                                          0.0.0
  2018-01                                                                       Inclusion of documents agreed in CT3\#94 C3-180301, C3-180191, C3-180192 and C3-180193.                                  0.1.0
  2018-03                                                                       Inclusion of documents agreed in CT3\#95 C3-181350 and C3-181352.                                                        0.2.0
  2018-04                                                                       Inclusion of documents agreed in CT3\#96 C3-182424 and C3-182510.                                                        0.3.0
  2018-05                                                                       Inclusion of documents agreed in CT3\#97 C3-183287, C3-183500, C3-183881, C3-183502 and C3-183733.                       0.4.0
  2018-06              CT\#80       CP-181031                                   TS sent to plenary for approval.                                                                                         1.0.0
  2018-06              CT\#80       CP-181031                                   TS approved by plenary                                                                                                   15.0.0
  2018-09              CT\#81       CP-182015      0001     2         F         PCF id correction for BSF                                                                                                15.1.0
  2018-09              CT\#81       CP-182015      0002               F         Reference update: OpenAPI specification                                                                                  15.1.0
  2018-09              CT\#81       CP-182015      0004     2         F         Clarification on mandatory HTTP error status codes                                                                       15.1.0
  2018-09              CT\#81       CP-182015      0005     6         B         OpenAPI for TS 29.521                                                                                                    15.1.0
  2018-09              CT\#81       CP-182015      0006     1         F         Description of Structured data types                                                                                     15.1.0
  2018-09              CT\#81       CP-182015      0007     1         B         Support of IPv4 overlapping                                                                                              15.1.0
  2018-09              CT\#81       CP-182015      0008               F         Correction of the service name                                                                                           15.1.0
  2018-09              CT\#81       CP-182015      0009     1         F         Resource structure presentation                                                                                          15.1.0
  2018-12              CT\#82       CP-183205      0011               F         Default value for apiRoot Default value for apiRoot                                                                      15.2.0
  2018-12              CT\#82       CP-183205      0012               F         Correction to DELETE Method for Nbsf\_Management Service API                                                             15.2.0
  2018-12              CT\#82       CP-183205      0013               F         Correction to Typos in URI Paths                                                                                         15.2.0
  2018-12              CT\#82       CP-183205      0015               F         API version                                                                                                              15.2.0
  2018-12              CT\#82       CP-183205      0016               F         ExternalDocs OpenAPI field                                                                                               15.2.0
  2018-12              CT\#82       CP-183205      0017               F         Location header field in OpenAPI                                                                                         15.2.0
  2018-12              CT\#82       CP-183205      0018     1         F         Security                                                                                                                 15.2.0
  2018-12              CT\#82       CP-183205      0019     1         F         supported content types                                                                                                  15.2.0
  2018-12              CT\#82       CP-183205      0020     2         F         HTTP Error responses                                                                                                     15.2.0
  2018-12              CT\#82       CP-183205      0021     2         F         DRA as service consumer                                                                                                  15.2.0
  2018-12              CT\#82       CP-183205      0023               F         Change presence in BSF binding                                                                                           15.2.0
  2018-12              CT\#82       CP-183205      0024     1         F         Presence conditions in yaml file                                                                                         15.2.0
  2018-12              CT\#82       CP-183205      0025     1         F         Missing 201 response body for POST to /pcfBindings                                                                       15.2.0
  2019-03              CT\#83       CP-190113      0028     2         F         Handling of unsupported query parameter combinations                                                                     15.3.0
  2019-03              CT\#83       CP-190113      0029     1         F         Correction of description of the Nbsf\_Management\_Register Service and Nbsf\_Management\_Discovery service operations   15.3.0
  2019-03              CT\#83       CP-190113      0030               F         BSF resource cleanup                                                                                                     15.3.0
  2019-03              CT\#83       CP-190113      0031     1         F         Formatting of structured data types in query parameters                                                                  15.3.0
  2019-03              CT\#83       CP-190113      0032     1         F         Correction on the handling of UE addresses                                                                               15.3.0
  2019-03              CT\#83       CP-190110      0033     2         F         Miscellaneous BSF correction                                                                                             15.3.0
  2019-03              CT\#83       CP-190140      0034     1         F         OpenAPI Version number update                                                                                            15.3.0
  2019-06              CT\#84       CP-191079      0036               F         Remove NSI ID                                                                                                            15.4.0
  2019-06              CT\#84       CP-191106      0037     5         B         Support multiple UE addresses in one binding                                                                             16.0.0
  2019-06              CT\#84       CP-191106      0038     5         B         Binding update support                                                                                                   16.0.0
  2019-06              CT\#84       CP-191079      0039     1         F         Precedence of OpenAPI file                                                                                               15.4.0
  2019-06              CT\#84       CP-191079      0040     1         F         Copyright Note in YAML files                                                                                             15.4.0
  2019-06              CT\#84       CP-191089      0041     1         F         Correction of Location header in Nbsf\_Management OpenAPI                                                                16.0.0
  2019-06              CT\#84       CP-191101      0043     2         F         OpenAPI version number update                                                                                            16.0.0
  2019-09              CT\#85       CP-192199      0045     2         F         Session binding for IPv6 addresses                                                                                       16.1.0
  2019-09              CT\#85       CP-192156      0046               F         Support multiple UE addresses in BSF                                                                                     16.1.0
  2019-09              CT\#85       CP-192152      0047     1         B         IP address handling in wireline access                                                                                   16.1.0
  2019-09              CT\#85       CP-192234      0050     2         F         OpenAPI version update TS 29.521 Rel-16                                                                                  16.1.0
  2019-12              CT\#86       CP-193197      0053     3         B         Same PCF selection for the same UE ID, S-NSSAI and DNN combination                                                       16.2.0
  2019-12              CT\#86       CP-193197      0054               F         Update of API version and TS version in OpenAPI file                                                                     16.2.0
  2020-03              CT\#87e      CP-200207      0055     1         B         Update of the same PCF selection                                                                                         16.3.0
  2020-03              CT\#87e      CP-200207      0056               B         DNN Clarification                                                                                                        16.3.0
  2020-03              CT\#87e      CP-200208      0058     2         B         Adding NWDAF as Nbsf\_management service consumer                                                                        16.3.0
  2020-03              CT\#87e      CP-200207      0059               F         Resolve editor note for PATCH                                                                                            16.3.0
  2020-03              CT\#87e      CP-200207      0060     1         F         Miscellaneous errors                                                                                                     16.3.0
  2020-03              CT\#87e      CP-200253      0061     1         F         Support of the Update service operation                                                                                  16.3.0
  2020-03              CT\#87e      CP-200214      0062               F         OpenAPI: usage of the \"tags\" keyword                                                                                   16.3.0
  2020-03              CT\#87e      CP-200260      0063     1         B         PCF set Id/PCF Id in Nbsf\_Management\_Register/Update                                                                   16.3.0
  2020-03              CT\#87e      CP-200215      0064               F         Correction on PcfBinding                                                                                                 16.3.0
  2020-03              CT\#87e      CP-200216      0065               F         Update of OpenAPI version and TS version in externalDocs field                                                           16.3.0
  2020-06              CT\#88e      CP-201233      0066     1         F         Corrections on SamePcf                                                                                                   16.4.0
  2020-06              CT\#88e      CP-201246      0067     1         F         Corrections related to UEaddr                                                                                            16.4.0
  2020-06              CT\#88e      CP-201259      0068     3         B         Update of PCF address(es)                                                                                                16.4.0
  2020-06              CT\#88e      CP-201275      0069     2         B         Clarification of the DS-TT MAC address                                                                                   16.4.0
  2020-06              CT\#88e      CP-201228      0070     3         B         Support of full Frame Routing feature                                                                                    16.4.0
  2020-06              CT\#88e      CP-201212      0071     1         F         Binding information retrieval: PCF set ID and PCF instance ID                                                            16.4.0
  2020-06              CT\#88e      CP-201296      0073     2         F         Correct use of application error                                                                                         16.4.0
  2020-06              CT\#88e      CP-201228      0074     1         F         Correct IPv6 prefix                                                                                                      16.4.0
  2020-06              CT\#88e      CP-201244      0076     1         F         Storage of YAML files in ETSI Forge                                                                                      16.4.0
  2020-06              CT\#88e      CP-201246      0080     1         F         Adding DRA as Nbsf\_management service consumer                                                                          16.4.0
  2020-06              CT\#88e      CP-201258      0081     1         B         Update of PCF address(es)                                                                                                16.4.0
  2020-06              CT\#88e      CP-201256      0083     1         F         URI of the Nbsf\_Management service                                                                                      16.4.0
  2020-06              CT\#88e      CP-201222      0085     1         A         Correction to the condition of BSF service operations                                                                    16.4.0
  2020-06              CT\#88e      CP-201244      0086     1         F         Optionality of ProblemDetails                                                                                            16.4.0
  2020-06              CT\#88e      CP-201233      0087     1         F         suppFeat attribute within PcfBinding data                                                                                16.4.0
  2020-06              CT\#88e      CP-201244      0088     1         F         Supported headers, Resource Data type and yaml mapping                                                                   16.4.0
  2020-06              CT\#88e      CP-201255      0090               F         Update of OpenAPI version and TS version in externalDocs field                                                           16.4.0
  2020-09              CT\#89e      CP-202077      0092               F         Data type corrections                                                                                                    16.5.0
  2020-12              CT\#90e      CP-203139      0093     1         F         Essential Corrections and alignments                                                                                     16.6.0
  2021-03              CT\#91e      CP-210191      0094     1         F         Support of stateless NFs                                                                                                 16.7.0
  2021-03              CT\#91e      CP-210202      0095               F         Correction to Framed Routing feature                                                                                     16.7.0
  2021-03              CT\#91e      CP-210217      0096               F         Storage of YAML files in ETSI Forge                                                                                      16.7.0
  2021-03              CT\#91e      CP-210205      0098     1         F         Correction to SamePcf feature                                                                                            16.7.0
  2021-03              CT\#91e      CP-210239      0101               F         Update of OpenAPI version and TS version in externalDocs field                                                           16.7.0
  2021-06              CT\#92e      CP-211219      0104               F         Correction to Overview and Introduction                                                                                  16.8.0
  2021-06              CT\#92e      CP-211200      0106     1         F         Redirect responses with \"application/json\" media type                                                                  16.8.0
  2021-06              CT\#92e      CP-211219      0108     1         F         Correction to ExtendedSamePcf feature                                                                                    16.8.0
  2021-06              CT\#92e      CP-211264      0110               F         Update of OpenAPI version and TS version in externalDocs field                                                           16.8.0
  2021-12              CT\#94e      CP-213224      0131               F         Correction to PCF Session binding update procedure                                                                       16.9.0
  2022-03              CT\#95e      CP-220176      0141     1         F         Alignment of \"Application Errors\" clause with SBI TS template                                                          16.10.0
  -------------------- ------------ -------------- -------- --------- --------- ------------------------------------------------------------------------------------------------------------------------ ---------
