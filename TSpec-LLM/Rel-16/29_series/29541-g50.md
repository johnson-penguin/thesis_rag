+---------------------------------------------+-----------------------+
| 3GPP TS 29.541 V16.5.0 (2021-09)            |                       |
+=============================================+=======================+
| Technical Specification                     |                       |
+---------------------------------------------+-----------------------+
| 3rd Generation Partnership Project;         |                       |
|                                             |                       |
| Technical Specification Group Core Network  |                       |
| and Terminals;                              |                       |
|                                             |                       |
| 5G System; Network Exposure (NE) function   |                       |
| services for Non-IP Data Delivery (NIDD);   |                       |
|                                             |                       |
| Stage 3                                     |                       |
|                                             |                       |
| (Release 16)                                |                       |
+---------------------------------------------+-----------------------+
|                                             |                       |
+---------------------------------------------+-----------------------+
| ![](media/image1.jpeg)                      | ![](media/image2.png) |
+---------------------------------------------+-----------------------+
|                                             |                       |
+---------------------------------------------+-----------------------+
| The present document has been developed     |                       |
| within the 3rd Generation Partnership       |                       |
| Project (3GPP ^TM^) and may be further      |                       |
| elaborated for the purposes of 3GPP.\       |                       |
| The present document has not been subject   |                       |
| to any approval process by the 3GPP         |                       |
| Organizational Partners and shall not be    |                       |
| implemented.\                               |                       |
| This Specification is provided for future   |                       |
| development work within 3GPP only. The      |                       |
| Organizational Partners accept no liability |                       |
| for any use of this Specification.\         |                       |
| Specifications and Reports for              |                       |
| implementation of the 3GPP ^TM^ system      |                       |
| should be obtained via the 3GPP             |                       |
| Organizational Partners\' Publications      |                       |
| Offices.                                    |                       |
+---------------------------------------------+-----------------------+

+----------------------------------------------------------------------+
|                                                                      |
+======================================================================+
| > ***3GPP***                                                         |
| >                                                                    |
| > Postal address                                                     |
| >                                                                    |
| > 3GPP support office address                                        |
| >                                                                    |
| > 650 Route des Lucioles - Sophia Antipolis                          |
| >                                                                    |
| > Valbonne - FRANCE                                                  |
| >                                                                    |
| > Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16                     |
| >                                                                    |
| > Internet                                                           |
| >                                                                    |
| > http://www.3gpp.org                                                |
+----------------------------------------------------------------------+
| ***Copyright Notification***                                         |
|                                                                      |
| No part may be reproduced except as authorized by written            |
| permission.\                                                         |
| The copyright and the foregoing restriction extend to reproduction   |
| in all media.                                                        |
|                                                                      |
| © 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, |
| TTA, TTC).                                                           |
|                                                                      |
| All rights reserved.                                                 |
|                                                                      |
| UMTS™ is a Trade Mark of ETSI registered for the benefit of its      |
| members                                                              |
|                                                                      |
| 3GPP™ is a Trade Mark of ETSI registered for the benefit of its      |
| Members and of the 3GPP Organizational Partners\                     |
| LTE™ is a Trade Mark of ETSI registered for the benefit of its       |
| Members and of the 3GPP Organizational Partners                      |
|                                                                      |
| GSM® and the GSM logo are registered and owned by the GSM            |
| Association                                                          |
+----------------------------------------------------------------------+

 Contents {#contents .TT}
========

Foreword 5

1 Scope 6

2 References 6

3 Definitions, symbols and abbreviations 7

3.1 Terms 7

3.2 Symbols 7

3.3 Abbreviations 7

4 Overview 7

4.1 Introduction 7

5 Services offered by the NEF for NIDD 8

5.1 Introduction 8

5.2 Nnef\_SMContext Service 9

5.2.1 Service Description 9

5.2.2 Service Operations 9

5.2.2.1 Introduction 9

5.2.2.2 Create Service Operation 9

5.2.2.2.1 General 9

5.2.2.3 Delete Service Operation 10

5.2.2.3.1 General 10

5.2.2.4 Status Notify Service Operation 11

5.2.2.4.1 General 11

5.2.2.4.2 Notify of Individual SM Context Release
(Nnef\_SMContext\_DeleteNotify) 12

5.2.2.5 Update Service Operation 12

5.2.2.5.1 General 12

5.2.2.6 Deliver Service Operation 12

5.2.2.6.1 General 12

6 API Definitions 14

6.1 Nnef\_SMContext Service API 14

6.1.1 Introduction 14

6.1.2 Usage of HTTP 14

6.1.2.1 General 14

6.1.2.2 HTTP standard headers 14

6.1.2.2.1 General 14

6.1.2.2.2 Content type 14

6.1.2.3 HTTP custom headers 14

6.1.3 Resources 15

6.1.3.1 Overview 15

6.1.3.2 Resource: SM Contexts Collection 15

6.1.3.2.1 Description 15

6.1.3.2.2 Resource Definition 16

6.1.3.2.3 Resource Standard Methods 16

6.1.3.2.3.1 POST 16

6.1.3.2.4 Resource Custom Operations 17

6.1.3.3 Resource: Individual SM Context 17

6.1.3.3.1 Description 17

6.1.3.3.2 Resource Definition 17

6.1.3.3.3 Resource Standard Methods 17

6.1.3.3.4 Resource Custom Operations 17

6.1.3.3.4.1 Overview 17

6.1.3.3.4.2 Operation: release 18

6.1.3.3.4.2.1 Description 18

6.1.3.3.4.2.2 Operation Definition 18

6.1.3.3.4.3 Operation: update 19

6.1.3.3.4.3.1 Description 19

6.1.3.3.4.3.2 Operation Definition 19

6.1.3.3.4.4 Operation: deliver 20

6.1.3.3.4.4.1 Description 20

6.1.3.3.4.4.2 Operation Definition 20

6.1.5 Notifications 21

6.1.5.1 General 21

6.1.5.2 Status Notification 22

6.1.5.2.1 Description 22

6.1.5.2.2 Target URI 22

6.1.5.2.3 Standard Methods 22

6.1.5.2.3.1 POST 22

6.1.6 Data Model 23

6.1.6.1 General 23

6.1.6.2 Structured data types 24

6.1.6.2.1 Introduction 24

6.1.6.2.2 Type: SmContextCreateData 25

6.1.6.2.3 Type: SmContextCreatedData 26

6.1.6.2.4 Type: SmContextReleaseData 26

6.1.6.2.5 Type: SmContextReleasedData 27

6.1.6.2.6 Type: SmContextStatusNotification 27

6.1.6.2.7 Type: NiddInformation 27

6.1.6.2.8 Type: SmContextConfiguration 28

6.1.6.2.9 Type: SmallDataRateControl 28

6.1.6.2.10 Type: SmContextUpdateData 29

6.1.6.2.11 Type: DeliverReqData 29

6.1.6.3 Simple data types and enumerations 29

6.1.6.3.1 Introduction 29

6.1.6.3.2 Simple data types 29

6.1.6.3.3 Enumeration: SmContextStatus 29

6.1.6.3.4 Enumeration: SmallDataRateControlTimeUnit 30

6.1.6.3.5 Enumeration: ReleaseCause 30

6.1.7 Error Handling 30

6.1.7.1 General 30

6.1.7.2 Protocol Errors 30

6.1.7.3 Application Errors 30

6.1.8 Feature negotiation 31

6.1.9 Security 31

6.1.10 HTTP redirection 31

Annex A (normative): OpenAPI specification 32

A.1 General 32

A.2 Nnef\_SMContext API 32

Annex B (informative): Change history 39

 Foreword
========

This Technical Specification has been produced by the 3rd Generation
Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

In the present document, modal verbs have the following meanings:

**shall** indicates a mandatory requirement to do something

**shall not** indicates an interdiction (prohibition) to do something

The constructions \"shall\" and \"shall not\" are confined to the
context of normative provisions, and do not appear in Technical Reports.

The constructions \"must\" and \"must not\" are not used as substitutes
for \"shall\" and \"shall not\". Their use is avoided insofar as
possible, and they are not used in a normative context except in a
direct citation from an external, referenced, non-3GPP document, or so
as to maintain continuity of style when extending or modifying the
provisions of such a referenced document.

**should** indicates a recommendation to do something

**should not** indicates a recommendation not to do something

**may** indicates permission to do something

**need not** indicates permission not to do something

The construction \"may not\" is ambiguous and is not used in normative
elements. The unambiguous constructions \"might not\" or \"shall not\"
are used instead, depending upon the meaning intended.

**can** indicates that something is possible

**cannot** indicates that something is impossible

The constructions \"can\" and \"cannot\" are not substitutes for \"may\"
and \"need not\".

**will** indicates that something is certain or expected to happen as a
result of action taken by an agency the behaviour of which is outside
the scope of the present document

**will not** indicates that something is certain or expected not to
happen as a result of action taken by an agency the behaviour of which
is outside the scope of the present document

**might** indicates a likelihood that something will happen as a result
of action taken by some agency the behaviour of which is outside the
scope of the present document

**might not** indicates a likelihood that something will not happen as a
result of action taken by some agency the behaviour of which is outside
the scope of the present document

In addition:

**is** (or any other verb in the indicative mood) indicates a statement
of fact

**is not** (or any other negative verb in the indicative mood) indicates
a statement of fact

The constructions \"is\" and \"is not\" do not indicate requirements.

1 Scope
=======

The present document specifies the stage 3 protocol and data model for
the Nnef Service Based South-Bound Interfaces for NIDD. It provides
stage 3 protocol definitions and message flows, and specifies the API
for each service offered by the NEF.

The 5G System stage 2 architecture and procedures are specified in
3GPP TS 23.501 \[2\] and 3GPP TS 23.502 \[3\].

The Technical Realization of the Service Based Architecture and the
Principles and Guidelines for Services Definition are specified in
3GPP TS 29.500 \[4\] and 3GPP TS 29.501 \[5\].

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] 3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".

\[2\] 3GPP TS 23.501: \"System Architecture for the 5G System; Stage
2\".

\[3\] 3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".

\[4\] 3GPP TS 29.500: \"5G System; Technical Realization of Service
Based Architecture; Stage 3\".

\[5\] 3GPP TS 29.501: \"5G System; Principles and Guidelines for
Services Definition; Stage 3\".

\[6\] OpenAPI: \"OpenAPI 3.0.0 Specification\",
<https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md>.

\[7\] 3GPP TR 21.900: \"Technical Specification Group working methods\".

\[8\] 3GPP TS 33.501: \"Security architecture and procedures for 5G
system\".

\[9\] IETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".

\[10\] 3GPP TS 29.510: \"5G System; Network Function Repository
Services; Stage 3\".

\[11\] IETF RFC 7540: \"Hypertext Transfer Protocol Version 2
(HTTP/2)\".

> \[12\] IETF RFC 8259: \"The JavaScript Object Notation (JSON) Data
> Interchange Format\".

\[13\] IETF RFC 7807: \"Problem Details for HTTP APIs\".

\[14\] 3GPP TS 29.571: \"5G System; Common Data Types for Service Based
Interfaces; Stage 3\".

\[15\] 3GPP TS 29.522: \"5G System; Network Exposure Function Northbound
APIs; Stage 3\".

\[16\] 3GPP TS 29.503: \"5G System; Unified Data Management Services;
Stage 3\".

\[17\] 3GPP TS 29.542: \"5G System; Session management services for
Non-IP Data Delivery (NIDD); Stage 3\".

3 Definitions, symbols and abbreviations
========================================

3.1 Terms
---------

Void.

3.2 Symbols
-----------

Void.

3.3 Abbreviations
-----------------

For the purposes of the present document, the abbreviations given in
3GPP TR 21.905 \[1\] and the following apply. An abbreviation defined in
the present document takes precedence over the definition of the same
abbreviation, if any, in 3GPP TR 21.905 \[1\].

DNN Data Network Name

MO Mobile Originated

NEF Network Exposure Function

NIDD Non-IP Data Delivery

SM Session Management

SMF Session Management Function

NSSAI Network Slice Selection Assistance Information

RDS Reliable Data Service

SUPI Subscription Permanent Identifier

4 Overview
==========

4.1 Introduction
----------------

Within the 5GC, the NEF offers NIDD services to the NF (e.g. SMF) via
the Nnef service based southbound interface (see 3GPP TS 23.501 \[2\]
and 3GPP TS 23.502 \[3\]).

Figure 4.1-1 provides the reference model (in service based interface
representation and in reference point representation), with focus on the
NEF and the scope of the present specification.

Figure 4.1-1: Reference model -- NEF

The functionalities supported by the NEF are listed in clause 6.2.5 of
3GPP TS 23.501 \[2\].

5 Services offered by the NEF for NIDD
======================================

5.1 Introduction
----------------

The table 5.1-1 shows the NEF Services and Service Operations for NIDD:

Table 5.1-1 List of NEF Services for NIDD

  Service Name                                                                                                                                                     Service Operations   Operation Semantics   Example Consumer(s)   Mapped Service Operation
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------- -------------------- --------------------- --------------------- --------------------------------------
  Nnef\_SMContext                                                                                                                                                  Create               Request/Response      SMF                   Nnef\_SMContext\_Create
                                                                                                                                                                   Delete               Request/Response      SMF                   Nnef\_SMContext\_Delete
                                                                                                                                                                   Status Notify        Subscribe/Notify      SMF                   Nnef\_SMContext\_DeleteNotify (NOTE)
                                                                                                                                                                   Update               Request/Response      SMF                   
                                                                                                                                                                   Delivery             Request/Response      SMF                   Nnef\_SMContext\_Delivery
  NOTE: The Status Notify service operation models the Nnef\_SMContext\_DeleteNotify service operation specified in 3GPP TS 23.502 \[3\] (see clause 5.2.2.4.2).                                                                    

Table 5.1-2 summarizes the corresponding APIs defined for this
specification.

Table 5.1-2: API Descriptions

  **Service Name**   **Clause**   **Description**          **OpenAPI Specification File**   **apiName**      **Annex**
  ------------------ ------------ ------------------------ -------------------------------- ---------------- -----------
  Nnef\_SMContext    6.1          Nnef SMContext Service   TS29541\_Nnef\_SMContext.yaml    nnef-smcontext   A.2

5.2 Nnef\_SMContext Service
---------------------------

### 5.2.1 Service Description

The service allows a NF to manage the SM Contexts on NEF for NIDD. A NF
as service consumer (e.g. SMF) can create, update or release SM Contexts
for NIDD on NEF. A created SM Context for NIDD may also be released by
NEF.

### 5.2.2 Service Operations

#### 5.2.2.1 Introduction

The Nnef\_SMContext service supports following service operations:

\- Create

\- Delete

\- StatusNotify

\- Update

\- Deliver

#### 5.2.2.2 Create Service Operation

##### 5.2.2.2.1 General

The Create service operation is used during the following procedure:

\- SMF-NEF Connection Establishment procedure (see 3GPP TS 23.502 \[3\],
clause 4.25.2)

The Create service operation is invoked by a NF Service Consumer (e.g. a
SMF) towards the NEF, when the SMF received a PDU Session establishment
request from the UE with PDU Session type of \"Unstructured\", and the
subscription information corresponding to the UE requested DNN includes
the \"NEF Identity for NIDD\". There shall be only one individual SM
context per PDU session.

The NF Service Consumer (e.g. the SMF) shall create the SM Context for
NIDD on NEF by sending the HTTP POST request towards the SM Contexts
Collection resource as shown in Figure 5.2.2.2.1-1.

Figure 5.2.2.2.1-1: Create Service Operation

1\. The NF Service Consumer shall send a POST request to the resource
representing the SM Contexts Collection resource of the NEF with a
\"SmContextCreateData\" object in request body, including:

\- SUPI of the UE;

\- PDU session ID;

\- S-NSSAI associated with the PDU session;

\- DNN of the PDU session;

\- NIDD information, such as GPSI, AF ID, etc.;

\- NEF ID, indicating the provisioned identity for NIDD service;

\- URI of the Individual PDU session resource for downlink data delivery
(see clause 6.1.3.2 of 3GPP TS 29.542 \[17\]);

\- Notification URI to receive the SM Context notifications;

\- optionally the indication of UE capability to support Reliable Data
Service (RDS);

\- optionally the configuration parameters, e.g. serving PLMN rate
control, small data rate control, etc.;

\- optionally small data rate control status, if small data rate control
is previously enabled and to be resumed

2a. On success, \"201 Created\" shall be returned and the \"Location\"
header shall be present and shall contain the URI of the created
Individual SM Context resource.

The payload body of the POST response shall contain a
\"SmContextCreatedData\" object, including:

\- SUPI of the UE;

\- PDU session ID;

\- S-NSSAI associated with the PDU session;

\- DNN of the PDU session;

\- NEF ID, indicating the provisioned identity for NIDD service;

\- optionally the indication of NEF capability to support Reliable Data
Service (RDS);

\- optionally the indication of NEF capability to support Extended
Buffering;

\- optionally Maximum Packet Size in bytes for NIDD data packet.

2b. On failure or redirection, one of the HTTP status code listed in
Table 6.1.3.2.3.1-3 shall be returned, the response body should contain
a \"ProblemDetails\" object with \"cause\" attribute set to one of the
application errors listed in Table 6.1.3.2.3.1-3.

#### 5.2.2.3 Delete Service Operation

##### 5.2.2.3.1 General

The Delete service operation is used during the following procedure:

\- SMF Initiated SMF-NEF Connection Release procedure (see
3GPP TS 23.502 \[3\], clause 4.25.7)

The Delete service operation is invoked by a NF Service Consumer (e.g. a
SMF) towards the NEF, when the PDU Session Release is initiated and a SM
context for NIDD has been previously created on NEF for the PDU session.

The NF Service Consumer (e.g. the SMF) shall delete the SM Context for
NIDD on NEF by invoking the \"release\" custom operation on the
Individual SM Context resource as shown in Figure 5.2.2.3.1-1.

Figure 5.2.2.3.1-1: Delete Service Operation

1\. The NF Service Consumer shall send a HTTP POST request towards the
URI of \"release\" custom operation on the Individual SM Context
resource received from the \"Location\" header during a successful
Create service operation invocation (See clause 5.2.2.2). The request
body shall contain a \"SmContextReleaseData\" object.

2a. On success, \"204 No Content\" shall be returned if no information
is to be returned to the NF service consumer; otherwise \"200 OK\" shall
be returned with a \"SmContextReleasedData\" object in response body
including necessary information to the NF service consumer, e.g.:

\- Small Data Rate Control status, if Small Data Rate Control is
enforced;

\- APN Rate Status, if APN Rate Control is enforced

2b. On failure or redirection, one of the HTTP status code listed in
Table 6.1.3.3.4.2-2 shall be returned, the response body should contain
a \"ProblemDetails\" object with \"cause\" attribute set to one of the
application errors listed in Table 6.1.3.3.4.2.2-2.

#### 5.2.2.4 Status Notify Service Operation

##### 5.2.2.4.1 General

The Status Notify service operation is used during the following
procedure:

\- NEF Initiated SMF-NEF Connection Release procedure (see
3GPP TS 23.502 \[3\], clause 4.25.8)

The Status Notify service operation is invoked by the NEF to inform a NF
Service Consumer (e.g. a SMF), when the status of the Individual SM
Context has changed.

The NEF shall inform the status change of the Individual SM Context
resource by sending the HTTP POST method towards the Notification URI as
shown in Figure 5.2.2.4.1-1.

Figure 5.2.2.4.1-1: Status Notify Service Operation

1\. The NEF shall send a POST request towards the Notification URI
received in the Create service operation request (See clause 5.2.2.2).
The request body shall contain a \"SmContextStatusNotification\" object
indicating the changed status of the Individual SM Context resource. The
\"smContextId\" attribute shall contain the URI of the SM Context
resource that triggers the notification.

2a. On success, \"204 No content\" shall be returned without response
body.

2b. On failure or redirection, one of the HTTP status code listed in
Table 6.1.5.2.3.1-2 shall be returned, the response body should contain
a \"ProblemDetails\" object.

##### 5.2.2.4.2 Notify of Individual SM Context Release (Nnef\_SMContext\_DeleteNotify)

During NEF initiated SMF-NEF connection release procedure (see
3GPP TS 23.502 \[3\], clause 4.25.8), the NEF shall send Status
Notification to inform the NF service consumer that the Individual SM
Context is released.

The requirements in clause 5.2.2.4.1 shall be applied, with following
additions:

1\. Same as step 1 of Figure 5.2.2.4.1-1, the NEF shall set the value of
\"status\" attribute in the request body to \"RELEASED\".

\- If Small Data Rate Control is enforced, the response body should
include the Small Data Rate Control status.

\- If APN Rate Control is enforced, the response body should include the
APN Rate Status.

#### 5.2.2.5 Update Service Operation

##### 5.2.2.5.1 General

The Update service operation is invoked by a NF Service Consumer, e.g. a
SMF, towards the NEF, when the SMF detects that some of the
configurations of the PDU session has changed and the related SM Context
for NIDD needs to be updated accordingly.

The NF Service Consumer (e.g. the SMF) shall update the SM Context for
NIDD on NEF by invoking the \"update\" custom operation of the
Individual SM Context resource as shown in Figure 5.2.2.5.1-1.

Figure 5.2.2.5.1-1: Update Service Operation

1\. The NF Service Consumer shall send a POST request to the URI of
\"update\" custom operation on an Individual SM Context resource, with a
\"SmContextUpdateData\" object in request body containing the attributes
to be updated, e.g.:

\- URI of the resource to receive downlink data delivery for NIDD;

\- Notification URI to receive the SM Context notifications;

\- modified configuration parameters, e.g. serving PLMN rate control,
small data rate control, etc.

2a. On success, \"204 No Content\" shall be returned.

2b. On failure or redirection, one of the HTTP status code listed in
Table 6.1.3.3.4.3.2-2 shall be returned, the response body should
contain a ProblemDetails object with \"cause\" attribute set to one of
the application errors listed in Table 6.1.3.3.4.3.2-2.

#### 5.2.2.6 Deliver Service Operation

##### 5.2.2.6.1 General

The Deliver service operation is invoked by a NF Service Consumer, e.g.
a SMF, to transport Mobile Originated data packet via NEF.

The NF Service Consumer (e.g. the SMF) shall deliver Mobile Originate
data via NEF by invoking the \"deliver\" custom operation of the
Individual SM Context resource as shown in Figure 5.2.2.6.1-1.

Figure 5.2.2.5.6-1: Deliver Service Operation

1\. The NF Service Consumer shall send a POST request to the URI of
\"deliver\" custom operation on an Individual SM Context resource, with
the request body containing:

\- the MO data as binary body part with content type set as
\"application/octet-stream\"; and

\- a \"DeliverReqData\" object as another body part with \"data\"
attribute refer to the MO data binary part.

2a. On success, \"204 No Content\" shall be returned.

2b. On failure or redirection, one of the HTTP status code listed in
Table 6.1.3.3.4.4.2-2 shall be returned. The response body should
contain a ProblemDetails object with \"cause\" attribute set to one of
the application errors listed in Table 6.1.3.3.4.4.2-2.

 6 API Definitions
=================

6.1 Nnef\_SMContext Service API
-------------------------------

### 6.1.1 Introduction

The Nnef\_SMContext service shall use the Nnef\_SMContext service API.

The request URI used in HTTP request from the NF service consumer
towards the NF service producer shall have the structure defined in
clause 4.4.1 of 3GPP TS 29.501 \[5\], i.e.:

**{apiRoot}/\<apiName\>/\<apiVersion\>/\<apiSpecificResourceUriPart\>**

with the following components:

\- The {apiRoot} shall be set as described in 3GPP TS 29.501 \[5\].

\- The \<apiName\> shall be \"nnef-smcontext\".

\- The \<apiVersion\> shall be \"v1\".

\- The \<apiSpecificResourceUriPart\> shall be set as described in
clause 6.1.3.

### 6.1.2 Usage of HTTP

#### 6.1.2.1 General

HTTP/2, IETF RFC 7540 \[11\], shall be used as specified in clause 5 of
3GPP TS 29.500 \[4\].

HTTP/2 shall be transported as specified in clause 5.3 of
3GPP TS 29.500 \[4\].

The OpenAPI \[6\] specification of HTTP messages and content bodies for
the Nnef\_SMContext API is contained in Annex A.

#### 6.1.2.2 HTTP standard headers

##### 6.1.2.2.1 General

See clause 5.2.2 of 3GPP TS 29.500 \[4\] for the usage of HTTP standard
headers.

##### 6.1.2.2.2 Content type

JSON, IETF RFC 8259 \[12\], shall be used as content type of the HTTP
bodies specified in the present specification as specified in clause 5.4
of 3GPP TS 29.500 \[4\]. The use of the JSON format shall be signalled
by the content type \"application/json\".

\"Problem Details\" JSON object shall be used to indicate additional
details of the error in a HTTP response body and shall be signalled by
the content type \"application/problem+json\", as defined in
IETF RFC 7807 \[13\].

#### 6.1.2.3 HTTP custom headers

The mandatory HTTP custom header fields specified in clause 5.2.3.2 of
3GPP TS 29.500 \[4\] shall be applicable. In this release of the
specification, no specific custom headers are defined for the
Nnef\_SMContext service.

### 6.1.3 Resources

#### 6.1.3.1 Overview

Figure 6.1.3.1-1 describes the resource URI structure of the
Nnef\_SMContext API.

Figure 6.1.3.1-1: Resource URI structure of the Nnef\_SMContext API

Table 6.1.3.1-1 provides an overview of the resources and applicable
HTTP methods.

Table 6.1.3.1-1: Resources and methods overview

  Resource name            Resource URI                                                                HTTP method or custom operation   Description
  ------------------------ --------------------------------------------------------------------------- --------------------------------- --------------------------------------------
  SM Contexts Collection   {apiRoot}/nnef-smcontext/\<apiVersion\>/sm-contexts                         POST                              Creates an Individual SM Context resource.
  Individual SM Context    {apiRoot}/nnef-smcontext/\<apiVersion\>/sm-contexts/{smContextId}/release   release (POST)                    Deletes an Individual SM Context resource.
                           {apiRoot}/nnef-smcontext/\<apiVersion\>/sm-contexts/{smContextId}/update    update (POST)                     Updates an Individual SM Context resource.
                           {apiRoot}/nnef-smcontext/\<apiVersion\>/sm-contexts/{smContextId}/deliver   deliver (POST)                    Delivers Mobile Originated data packet.

#### 6.1.3.2 Resource: SM Contexts Collection

##### 6.1.3.2.1 Description

This resource represents the collection of the Individual SM Context
resources created in the NEF.

This resource is modelled with the Collection resource archetype (see
clause C.2 of 3GPP TS 29.501 \[5\]).

##### 6.1.3.2.2 Resource Definition

Resource URI: **{apiRoot}/nnef-smcontext/\<apiVersion\>/sm-contexts**

This resource shall support the resource URI variables defined in
table 6.1.3.2.2-1.

Table 6.1.3.2.2-1: Resource URI variables for this resource

  Name         Definition
  ------------ ------------------
  apiRoot      See clause 6.1.1
  apiVersion   See clause 6.1.1

##### 6.1.3.2.3 Resource Standard Methods

###### 6.1.3.2.3.1 POST

This method creates an Individual SM Context resource in the SM Context
Collection.

This method shall support the URI query parameters specified in table
6.1.3.2.3.1-1.

Table 6.1.3.2.3.1-1: URI query parameters supported by the POST method
on this resource

  ------ ----------- --- ------------- ------------- ---------------
  Name   Data type   P   Cardinality   Description   Applicability
  n/a                                                
  ------ ----------- --- ------------- ------------- ---------------

This method shall support the request data structures specified in table
6.1.3.2.3.1-2 and the response data structures and response codes
specified in table 6.1.3.2.3.1-3.

Table 6.1.3.2.3.1-2: Data structures supported by the POST Request Body
on this resource

  --------------------- --- ------------- ------------------------------------------------------------
  Data type             P   Cardinality   Description
  SmContextCreateData   M   1             Representation of the Individual SM context to be created.
  --------------------- --- ------------- ------------------------------------------------------------

Table 6.1.3.2.3.1-3: Data structures supported by the \<method 1\>
Response Body on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| SmConte       | M | 1           | 201 Created   | Successful    |
| xtCreatedData |   |             |               | creation of   |
|               |   |             |               | an Individual |
|               |   |             |               | SM context.   |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| P             | O | 1           | 403 Forbidden | The \"cause\" |
| roblemDetails |   |             |               | attribute may |
|               |   |             |               | be used to    |
|               |   |             |               | indicate the  |
|               |   |             |               | following     |
|               |   |             |               | application   |
|               |   |             |               | errors:       |
|               |   |             |               |               |
|               |   |             |               | \-            |
|               |   |             |               | USER\_UNKNOWN |
|               |   |             |               |               |
|               |   |             |               | \-            |
|               |   |             |               | NIDD\_CON     |
|               |   |             |               | FIGURATION\_N |
|               |   |             |               | OT\_AVAILABLE |
|               |   |             |               |               |
|               |   |             |               | See table     |
|               |   |             |               | 6.1.7.3-1 for |
|               |   |             |               | the           |
|               |   |             |               | description   |
|               |   |             |               | of these      |
|               |   |             |               | errors.       |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| manadatory    |   |             |               |               |
| HTTP error    |   |             |               |               |
| status code   |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in Table      |   |             |               |               |
| 5.2.7.1-1 of  |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[4\] |   |             |               |               |
| other than    |   |             |               |               |
| those         |   |             |               |               |
| specified in  |   |             |               |               |
| the table     |   |             |               |               |
| above also    |   |             |               |               |
| apply, with   |   |             |               |               |
| response body |   |             |               |               |
| containing an |   |             |               |               |
| object of     |   |             |               |               |
| P             |   |             |               |               |
| roblemDetails |   |             |               |               |
| data type     |   |             |               |               |
| (see clause   |   |             |               |               |
| 5.2.7 of      |   |             |               |               |
| 3GPP TS 2     |   |             |               |               |
| 9.500 \[4\]). |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 6.1.3.2.3.1-4: Headers supported by the 307 Response Code on this
resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

Table 6.1.3.2.3.1-5: Headers supported by the 308 Response Code on this
resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

##### 6.1.3.2.4 Resource Custom Operations

None.

#### 6.1.3.3 Resource: Individual SM Context

##### 6.1.3.3.1 Description

This resource represents an Individual SM Context resource in the NEF.

This resource is modelled with the Document resource archetype (see
clause C.2 of 3GPP TS 29.501 \[5\]).

##### 6.1.3.3.2 Resource Definition

Resource URI:
**{apiRoot}/nnef-smcontext/\<apiVersion\>/sm-contexts/{smContextId}**

This resource shall support the resource URI variables defined in
table 6.1.3.3.2-1.

Table 6.1.3.3.2-1: Resource URI variables for this resource

  Name          Definition
  ------------- --------------------------------------------------------------------------------
  apiRoot       See clause 6.1.1
  apiVersion    See clause 6.1.1
  smContextId   SM context identifier assigned by the NEF during the Create service operation.

##### 6.1.3.3.3 Resource Standard Methods

There is no standard HTTP method supported by this resource.

##### 6.1.3.3.4 Resource Custom Operations

###### 6.1.3.3.4.1 Overview

This resource supports custom operation(s) as specified in table
6.1.3.3.4.1-1.

Table 6.1.3.3.4.1-1: Custom operations

  Custom operaration URI   Mapped HTTP method   Description
  ------------------------ -------------------- ---------------------------
  {resourceUri}/release    POST                 Delete service operation.
  {resourceUri}/update     POST                 Update service operation.
  {resourceUri}/deliver    POST                 Deliver service operation

###### 6.1.3.3.4.2 Operation: release

####### 6.1.3.3.4.2.1 Description

This custom operation releases an Individual SM Context resource
previously created in the NEF.

####### 6.1.3.3.4.2.2 Operation Definition

This operation shall support the request data structures specified in
table 6.1.3.2.4.2.2-1 and the response data structure and response codes
specified in table 6.1.3.2.4.2.2-2.

Table 6.1.3.3.4.2.2-1: Data structures supported by the POST Request
Body on this resource

  ---------------------- --- ------------- -------------------------------------------------------------------------
  Data type              P   Cardinality   Description
  SmContextReleaseData   M   1             Representation of the information to release the Individual SM context.
  ---------------------- --- ------------- -------------------------------------------------------------------------

Table 6.1.3.3.4.2.2-2: Data structures supported by the POST Response
Body on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+---------------+---+-------------+---------------+---------------+
| SmContex      | M | 1           | 200 OK        | Successful    |
| tReleasedData |   |             |               | release of an |
|               |   |             |               | Individual SM |
|               |   |             |               | context with  |
|               |   |             |               | information   |
|               |   |             |               | sent to the   |
|               |   |             |               | NF service    |
|               |   |             |               | consumer.     |
+---------------+---+-------------+---------------+---------------+
| n/a           |   |             | 204 No        | Successful    |
|               |   |             | Content       | release of an |
|               |   |             |               | Individual SM |
|               |   |             |               | context       |
|               |   |             |               | without       |
|               |   |             |               | information   |
|               |   |             |               | sent to the   |
|               |   |             |               | NF service    |
|               |   |             |               | consumer.     |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| P             | O | 1           | 404 Not Found | The \"cause\" |
| roblemDetails |   |             |               | attribute may |
|               |   |             |               | be used to    |
|               |   |             |               | indicate the  |
|               |   |             |               | following     |
|               |   |             |               | application   |
|               |   |             |               | errors:       |
|               |   |             |               |               |
|               |   |             |               | \-            |
|               |   |             |               | CONTEX        |
|               |   |             |               | T\_NOT\_FOUND |
|               |   |             |               |               |
|               |   |             |               | See table     |
|               |   |             |               | 6.1.7.3-1 for |
|               |   |             |               | the           |
|               |   |             |               | description   |
|               |   |             |               | of these      |
|               |   |             |               | errors.       |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| manadatory    |   |             |               |               |
| HTTP error    |   |             |               |               |
| status code   |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in Table      |   |             |               |               |
| 5.2.7.1-1 of  |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[4\] |   |             |               |               |
| other than    |   |             |               |               |
| those         |   |             |               |               |
| specified in  |   |             |               |               |
| the table     |   |             |               |               |
| above also    |   |             |               |               |
| apply, with   |   |             |               |               |
| response body |   |             |               |               |
| containing an |   |             |               |               |
| object of     |   |             |               |               |
| P             |   |             |               |               |
| roblemDetails |   |             |               |               |
| data type     |   |             |               |               |
| (see clause   |   |             |               |               |
| 5.2.7 of      |   |             |               |               |
| 3GPP TS 2     |   |             |               |               |
| 9.500 \[4\]). |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 6.1.3.3.4.2.2-3: Headers supported by the 307 Response Code on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

Table 6.1.3.3.4.2.2-4: Headers supported by the 308 Response Code on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

###### 6.1.3.3.4.3 Operation: update

####### 6.1.3.3.4.3.1 Description

This custom operation updates an individual SM Context resource.

####### 6.1.3.3.4.3.2 Operation Definition

This operation shall support the request data structures specified in
table 6.1.3.3.4.3.2-1 and the response data structure and response codes
specified in table 6.1.3.3.4.3.2-2.

Table 6.1.3.3.4.3.2-1: Data structures supported by the POST Request
Body on this resource

  Data type             P   Cardinality   Description
  --------------------- --- ------------- ----------------------------------------------------------------------
  SmContextUpdateData   M   1             Representation of the updates to apply to the Individual SM context.

Table 6.1.3.3.4.3.2-2: Data structures supported by the POST Response
Body on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+===============+===+=============+===============+===============+
| n/a           |   |             | 204 No        | Successful    |
|               |   |             | Content       | update of the |
|               |   |             |               | Individual SM |
|               |   |             |               | context, when |
|               |   |             |               | the NEF does  |
|               |   |             |               | not need to   |
|               |   |             |               | return        |
|               |   |             |               | information   |
|               |   |             |               | in the        |
|               |   |             |               | response.     |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| P             | O | 1           | 404 Not Found | The \"cause\" |
| roblemDetails |   |             |               | attribute may |
|               |   |             |               | be used to    |
|               |   |             |               | indicate the  |
|               |   |             |               | following     |
|               |   |             |               | application   |
|               |   |             |               | errors:       |
|               |   |             |               |               |
|               |   |             |               | \-            |
|               |   |             |               | CONTEX        |
|               |   |             |               | T\_NOT\_FOUND |
|               |   |             |               |               |
|               |   |             |               | See table     |
|               |   |             |               | 6.1.7.3-1 for |
|               |   |             |               | the           |
|               |   |             |               | description   |
|               |   |             |               | of these      |
|               |   |             |               | errors.       |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| manadatory    |   |             |               |               |
| HTTP error    |   |             |               |               |
| status code   |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in Table      |   |             |               |               |
| 5.2.7.1-1 of  |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[4\] |   |             |               |               |
| other than    |   |             |               |               |
| those         |   |             |               |               |
| specified in  |   |             |               |               |
| the table     |   |             |               |               |
| above also    |   |             |               |               |
| apply, with   |   |             |               |               |
| response body |   |             |               |               |
| containing an |   |             |               |               |
| object of     |   |             |               |               |
| P             |   |             |               |               |
| roblemDetails |   |             |               |               |
| data type     |   |             |               |               |
| (see clause   |   |             |               |               |
| 5.2.7 of      |   |             |               |               |
| 3GPP TS 2     |   |             |               |               |
| 9.500 \[4\]). |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 6.1.3.3.4.3.2-3: Headers supported by the 307 Response Code on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

Table 6.1.3.3.4.3.2-4: Headers supported by the 308 Response Code on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

###### 6.1.3.3.4.4 Operation: deliver

####### 6.1.3.3.4.4.1 Description

This custom operation transports Mobile Originated data packet via NEF.

####### 6.1.3.3.4.4.2 Operation Definition

This operation shall support the request data structures specified in
table 6.1.3.3.4.4.2-1 and the response data structure and response codes
specified in table 6.1.3.3.4.4.2-2.

Table 6.1.3.3.4.4.2-1: Data structures supported by the POST Request
Body on this resource

  Data type        P   Cardinality   Description
  ---------------- --- ------------- -----------------------------------------------------------------------------------------------------
  DeliverReqData   M   1             The data for Deliver service request, including the Mobile Originated data to be delivered via NEF.

Table 6.1.3.3.4.4.2-2: Data structures supported by the POST Response
Body on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             |               |               |
|               |   |             | codes         |               |
+===============+===+=============+===============+===============+
| n/a           |   |             | 204 No        | Successful    |
|               |   |             | Content       | delivery of   |
|               |   |             |               | Mobile        |
|               |   |             |               | Originate     |
|               |   |             |               | data via NEF. |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The response  |
|               |   |             |               | shall include |
|               |   |             |               | a Location    |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | different     |
|               |   |             |               | URI, or the   |
|               |   |             |               | same URI if a |
|               |   |             |               | request is    |
|               |   |             |               | redirected to |
|               |   |             |               | the same      |
|               |   |             |               | target        |
|               |   |             |               | resource via  |
|               |   |             |               | a different   |
|               |   |             |               | SCP. In the   |
|               |   |             |               | former case,  |
|               |   |             |               | the URI shall |
|               |   |             |               | be an         |
|               |   |             |               | alternative   |
|               |   |             |               | URI of the    |
|               |   |             |               | resource      |
|               |   |             |               | located on an |
|               |   |             |               | alternative   |
|               |   |             |               | service       |
|               |   |             |               | instance      |
|               |   |             |               | within the    |
|               |   |             |               | same NEF or   |
|               |   |             |               | NEF (service) |
|               |   |             |               | set.          |
+---------------+---+-------------+---------------+---------------+
| P             | O | 1           | 404 Not Found | The \"cause\" |
| roblemDetails |   |             |               | attribute may |
|               |   |             |               | be used to    |
|               |   |             |               | indicate the  |
|               |   |             |               | following     |
|               |   |             |               | application   |
|               |   |             |               | errors:       |
|               |   |             |               |               |
|               |   |             |               | \-            |
|               |   |             |               | CONTEX        |
|               |   |             |               | T\_NOT\_FOUND |
|               |   |             |               |               |
|               |   |             |               | See table     |
|               |   |             |               | 6.1.7.3-1 for |
|               |   |             |               | the           |
|               |   |             |               | description   |
|               |   |             |               | of these      |
|               |   |             |               | errors.       |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| manadatory    |   |             |               |               |
| HTTP error    |   |             |               |               |
| status code   |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in Table      |   |             |               |               |
| 5.2.7.1-1 of  |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[4\] |   |             |               |               |
| other than    |   |             |               |               |
| those         |   |             |               |               |
| specified in  |   |             |               |               |
| the table     |   |             |               |               |
| above also    |   |             |               |               |
| apply, with   |   |             |               |               |
| response body |   |             |               |               |
| containing an |   |             |               |               |
| object of     |   |             |               |               |
| P             |   |             |               |               |
| roblemDetails |   |             |               |               |
| data type     |   |             |               |               |
| (see clause   |   |             |               |               |
| 5.2.7 of      |   |             |               |               |
| 3GPP TS 2     |   |             |               |               |
| 9.500 \[4\]). |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 6.1.3.3.4.4.2-3: Headers supported by the 307 Response Code on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

Table 6.1.3.3.4.4.2-4: Headers supported by the 308 Response Code on
this resource

+-----------------+-----------+---+-------------+-----------------+
| Name            | Data type | P | Cardinality | Description     |
+-----------------+-----------+---+-------------+-----------------+
| Location        | string    | M | 1           | An alternative  |
|                 |           |   |             | URI of the      |
|                 |           |   |             | resource        |
|                 |           |   |             | located on an   |
|                 |           |   |             | alternative     |
|                 |           |   |             | service         |
|                 |           |   |             | instance within |
|                 |           |   |             | the same NEF or |
|                 |           |   |             | NEF (service)   |
|                 |           |   |             | set.            |
|                 |           |   |             |                 |
|                 |           |   |             | Or the same     |
|                 |           |   |             | URI, if a       |
|                 |           |   |             | request is      |
|                 |           |   |             | redirected to   |
|                 |           |   |             | the same target |
|                 |           |   |             | resource via a  |
|                 |           |   |             | different SCP.  |
+-----------------+-----------+---+-------------+-----------------+
| 3gpp-S          | string    | O | 0..1        | Identifier of   |
| bi-Target-Nf-Id |           |   |             | the target NF   |
|                 |           |   |             | (service)       |
|                 |           |   |             | instance ID     |
|                 |           |   |             | towards which   |
|                 |           |   |             | the request is  |
|                 |           |   |             | redirected      |
+-----------------+-----------+---+-------------+-----------------+

### 6.1.5 Notifications

#### 6.1.5.1 General

This clause specifies the notifications provided by the Nnef\_SMContext
service.

Notifications shall comply to clause 6.2 of 3GPP TS 29.500 \[4\] and
clause 4.6.2.3 of 3GPP TS 29.501 \[5\].

#### 6.1.5.2 Status Notification

##### 6.1.5.2.1 Description

If the NF Service Consumer (e.g. the SMF) has provided the Notification
URI for getting notified about change of SM Context status, the NEF
shall notify the NF Service Consumer when the SM Context status is
updated.

##### 6.1.5.2.2 Target URI

The Notification URI **\"{notificationUri}\"** shall be used with the
resource URI variables defined in table 6.1.5.2.2-1.

Table 6.1.5.2.2-1: Resource URI variables for this resource

  Name              Definition
  ----------------- ---------------------------------------------------
  notificationUri   String formatted as URI with the Notification Uri

##### 6.1.5.2.3 Standard Methods

###### 6.1.5.2.3.1 POST

This method shall support the request data structures specified in
table 6.1.5.2.3.1-1 and the response data structures and response codes
specified in table 6.1.5.2.3.1-2.

Table 6.1.5.2.3.1-1: Data structures supported by the POST Request Body
on this resource

  Data type                     P   Cardinality   Description
  ----------------------------- --- ------------- -------------------------------------------------------
  SmContextStatusNotification   M   1             Representation of the SM Context status notification.

Table 6.1.5.2.3.1-2: Data structures supported by the POST Response Body
on this resource

+---------------+---+-------------+---------------+---------------+
| Data type     | P | Cardinality | Response      | Description   |
|               |   |             | codes         |               |
+===============+===+=============+===============+===============+
| n/a           |   |             | 204 No        | Successful    |
|               |   |             | Content       | notification  |
|               |   |             |               | of the SM     |
|               |   |             |               | context       |
|               |   |             |               | status change |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 307 Temporary | Temporary     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The NF        |
|               |   |             |               | service       |
|               |   |             |               | consumer      |
|               |   |             |               | shall         |
|               |   |             |               | generate a    |
|               |   |             |               | Location      |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | URI pointing  |
|               |   |             |               | to the        |
|               |   |             |               | endpoint of   |
|               |   |             |               | another NF    |
|               |   |             |               | service       |
|               |   |             |               | consumer to   |
|               |   |             |               | which the     |
|               |   |             |               | notification  |
|               |   |             |               | should be     |
|               |   |             |               | sent.         |
|               |   |             |               |               |
|               |   |             |               | If an SCP     |
|               |   |             |               | redirects the |
|               |   |             |               | message to    |
|               |   |             |               | another SCP   |
|               |   |             |               | then the      |
|               |   |             |               | location      |
|               |   |             |               | header field  |
|               |   |             |               | shall contain |
|               |   |             |               | the same URI  |
|               |   |             |               | or a          |
|               |   |             |               | different URI |
|               |   |             |               | pointing to   |
|               |   |             |               | the endpoint  |
|               |   |             |               | of the NF     |
|               |   |             |               | service       |
|               |   |             |               | consumer to   |
|               |   |             |               | which the     |
|               |   |             |               | notification  |
|               |   |             |               | should be     |
|               |   |             |               | sent.         |
+---------------+---+-------------+---------------+---------------+
| Red           | O | 0..1        | 308 Permanent | Permanent     |
| irectResponse |   |             | Redirect      | redirection.  |
|               |   |             |               | The NF        |
|               |   |             |               | service       |
|               |   |             |               | consumer      |
|               |   |             |               | shall         |
|               |   |             |               | generate a    |
|               |   |             |               | Location      |
|               |   |             |               | header field  |
|               |   |             |               | containing a  |
|               |   |             |               | URI pointing  |
|               |   |             |               | to the        |
|               |   |             |               | endpoint of   |
|               |   |             |               | another NF    |
|               |   |             |               | service       |
|               |   |             |               | consumer to   |
|               |   |             |               | which the     |
|               |   |             |               | notification  |
|               |   |             |               | should be     |
|               |   |             |               | sent.         |
|               |   |             |               |               |
|               |   |             |               | If an SCP     |
|               |   |             |               | redirects the |
|               |   |             |               | message to    |
|               |   |             |               | another SCP   |
|               |   |             |               | then the      |
|               |   |             |               | location      |
|               |   |             |               | header field  |
|               |   |             |               | shall contain |
|               |   |             |               | the same URI  |
|               |   |             |               | or a          |
|               |   |             |               | different URI |
|               |   |             |               | pointing to   |
|               |   |             |               | the endpoint  |
|               |   |             |               | of the NF     |
|               |   |             |               | service       |
|               |   |             |               | consumer to   |
|               |   |             |               | which the     |
|               |   |             |               | notification  |
|               |   |             |               | should be     |
|               |   |             |               | sent.         |
+---------------+---+-------------+---------------+---------------+
| NOTE: The     |   |             |               |               |
| mandatory     |   |             |               |               |
| HTTP error    |   |             |               |               |
| status codes  |   |             |               |               |
| for the POST  |   |             |               |               |
| method listed |   |             |               |               |
| in Table      |   |             |               |               |
| 5.2.7.1-1 of  |   |             |               |               |
| 3GPP TS       |   |             |               |               |
|  29.500 \[4\] |   |             |               |               |
| also apply,   |   |             |               |               |
| with response |   |             |               |               |
| body          |   |             |               |               |
| containing an |   |             |               |               |
| object of     |   |             |               |               |
| P             |   |             |               |               |
| roblemDetails |   |             |               |               |
| data type     |   |             |               |               |
| (see clause   |   |             |               |               |
| 5.2.7 of      |   |             |               |               |
| 3GPP TS 2     |   |             |               |               |
| 9.500 \[4\]). |   |             |               |               |
+---------------+---+-------------+---------------+---------------+

Table 6.1.5.2.3.1-3: Headers supported by the 307 Response Code on this
resource

  ----------------------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------
  Name                    Data type   P   Cardinality   Description
  Location                string      M   1             A URI pointing to the endpoint of the NF service consumer to which the notification should be sent
  3gpp-Sbi-Target-Nf-Id   string      O   0..1          Identifier of the target NF (service) instance ID towards which the notification is redirected
  ----------------------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------

Table 6.1.5.2.3.1-4: Headers supported by the 308 Response Code on this
resource

  ----------------------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------
  Name                    Data type   P   Cardinality   Description
  Location                string      M   1             A URI pointing to the endpoint of the NF service consumer to which the notification should be sent
  3gpp-Sbi-Target-Nf-Id   string      O   0..1          Identifier of the target NF (service) instance ID towards which the notification is redirected
  ----------------------- ----------- --- ------------- ----------------------------------------------------------------------------------------------------

### 6.1.6 Data Model

#### 6.1.6.1 General

This clause specifies the application data model supported by the API.

Table 6.1.6.1-1 specifies the data types defined for the Nnef\_SMContext
service based interface protocol.

Table 6.1.6.1-1: Nnef\_SMContext specific Data Types

  Data type                      Clause defined   Description                                                                    Applicability
  ------------------------------ ---------------- ------------------------------------------------------------------------------ ---------------
  SmContextCreateData            6.1.6.2.2        Information within Create SM Context Request                                   
  SmContextCreatedData           6.1.6.2.3        Information within Create SM Context Response                                  
  SmContextReleaseData           6.1.6.2.4                                                                                       
  SmContextReleasedData          6.1.6.2.5                                                                                       
  SmContextStatusNotification    6.1.6.2.6        Information within Notify SM Context Status Request                            
  NiddInformation                6.1.6.2.7        NIDD information associated to the SM Context                                  
  SmContextConfiguration         6.1.6.2.8        NIDD related configurations that should be applied for the SM Context on NEF   
  SmallDataRateControl           6.1.6.2.9        Data rate control information                                                  
  SmContextUpdateData            6.1.6.2.10       Information within Update SM Context Request                                   
  DeliverReqData                 6.1.6.2.11       Information within Deliver Service Operation Request                           
  SmContextStatus                6.1.6.3.3        Enumeration of the status for an Individual SM Context                         
  SmallDataRateControlTimeUnit   6.1.6.3.4        Enumeration of the time units that are applied to data rate control            
  ReleaseCause                   6.1.6.3.5        Enumeration of causes for SM Context release                                   

Table 6.1.6.1-2 specifies data types re-used by the Nnef\_SMContext
service based interface protocol from other specifications, including a
reference to their respective specifications and when needed, a short
description of their use within the N~\<NF\>~ service based interface.

Table 6.1.6.1-2: Nnef\_SMContext re-used Data Types

  Data type             Reference               Comments                                                Applicability
  --------------------- ----------------------- ------------------------------------------------------- ---------------
  Uri                   3GPP TS 29.571 \[14\]   Uniform Resource Identifier                             
  Supi                  3GPP TS 29.571 \[14\]   Subscription Permanent Identifier                       
  Gpsi                  3GPP TS 29.571 \[14\]   General Public Subscription Identifier                  
  SupportedFeatures     3GPP TS 29.571 \[14\]   Supported features                                      
  PduSessionId          3GPP TS 29.571 \[14\]   PDU Session Identifier                                  
  Dnn                   3GPP TS 29.571 \[14\]   Data Network Name                                       
  Snssai                3GPP TS 29.571 \[14\]   Single Network Slice Selection Assistance Information   
  ProblemDetails        3GPP TS 29.571 \[14\]   Error description                                       
  SmallDataRateStatus   3GPP TS 29.571 \[14\]   Small Data Rate Control Status                          
  ExternalGroupId       3GPP TS 29.571 \[14\]   External Group Identifier                               
  RefToBinaryData       3GPP TS 29.571 \[14\]   Reference to binary data part                           
  RedirectResponse      3GPP TS 29.571 \[14\]   Redirect Response                                       

#### 6.1.6.2 Structured data types

##### 6.1.6.2.1 Introduction

This clause defines the structures to be used in resource
representations.

##### 6.1.6.2.2 Type: SmContextCreateData

Table 6.1.6.2.2-1: Definition of type SmContextCreateData

  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Attribute name      Data type                P   Cardinality   Description                                                                                                                                                                                     Applicability
  ------------------- ------------------------ --- ------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  supi                Supi                     M   1             This IE shall contain the subscriber permanent identify of the UE.                                                                                                                              

  pduSessionId        PduSessionId             M   1             This IE shall contain the PDU Session ID indicating the PDU session associated with the SM Context for NIDD to be created.                                                                      

  dnn                 Dnn                      M   1             This IE shall contain the requested DNN.                                                                                                                                                        

  snssai              Snssai                   M   1             This IE shall contain the requested S-NSSAI for the home PLMN.                                                                                                                                  

  nefId               string                   M   1             This IE shall contain the NEF ID of the target NEF (see clause 6.1.6.2.48 of 3GPP TS 29.510 \[10\]).                                                                                            

  dlNiddEndPoint      Uri                      M   1             This IE shall contain the URI of the Individual PDU session resource (see clause 6.1.3.2 of 3GPP TS 29.542 \[17\]) provided by the NF service consumer to handle downlink NIDD data delivery.   

  notificationUri     Uri                      M   1             This IE shall contain the URI to receive SM Context Status Notifications sent by the NEF.                                                                                                       

  niddInfo            NiddInformation          O   0..1          When present, this IE shall contain the information used for the SM Context.                                                                                                                    

  rdsSupport          boolean                  O   0..1          When present, this IE shall indicate the UE capability to support RDS.\                                                                                                                         
                                                                 \                                                                                                                                                                                               
                                                                 The value of this IE shall be set as following:\                                                                                                                                                
                                                                 - true: UE supports RDS\                                                                                                                                                                        
                                                                 - false (default): UE does not support RDS                                                                                                                                                      

  smContextConfig     SmContextConfiguration   O   0..1          When present, this IE shall contain the configuration for the NIDD.                                                                                                                             

  supportedFeatures   SupportedFeatures        C   0..1          This IE shall be present if at least one optional feature defined in clause 6.1.8 is supported.                                                                                                 
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

##### 6.1.6.2.3 Type: SmContextCreatedData

Table 6.1.6.2.3-1: Definition of type SmContextCreatedData

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+===========+===========+===+===========+===========+===========+
| supi      | Supi      | M | 1         | This IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | s         |           |
|           |           |   |           | ubscriber |           |
|           |           |   |           | permanent |           |
|           |           |   |           | identify  |           |
|           |           |   |           | of the    |           |
|           |           |   |           | UE.       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| pdu       | Pdu       | M | 1         | This IE   |           |
| SessionId | SessionId |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the PDU   |           |
|           |           |   |           | Session   |           |
|           |           |   |           | ID        |           |
|           |           |   |           | i         |           |
|           |           |   |           | ndicating |           |
|           |           |   |           | the PDU   |           |
|           |           |   |           | session   |           |
|           |           |   |           | a         |           |
|           |           |   |           | ssociated |           |
|           |           |   |           | with the  |           |
|           |           |   |           | SM        |           |
|           |           |   |           | Context   |           |
|           |           |   |           | for NIDD  |           |
|           |           |   |           | to be     |           |
|           |           |   |           | created.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| dnn       | Dnn       | M | 1         | This IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | requested |           |
|           |           |   |           | DNN.      |           |
+-----------+-----------+---+-----------+-----------+-----------+
| snssai    | Snssai    | M | 1         | This IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | requested |           |
|           |           |   |           | S-NSSAI   |           |
|           |           |   |           | for the   |           |
|           |           |   |           | home      |           |
|           |           |   |           | PLMN.     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| nefId     | string    | M | 1         | This IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the NEF   |           |
|           |           |   |           | ID of the |           |
|           |           |   |           | target    |           |
|           |           |   |           | NEF (see  |           |
|           |           |   |           | clause 6  |           |
|           |           |   |           | .1.6.2.48 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           | TS 29.510 |           |
|           |           |   |           |  \[10\]). |           |
+-----------+-----------+---+-----------+-----------+-----------+
| r         | boolean   | O | 0..1      | When      |           |
| dsSupport |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | the NEF   |           |
|           |           |   |           | c         |           |
|           |           |   |           | apability |           |
|           |           |   |           | to        |           |
|           |           |   |           | support   |           |
|           |           |   |           | RDS.      |           |
|           |           |   |           |           |           |
|           |           |   |           | The value |           |
|           |           |   |           | of this   |           |
|           |           |   |           | IE shall  |           |
|           |           |   |           | be set as |           |
|           |           |   |           | fo        |           |
|           |           |   |           | llowing:\ |           |
|           |           |   |           | - true:   |           |
|           |           |   |           | NEF       |           |
|           |           |   |           | supports  |           |
|           |           |   |           | RDS\      |           |
|           |           |   |           | - false   |           |
|           |           |   |           | (         |           |
|           |           |   |           | default): |           |
|           |           |   |           | NEF does  |           |
|           |           |   |           | not       |           |
|           |           |   |           | support   |           |
|           |           |   |           | RDS       |           |
+-----------+-----------+---+-----------+-----------+-----------+
| extB      | boolean   | O | 0..1      | When      |           |
| ufSupport |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | whether   |           |
|           |           |   |           | Extended  |           |
|           |           |   |           | Buffering |           |
|           |           |   |           | applies   |           |
|           |           |   |           | or not.   |           |
|           |           |   |           |           |           |
|           |           |   |           | The value |           |
|           |           |   |           | of this   |           |
|           |           |   |           | IE shall  |           |
|           |           |   |           | be set as |           |
|           |           |   |           | f         |           |
|           |           |   |           | ollowing: |           |
|           |           |   |           |           |           |
|           |           |   |           | \- true:  |           |
|           |           |   |           | Extended  |           |
|           |           |   |           | Buffering |           |
|           |           |   |           | applies   |           |
|           |           |   |           |           |           |
|           |           |   |           | \- false  |           |
|           |           |   |           | (         |           |
|           |           |   |           | default): |           |
|           |           |   |           | Extended  |           |
|           |           |   |           | Buffering |           |
|           |           |   |           | does not  |           |
|           |           |   |           | apply     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| supporte  | Supporte  | C | 0..1      | This IE   |           |
| dFeatures | dFeatures |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | if at     |           |
|           |           |   |           | least one |           |
|           |           |   |           | optional  |           |
|           |           |   |           | feature   |           |
|           |           |   |           | defined   |           |
|           |           |   |           | in clause |           |
|           |           |   |           | 6.1.8 is  |           |
|           |           |   |           | s         |           |
|           |           |   |           | upported. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| maxP      | integer   | O | 0..1      | Maximum   |           |
| acketSize |           |   |           | Packet    |           |
|           |           |   |           | Size in   |           |
|           |           |   |           | bytes for |           |
|           |           |   |           | NIDD data |           |
|           |           |   |           | packet.   |           |
|           |           |   |           |           |           |
|           |           |   |           | When      |           |
|           |           |   |           | received  |           |
|           |           |   |           | from the  |           |
|           |           |   |           | NEF, SMF  |           |
|           |           |   |           | shall     |           |
|           |           |   |           | inform    |           |
|           |           |   |           | the UE of |           |
|           |           |   |           | the       |           |
|           |           |   |           | Maximum   |           |
|           |           |   |           | Packet    |           |
|           |           |   |           | Size in   |           |
|           |           |   |           | the PCO   |           |
|           |           |   |           | in the    |           |
|           |           |   |           | PDU       |           |
|           |           |   |           | Session   |           |
|           |           |   |           | Esta      |           |
|           |           |   |           | blishment |           |
|           |           |   |           | Accept    |           |
|           |           |   |           | message.  |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 6.1.6.2.4 Type: SmContextReleaseData

Table 6.1.6.2.4-1: Definition of type SmContextReleaseData

  Attribute name   Data type      P   Cardinality   Description                           Applicability
  ---------------- -------------- --- ------------- ------------------------------------- ---------------
  cause            ReleaseCause   M   1             The cause to release the SM Context   

##### 6.1.6.2.5 Type: SmContextReleasedData

Table 6.1.6.2.5-1: Definition of type SmContextReleasedData

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+===========+===========+===+===========+===========+===========+
| s         | S         | C | 0..1      | This IE   |           |
| mallDataR | mallDataR |   |           | shall be  |           |
| ateStatus | ateStatus |   |           | present   |           |
|           |           |   |           | if the    |           |
|           |           |   |           | Small     |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Control   |           |
|           |           |   |           | is        |           |
|           |           |   |           | enabled   |           |
|           |           |   |           | for the   |           |
|           |           |   |           | SM        |           |
|           |           |   |           | Context.  |           |
|           |           |   |           |           |           |
|           |           |   |           | When      |           |
|           |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the Small |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Control   |           |
|           |           |   |           | Status,   |           |
|           |           |   |           | as        |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | clause    |           |
|           |           |   |           | 5.31.14.3 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GP       |           |
|           |           |   |           | P TS 23.5 |           |
|           |           |   |           | 01 \[2\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apnR      | ApnR      | C | 0..1      | This IE   |           |
| ateStatus | ateStatus |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | if the    |           |
|           |           |   |           | APN Rate  |           |
|           |           |   |           | Control   |           |
|           |           |   |           | is        |           |
|           |           |   |           | enabled   |           |
|           |           |   |           | for the   |           |
|           |           |   |           | SM        |           |
|           |           |   |           | Context.  |           |
|           |           |   |           |           |           |
|           |           |   |           | When      |           |
|           |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the APN   |           |
|           |           |   |           | Rate      |           |
|           |           |   |           | Status,   |           |
|           |           |   |           | as        |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | clause    |           |
|           |           |   |           |  5.4.4.40 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 29.57 |           |
|           |           |   |           | 1 \[14\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 6.1.6.2.6 Type: SmContextStatusNotification

Table 6.1.6.2.6-1: Definition of type SmContextStatusNotification

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+===========+===========+===+===========+===========+===========+
| status    | SmCont    | M | 1         | This IE   |           |
|           | extStatus |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | current   |           |
|           |           |   |           | status of |           |
|           |           |   |           | the SM    |           |
|           |           |   |           | Context   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| sm        | Uri       | M | 1         | This IE   |           |
| ContextId |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the URI   |           |
|           |           |   |           | of the SM |           |
|           |           |   |           | Context   |           |
|           |           |   |           | resource  |           |
|           |           |   |           | that      |           |
|           |           |   |           | triggers  |           |
|           |           |   |           | the       |           |
|           |           |   |           | noti      |           |
|           |           |   |           | fication. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| cause     | Rel       | M | 1         | The cause |           |
|           | easeCause |   |           | to        |           |
|           |           |   |           | release   |           |
|           |           |   |           | the SM    |           |
|           |           |   |           | Context   |           |
+-----------+-----------+---+-----------+-----------+-----------+
| s         | S         | C | 0..1      | This IE   |           |
| mallDataR | mallDataR |   |           | shall be  |           |
| ateStatus | ateStatus |   |           | present   |           |
|           |           |   |           | if the SM |           |
|           |           |   |           | Context   |           |
|           |           |   |           | is        |           |
|           |           |   |           | released  |           |
|           |           |   |           | and Small |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Control   |           |
|           |           |   |           | is        |           |
|           |           |   |           | enabled   |           |
|           |           |   |           | for the   |           |
|           |           |   |           | SM        |           |
|           |           |   |           | Context.  |           |
|           |           |   |           |           |           |
|           |           |   |           | When      |           |
|           |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the Small |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Control   |           |
|           |           |   |           | Status,   |           |
|           |           |   |           | as        |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | clause    |           |
|           |           |   |           | 5.31.14.3 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GP       |           |
|           |           |   |           | P TS 23.5 |           |
|           |           |   |           | 01 \[2\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| apnR      | ApnR      | C | 0..1      | This IE   |           |
| ateStatus | ateStatus |   |           | shall be  |           |
|           |           |   |           | present   |           |
|           |           |   |           | if the    |           |
|           |           |   |           | APN Rate  |           |
|           |           |   |           | Control   |           |
|           |           |   |           | is        |           |
|           |           |   |           | enabled   |           |
|           |           |   |           | for the   |           |
|           |           |   |           | SM        |           |
|           |           |   |           | Context.  |           |
|           |           |   |           |           |           |
|           |           |   |           | When      |           |
|           |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the APN   |           |
|           |           |   |           | Rate      |           |
|           |           |   |           | Status,   |           |
|           |           |   |           | as        |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | clause    |           |
|           |           |   |           |  5.4.4.40 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 29.57 |           |
|           |           |   |           | 1 \[14\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 6.1.6.2.7 Type: NiddInformation

Table 6.1.6.2.7-1: Definition of type NiddInformation

  Attribute name                                                        Data type         P   Cardinality   Description                                                                                                                                                                     Applicability
  --------------------------------------------------------------------- ----------------- --- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------
  extGroupId                                                            ExternalGroupId   O   0..1          When present, this IE shall contain the External group Id of the UE.                                                                                                            
  gpsi                                                                  Gpsi              O   0..1          When present, this IE shall contain the GPSI of the UE.                                                                                                                         
  afId                                                                  string            O   0..1          The string identifying the AF as the owner of associated NIDD Configuration, which is received from Nidd Information in UDM (See clause 6.1.6.2.35 of 3GPP TS 29.503 \[16\]).   
  NOTE: At least one of the attributes in the table shall be present.                                                                                                                                                                                                                       

##### 6.1.6.2.8 Type: SmContextConfiguration

Table 6.1.6.2.8-1: Definition of type SmContextConfiguration

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+===========+===========+===+===========+===========+===========+
| s         | Sm        | O | 0..1      | When      |           |
| malDataRa | allDataRa |   |           | present,  |           |
| teControl | teControl |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | c         |           |
|           |           |   |           | onfigured |           |
|           |           |   |           | Small     |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Control   |           |
|           |           |   |           | for       |           |
|           |           |   |           | downlink  |           |
|           |           |   |           | data, as  |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | clause    |           |
|           |           |   |           | 5.31.14.3 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GP       |           |
|           |           |   |           | P TS 23.5 |           |
|           |           |   |           | 01 \[2\]. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| s         | S         | C | 0..1      | This IE   |           |
| mallDataR | mallDataR |   |           | shall     |           |
| ateStatus | ateStatus |   |           | contain   |           |
|           |           |   |           | the Small |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Status if |           |
|           |           |   |           | the Small |           |
|           |           |   |           | Data Rate |           |
|           |           |   |           | Status is |           |
|           |           |   |           | available |           |
|           |           |   |           | (see      |           |
|           |           |   |           | clause    |           |
|           |           |   |           | 5.31.14.3 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 23.50 |           |
|           |           |   |           | 1 \[2\]). |           |
+-----------+-----------+---+-----------+-----------+-----------+
| s         | integer   | O | 0..1      | When      |           |
| ervPlmnDa |           |   |           | present,  |           |
| taRateCtl |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | maximum   |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | number of |           |
|           |           |   |           | Downlink  |           |
|           |           |   |           | NAS Data  |           |
|           |           |   |           | PDUs per  |           |
|           |           |   |           | deci hour |           |
|           |           |   |           | of the    |           |
|           |           |   |           | serving   |           |
|           |           |   |           | PLMN, as  |           |
|           |           |   |           | specified |           |
|           |           |   |           | in        |           |
|           |           |   |           | clause    |           |
|           |           |   |           | 5.31.14.2 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GP       |           |
|           |           |   |           | P TS 23.5 |           |
|           |           |   |           | 01 \[2\]. |           |
|           |           |   |           |           |           |
|           |           |   |           | In Update |           |
|           |           |   |           | service   |           |
|           |           |   |           | o         |           |
|           |           |   |           | peration, |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | may be    |           |
|           |           |   |           | set to    |           |
|           |           |   |           | null      |           |
|           |           |   |           | value     |           |
|           |           |   |           | i         |           |
|           |           |   |           | ndicating |           |
|           |           |   |           | the       |           |
|           |           |   |           | Serving   |           |
|           |           |   |           | PLMN Rate |           |
|           |           |   |           | Control   |           |
|           |           |   |           | is        |           |
|           |           |   |           | disabled. |           |
|           |           |   |           |           |           |
|           |           |   |           | Minimum:  |           |
|           |           |   |           | 10        |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE: At  |           |   |           |           |           |
| least one |           |   |           |           |           |
| of the    |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| in the    |           |   |           |           |           |
| table     |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| present.  |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 6.1.6.2.9 Type: SmallDataRateControl

Table 6.1.6.2.8-1: Definition of type SmallDataRateControl

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+===========+===========+===+===========+===========+===========+
| timeUnit  | S         | M | 1         | This IE   |           |
|           | mallDataR |   |           | shall     |           |
|           | ateContro |   |           | indicate  |           |
|           | lTimeUnit |   |           | the time  |           |
|           |           |   |           | unit for  |           |
|           |           |   |           | which the |           |
|           |           |   |           | data rate |           |
|           |           |   |           | control   |           |
|           |           |   |           | is        |           |
|           |           |   |           | applied.  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| maxPac    | integer   | O | 0..1      | If        |           |
| ketRateUl |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | the       |           |
|           |           |   |           | maximum   |           |
|           |           |   |           | number of |           |
|           |           |   |           | uplink    |           |
|           |           |   |           | packets   |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | to be     |           |
|           |           |   |           | sent      |           |
|           |           |   |           | within    |           |
|           |           |   |           | the time  |           |
|           |           |   |           | unit.     |           |
|           |           |   |           |           |           |
|           |           |   |           | (NOTE 1)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| maxPac    | integer   | O | 0..1      | If        |           |
| ketRateDl |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | the       |           |
|           |           |   |           | maximum   |           |
|           |           |   |           | number of |           |
|           |           |   |           | downlink  |           |
|           |           |   |           | packets   |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | to be     |           |
|           |           |   |           | sent      |           |
|           |           |   |           | within    |           |
|           |           |   |           | the time  |           |
|           |           |   |           | unit.     |           |
|           |           |   |           |           |           |
|           |           |   |           | (NOTE 1)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| maxAddi   | integer   | O | 0..1      | If        |           |
| tionalPac |           |   |           | present,  |           |
| ketRateUl |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | the       |           |
|           |           |   |           | a         |           |
|           |           |   |           | dditional |           |
|           |           |   |           | maximum   |           |
|           |           |   |           | number of |           |
|           |           |   |           | uplink    |           |
|           |           |   |           | packets   |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | to be     |           |
|           |           |   |           | sent      |           |
|           |           |   |           | within    |           |
|           |           |   |           | the time  |           |
|           |           |   |           | unit.     |           |
|           |           |   |           |           |           |
|           |           |   |           | (NOTE 2)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| maxAddi   | integer   | O | 0..1      | If        |           |
| tionalPac |           |   |           | present,  |           |
| ketRateDl |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | indicate  |           |
|           |           |   |           | the       |           |
|           |           |   |           | a         |           |
|           |           |   |           | dditional |           |
|           |           |   |           | maximum   |           |
|           |           |   |           | number of |           |
|           |           |   |           | downlink  |           |
|           |           |   |           | packets   |           |
|           |           |   |           | allowed   |           |
|           |           |   |           | to be     |           |
|           |           |   |           | sent      |           |
|           |           |   |           | within    |           |
|           |           |   |           | the time  |           |
|           |           |   |           | unit.     |           |
|           |           |   |           |           |           |
|           |           |   |           | (NOTE 3)  |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE 1:   |           |   |           |           |           |
| At least  |           |   |           |           |           |
| one of    |           |   |           |           |           |
| p         |           |   |           |           |           |
| arameters |           |   |           |           |           |
| maxPack   |           |   |           |           |           |
| etRateUl, |           |   |           |           |           |
| or        |           |   |           |           |           |
| maxPac    |           |   |           |           |           |
| ketRateDl |           |   |           |           |           |
| should be |           |   |           |           |           |
| included. |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 2:   |           |   |           |           |           |
| Parameter |           |   |           |           |           |
| maxAddi   |           |   |           |           |           |
| tionalPac |           |   |           |           |           |
| ketRateUl |           |   |           |           |           |
| should be |           |   |           |           |           |
| absent if |           |   |           |           |           |
| parameter |           |   |           |           |           |
| maxPac    |           |   |           |           |           |
| ketRateUl |           |   |           |           |           |
| is        |           |   |           |           |           |
| absent.   |           |   |           |           |           |
|           |           |   |           |           |           |
| NOTE 3:   |           |   |           |           |           |
| Parameter |           |   |           |           |           |
| maxAddi   |           |   |           |           |           |
| tionalPac |           |   |           |           |           |
| ketRateDl |           |   |           |           |           |
| should be |           |   |           |           |           |
| absent if |           |   |           |           |           |
| parameter |           |   |           |           |           |
| maxPac    |           |   |           |           |           |
| ketRateDl |           |   |           |           |           |
| is        |           |   |           |           |           |
| absent.   |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 6.1.6.2.10 Type: SmContextUpdateData

Table 6.1.6.2.10-1: Definition of type SmContextUpdateData

+-----------+-----------+---+-----------+-----------+-----------+
| Attribute | Data type | P | Ca        | De        | Appl      |
| name      |           |   | rdinality | scription | icability |
+===========+===========+===+===========+===========+===========+
| dlNid     | Uri       | O | 0..1      | When      |           |
| dEndPoint |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain a |           |
|           |           |   |           | new URI   |           |
|           |           |   |           | of        |           |
|           |           |   |           | I         |           |
|           |           |   |           | ndividual |           |
|           |           |   |           | PDU       |           |
|           |           |   |           | session   |           |
|           |           |   |           | resource  |           |
|           |           |   |           | (see      |           |
|           |           |   |           | claus     |           |
|           |           |   |           | e 6.1.3.2 |           |
|           |           |   |           | of        |           |
|           |           |   |           | 3GPP      |           |
|           |           |   |           |  TS 29.54 |           |
|           |           |   |           | 2 \[17\]) |           |
|           |           |   |           | handling  |           |
|           |           |   |           | downlink  |           |
|           |           |   |           | NIDD data |           |
|           |           |   |           | delivery. |           |
|           |           |   |           |           |           |
|           |           |   |           | The NEF   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | send      |           |
|           |           |   |           | downlink  |           |
|           |           |   |           | data to   |           |
|           |           |   |           | the       |           |
|           |           |   |           | resource  |           |
|           |           |   |           | i         |           |
|           |           |   |           | dentified |           |
|           |           |   |           | by the    |           |
|           |           |   |           | new URI   |           |
|           |           |   |           | after the |           |
|           |           |   |           | update is |           |
|           |           |   |           | c         |           |
|           |           |   |           | ompleted. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| notifi    | Uri       | O | 0..1      | When      |           |
| cationUri |           |   |           | present,  |           |
|           |           |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain a |           |
|           |           |   |           | new URI   |           |
|           |           |   |           | to        |           |
|           |           |   |           | receive   |           |
|           |           |   |           | SM        |           |
|           |           |   |           | Context   |           |
|           |           |   |           | Status    |           |
|           |           |   |           | Noti      |           |
|           |           |   |           | fications |           |
|           |           |   |           | sent by   |           |
|           |           |   |           | the NEF.  |           |
|           |           |   |           |           |           |
|           |           |   |           | The NEF   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | send SM   |           |
|           |           |   |           | Contact   |           |
|           |           |   |           | Status    |           |
|           |           |   |           | Not       |           |
|           |           |   |           | ification |           |
|           |           |   |           | to this   |           |
|           |           |   |           | new URI   |           |
|           |           |   |           | after the |           |
|           |           |   |           | update is |           |
|           |           |   |           | c         |           |
|           |           |   |           | ompleted. |           |
+-----------+-----------+---+-----------+-----------+-----------+
| smCont    | SmCo      | O | 0..1      | When      |           |
| extConfig | ntextConf |   |           | present,  |           |
|           | iguration |   |           | this IE   |           |
|           |           |   |           | shall     |           |
|           |           |   |           | contain   |           |
|           |           |   |           | the       |           |
|           |           |   |           | conf      |           |
|           |           |   |           | iguration |           |
|           |           |   |           | for the   |           |
|           |           |   |           | NIDD.     |           |
+-----------+-----------+---+-----------+-----------+-----------+
| NOTE: At  |           |   |           |           |           |
| least one |           |   |           |           |           |
| of the    |           |   |           |           |           |
| a         |           |   |           |           |           |
| ttributes |           |   |           |           |           |
| in the    |           |   |           |           |           |
| table     |           |   |           |           |           |
| shall be  |           |   |           |           |           |
| present.  |           |   |           |           |           |
+-----------+-----------+---+-----------+-----------+-----------+

##### 6.1.6.2.11 Type: DeliverReqData

Table 6.1.6.2.12-1: Definition of type DeliverReqData

  Attribute name   Data type         P   Cardinality   Description
  ---------------- ----------------- --- ------------- ----------------------------------------------------------------------------------------
  data             RefToBinaryData   M   1             This IE shall contain the reference to Mobile Originated data to be delivered via NEF.

#### 6.1.6.3 Simple data types and enumerations

##### 6.1.6.3.1 Introduction

This clause defines simple data types and enumerations that can be
referenced from data structures defined in the previous clauses.

##### 6.1.6.3.2 Simple data types

The simple data types defined in table 6.1.6.3.2-1 shall be supported.

Table 6.1.6.3.2-1: Simple data types

  ----------- ----------------- ------------- ---------------
  Type Name   Type Definition   Description   Applicability
                                              
  ----------- ----------------- ------------- ---------------

##### 6.1.6.3.3 Enumeration: SmContextStatus

The enumeration SmContextStatus represents status of Individual SM
Context in the NEF. It shall comply with the provisions defined in table
6.1.5.3.3-1.

Table 6.1.6.3.3-1: Enumeration SmContextStatus

  Enumeration value   Description                                                      Applicability
  ------------------- ---------------------------------------------------------------- ---------------
  \"RELEASED\"        Indicates that the Individual SM Context for NIDD is released.   

##### 6.1.6.3.4 Enumeration: SmallDataRateControlTimeUnit

The enumeration SmallDataRateControlTimeUnit represents the allowed time
unit. It shall comply with the provisions defined in table 6.1.5.3.3-1.

Table 6.1.6.3.4-1: Enumeration SmallDataRateControlTimeUnit

  Enumeration value   Description                                            Applicability
  ------------------- ------------------------------------------------------ ---------------
  \"MINUTE\"          Indicates the rate control is applied per minute.      
  \"HOUR\"            Indicates the rate control is applied per hour.        
  \"DAY\"             Indicates the rate control is applied per day.         
  \"WEEK\"            Indicates the rate control is applied per week.        
  \"6MINUTES\"        Indicates the rate control is applied per 6 minutes.   

##### 6.1.6.3.5 Enumeration: ReleaseCause

The enumeration ReleaseCause represents cause for release of the SM
Context in the NEF. It shall comply with the provisions defined in table
6.1.6.3.5-1.

Table 6.1.6.3.5-1: Enumeration ReleaseCause

  Enumeration value            Description                                                                                Applicability
  ---------------------------- ------------------------------------------------------------------------------------------ ---------------
  \"PDU\_SESSION\_RELEASED\"   Indicates the SM Context is to be released due to corresponding PDU Session is released.   

### 6.1.7 Error Handling

#### 6.1.7.1 General

For the Nnef\_SMContext API, HTTP error responses shall be supported as
specified in clause 4.8 of 3GPP TS 29.501 \[5\]. Protocol errors and
application errors specified in table 5.2.7.2-1 of 3GPP TS 29.500 \[4\]
shall be supported for an HTTP method if the corresponding HTTP status
codes are specified as mandatory for that HTTP method in table 5.2.7.1-1
of 3GPP TS 29.500 \[4\].

In addition, the requirements in the following clauses are applicable
for the Nnef\_SMContext API.

#### 6.1.7.2 Protocol Errors

Protocol errors handling shall be supported as specified in clause 5.2.7
of 3GPP TS 29.500 \[4\]. No specific procedures for the Nnef\_SMContext
service are specified.

#### 6.1.7.3 Application Errors

The application errors defined for the Nnef\_SMContext service are
listed in Table 6.1.7.3-1.

Table 6.1.7.3-1: Application errors

  Application Error                         HTTP status code   Description
  ----------------------------------------- ------------------ -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  \"USER\_UNKNOWN\"                         403                This application error indicates that the User Identity does not exist in the NEF.
  \"NIDD\_CONFIGURATION\_NOT\_AVAILABLE\"   403                This application error indicates that there is no valid NIDD configuration exists for the requested SM Context in the NEF, and NIDD configuration triggered by the NEF (see clause 4.4.12.2 of 3GPP TS 29.522 \[15\]) is not supported or has failed.
  \"CONTEXT\_NOT\_FOUND\"                   404                This application error indicates that the SM Context referred by the requested resource URI does not exist in the NEF.

### 6.1.8 Feature negotiation

The optional features in table 6.1.8-1 are defined for the
Nnef\_SMContext API. They shall be negotiated using the extensibility
mechanism defined in clause 6.6 of 3GPP TS 29.500 \[4\].

Table 6.1.8-1: Supported Features

  Feature number   Feature Name   Description
  ---------------- -------------- -------------
                                  

### 6.1.9 Security

As indicated in 3GPP TS 33.501 \[8\] and 3GPP TS 29.500 \[4\], the
access to the Nnef\_SMContext API may be authorized by means of the
OAuth2 protocol (see IETF RFC 6749 \[9\]), based on local configuration,
using the \"Client Credentials\" authorization grant, where the NRF (see
3GPP TS 29.510 \[10\]) plays the role of the authorization server.

If OAuth2 is used, an NF Service Consumer, prior to consuming services
offered by the Nnef\_SMContext API, shall obtain a \"token\" from the
authorization server, by invoking the Access Token Request service, as
described in 3GPP TS 29.510 \[10\], clause 5.4.2.2.

NOTE: When multiple NRFs are deployed in a network, the NRF used as
authorization server is the same NRF that the NF Service Consumer used
for discovering the Nnef\_SMContext service.

The Nnef\_SMContext API defines a single scope \"nnef-smcontext\" for
the entire service, and it does not define any additional scopes at
resource or operation level.

### 6.1.10 HTTP redirection

An HTTP request may be redirected to a different NEF service instance,
within the same NEF or a different NEF of an NEF set, e.g. when an NEF
service instance is part of an NEF (service) set or when using indirect
communications (see 3GPP TS 29.500 \[4\]).

An SCP that reselects a different NEF producer instance will return the
NF Instance ID of the new NEF producer instance in the
3gpp-Sbi-Producer-Id header, as specified in clause 6.10.3.4 of
3GPP TS 29.500 \[4\].

If an NEF within an NEF set redirects a service request to a different
NEF of the set using an 307 Temporary Redirect or 308 Permanent Redirect
status code, the identity of the new NEF towards which the service
request is redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id
header of the 307 Temporary Redirect or 308 Permanent Redirect response
as specified in clause 6.10.9.1 of 3GPP TS 29.500 \[4\].

######## Annex A (normative): OpenAPI specification

A.1 General
-----------

This Annex specifies the formal definition of the Nnef\_SMContext API.
It consists of OpenAPI 3.0.0 specifications in YAML format.

This Annex takes precedence when being discrepant to other parts of the
specification with respect to the encoding of information elements and
methods within the API(s).

NOTE: The semantics and procedures, as well as conditions, e.g. for the
applicability and allowed combinations of attributes or values, not
expressed in the OpenAPI definitions but defined in other parts of the
specification also apply.

Informative copies of the OpenAPI specification files contained in this
3GPP Technical Specification are available on a Git-based repository,
that uses the GitLab software version control system (see
3GPP TS 29.501 \[5\] clause 5.3.1 and 3GPP TR 21.900 \[7\] clause 5B).

A.2 Nnef\_SMContext API
-----------------------

openapi: 3.0.0

info:

title: Nnef\_SMContext

version: 1.0.2

description: \|

Nnef SMContext Service.

© 2021, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI,
TTA, TTC).

All rights reserved.

externalDocs:

description: 3GPP TS 29.541 V16.4.0; 5G System; Session Management
Services for Non-IP Data Delivery (NIDD).

url: http://www.3gpp.org/ftp/Specs/archive/29\_series/29.541/

servers:

\- url: \'{apiRoot}/nnef-smcontext/v1\'

variables:

apiRoot:

default: https://example.com

description: apiRoot as defined in clause 4.4 of 3GPP TS 29.501

security:

\- {}

\- oAuth2ClientCredentials:

\- nnef-smcontext

paths:

/sm-contexts:

post:

summary: Create SM Context

operationId: Create

tags:

\- SM Contexts Collection (Collection)

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SmContextCreateData\'

responses:

\'201\':

description: Success

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SmContextCreatedData\'

headers:

Location:

description: \>

\'Contains the URI of the newly created Individual SM Context resource,
according to the structure:

{apiRoot}/nnef-smcontext/\<version\>/sm-contexts/{smContextId}\'

required: true

schema:

type: string

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'403\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/403\'

\'411\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

callbacks:

StatusNotify:

\'{\$request.body\#/notificationUri}\':

post:

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SmContextStatusNotification\'

responses:

\'204\':

description: No Content, Notification was succesfull

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'411\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/411\'

\'413\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/413\'

\'415\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/415\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

/sm-contexts/{smContextId}/release:

post:

summary: Delete SM Context

operationId: Delete

tags:

\- Individual SM Context (Document)

parameters:

\- name: smContextId

in: path

description: SM Context Resource ID

required: true

schema:

type: string

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SmContextReleaseData\'

responses:

\'200\':

description: OK. Resource representation is returned

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SmContextReleasedData\'

\'204\':

description: No Content.

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/406\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

/sm-contexts/{smContextId}/update:

post:

summary: Update SM Context

operationId: Update

tags:

\- Individual SM Context (Document)

parameters:

\- name: smContextId

in: path

description: SM Context Resource ID

required: true

schema:

type: string

requestBody:

required: true

content:

application/json:

schema:

\$ref: \'\#/components/schemas/SmContextUpdateData\'

responses:

\'204\':

description: No Content.

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/406\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

/sm-contexts/{smContextId}/deliver:

post:

summary: Deliver Uplink MO Data

operationId: Deliver

tags:

\- Individual SM Context (Document)

parameters:

\- name: smContextId

in: path

description: SM Context Resource ID

required: true

schema:

type: string

requestBody:

required: true

content:

multipart/related: \# message with binary body part(s)

schema:

type: object

properties: \# Request parts

jsonData:

\$ref: \'\#/components/schemas/DeliverReqData\'

binaryMoData:

type: string

format: binary

encoding:

jsonData:

contentType: application/json

binaryMoData:

contentType: application/octet-stream

headers:

Content-Id:

schema:

type: string

responses:

\'204\':

description: No Content.

\'307\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/307\'

\'308\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/308\'

\'400\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/400\'

\'404\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/404\'

\'406\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/406\'

\'429\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/429\'

\'500\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/500\'

\'503\':

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/503\'

default:

\$ref: \'TS29571\_CommonData.yaml\#/components/responses/default\'

components:

securitySchemes:

oAuth2ClientCredentials:

type: oauth2

flows:

clientCredentials:

tokenUrl: \'{nrfApiRoot}/oauth2/token\'

scopes:

nnef-smcontext: Access to the Nnef\_SMContext API

schemas:

\#

\# Structured Data Types

\#

SmContextCreateData:

type: object

properties:

supi:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Supi\'

pduSessionId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/PduSessionId\'

dnn:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Dnn\'

snssai:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Snssai\'

nefId:

type: string

description: This IE shall contain the NEF ID of the target NEF.

dlNiddEndPoint:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Uri\'

notificationUri:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Uri\'

niddInfo:

\$ref: \'\#/components/schemas/NiddInformation\'

rdsSupport:

type: boolean

description: \|

When present, this IE shall indicate the UE capability to support RDS.

The value of this IE shall be set as following

\- true UE supports RDS

\- false (default) UE does not support RDS

smContextConfig:

\$ref: \'\#/components/schemas/SmContextConfiguration\'

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

required:

\- supi

\- pduSessionId

\- dnn

\- snssai

\- nefId

\- dlNiddEndPoint

\- notificationUri

SmContextCreatedData:

type: object

properties:

supi:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Supi\'

pduSessionId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/PduSessionId\'

dnn:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Dnn\'

snssai:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Snssai\'

nefId:

type: string

description: This IE shall contain the NEF ID of the target NEF.

rdsSupport:

type: boolean

default: false

description: \|

When present, this IE shall indicate the NEF capability to support RDS.

The value of this IE shall be set as following

\- true NEF supports RDS

\- false (default) NEF does not support RDS

extBufSupport:

type: boolean

default: false

description: \|

When present, this IE shall indicate whether Extended Buffering applies
or not.

The value of this IE shall be set as following

- true Extended Buffering applies

\- false (default) Extended Buffering does not apply

supportedFeatures:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SupportedFeatures\'

maxPacketSize:

type: integer

required:

\- supi

\- pduSessionId

\- dnn

\- snssai

\- nefId

SmContextReleaseData:

type: object

properties:

cause:

\$ref: \'\#/components/schemas/ReleaseCause\'

required:

\- cause

SmContextReleasedData:

type: object

properties:

smallDataRateStatus:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SmallDataRateStatus\'

apnRateStatus:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/ApnRateStatus\'

SmContextStatusNotification:

type: object

properties:

status:

\$ref: \'\#/components/schemas/SmContextStatus\'

smContextId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Uri\'

cause:

\$ref: \'\#/components/schemas/ReleaseCause\'

smallDataRateStatus:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SmallDataRateStatus\'

apnRateStatus:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/ApnRateStatus\'

required:

\- status

\- smContextId

NiddInformation:

type: object

properties:

extGroupId:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/ExternalGroupId\'

gpsi:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Gpsi\'

afId:

type: string

description: When present, this IE shall contain the AF Id used for the
SM Context.

SmContextConfiguration:

type: object

properties:

smalDataRateControl:

\$ref: \'\#/components/schemas/SmallDataRateControl\'

smallDataRateStatus:

\$ref:
\'TS29571\_CommonData.yaml\#/components/schemas/SmallDataRateStatus\'

servPlmnDataRateCtl:

type: integer

minimum: 10

nullable: true

description: \>

When present, this IE shall contain the maximum allowed number of

Downlink NAS Data PDUs per deci hour of the serving PLMN, as specified

in subclause 5.31.14.2 of 3GPP TS 23.501 \[2\].

Minimum 10

SmallDataRateControl:

type: object

properties:

timeUnit:

\$ref: \'\#/components/schemas/SmallDataRateControlTimeUnit\'

maxPacketRateUl:

type: integer

maxPacketRateDl:

type: integer

maxAdditionalPacketRateUl:

type: integer

maxAdditionalPacketRateDl:

type: integer

required:

\- timeUnit

SmContextUpdateData:

type: object

properties:

dlNiddEndPoint:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Uri\'

notificationUri:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/Uri\'

smContextConfig:

\$ref: \'\#/components/schemas/SmContextConfiguration\'

DeliverReqData:

type: object

properties:

data:

\$ref: \'TS29571\_CommonData.yaml\#/components/schemas/RefToBinaryData\'

required:

\- data

\#

\# Simple Data Types

\#

\#

\# Enumeration Data Types

\#

SmContextStatus:

anyOf:

\- type: string

enum:

\- RELEASED

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- RELEASED: Indicates that the Individual SM Context for NIDD is
released.

SmallDataRateControlTimeUnit:

anyOf:

\- type: string

enum:

\- MINUTE

\- HOUR

\- DAY

\- WEEK

\- 6MINUTES

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

Possible values are

\- MINUTE: Indicates the rate control is applied per minute.

\- HOUR: Indicates the rate control is applied per hour.

\- DAY: Indicates the rate control is applied per day.

\- WEEK: Indicates the rate control is applied per week.

\- 6MINUTES: Indicates the rate control is applied per 6 minutes.

ReleaseCause:

anyOf:

\- type: string

enum:

\- PDU\_SESSION\_RELEASED

\- type: string

description: \>

This string provides forward-compatibility with future

extensions to the enumeration but is not used to encode

content defined in the present version of this API.

description: \>

The cause to release the SM Context. Possible values are

\- PDU\_SESSION\_RELEASED: Indicates that the Individual SM Context for
NIDD is released.

########  Annex B (informative): Change history

  -------------------- ------------- ----------- -------- --------- --------- --------------------------------------------------------------------------------------------------------------------- -----------------
  **Change history**                                                                                                                                                                                
  **Date**             **Meeting**   **TDoc**    **CR**   **Rev**   **Cat**   **Subject/Comment**                                                                                                   **New version**
  2019-09              CT4\#93       C4-193889                                Initial Draft.                                                                                                        0.1.0
  2019-10              CT4\#94       C4-194527                                Incorporated pCRs agreed on CT4\#94, including: C4-194208, C4-194440, C4-194441, C4-194442, C4-194443.                0.2.0
  2019-11              CT4\#95       C4-195642                                Incorporated pCRs agreed on CT4\#95, including: C4-195283, C4-195284, C4-195295.                                      0.3.0
  2019-12              CT\#86        CP-193072                                TS presented for information                                                                                          1.0.0
  2020-03              CT4\#96-e     C4-201265                                Incorporated pCRs agreed on CT4\#96-e, including:.C4-200588, C4-200589, C4-200744, C4-200944, C4-200985, C4-201156.   1.1.0
  2020-03              CT\#87e       CP-200061                                Presented for approval                                                                                                2.0.0
  2020-03              CT\#87e                                                Approved at CT\#87e                                                                                                   16.0.0
  2020-06              CT\#88e       CP-201046   0001     2         B         Add Extended Buffering                                                                                                16.1.0
  2020-06              CT\#88e       CP-201071   0002               F         Storage of YAML files in ETSI Forge                                                                                   16.1.0
  2020-06              CT\#88e       CP-201046   0003               F         Revert MO Exception Data Indication                                                                                   16.1.0
  2020-06              CT\#88e       CP-201046   0004     1         F         Parameter supplement to Create Service                                                                                16.1.0
  2020-06              CT\#88e       CP-201046   0005     1         F         Parameter supplement to Delete Service                                                                                16.1.0
  2020-06              CT\#88e       CP-201046   0006     1         F         Parameter supplement to Status Notify Service                                                                         16.1.0
  2020-06              CT\#88e       CP-201046   0008     1         F         Miscellaneous Corrections                                                                                             16.1.0
  2020-06              CT\#88e       CP-201073   0009               F         29.541 Rel-16 API version and External doc update                                                                     16.1.0
  2020-12              CT\#90e       CP-203032   0010               F         YAML files in 3GPP Forge                                                                                              16.2.0
  2021-03              CT\#91e       CP-210037   0011     1         F         HTTP 3xx redirection                                                                                                  16.3.0
  2021-03              CT\#91e       CP-210078   0012     \-        F         29.541 Rel-16 API version and External doc update                                                                     16.3.0
  2021-06              CT\#92e       CP-210059   0016     1         F         Redirect Response                                                                                                     16.4.0
  2021-06              CT\#92e       CP-210073   0018     \-        F         29.541 Rel-16 API version and External doc update                                                                     16.4.0
  2021-09              CT\#93e       CP-212060   0019     \-        F         3xx description correction for SCP                                                                                    16.5.0
  -------------------- ------------- ----------- -------- --------- --------- --------------------------------------------------------------------------------------------------------------------- -----------------
