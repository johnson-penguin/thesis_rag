10 Physical uplink control channel procedures
=============================================

If the UE is configured with *shortTTI*, PUCCH in this clause refers to
SPUCCH defined in \[3\] if the HARQ-ACK is sent in response to PDSCH
scheduled by DCI format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or scheduling
request is sent on resources configured by higher layer parameter
*sr-slotSPUCCH-IndexFH or sr-slotSPUCCH-IndexNoFH or
sr-subslotSPUCCH-Resource* for slot/subslot-based transmissions, unless
otherwise noted.

If the UE is not configured with *shortTTI* or the UE is configured with
*shortTTI*, and UCI is to be transmitted in a subframe, the term
\'subframe/slot/subslot\' or \'subframe/slot\' refers to a subframe in
this clause.

If the UE is configured with *shortTTI*, and UCI is to be transmitted in
a slot, the term \'subframe/slot/subslot\' or \'slot/subslot\' or
\'subframe/slot\' refers to a slot in this clause.

If the UE is configured with *shortTTI*, and UCI is to be transmitted in
a subslot, the term \'subframe/slot/subslot\' or \'slot/subslot\' refers
to a subslot in this clause.

If the UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG

\- When the procedures are applied for MCG, the terms \'secondary
cell\', \'secondary cells\', \'serving cell\', \'serving cells\' in this
clause refer to secondary cell, secondary cells, serving cell, serving
cells belonging to the MCG respectively.

\- When the procedures are applied for SCG, the terms \'secondary
cell\', \'secondary cells\', \'serving cell\', \'serving cells\' in this
clause refer to secondary cell, secondary cells (not including PSCell),
serving cell, serving cells belonging to the SCG respectively. The term
\'primary cell\' in this clause refers to the PSCell of the SCG.

If the UE is configured with a PUCCH-SCell, the UE shall apply the
procedures described in this clause for both primary PUCCH group and
secondary PUCCH group

\- When the procedures are applied for the primary PUCCH group, the
terms \'secondary cell\', \'secondary cells\', \'serving cell\',
\'serving cells\' in this clause refer to secondary cell, secondary
cells, serving cell, serving cells belonging to the primary PUCCH group
respectively.

\- When the procedures are applied for secondary PUCCH group, the terms
\'secondary cell\', \'secondary cells\', \'serving cell\', \'serving
cells\' in this clause refer to secondary cell, secondary cells (not
including the PUCCH-SCell), serving cell, serving cells belonging to the
secondary PUCCH group respectively. The term \'primary cell\' in this
clause refers to the PUCCH-SCell of the secondary PUCCH group.

If a UE is configured with a LAA Scell, the UE shall apply the
procedures described in this clause assuming frame structure type 1 for
the LAA Scell unless stated otherwise.

A UE is not expected to be configured with PUCCH on a LAA SCell.

Throughout this clause,

\- if the UE is configured with higher layer parameter
*shortProcessingTime* and the corresponding PDCCH with CRC scrambled by
C-RNTI is in the UE-specific search space*,*
![](media/image1.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} and
![](media/image2.wmf){width="0.46875in"
height="0.2708333333333333in"}otherwise,

\- if the UE is configured with higher layer parameter *shortTTI* and
the corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G is detected in a subslot,
![](media/image3.wmf){width="0.25in" height="0.2708333333333333in"} is
determined based on higher layer parameter *min-proc-TimelineSubslot*
from ![](media/image4.wmf){width="0.4583333333333333in"
height="0.23958333333333334in"}.

**For a UE configured with EN-DC/NE-DC,**

**- if serving cell frame structure type 1 and** if the UE is configured
with *tdm-PatternConfig/tdm-PatternConfigNE-DC* for the serving cell, or

\- if the UE configured with EN-DC, and **if serving cell frame
structure type 1, and** if the UE is configured with
*tdm-PatternConfig2* for the serving cell, or

\- if the UE configured with EN-DC, and **if** primary cell frame
structure type 2 and if the UE is configured with *tdm-PatternConfig2*
for the primary cell, and if the UE configured with more than one
serving cells, **and if secondary serving cell frame structure type 2
with** different UL/DL configuration than the primary cell, or if
secondary serving cell is frame structure type 1,

\- the UE shall apply the procedures described in this clause assuming
FDD-TDD and primary cell frame structure type 2 with \"UL/DL
configuration\" given by
*tdm-PatternConfig/tdm-PatternConfigNE-DC*/*tdm-PatternConfig2* and
**serving cell frame structure type 1**. The UE shall apply an offset
value given by ***harq-Offset-r15*/*harq-Offset-r16*** **to the subframe
index** in the UL/DL configuration when applying the procedures in this
clause.

\- if the UE configured with EN-DC, and **if** primary cell frame
structure type 2 and if the UE is configured with *tdm-PatternConfig2*
for the primary cell, and if the UE configured with more than one
serving cells, **and if secondary serving cell has the same** UL/DL
configuration as the primary cell,

\- the UE shall apply the procedures described in this clause assuming
the UE is configured with more than one serving cell with \"UL/DL
configuration\" given by *tdm-PatternConfig2* and **serving cell frame
structure type 2**. The UE shall apply an offset value given by
***harq-Offset-r16*** **to the subframe index** in the UL/DL
configuration when applying the procedures in this clause**.**

\- **if serving cell frame structure type 1 and** if the UE is
configured with *tdm-PatternConfig/tdm-PatternConfigNE-DC* for the
serving cell, or if the UE configured with EN-DC, and **if the UE does
not indicate** a capability for dynamic power sharing (as specified in
\[17\]), **and** if the UE is configured with *tdm-PatternConfig2* for
the serving cell, the **UE is not** expected to transmit any uplink
physical channel or signal in the serving cell on subframes other than
the offset-UL subframes, where the offset-UL subframes are determined by
applying the offset value to the subframes denoted as uplink in the
UL/DL configuration.

\- The UE is configured by higher layers to use PUCCH format 3/4/5 for
transmission of HARQ-ACK.

\- if the UE configured with EN-DC, and **if** primary cell frame
structure type 2 and if the UE is configured with *tdm-PatternConfig2*
for the primary cell, and if the UE only receives the DCI format with
**value of the DAI field equal to \'1\'** and/or only receives a PDSCH
transmission on the primary cell where there is not a corresponding
PDCCH/EPDCCH detected, the UE shall use PUCCH format 3 for transmission
of HARQ-ACK with the PUCCH resource corresponding to the 1^st^ PUCCH
resource value configured by the higher layers.

\- The UE shall use and (defined in Clause
10.1.3.2.2/10.1.3.2.3/10.2.3.2.4) when applying the procedures described
in Clause 10.1.3.2.2/10.1.3.2.3/10.2.3.2.4.

10.1 UE procedure for determining physical uplink control channel assignment
----------------------------------------------------------------------------

If a non-BL/CE UE is configured for a single serving cell and is not
configured for simultaneous PUSCH and PUCCH transmissions, then in
subframe/slot/subslot ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} uplink control information (UCI) shall
be transmitted

\- on subframe-PUCCH using format 1/1a/1b/3 or 2/2a/2b if the UE is not
transmitting PUSCH

\- on slot-PUCCH using format 1/1a/1b/3/4 if the UE is not transmitting
PUSCH and the UE is configured with higher-layer parameter
*ul-STTI-Length*=\'slot\'

\- on subslot-PUCCH using format 1/1a/1b/4 if the UE is not transmitting
PUSCH and the UE is configured with higher-layer parameter
*ul-STTI-Length=*\'*subslot*\'

\- on PUSCH if the UE is transmitting PUSCH in subframe/slot/subslot
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
unless the PUSCH transmission corresponds to a Random Access Response
Grant or a retransmission of the same transport block as part of the
contention based random access procedure, in which case UCI is not
transmitted

\- if the UE is semi-persistently scheduled for subframe-PUSCH
transmissions of a transport block spanning consecutive PUSCH
transmissions (including subframe *n*) corresponding to an SPS
configuration with higher layer parameter
*totalNumberPUSCH-SPS-UL-Repetitions,* in which case periodic CSI is not
transmitted

If the UE is configured for a single serving cell and simultaneous PUSCH
and PUCCH transmission, then in
subframe/slot![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} UCI shall be transmitted

\- on subframe-PUCCH using format 1/1a/1b/3 if the UCI consists only of
HARQ-ACK and/or SR

\- on slot-PUCCH using format 1/1a/1b/3/4 if the UCI consists only of
HARQ-ACK and/or SR and the UE is configured with higher-layer parameter
*ul-STTI-Length*=\'slot\'

\- on subslot-PUCCH using format 1/1a/1b/4 if the UCI consists only of
HARQ-ACK and/or SR and the UE is configured with higher-layer parameter
*ul-STTI-Length=*\'sub*slot*\'

\- on PUCCH using format 2 if the UCI consists only of periodic CSI

\- on PUCCH using format 2/2a/2b/3 if the UCI consists of periodic CSI
and HARQ-ACK and if the UE is not transmitting PUSCH

\- on PUCCH and PUSCH if the UCI consists of
HARQ-ACK/HARQ-ACK+SR/positive SR and periodic/aperiodic CSI and if the
UE is transmitting PUSCH in subframe/slot/subslot *n*, in which case the
HARQ-ACK/HARQ-ACK+SR/positive SR is transmitted on subframe-PUCCH using
format 1/1a/1b/3 or format 1/1a/1b/3/4 if the UE is configured with
higher-layer parameter *ul-STTI-Length=\'slot\'*, or format 1/1a/1b/4 if
the UE is configured with higher-layer parameter
*ul-STTI-Length=\'subslot*\'*,* and the periodic/aperiodic CSI
transmitted on PUSCH unless the PUSCH transmission corresponds to a
Random Access Response Grant or a retransmission of the same transport
block as part of the contention based random access procedure, in which
case periodic/aperiodic CSI is not transmitted

\- on PUSCH if the UCI consists of HARQ-ACK/HARQ-ACK+SR/positive SR and
if the UE is configured with higher-layer parameter
*ul-STTI-Length=*\'*subslot*\'*,* and if the PUSCH transmission
corresponds to semi-persistent scheduling of subslot-PUSCH (i.e. higher
layer parameter *sps-ConfigUL-sTTI-r15* is configured, see 3GPP TS
36.331 \[9\]) and with a configured periodicity of 1 subslot (i.e.
*semiPersistSchedIntervalUL-STTI-r15* set to *sTTI1*) and with
*DMRS-pattern* field in the related DCI format equal to \'10\' (i.e.,
see Table 5.5.2.1.2-2 of 3GPP TS 36.211 \[3\]), in which case PUCCH is
not transmitted

If the UE is configured with more than one serving cell and is not
configured for simultaneous PUSCH and PUCCH transmission, then in
subframe/slot/subslot ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} UCI shall be transmitted

\- on subframe-PUCCH using format 1/1a/1b/3/4/5 or 2/2a/2b if the UE is
not transmitting PUSCH

\- on slot-PUCCH using format 1/1a/1b/3/4 if the UE is not transmitting
PUSCH

\- on subslot-PUCCH using format 1/1a/1b/4 if the UE is not transmitting
PUSCH

\- on PUSCH of the serving cell given in Clause 7.2.1 if the UCI
consists of aperiodic CSI or aperiodic CSI and HARQ-ACK

\- on primary cell PUSCH if the UCI consists of periodic CSI and/or
HARQ-ACK and if the UE is transmitting on the primary cell PUSCH in
subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} unless the primary cell PUSCH
transmission corresponds to a Random Access Response Grant or a
retransmission of the same transport block as part of the contention
based random access procedure, in which case UCI is not transmitted

\- on primary cell subframe-PUSCH if the UCI consists of periodic CSI
and/or HARQ-ACK and if the PUSCH in subframe
![cid:image002.png\@01D3F938.ED598C70](media/image8.png){width="0.1284722222222222in"
height="0.1361111111111111in"}Â  is semi-persistently scheduled as part
of consecutive PUSCH transmissions of a transport block associated with
an SPS configuration with higher layer parameter
*totalNumberPUSCH-SPS-UL-Repetitions,* in which case periodic CSI is not
transmitted.

\- on PUSCH of the secondary cell (other than an LAA SCell) with
smallest *SCellIndex* if the UCI consists of periodic CSI and/or
HARQ-ACK and if the UE is not transmitting PUSCH on primary cell but is
transmitting PUSCH on at least one secondary cell (other than an LAA
SCell)

If the UE is configured with more than one serving cell and simultaneous
PUSCH and PUCCH transmission, then in subframe/slot/subslot
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
UCI shall be transmitted

\- on subframe-PUCCH using format 1/1a/1b/3 if the UCI consists only of
HARQ-ACK and/or SR

\- on slot-PUCCH using format 1/1a/1b/3/4 if the UCI consists only of
HARQ-ACK and/or SR

\- on subslot-PUCCH using format 1/1a/1b/4 if the UCI consists only of
HARQ-ACK and/or SR

\- on subframe-PUCCH using format 4/5 if the UCI consists only of
HARQ-ACK and/or SR and/or periodic CSI

\- on PUCCH using format 2 if the UCI consists only of periodic CSI
corresponding to one serving cell

\- as described in Clause 10.1.1, if the UCI consists of periodic CSI
and HARQ-ACK and if the UE is not transmitting on PUSCH

\- on PUCCH and primary cell PUSCH if the UCI consists of HARQ-ACK and
periodic CSI and the UE is transmitting PUSCH on the primary cell, in
which case the HARQ-ACK is transmitted on PUCCH using format 1a/1b/3 and
the periodic CSI is transmitted on PUSCH unless the primary cell PUSCH
transmission corresponds to a Random Access Response Grant or a
retransmission of the same transport block as part of the contention
based random access procedure, in which case periodic CSI is not
transmitted

\- on PUCCH and PUSCH of the secondary cell (other than a LAA SCell)
with the smallest *SCellIndex* if the UCI consists of HARQ-ACK and
periodic CSI and if the UE is not transmitting PUSCH on primary cell but
is transmitting PUSCH on at least one secondary cell, in which case, the
HARQ-ACK is transmitted on subframe-PUCCH using format 1a/1b/3 and the
periodic CSI is transmitted on PUSCH

\- on PUCCH and PUSCH if the UCI consists of
HARQ-ACK/HARQ-ACK+SR/positive SR and aperiodic CSI in which case the
HARQ-ACK/HARQ-ACK+SR/positive SR is transmitted on subframe/slot-PUCCH
using format 1/1a/1b/3 or on slot-PUCCH using format 1/1a/1b/3/4 or on
subslot-PUCCH using format 1/1a/1b/4 and the aperiodic CSI is
transmitted on PUSCH of the serving cell given in Clause 7.2.1

\- on PUSCH if the UCI consists of HARQ-ACK/HARQ-ACK+SR/positive SR and
if the UE is configured with higher-layer parameter
*ul-STTI-Length=*\'*subslot*\'*,* and if the PUSCH transmission
corresponds to semi-persistent scheduling of subslot-PUSCH (i.e. higher
layer parameter *sps-ConfigUL-sTTI-r15* is configured, see 3GPP TS
36.331 \[9\]) and with a configured periodicity of 1 subslot (i.e.
*semiPersistSchedIntervalUL-STTI-r15* set to *sTTI1*) and with
*DMRS-pattern* field in the related DCI format equal to \'10\' (i.e.,
see Table 5.5.2.1.2-2 of 3GPP TS 36.211 \[3\]), in which case PUCCH is
not transmitted

For a BL/CE UE, uplink control information (UCI) shall be transmitted in
subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}

\- on PUCCH using PUCCH formats 1, 1a, 2, 2a for FDD and a UE configured
or assumed in CEModeA if the UE is not transmitting PUSCH in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"},
or if the UE is transmitting PUSCH in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}and
the number of PUCCH repetitions defined for the UCI in \[3\] is larger
than 1, or if the UE is transmitting PUSCH in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}and
the indicated PUSCH repetition number in DCI format 6-0A/6-0B is larger
than 1, or if the UE is transmitting PUSCH in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
and the PUSCH resource assignment is using uplink resource allocation
type 5

\- on PUCCH using PUCCH formats 1, 1a, 1b, 2, 2a, 2b for TDD and a UE
configured or assumed in CEModeA if the UE is not transmitting PUSCH in
subframe![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}, or if the UE is transmitting PUSCH in
subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}and the number of PUCCH repetitions
defined for the UCI in \[3\] is larger than 1, or if the UE is
transmitting PUSCH in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}and the indicated PUSCH repetition number
in DCI format 6-0A/6-0B is larger than 1, or if the UE is transmitting
PUSCH in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} and the PUSCH resource assignment is
using uplink resource allocation type 5

\- on PUCCH formats 1, 1a for a UE configured or assumed in CEModeB

\- on PUSCH if the UE is transmitting PUSCH in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
and the number of PUCCH repetitions defined for the UCI in \[3\] is
equal to 1, the indicated PUSCH repetition number in DCI format
6-0A/6-0B is equal to 1 and the PUSCH resource assignment is not using
uplink resource allocation type 5 unless the PUSCH transmission
corresponds to a Random Access Response Grant or a retransmission of the
same transport block as part of the contention based random access
procedure, in which case UCI is not transmitted.

If the UE is configured with more than one serving cell, then reporting
prioritization and collision handling of periodic CSI reports of a
certain PUCCH reporting type is given in Clause 7.2.2.

If a UE is not configured with simultaneous transmission of PUSCH and
PUCCH, and if a subframe-PUSCH and at least two slot/subslot-PUCCHs or
two slot/subslot-PUSCHs are collided within the same subframe on a given
carrier, prioritization and collision handling between PUSCH and PUCCH
spanning the same number of symbols (given in this clause) is first
applied, followed by prioritization and collision handling of PUSCH and
PUCCH spanning different number of symbols (given in this clause).

A UE transmits PUCCH only on the primary cell.

A UE is configured by higher layers to transmit PUCCH on one antenna
port ![](media/image9.wmf){width="0.5416666666666666in"
height="0.20833333333333334in"} or two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"}. PUCCH format 4 and PUCCH format 5 can
only be transmitted on one antenna port
![](media/image9.wmf){width="0.5416666666666666in"
height="0.20833333333333334in"}.

For a serving cell, and a UE configured with higher layer parameter
*shortTTI*, in case of a collision between a subframe-PUCCH and
slot/subslot-PUCCH in a subframe, the subframe-PUCCH transmission is
dropped. If the slot/subslot-PUCCH coincides with a SR transmission
instance, SR that was prepared as part of the subframe-PUCCH
transmission is transmitted on the slot/subslot-PUCCH in case SR is not
already prepared for the slot/subslot-PUCCH. Otherwise, the SR that was
prepared as part of the subframe-PUCCH transmission is not transmitted
on that slot/subslot-PUCCH. The UE shall transmit the HARQ-ACK response
associated with the subframe-PUCCH using the slot/subslot-PUCCH (as
defined in Clause 7.3). The UE shall apply spatial HARQ-ACK bundling on
the HARQ-ACK response associated with the subframe-PUCCH

\- in case subslot-PUCCH is used

\- in case slot-PUCCH is used if bundling is configured for the cell
(see *spatialBundlingPUCCH* in 3GPP TS 36.331 \[11\]).

For a serving cell, and a UE configured with higher layer parameter
*shortTTI*, the UE is not expected to transmit subframe-PUCCH in a given
subframe if the UE detects PDCCH/SPDCCH with uplink DCI format 7-0A/7-0B
corresponding to a slot/subslot-PUSCH transmission in the same subframe.
In this case, the UE shall transmit the HARQ-ACK response associated
with the subframe-PUCCH on slot/subslot-PUSCH (as defined in Clause
7.3). The UE shall apply spatial HARQ-ACK bundling on the HARQ-ACK
response associated with the subframe-PUCCH

\- in case subslot-PUSCH is used

\- in case slot-PUSCH is used if bundling is configured for the cell
(see *spatialBundlingPUCCH* in 3GPP TS 36.331 \[11\]).

For a UE configured with more than one serving cell and not capable of
simultaneous transmission of different uplink signal durations to
different serving cells as indicated by UE capability
*simultaneousTx-differentTx-duration*, in case of a collision between

\- a slot-PUCCH of first serving cell and a
subframe-PUSCH/PUCCH/SRS/PRACH of second serving cell or

\- a subslot-PUCCH of first serving cell and a
subframe/slot-PUSCH/PUCCH/SRS/PRACH of second serving cell

the uplink transmission(s) of the second serving cell are dropped.

For a UE configured with higher layer parameter *ul-STTI-Length*, and
not configured with simultaneous PUSCH and PUCCH transmissions, the UE
is not expected to transmit PUCCH and demodulation reference signal for
PUSCH in a slot/subslot in which the UE does not transmit PUSCH.

*For a serving cell,* and a UE configured with higher layer parameter
*ul-STTI-Length*, *if the UE is configured with* simultaneous PUSCH and
PUCCH transmission, *in case subframe-PUSCH and/or subframe-PUCCH
collide(s) with slot/subslot-PUCCH, the UE is not expected to transmit
either of subframe-PUSCH or subframe-PUCCH.* The UE shall transmit the
HARQ-ACK response corresponding to the subframe-PUSCH/PUCCH using the
slot/subslot-PUCCH (as defined in Clause 7.3).

*For a serving cell,* and a UE configured with higher layer parameter
*ul-STTI-Length*, *if the UE is configured with* simultaneous PUSCH and
PUCCH transmission, in case subframe-PUSCH and/or subframe-PUCCH
collide(s) with slot/subslot-PUSCH and slot/subslot-PUCCH, the UE is not
expected to transmit either of subframe-PUSCH or subframe-PUCCH. The UE
shall transmit the HARQ-ACK response corresponding to the
subframe-PUSCH/PUCCH using the slot/subslot-PUCCH (as defined in Clause
7.3).

For FDD or FDD-TDD and primary cell frame structure 1, with two
configured serving cells and PUCCH format 1b with channel selection or
for FDD with one or more configured serving cells, and the higher layer
parameters *dl-STTI-Length=\'subslot\'* and *ul-STTI-Length=\'slot\'*,
and PUCCH format 3 and without PUCCH format 4 configured, or for FDD
with two or more configured serving cells and PUCCH format 3 and without
PUCCH format 4/5 configured,
![](media/image11.wmf){width="1.3229166666666667in"
height="0.5208333333333334in"} where
![](media/image12.wmf){width="0.34375in" height="0.22916666666666666in"}
is the number of configured cells and
![](media/image13.wmf){width="0.5in" height="0.2604166666666667in"} is
the number of transport blocks or the SPS release PDCCH/EPDCCH/SPDCCH,
if any, received in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15in"}, and in

\- subframe ![](media/image15.wmf){width="0.3854166666666667in"
height="0.1875in"}

\- slot ![](media/image15.wmf){width="0.3854166666666667in"
height="0.1875in"}

\- any of the subslots given in Table 10.1-1 according to the value of
![](media/image16.wmf){width="0.25in" height="0.26666666666666666in"}
when the slot-PUCCH is transmitted in subframe *m*.

Table 10.1-1: Set of subslot numbers for
![](media/image17.wmf){width="0.4083333333333333in"
height="0.26666666666666666in"} calculation

+----------------------+----------------------+----------------------+
| ![](media/im         | Slot number          | Subslot numbers      |
| age18.wmf){width="0. |                      |                      |
| 24166666666666667in" |                      |                      |
| height="0.2          |                      |                      |
| 6666666666666666in"} |                      |                      |
+======================+======================+======================+
| 4                    | ![](media/image19.   | {0,1,2} in subframe  |
|                      | wmf){width="0.875in" | *m-1*                |
|                      | height="0.25in"}     |                      |
+----------------------+----------------------+----------------------+
|                      | ![](media/image20    | {3,4,5} in subframe  |
|                      | .wmf){width="0.85in" | *m-1*                |
|                      | height="0.25in"}     |                      |
+----------------------+----------------------+----------------------+
| 6                    | ![](media/image21.   | {0} in subframe      |
|                      | wmf){width="0.875in" | *m-1*                |
|                      | height="0.25in"}     |                      |
|                      |                      | {4,5} in subframe    |
|                      |                      | *m-2*                |
+----------------------+----------------------+----------------------+
|                      | ![](media/image22    | {1,2,3} in subframe  |
|                      | .wmf){width="0.85in" | *m-1*                |
|                      | height="0.25in"}     |                      |
+----------------------+----------------------+----------------------+
| 8                    | ![](media/image23.   | {2,3,4} in subframe  |
|                      | wmf){width="0.875in" | *m-2*                |
|                      | height="0.25in"}     |                      |
+----------------------+----------------------+----------------------+
|                      | ![](media/image24    | {0,1} in subframe    |
|                      | .wmf){width="0.85in" | *m-1*                |
|                      | height="0.25in"}     |                      |
|                      |                      | {5} in subframe      |
|                      |                      | *m-2*                |
+----------------------+----------------------+----------------------+

For TDD and a UE not configured with the parameter
*EIMTA-MainConfigServCell-r12* for any serving cell, if a UE is
configured with one serving cell, or the UE is configured with more than
one serving cell and the UL/DL configurations of all serving cells are
the same, then

\- For TDD with two configured serving cells and PUCCH format 1b with
channel selection and a subframe *n* with *M = 1*, or for TDD UL/DL
configuration 0 and PUCCH format 3,
![](media/image25.wmf){width="1.6041666666666667in"
height="0.5208333333333334in"}, where
![](media/image26.wmf){width="0.5in" height="0.2708333333333333in"}is
the number of transport blocks or the SPS release PDCCH/EPDCCH/SPDCCH,
if any, received in subframe/slot
![](media/image27.wmf){width="0.3854166666666667in" height="0.1875in"}
in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15625in"}, where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"}, and *M* is the number of elements in
*K*.

\- For TDD UL/DL configurations 1-6 and PUCCH format 3 and without PUCCH
format 4/5 configured, or for TDD with two configured serving cells and
PUCCH format 1b with channel selection and *M* = 2,
![](media/image29.wmf){width="3.5729166666666665in" height="0.5625in"}
where ![](media/image30.wmf){width="0.40625in" height="0.28125in"} is
the ![](media/image31.wmf){width="0.3020833333333333in"
height="0.2604166666666667in"} in serving cell
![](media/image14.wmf){width="0.125in" height="0.15625in"},
![](media/image32.wmf){width="0.4375in" height="0.28125in"} is the
![](media/image33.wmf){width="0.34375in" height="0.2604166666666667in"}
in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15625in"}, and
![](media/image34.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is the number of HARQ-ACK bits
corresponding to the configured DL transmission mode on serving cell
![](media/image14.wmf){width="0.125in" height="0.15625in"}. In case
spatial HARQ-ACK bundling is applied,
![](media/image35.wmf){width="0.5729166666666666in"
height="0.2604166666666667in"} and ![](media/image36.wmf){width="0.5in"
height="0.2708333333333333in"} is the number of PDCCH/EPDCCH or PDSCH
without a corresponding PDCCH/EPDCCH received in subframe
![](media/image27.wmf){width="0.3854166666666667in" height="0.1875in"}
and serving cell![](media/image14.wmf){width="0.125in"
height="0.15625in"}, where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"} and *M* is the number of elements in
*K*. In case spatial HARQ-ACK bundling is not applied,
![](media/image26.wmf){width="0.5in" height="0.2708333333333333in"}is
the number of transport blocks received or the SPS release PDCCH/EPDCCH
received in subframe ![](media/image27.wmf){width="0.3854166666666667in"
height="0.1875in"} in serving cell
![](media/image14.wmf){width="0.125in" height="0.15625in"}, where
![](media/image28.wmf){width="0.375in" height="0.17708333333333334in"}
and *M* is the number of elements in *K*.
![](media/image30.wmf){width="0.40625in" height="0.28125in"}=0 if no
transport block or SPS release PDCCH/EPDCCH is detected in subframe(s)
![](media/image27.wmf){width="0.3854166666666667in" height="0.1875in"}
in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15625in"}, where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"}.

\- For TDD with two configured serving cells and PUCCH format 1b with
channel selection and *M* = 3 or 4,
![](media/image37.wmf){width="0.65625in" height="0.2604166666666667in"}
if UE receives PDSCH or PDCCH/EPDCCH indicating downlink SPS release
only on one serving cell within subframes
![](media/image27.wmf){width="0.3854166666666667in"
height="0.1875in"},where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"};otherwise
![](media/image38.wmf){width="0.65625in" height="0.2604166666666667in"}.

For TDD if the UE is configured with more than one serving cell and if
at least two serving cells have different UL/DL configurations, or if
the UE is configured with the parameter *EIMTA-MainConfigServCell-r12*
for at least one serving cell, or for FDD-TDD and primary cell frame
structure 2, then

\- For PUCCH format 3 without PUCCH format 4/5 configured, or for two
configured serving cells and PUCCH format 1b with channel selection and
![](media/image39.wmf){width="0.3958333333333333in" height="0.15625in"}
(defined in Clause 10.1.3.2.1 for TDD and Clause 10.1.3A for FDD-TDD),
![](media/image29.wmf){width="3.5729166666666665in" height="0.5625in"}
where ![](media/image30.wmf){width="0.40625in" height="0.28125in"} is
the ![](media/image31.wmf){width="0.3020833333333333in"
height="0.2604166666666667in"} in serving cell
![](media/image14.wmf){width="0.125in" height="0.15625in"},
![](media/image32.wmf){width="0.4375in" height="0.28125in"} is the
![](media/image33.wmf){width="0.34375in" height="0.2604166666666667in"}
in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15625in"}, and
![](media/image34.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is the number of HARQ-ACK bits
corresponding to the configured DL transmission mode on serving cell
![](media/image14.wmf){width="0.125in" height="0.15625in"}. In case
spatial HARQ-ACK bundling is applied,
![](media/image35.wmf){width="0.5729166666666666in"
height="0.2604166666666667in"} and ![](media/image36.wmf){width="0.5in"
height="0.2708333333333333in"} is the number of PDCCH/EPDCCH/SPDCCH or
PDSCH without a corresponding PDCCH/EPDCCH/SPDCCH received in
subframe/slot/subslot
![](media/image27.wmf){width="0.3854166666666667in" height="0.1875in"}
and serving cell![](media/image14.wmf){width="0.125in"
height="0.15625in"}, where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"} and
![](media/image40.wmf){width="0.4375in"
height="0.20833333333333334in"}(defined in Clause 7.3.2.2 for TDD and
Clause 7.3.4 for FDD-TDD). In case spatial HARQ-ACK bundling is not
applied, ![](media/image26.wmf){width="0.5in"
height="0.2708333333333333in"}is the number of transport blocks received
or the SPS release PDCCH/EPDCCH received in subframe/slot/subslot
![](media/image27.wmf){width="0.3854166666666667in" height="0.1875in"}
in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15625in"}, where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"} and
![](media/image40.wmf){width="0.4375in"
height="0.20833333333333334in"}(defined in Clause 7.3.2.2 for TDD and
Clause 7.3.4 for FDD-TDD). ![](media/image30.wmf){width="0.40625in"
height="0.28125in"}=0 if no transport block or SPS release
PDCCH/EPDCCH/SPDCCH is detected in subframe(s)
![](media/image27.wmf){width="0.3854166666666667in" height="0.1875in"}
in serving cell ![](media/image14.wmf){width="0.125in"
height="0.15625in"}, where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"} and
![](media/image40.wmf){width="0.4375in"
height="0.20833333333333334in"}(defined in Clause 7.3.2.2 for TDD and
Clause 7.3.4 for FDD-TDD). For a serving cell
![](media/image14.wmf){width="0.125in" height="0.15625in"}, set
![](media/image41.wmf){width="0.9375in" height="0.28125in"}if the
DL-reference UL/DL configuration (defined in Clause 10.2) for serving
cell ![](media/image14.wmf){width="0.125in" height="0.15625in"} is TDD
UL/DL configuration 0,

\- For two configured serving cells and PUCCH format 1b with channel
selection and *M* = 3 or 4 (defined in Clause 10.1.3.2.1 for TDD and
Clause 10.1.3A for FDD-TDD), ![](media/image37.wmf){width="0.65625in"
height="0.2604166666666667in"} if UE receives PDSCH or PDCCH/EPDCCH
indicating downlink SPS release only on one serving cell within
subframes ![](media/image27.wmf){width="0.3854166666666667in"
height="0.1875in"},where ![](media/image28.wmf){width="0.375in"
height="0.17708333333333334in"} and
![](media/image40.wmf){width="0.4375in"
height="0.20833333333333334in"}(defined in Clause 7.3.2.2 for TDD and
Clause 7.3.4 for FDD-TDD); otherwise
![](media/image38.wmf){width="0.65625in" height="0.2604166666666667in"}.

Throughout the following Clauses, subframes are numbered in
monotonically increasing order; if the last subframe of a radio frame is
denoted as ![](media/image42.wmf){width="0.125in" height="0.1875in"},
the first subframe of the next radio frame is denoted as
![](media/image43.wmf){width="0.2916666666666667in" height="0.1875in"}.

Throughout the following Clauses for a non-BL/CE UE, if the UE is
configured with higher layer parameter *shortProcessingTime* and the
corresponding PDCCH with CRC scrambled by C-RNTI is in the UE-specific
search space then for FDD or FDD-TDD primary cell frame structure type 1
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
given by *n1PUCCH-AN-shortPT* else if the UE is configured with higher
layer parameter *n1PUCCH-AN-r11* then
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
given by *n1PUCCH-AN-r11*, else ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"} is given by higher layer parameter
*n1PUCCH-AN .*

### 10.1.1 PUCCH format information

Using the PUCCH formats defined in Clause 5.4.1, 5.4.2, 5.4.2A, 5.4.2B,
5.4.2C, 5.4A.2, 5.4A.3, and 5.4A.4 in \[3\], the following combinations
of UCI on PUCCH are supported:

\- Format 1a for 1-bit HARQ-ACK or in case of FDD or FDD-TDD primary
cell frame structure type 1 for 1-bit HARQ-ACK with positive SR.

\- Format 1b for 2-bit HARQ-ACK or for 2-bit HARQ-ACK with positive SR.

\- Format 1b for up to 4-bit HARQ-ACK with channel selection when the UE
is configured with more than one serving cell or, in the case of TDD,
when the UE is configured with a single serving cell.

\- Format 1 for positive SR.

\- Format 2 for a CSI report when not multiplexed with HARQ-ACK.

\- Format 2a for a CSI report multiplexed with 1-bit HARQ-ACK for normal
cyclic prefix.

\- Format 2b for a CSI report multiplexed with 2-bit HARQ-ACK for normal
cyclic prefix.

\- Format 2 for a CSI report multiplexed with HARQ-ACK for extended
cyclic prefix.

\- For subframe-PUCCH, format 3 for up to 10-bit HARQ-ACK for FDD or
FDD-TDD primary cell frame structure type 1 and for up to 20-bit
HARQ-ACK for TDD and for up to 21 bit HARQ-ACK for FDD-TDD primary cell
frame structure type 2.

\- For subframe-PUCCH, format 3 for up to 11-bit corresponding to 10-bit
HARQ-ACK and 1-bit positive/negative SR for FDD or FDD-TDD and for up to
21-bit corresponding to 20-bit HARQ-ACK and 1-bit positive/negative SR
for TDD and for up to 22-bit corresponding to 21-bit HARQ-ACK and 1-bit
positive/negative SR for FDD-TDD primary cell frame structure type 2.

\- For subframe-PUCCH, format 3 for HARQ-ACK, 1-bit positive/negative SR
(if any) and CSI report(s).

\- For subframe-PUCCH, format 3 for up to 22 bits of UCI including
HARQ-ACK, SR (if any) and periodic CSI report(s) (if any) for UE
configured with Format 4 or Format 5 or for UE configured with more than
5 serving cells..

\- For slot-PUCCH, Format 3 for up to 11-bits of UCI including HARQ-ACK,
SR.

\- For subframe-PUCCH, format 4 for more than 22 bits of UCI including
HARQ-ACK, SR (if any) and periodic CSI report(s) (if any).

\- For slot-PUCCH, Format 4 for more than 11 bits of UCI including
HARQ-ACK, SR (if any) for UE configured with slot-PUCCH format 3

\- For slot-PUCCH, Format 4 for more than 2 bits of UCI including
HARQ-ACK, SR (if any) for UE not configured with slot-PUCCH format 3

\- For subslot-PUCCH, Format 4 for more than 3 bits of UCI including
HARQ-ACK, SR (if any)

\- For subframe-PUCCH, format 5 for more than 22 bits of UCI including
HARQ-ACK, SR (if any) and periodic CSI report(s) (if any).

\- For subframe-PUCCH, format 4 for more than one CSI report, SR (if
any) and HARQ-ACK corresponding to PDSCH transmission only on the
primary cell (if any).

\- For subframe-PUCCH, format 5 for more than one CSI report, SR (if
any) and HARQ-ACK corresponding to PDSCH transmission only on the
primary cell (if any).

For slot-PUCCH only PUCCH formats 1/1a/1b, 3, 4 are supported. For
subslot-PUCCH only PUCCH formats 1/1a/1b, and 4 are supported.

For a UE configured with PUCCH format 3, not configured with PUCCH
format 4/5, and for HARQ-ACK transmission on PUSCH or using PUCCH format
3, or for a UE configured with two serving cells and PUCCH format 1b
with channel selection and HARQ-ACK transmission on PUSCH, or for a non
BL/CE UE configured with one serving cell and PUCCH format 1b with
channel selection according to Tables 10.1.3-5, 10.1.3-6, 10.1.3-7 and
HARQ-ACK transmission on PUSCH or for a UE configured with PUCCH format
4/5 and HARQ-ACK transmission on PUSCH or using PUCCH format 3/4/5:

\- for subframe-PDSCH, if the configured downlink transmission mode for
a serving cell supports up to 2 transport blocks and only one transport
block is received in a subframe, the UE shall generate a NACK for the
other transport block if spatial HARQ-ACK bundling is not applied.

\- if neither PDSCH nor PDCCH/EPDCCH/SPDCCH indicating downlink SPS
release is detected in a subframe/slot/subslot for a serving cell, the
UE shall generate two NACKs when the configured downlink transmission
mode supports up to 2 transport blocks and the UE shall generate a
single NACK when the configured downlink transmission mode supports a
single transport block.

For a UE configured with PUCCH format 4/5 and with a transmission mode
supporting two transport blocks in at least one serving cell, the
HARQ-ACK response for subframe-PDSCH, and for a serving cell configured
with a transmission mode supporting one transport block is associated
with the first codeword. The UE shall generate a NACK for the second
codeword if spatial bundling is not applied, and shall generate the same
HARQ-ACK response for the second codeword as that for the first codeword
if spatial bundling is applied.

For a BL/CE UE configured with PUCCH format 1b with channel selection
according to Tables 10.1.3-5, 10.1.3-6, 10.1.3-7, if neither PDSCH nor
MPDCCH indicating downlink SPS release is detected in a subframe for a
serving cell, the UE shall generate a single NACK.

The scrambling initialization of PUCCH format 2, 2a, 2b, 3, 4 and 5 is
by C-RNTI.

For a non-BL/CE UE that is configured with a single serving cell and is
not configured with PUCCH format 3, in case of collision between a
periodic CSI report and an HARQ-ACK in a same subframe without PUSCH,
the periodic CSI report is multiplexed with HARQ-ACK on PUCCH if the
parameter *simultaneousAckNackAndCQI* provided by higher layers is set
*TRUE*, otherwise the CSI is dropped.

A UE that is configured with PUCCH format 4/5 is not expected to be
configured with different values for *simultaneousAckNackAndCQI-Format3*
and *simultaneousAckNackAndCQI-Format4-Format5*.

For a BL/CE UE,

\- if both *pucch-NumRepetitionCE-format1* and
*pucch-NumRepetitionCE-format2* equal 1, in case of collision among two
or more of a periodic CSI report, an HARQ-ACK and a SR in a same
subframe without PUSCH, the UE behavior follows that of a non-BL/CE UE.

\- if at least one of *pucch-NumRepetitionCE-format1* and
*pucch-NumRepetitionCE-format2* is larger than 1, in case of collision
among two or more of a periodic CSI report, an HARQ-ACK, and a SR in a
same subframe without PUSCH, the highest priority UCI is transmitted,
where the priority of HARQ-ACK is higher than SR and the priority of SR
is higher than periodic CSI report.

For TDD and for a UE that is configured with a single serving cell and
with PUCCH format 3, in case of collision between a periodic CSI report
and an HARQ-ACK in a same subframe without PUSCH, if the parameter
*simultaneousAckNackAndCQI* provided by higher layers is set *TRUE* or
if the parameter *simultaneousAckNackAndCQI-Format3-r11* provided by
higher layers is set *TRUE*, the periodic CSI report is multiplexed with
HARQ-ACK or dropped as described in Clause 7.3, otherwise the CSI is
dropped.

For FDD or for FDD-TDD and primary cell frame structure type 1 and for a
UE that is configured with more than one serving cell and is not
configured with PUCCH format 4/5, in case of collision between a
periodic CSI report and an HARQ-ACK in a same subframe without PUSCH,

\- if the parameter simultaneousAckNackAndCQI provided by higher layers
is set TRUE and if the HARQ-ACK corresponds to a PDSCH transmission or
PDCCH/EPDCCH indicating downlink SPS release only on the primary cell,

> then the periodic CSI report is multiplexed with HARQ-ACK on PUCCH
> using PUCCH format 2/2a/2b

\- else if the UE is configured with PUCCH format 3 and if the parameter
*simultaneousAckNackAndCQI-Format3-r11* provided by higher layers is set
*TRUE*, and if PUCCH resource is determined according to Clause
10.1.2.2.2, and

\- if the total number of bits in the subframe corresponding to
HARQ-ACKs, SR (if any), and the CSI is not larger than 22 or

\- if the total number of bits in the subframe corresponding to
spatially bundled HARQ-ACKs, SR (if any), and the CSI is not larger than
22

> then the periodic CSI report is multiplexed with HARQ-ACK on PUCCH
> using the determined PUCCH format 3 resource according to \[4\]

\- otherwise,

> CSI is dropped.

For FDD or for FDD-TDD and primary cell frame structure type 1, for a UE
configured with PUCCH format 4 or PUCCH format 5, and if the UE has
HARQ-ACK/SR and periodic CSI reports to transmit in a subframe,

\- if a PUCCH format 3 is determined to transmit the HARQ-ACK/SR
according to Clause 10.1.2.2.3 or 10.1.2.2.4, the UE shall use the
determined PUCCH format 3 for transmission of the HARQ-ACK/SR and
periodic CSI report(s) if the parameter
*simultaneousAckNackAndCQI-Format3-r11* provided by higher layers is set
*TRUE*; otherwise, the UE shall drop the periodic CSI report(s) and
transmit only HARQ-ACK/SR;

\- if a PUCCH format 4 is determined to transmit the HARQ-ACK/SR
according to Clause 10.1.2.2.3 or a PUCCH format 5 is determined to
transmit the HARQ-ACK/SR according to 10.1.2.2.4, the UE shall used the
determined PUCCH format 4 or PUCCH format 5 for transmission of the
HARQ-ACK/SR and periodic CSI report(s) if the parameter
*simultaneousAckNackAndCQI-Format4-Format5-r13* provided by higher
layers is set *TRUE*; otherwise, the UE shall drop the periodic CSI
report(s) and transmit only HARQ-ACK/SR;

\- if there is no PUCCH format 3 or 4 determined to transmit the
HARQ-ACK/SR according to Clause 10.1.2.2.3 and there is no PUCCH format
3 or 5 determined to transmit the HARQ-ACK/SR according to Clause
10.1.2.2.4 and there are more than one periodic CSI report(s) in the
subframe,

\- if the parameter *simultaneousAckNackAndCQI-Format4-Format5-r13*
provided by higher layers is set *TRUE* and if the UE is configured with
a single PUCCH format 4 resource according to higher layer parameter
*format4-MultiCSI-resourceConfiguration*, the PUCCH format 4 resource is
used for transmission of the HARQ-ACK/SR and periodic CSI report(s);

\- if the parameter *simultaneousAckNackAndCQI-Format4-Format5-r13*
provided by higher layers is set *TRUE* and if the UE is configured with
a PUCCH format 5 resource according to higher layer parameter
*format5-MultiCSI-resourceConfiguration*, the PUCCH format 5 resource is
used for transmission of the HARQ-ACK/SR and periodic CSI report(s);

\- if the parameter *simultaneousAckNackAndCQI-Format4-Format5-r13*
provided by higher layers is set *TRUE* and if the UE is configured with
two PUCCH format 4 resources and according to higher layer parameter
*format4-MultiCSI-resourceConfiguration*, if , the PUCCH format 4
resource with the smaller between and is used for transmission of the
HARQ-ACK/SR and periodic CSI report(s); otherwise, the PUCCH format 4
resource with the larger between and is used for transmission of the
HARQ-ACK/SR and periodic CSI report(s), where

\- is the total number of HARQ-ACK bits in the subframe;

\- if there no scheduling request bit in the subframe and otherwise

\- is the total number of CSI report bits in the subframe;

\- is the number of CRC bits;

\- , , is the number of PRBs for and respectively, according to higher
layer parameter *numberOfPRB-format4-r13* according to Table 10.1.1-2;

\- if shortened PUCCH format 4 is used in the subframe and otherwise;
and

\- is the code rate given by higher layer parameter
*maximumPayloadCoderate-r13* according to Table 10.1.1-1*;*

\- otherwise, the UE shall drop the periodic CSI report(s) and transmit
only HARQ-ACK/SR;

\- if there is no PUCCH format 3 or 4 determined to transmit the
HARQ-ACK/SR according to Clause 10.1.2.2.3 and there is no PUCCH format
3 or 5 determined to transmit the HARQ-ACK/SR according to Clause
10.1.2.2.4 and there are only one periodic CSI report in the subframe,

\- if there is no positive SR and the parameter
*simultaneousAckNackAndCQI* provided by higher layers is set *TRUE* and
if the HARQ-ACK corresponds to a PDSCH transmission or PDCCH/EPDCCH
indicating downlink SPS release only on the primary cell, then the
periodic CSI report is multiplexed with HARQ-ACK on PUCCH using PUCCH
format 2/2a/2b

\- else, the UE shall drop the CSI and transmit the HARQ-ACK according
to Clause 10.1.2.2.3 or 10.1.2.2.4 when UE shall transmit HARQ-ACK only
or UE shall drop the CSI and transmit the HARQ-ACK and SR according to
the procedure for FDD with PUCCH format 1a/1b when there is positive SR.

\- If a UE transmits HARQ-ACK/SR and periodic CSI report(s) using either
a PUCCH format 4 or PUCCH format 5 in a subframe

\- if , the UE shall transmit the HARQ-ACK/SR and periodic CSI bits
using the PUCCH format 4 or the PUCCH format 5 ;

\- if , the UE shall select CSI report(s) for transmission together with
HARQ-ACK/SR in ascending order of , where , and are determined according
to Clause 7.2.2; the value of satisfies and , and is the number of CSI
report bits for the *n*th CSI report in ascending order of .

For a UE configured with higher layer parameter *shortTTI,* *if the UE
has subslot-SR and subframe-PUSCH/PUCCH including more than 2 HARQ-ACK
bits either on the same serving cell or on different serving cells in a
subframe when the UE is* not capable of simultaneous transmission of
different uplink signal durations on different serving cells as
indicated by the UE capability *simultaneousTx-differentTx-duration, and
if the UE does not have HARQ-ACK bits corresponding to any subslot-PDSCH
in the subslot in which the subslot-SR to be transmitted:*

\- if the UE is configured with a single subslot-PUCCH format 4 resource
according to the higher layer parameter
*format4-MultiResource-subslotConfiguration, the UE shall multiplex
HARQ-ACK and SR bits on* *.*

*- if the UE is configured with two subslot-PUCCH format 4 resources*
*and* *according to the higher layer parameter
format4-MultiResource-subslotConfiguration, if* , the subslot-PUCCH
format 4 resource with the smaller between and is used for transmission
of the HARQ-ACK/SR; otherwise, the subslot-PUCCH format 4 resource with
the larger between and is used for transmission of the HARQ-ACK/SR,
where

\- is the total number of HARQ-ACK bits on the subframe-PUSCH/PUCCH;

\-

\- is the number of CRC bits;

\- , , is the number of PRBs for and respectively, according to higher
layer parameter *n4numberOfPRBSubslot* according to Table 10.1.1-2;

\- is the code rate given by higher layer parameter
n4*maxCoderateSubsloPUCCHt-r15* according to Table 10.1.1-1*;*

For a UE configured with higher layer parameter *shortTTI, if the UE has
slot-SR and subframe-PUSCH/PUCCH including more than 2 HARQ-ACK bits
either on the same serving cell or on different serving cells when the
UE is* not capable of simultaneous transmission of different uplink
signal durations on different serving cells as indicated by the UE
capability *simultaneousTx-differentTx-duration, and if the UE does not
have HARQ-ACK bits corresponding to any subslot/slot-PDSCH in the slot
in which the slot-SR to be transmitted:*

\- if the UE is either not configured with a slot-PUCCH format 4
according to the higher layer parameter
*format4-MultiResource-slotConfiguration,* or the number of HARQ-ACK and
SR bits is smaller than or equal to 11 bits, *the UE shall multiplex
HARQ-ACK and SR bits on slot-PUCCH format 3 resource* .

\- if the UE is configured with a single PUCCH format 4 resource
according to the higher layer parameter
*format4-MultiResource-slotConfiguration,* and if either the UE is not
configured with a slot-PUCCH resource *or the number of HARQ-ACK and SR
bits is larger than 11 bits, the UE shall multiplex HARQ-ACK and SR bits
on* *.*

*- if the UE is not configured with* a slot-PUCCH resource *or if the
number of HARQ-ACK and SR bits is larger than 11 bits, and if the UE is
configured with two slot-PUCCH format 4 resources* *and* *according to
the higher-layer parameter format4-MultiResource-slotConfiguration, if*
, the slot-PUCCH format 4 resource with the smaller between and is used
for transmission of the HARQ-ACK/SR; otherwise, the slot-PUCCH format 4
resource with the larger between and is used for transmission of the
HARQ-ACK/SR, where

\- is the total number of HARQ-ACK bits on the subframe-PUSCH/PUCCH;

\-

\- is the number of CRC bits;

\- , , is the number of PRBs for and respectively, according to higher
layer parameter *n4numberOfPRB* according to Table 10.1.1-2;

\- if shortened slot-PUCCH format 4 is used and otherwise; and

\- is the code rate given by higher layer parameter
n4*maxCoderateSlotPUCCH-r15* according to Table 10.1.1-1*;*

For TDD or for FDD-TDD and primary cell frame structure type 2 and for a
UE that is configured with more than one serving cell, in case of
collision between a periodic CSI report and an HARQ-ACK in a same
subframe without PUSCH, if the parameter *simultaneousAckNackAndCQI*
provided by higher layers is set *TRUE* or if the parameter
*simultaneousAckNackAndCQI-Format3-r11* provided by higher layers is set
*TRUE* or if the parameter
*simultaneousAckNackAndCQI-Format4-Format5-r13* provided by higher
layers is set *TRUE*, the periodic CSI report is multiplexed with
HARQ-ACK or dropped as described in Clause 7.3, otherwise the CSI is
dropped.

In case of collision between a periodic CSI report and a HARQ-ACK in a
same subframe with PUSCH, the periodic CSI is multiplexed with the
HARQ-ACK in the PUSCH transmission in that subframe if the UE is not
configured by higher layers for simultaneous PUCCH and PUSCH
transmissions or if the UE is provided by higher layers a parameter
*simultaneousAckNackAndCQI-Format4-Format5-r13* that is set *FALSE*. If
the UE is configured by higher layers for simultaneous PUCCH and PUSCH
transmissions, and if the UE does not determine PUCCH format 4/5 for
periodic CSI and HARQ-ACK transmission or if the UE is provided by
higher layers a parameter
*simultaneousAckNackAndCQI-Format4-Format5-r13* that is set *FALSE*, the
HARQ-ACK is transmitted in the PUCCH and the periodic CSI is transmitted
in the PUSCH (other than a LAA SCell). If the UE is configured by higher
layers for simultaneous PUCCH and PUSCH transmissions and if the UE
determines PUCCH format 4/5 for periodic CSI and HARQ-ACK transmission
and if the UE is provided by higher layers a parameter
*simultaneousAckNackAndCQI-Format4-Format5-r13* that is set *TRUE*, the
periodic CSI and HARQ-ACK is transmitted in PUCCH format 4/5.

In case of collision between a periodic CSI report and a HARQ-ACK in a
same subframe with PUSCH and if an aperiodic CSI report is not triggered
for the same subframe, and if a UE is transmitting PUSCH only on LAA
SCell(s), the HARQ-ACK and periodic CSI transmission follows the
procedure for the case of collision between a periodic CSI report and a
HARQ-ACK in the same subframe without PUSCH.

For a BL/CE UE, in case of collision between a UCI and a PUSCH
transmission in a same subframe, if the number of PUCCH repetitions
defined for the UCI in \[3\] is larger than 1 or if the indicated PUSCH
repetition number in DCI format 6-0A/6-0B is larger than 1 or if the
PUSCH resource assignment is using uplink resource allocation type 5,
the PUSCH transmission is dropped in that subframe.

For a BL/CE UE in half-duplex FDD operation, in case of collision
between a PUCCH format 2 transmission including half-duplex guard
subframe and a PDSCH reception with repetitions, the PUCCH format 2
transmission is dropped if:

\- the PUCCH is transmitted starting in subframe *n*, and the MPDCCH
scheduling the PDSCH ends in subframe *k*, with *n-k*â¥*4*, or

\- the PDSCH is semi-statically scheduled.

For a BL/CE UE, in case of collision between at least one physical
resource block to be used for transmission of UCI on PUCCH (defined in
\[3\]) and physical resource blocks corresponding to configured PRACH
resources for BL/CE UEs or non-BL/CE UEs (defined in \[3\]) in a same
subframe, the PUCCH is dropped in that subframe.

If a UE is configured with higher layer parameter *shortTTI*, the UE is
not expected to transmit slot-PUCCH in *UpPTS* of the special subframe
in frame structure type 2.

If each of the serving cells configured for the UE has frame structure
type 1, UE procedures for HARQ-ACK feedback are given in Clause 10.1.2.

If each of the serving cells configured for the UE has frame structure
type 2, UE procedures for HARQ-ACK feedback are given in Clause 10.1.3.

If the UE is configured for more than one serving cell, and if the frame
structure type of any two configured serving cells is different, and if
the primary cell is frame structure type 1, UE procedure for HARQ-ACK
feedback is given in Clause 10.1.2A.

If the UE is configured for more than one serving cell, and if the frame
structure type of any two configured serving cells is different, and if
the primary cell is frame structure type 2, UE procedure for HARQ-ACK
feedback is given in Clause 10.1.3A.

Table 10.1.1-1: code rate corresponding to higher layer parameter
*maximumPayloadCoderate-r13 or n4maxCoderateSlotPUCCH-r15 or
n4maxCoderateSubslotPUCCH-r15*

  ---------------------------------------------------------------------------------------------------------- -----------
  Value of *maximumPayloadCoderate-r13* or *n4maxCoderateSlotPUCCH-r15* or *n4maxCoderateSubslotPUCCH-r15*   Code rate
                                                                                                             
  0                                                                                                          0.08
  1                                                                                                          0.15
  2                                                                                                          0.25
  3                                                                                                          0.35
  4                                                                                                          0.45
  5                                                                                                          0.60
  6                                                                                                          0.80
  7                                                                                                          Reserved
  ---------------------------------------------------------------------------------------------------------- -----------

Table 10.1.1-2: Number of PRBs for PUCCCH format 4 corresponding to
higher layer parameter *numberOfPRB-format4-r13 or n4numberOfPRBSubslot*
or *n4numberOfPRB*

  ----------------------------------------------------------------------------------------- ----------
  **Value of *numberOfPRB-format4-r13 or n4numberOfPRBSubslot* *or*** ***n4numberOfPRB***   
                                                                                            
  0                                                                                         1
  1                                                                                         2
  2                                                                                         3
  3                                                                                         4
  4                                                                                         5
  5                                                                                         6
  6                                                                                         8
  7                                                                                         Reserved
  ----------------------------------------------------------------------------------------- ----------

If a UE is configured with more than 5 serving cells and is configured
with PUCCH format 3 and not configured with PUCCH format 4/5:

\- The UE can assume that the total number of bits in a given

\- subframe corresponding to HARQ-ACK (if any), SR (if any), and
periodic CSI (if any) is not larger than 22.

\- slot corresponding to HARQ-ACK (if any), SR (if any) is not larger
than 11.

\- For calculating the HARQ-ACK bits to be transmitted, the UE shall
follow the procedure in clauses 10.1.2.2.3, 10.1.2A, 10.1.3.2.3, 10.1.3A
by assuming that PUCCH format 4 is configured.

### 10.1.2 FDD HARQ-ACK feedback procedures

For FDD and for a UE not configured with PUCCH format 4/5 and
transmitting HARQ-ACK using PUCCH format 1b with channel selection or
PUCCH format 3, the UE shall determine the number of HARQ-ACK bits,
![](media/image95.wmf){width="0.125in" height="0.13541666666666666in"},
based on the number of configured serving cells and the downlink
transmission modes configured for each serving cell. The UE shall use
two HARQ-ACK bits for a serving cell configured with a downlink
transmission mode that support up to two transport blocks; and one
HARQ-ACK bit otherwise.

If a UE is configured with higher layer parameters *shortTTI,
codebooksizeDetermination= cc*, and *codebooksizeDeterminationsSTTI= cc*
for a PUCCH group and transmitting slot/subslot-PUCCH, the UE shall
determine the number of HARQ-ACK bits,
![](media/image95.wmf){width="0.125in" height="0.13541666666666666in"},
based on the number of configured serving cells for subframe-PDSCH,
number of configured serving cells for slot/subslot-PDSCH and the
downlink transmission modes configured for each serving cell.

A UE that supports aggregating at most 2 serving cells with frame
structure type 1 shall use PUCCH format 1b with channel selection for
transmission of HARQ-ACK corresponding to subframe-PDSCH when configured
with more than one serving cell with frame structure type 1.

A UE that supports aggregating more than 2 serving cells with frame
structure type 1 is configured by higher layers to use either PUCCH
format 1b with channel selection or PUCCH format 3/4/5 for transmission
of HARQ-ACK corresponding to subframe-PDSCH when configured with more
than one serving cell with frame structure type 1.

The FDD HARQ-ACK feedback procedure for one configured serving cell is
given in Clause 10.1.2.1 and procedures for more than one configured
serving cell are given in Clause 10.1.2.2.

#### 10.1.2.1 FDD HARQ-ACK procedure for one configured serving cell

HARQ-ACK transmissionÂ on two antenna ports
![](media/image96.wmf){width="0.8125in" height="0.20833333333333334in"}
is supported for PUCCH format 1a/1b.

For FDD and one configured serving cell, the UE shall use PUCCH resource
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* for PUCCH
format 1a/1b \[3\], where

-   for a PDSCH transmission indicated by the detection of a
    corresponding PDCCH in subframe , or for a PDCCH indicating downlink
    SPS release (defined in Clause 9.2) in subframe , the UE shall use
    ![](media/image100.wmf){width="1.5625in"
    height="0.2708333333333333in"} for antenna port
    ![](media/image101.wmf){width="0.19791666666666666in"
    height="0.2604166666666667in"}, where
    ![](media/image102.wmf){width="0.3125in"
    height="0.20833333333333334in"} is the number of the first CCE (i.e.
    lowest CCE index used to construct the PDCCH) used for transmission
    of the corresponding DCI assignment and
    ![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"}
    is configured by higher layers. For two antenna port transmission
    the PUCCH resource for antenna port
    ![](media/image103.wmf){width="0.1875in"
    height="0.22916666666666666in"} is given by
    ![](media/image104.wmf){width="1.7708333333333333in"
    height="0.2708333333333333in"}.

-   for a non-BL/CE UE, and for a PDSCH transmission on the primary cell
    where there is not a corresponding PDCCH/EPDCCH detected in subframe
    ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"}, the value of
    ![](media/image106.wmf){width="0.4791666666666667in"
    height="0.2708333333333333in"} is determined according to higher
    layer configuration and Table 9.2-2. For a UE configured for two
    antenna port transmission, a PUCCH resource value in Table 9.2-2
    maps to two PUCCH resources with the first PUCCH resource
    ![](media/image107.wmf){width="0.4583333333333333in"
    height="0.2708333333333333in"} for antenna port
    ![](media/image108.wmf){width="0.19791666666666666in"
    height="0.20833333333333334in"} and the second PUCCH resource
    ![](media/image109.wmf){width="0.4583333333333333in"
    height="0.2708333333333333in"} for antenna port
    ![](media/image110.wmf){width="0.19791666666666666in"
    height="0.20833333333333334in"}, otherwise, the PUCCH resource value
    maps to a single PUCCH resource
    ![](media/image111.wmf){width="0.4583333333333333in"
    height="0.2708333333333333in"} for antenna port
    ![](media/image108.wmf){width="0.19791666666666666in"
    height="0.20833333333333334in"}.

-   for a PDSCH transmission indicated by the detection of a
    corresponding EPDCCH in subframe
    ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"} , or for an EPDCCH indicating
    downlink SPS release (defined in Clause 9.2) in subframe
    ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"} , the UE shall use

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission\
![](media/image113.wmf){width="2.2291666666666665in"
height="0.2708333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission\
![](media/image114.wmf){width="3.1770833333333335in"
height="0.5104166666666666in"}

> for antenna port ![](media/image101.wmf){width="0.19791666666666666in"
> height="0.2604166666666667in"}, where
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"},
> ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1, ![](media/image117.wmf){width="0.59375in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image119.wmf){width="0.16666666666666666in"
> height="0.19791666666666666in"}is determined from the antenna port
> used for localized EPDCCH transmission which is described in Clause
> 6.8A.5 in \[3\]. For two antenna port transmission the PUCCH resource
> for antenna port ![](media/image103.wmf){width="0.1875in"
> height="0.22916666666666666in"} is given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission\
![](media/image120.wmf){width="2.4375in" height="0.2708333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission\
![](media/image121.wmf){width="3.4270833333333335in"
height="0.5104166666666666in"}

-   for a BL/CE UE, and for a PDSCH on the primary cell where there is
    not a corresponding MPDCCH detected and subframe is the last
    subframe in which the PDSCH is transmitted, the value of is
    determined according to higher layer configuration and Table 9.2-2.

-   for a PDSCH transmission indicated by the detection of a
    corresponding MPDCCH, or for an MPDCCH indicating downlink SPS
    release (defined in Clause 9.2) where subframe is the last subframe
    in which the PDSCH is transmitted, or for HD-FDD HARQ-ACK bundling,
    subframe is the last subframe in which the PDSCH is detected, the UE
    shall use

\- if MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

\- if MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

> for antenna port ![](media/image101.wmf){width="0.19791666666666666in"
> height="0.2604166666666667in"}, where
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the MPDCCH) used for transmission
> of the corresponding DCI assignment in MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}, or for HD-FDD HARQ-ACK bundling
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the MPDCCH) in the last detected
> MPDCCH used for transmission of the corresponding DCI assignment in
> MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"},
> ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding MPDCCH as
> given in Table 10.1.2.1-1, for MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"} is configured

\- by the higher layer parameter *n1PUCCH-AN-r13*, if configured;
otherwise:

\- by the higher layer parameter *n1PUCCH-AN-InfoList-r13* for the
corresponding CE level*,*

![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for MPDCCH-PRB-set
![](media/image112.wmf){width="0.125in" height="0.16666666666666666in"}
is given in Clause 6.8A.1 in \[3\] where the same
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"} value is used for each subframe
containing a repeat of a MPDCCH transmission,
![](media/image119.wmf){width="0.16666666666666666in"
height="0.19791666666666666in"} is determined from the antenna port used
for localized MPDCCH transmission which is described in Clause 6.8A.5 in
\[3\]. When an MPDCCH-PRB-set
![](media/image127.wmf){width="0.16666666666666666in"
height="0.1875in"}is 2+4, following procedures is applied.

\- if the last detected MPDCCH is located within 2 PRB set, is obtained
by above procedure.

\- if the last detected MPDCCH is located within 4 PRB set, is the sum
between and the value obtained by above procedure.

\- if the last detected MPDCCH is MPDCCH format 5, is obtained by the
above procedure with = 0.

Table 10.1.2.1-1: Mapping of ACK/NACK Resource offset Field\
in DCI format 1A/1B/1D/1/2A/2/2B/2C/2D/6-1A/6-1B to
![](media/image131.wmf){width="0.34375in"
height="0.22916666666666666in"}values

  --------------------------------------------------------------------------------------------------------------------
  ACK/NACK Resource offset field\          ![](media/image131.wmf){width="0.34375in" height="0.22916666666666666in"}
  in DCI format 1A/1B/1D/1/2A/2/2B/2C/2D   
  ---------------------------------------- ---------------------------------------------------------------------------
  0                                        0

  1                                        -1

  2                                        -2

  3                                        2
  --------------------------------------------------------------------------------------------------------------------

For slot-PUCCH, and for transmission of up to 2 HARQ-ACK bits in slot ,
when at least one HARQ-ACK bit is sent in response to a PDSCH
transmission indicated by the detection of a corresponding PDCCH/SPDCCH
with DCI format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or a
semi-persistently scheduled slot-PDSCH transmission or for a
PDCCH/SPDCCH indicating downlink SPS release in

\- slot or

\- when scheduling request is sent in slot on a resource configured by
higher layer parameter *sr-slotSPUCCH-IndexFH or
sr-slotSPUCCH-IndexNoFH*,

the UE shall use PUCCH resource
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK in slot
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* for
slot-PUCCH transmission using format 1a/1b \[3\], where the value of
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.1-2. For a UE configured for two antenna
port transmission for PUCCH format 1a/1b, a PUCCH resource value in
Table 10.1.2.1-2 maps to two PUCCH resources with the first PUCCH
resource ![](media/image134.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image135.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image136.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

Table 10.1.2.1-2: PUCCH Resource Value for HARQ-ACK Resource for
slot-PUCCH

+----------------------------------+----------------------------------+
| Value of \'SPUCCH resource       | or                               |
| indication\' field               |                                  |
|                                  |                                  |
| as defined in clause 5.3.3.1.17  |                                  |
| of \[4\]                         |                                  |
+----------------------------------+----------------------------------+
| \'00\'                           | The 1^st^ PUCCH resource value   |
|                                  | configured by the higher layers  |
+----------------------------------+----------------------------------+
| \'01\'                           | The 2^nd^ PUCCH resource value   |
|                                  | configured by the higher layers  |
+----------------------------------+----------------------------------+
| \'10\'                           | The 3^rd^ PUCCH resource value   |
|                                  | configured by the higher layers  |
+----------------------------------+----------------------------------+
| \'11\'                           | The 4^th^ PUCCH resource value   |
|                                  | configured by the higher layers  |
+----------------------------------+----------------------------------+
| NOTE: are respectively           |                                  |
| determined from the first and    |                                  |
| second PUCCH resource lists      |                                  |
| configured by                    |                                  |
| *n1SlotSPUCCH-hoppingAN-List* in |                                  |
| \[11\] for slot-PUCCH when       |                                  |
| hopping is enabled, and by       |                                  |
| *n1SlotSPUCCH-nohoppingAN-List*  |                                  |
| in \[11\] for slot-PUCCH when    |                                  |
| hopping is disabled.             |                                  |
+----------------------------------+----------------------------------+

For subslot-PUCCH, and for transmission of up to 2 HARQ-ACK bits, in
subslot , when at least one HARQ-ACK bit is sent in response to a PDSCH
transmission indicated by the detection of a corresponding PDCCH/SPDCCH
with DCI format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G in subslot or a
semi-persistently scheduled subslot-PDSCH transmission in subslot
![](media/image141.wmf){width="0.5in" height="0.25833333333333336in"} or
for a PDCCH/SPDCCH indicating downlink SPS release in subslot or when
scheduling request is sent in subslot on a resource configured by higher
layer parameter *sr-subslotSPUCCH-Resource,* the UE shall use PUCCH
resource for transmission of HARQ-ACK in subslot
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* for
subslot-PUCCH transmission using format 1a/1b \[3\], where

\- for a PDSCH transmission indicated by the detection of a
corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G in subslot or a semi-persistently
scheduled subslot-PDSCH transmission in
subslot![](media/image141.wmf){width="0.5in"
height="0.25833333333333336in"} or for a PDCCH/SPDCCH indicating
downlink SPS release in subslot , PUCCH resource group is determined by
higher layer configuration and Table 10.1.2.1-3, and is determined
according to higher layer configuration and Table 10.1.2.1-4 for PUCCH
format 1a, and according to higher layer configuration and Table
10.1.2.1-5 for PUCCH format 1b.

Table 10.1.2.1-3: PUCCH Resource Group Value for HARQ-ACK Resource for
PUCCH

  ------------------------------------------------- ----------------------------------------------------------------------
  Value of \'SPUCCH\' resource indication field\'   PUCCH resource group
  \'00\'                                            The 1st PUCCH resource group value configured by the higher layers
  \'01\'                                            The 2^nd^ PUCCH resource group value configured by the higher layers
  \'10\'                                            The 3^rd^ PUCCH resource group value configured by the higher layers
  \'11\'                                            The 4^th^ PUCCH resource group value configured by the higher layers
  ------------------------------------------------- ----------------------------------------------------------------------

Table 10.1.2.1-4: Transmission of Format 1a HARQ-ACK for subslot-PUCCH

  HARQ-ACK   
  ---------- -------------------------------------------------------------------------------------------------------
  NACK       The 1st PUCCH resource value configured by the higher layers for the indicated PUCCH resource group
  ACK        The 2^nd^ PUCCH resource value configured by the higher layers for the indicated PUCCH resource group

Table 10.1.2.1-5: Transmission of Format 1b HARQ-ACK for subslot-PUCCH

  HARQ-ACK(0)   HARQ-ACK(1)   
  ------------- ------------- -------------------------------------------------------------------------------------------------------
  NACK          NACK          The 1^st^ PUCCH resource value configured by the higher layers for the indicated PUCCH resource group
  ACK           NACK          The 2^nd^ PUCCH resource value configured by the higher layers for the indicated PUCCH resource group
  NACK          ACK           The 3^rd^ PUCCH resource value configured by the higher layers for the indicated PUCCH resource group
  ACK           ACK           The 4^th^ PUCCH resource value configured by the higher layers for the indicated PUCCH resource group

#### 10.1.2.2 FDD HARQ-ACK procedures for more than one configured serving cell

The FDD HARQ-ACK feedback procedures for more than one configured
serving cell are either based on a PUCCH format 1b with channel
selection HARQ-ACK procedure as described in Clause 10.1.2.2.1 or a
PUCCH format 3 HARQ-ACK procedure as described in Clause 10.1.2.2.2 or a
PUCCH format 4 HARQ-ACK procedure as described in Clause 10.1.2.2.3 or a
PUCCH format 5 HARQ-ACK procedure as described in Clause 10.1.2.2.4.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 3.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 1b with
channel selection and FDD with two configured serving cells.

##### 10.1.2.2.1 PUCCH format 1b with channel selection HARQ-ACK procedure

For two configured serving cells and PUCCH format 1b with channel
selection, the UE shall transmit
![](media/image146.wmf){width="0.40625in" height="0.15625in"} on PUCCH
resource ![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for
![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"}mapped to antenna port *p* using PUCCH
format 1b where

\- ![](media/image147.wmf){width="1.0833333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image101.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"} where
![](media/image148.wmf){width="0.5in" height="0.2708333333333333in"} is
selected from ![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources,
![](media/image150.wmf){width="0.5416666666666666in"
height="0.28125in"}where ![](media/image151.wmf){width="0.71875in"
height="0.1875in"}
and![](media/image152.wmf){width="0.6354166666666666in"
height="0.20833333333333334in"}, according to Table 10.1.2.2.1-3, Table
10.1.2.2.1-4, Table 10.1.2.2.1-5 in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}.
HARQ-ACK(*j*) denotes the ACK/NACK/DTX response for a transport block or
SPS release PDCCH/EPDCCH associated with serving cell
![](media/image153.wmf){width="0.10416666666666667in" height="0.125in"},
where the transport block and serving cell for HARQ-ACK(*j*) and
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources are given by Table 10.1.2.2.1-1.

\- ![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} for antenna
port![](media/image155.wmf){width="0.1875in"
height="0.22916666666666666in"}, where
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is selected from
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources,
![](media/image156.wmf){width="0.5416666666666666in"
height="0.28125in"}configured by higher layers where
![](media/image151.wmf){width="0.71875in" height="0.1875in"}
and![](media/image152.wmf){width="0.6354166666666666in"
height="0.20833333333333334in"}, according to Table 10.1.2.2.1-3, Table
10.1.2.2.1-4, Table 10.1.2.2.1-5 by replacing
![](media/image157.wmf){width="0.5in" height="0.2708333333333333in"}with
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"}and replacing
![](media/image158.wmf){width="0.5104166666666666in"
height="0.28125in"}with
![](media/image159.wmf){width="0.5104166666666666in" height="0.28125in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}, when the UE is configured with two
antenna port transmission for PUCCH format 1b with channel selection.

A UE configured with a transmission mode that supports up to two
transport blocks on serving cell,
![](media/image160.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"}, shall use the same HARQ-ACK response
for both the transport blocks in response to a PDSCH transmission with a
single transport block or a PDCCH/EPDCCH indicating downlink SPS release
associated with the serving cell
![](media/image160.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"}.

Table 10.1.2.2.1-1: Mapping of Transport Block and Serving Cell to
HARQ-ACK(*j*)\
for PUCCH format 1b HARQ-ACK channel selection

  A   *HARQ-ACK(j)*                                                 
  --- ------------------- -------------------- -------------------- --------------------
      HARQ-ACK(0)         HARQ-ACK(1)          HARQ-ACK(2)          HARQ-ACK(3)
  2   TB1 Primary cell    TB1 Secondary cell   NA                   NA
  3   TB1 Serving cell1   TB2 Serving cell1    TB1 Serving cell2    NA
  4   TB1 Primary cell    TB2 Primary cell     TB1 Secondary cell   TB2 Secondary cell

The UE shall determine the
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources,
![](media/image161.wmf){width="0.5416666666666666in" height="0.28125in"}
associated with HARQ-ACK(*j*) where
![](media/image162.wmf){width="0.71875in" height="0.1875in"} in Table
10.1.2.2.1-1, according to

-   for a PDSCH transmission indicated by the detection of a
    corresponding PDCCH in subframe
    ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"} on the primary cell or in subframe
    *n-3* if the UE is configured with higher layer parameter
    *shortProcessingTime* and the corresponding PDCCH with CRC scrambled
    by C-RNTI is in the UE-specific search space on the primary cell, or
    for a PDCCH indicating downlink SPS release (defined in Clause 9.2)
    in subframe ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"} on the primary cell, the PUCCH
    resource is ![](media/image163.wmf){width="1.59375in"
    height="0.28125in"}, and for transmission mode that supports up to
    two transport blocks, the PUCCH resource
    ![](media/image164.wmf){width="0.6354166666666666in"
    height="0.28125in"} is given by
    ![](media/image165.wmf){width="1.9166666666666667in"
    height="0.28125in"} where ![](media/image166.wmf){width="0.3125in"
    height="0.2604166666666667in"} is the number of the first CCE used
    for transmission of the corresponding PDCCH and
    ![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"}
    is configured by higher layers.

-   for a PDSCH transmission on the primary cell where there is not a
    corresponding PDCCH/EPDCCH detected in subframe
    ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"}, the value of
    ![](media/image167.wmf){width="0.5416666666666666in"
    height="0.28125in"} is determined according to higher layer
    configuration and Table 9.2-2. For transmission mode that supports
    up to two transport blocks, the PUCCH resource
    ![](media/image168.wmf){width="0.6354166666666666in"
    height="0.28125in"} is given by
    ![](media/image169.wmf){width="1.5208333333333333in"
    height="0.28125in"}

-   for a PDSCH transmission indicated by the detection of a
    corresponding PDCCH/EPDCCH in subframe
    ![](media/image170.wmf){width="0.4375in"
    height="0.2708333333333333in"} on the secondary cell, the value of
    ![](media/image171.wmf){width="0.5416666666666666in"
    height="0.28125in"}, and the value of
    ![](media/image172.wmf){width="0.6354166666666666in"
    height="0.28125in"} for the transmission mode that supports up to
    two transport blocks is determined according to higher layer
    configuration and Table 10.1.2.2.1-2. The TPC field in the DCI
    format of the corresponding PDCCH/EPDCCH shall be used to determine
    the PUCCH resource values from one of the four resource values
    configured by higher layers, with the mapping defined in Table
    10.1.2.2.1-2. For a UE configured for a transmission mode that
    supports up to two transport blocks a PUCCH resource value in Table
    10.1.2.2.1-2 maps to two PUCCH resources
    ![](media/image173.wmf){width="1.3333333333333333in"
    height="0.28125in"}, otherwise, the PUCCH resource value maps to a
    single PUCCH resource
    ![](media/image174.wmf){width="0.5416666666666666in"
    height="0.28125in"}.

-   for a PDSCH transmission indicated by the detection of a
    corresponding EPDCCH in subframe
    ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"} on the primary cell, or for an
    EPDCCH indicating downlink SPS release (defined in Clause 9.2) in
    subframe ![](media/image105.wmf){width="0.3125in"
    height="0.16666666666666666in"} on the primary cell, the PUCCH
    resource is given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image175.wmf){width="2.28125in" height="0.2708333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image176.wmf){width="3.2916666666666665in"
height="0.5104166666666666in"}

> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"},
> ![](media/image177.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1, ![](media/image117.wmf){width="0.59375in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image178.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image179.wmf){width="0.16666666666666666in"
> height="0.19791666666666666in"}is determined from the antenna port
> used for localized EPDCCH transmission which is described in Clause
> 6.8A.5 in \[3\].
>
> For transmission mode that supports up to two transport blocks, the
> PUCCH resource ![](media/image164.wmf){width="0.6354166666666666in"
> height="0.28125in"} is given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image180.wmf){width="2.5833333333333335in"
height="0.2708333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image181.wmf){width="3.5833333333333335in"
height="0.5104166666666666in"}

Table 10.1.2.2.1-2: PUCCH Resource Value for HARQ-ACK Resource for PUCCH

  -------------------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------
  Value of \'TPC command\                                                                                                          ![](media/image182.wmf){width="0.5416666666666666in" height="0.28125in"} or ![](media/image183.wmf){width="1.3333333333333333in" height="0.28125in"}
  for PUCCH\'                                                                                                                      

  \'00\'                                                                                                                           The 1^st^ PUCCH resource value configured by the higher layers

  \'01\'                                                                                                                           The 2^nd^ PUCCH resource value configured by the higher layers

  \'10\'                                                                                                                           The 3^rd^ PUCCH resource value configured by the higher layers

  \'11\'                                                                                                                           The 4^th^ PUCCH resource value configured by the higher layers

  NOTE: ![](media/image173.wmf){width="1.3333333333333333in" height="0.28125in"} are determined from the first and second PUCCH\   
  resource lists configured by *n1PUCCH-AN-CS-List-r10* in \[11\], respectively.                                                   
  -------------------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------

Table 10.1.2.2.1-3: Transmission of Format 1b HARQ-ACK channel selection
for ![](media/image184.wmf){width="0.3645833333333333in"
height="0.15625in"}

  HARQ-ACK(0)   HARQ-ACK(1)   ![](media/image185.wmf){width="0.4583333333333333in" height="0.2708333333333333in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  ------------- ------------- ------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK           ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              1,1
  ACK           NACK/DTX      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}              1,1
  NACK/DTX      ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              0,0
  NACK          NACK/DTX      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  DTX           NACK/DTX      No Transmission                                                                       

Table 10.1.2.2.1-4: Transmission of Format 1b HARQ-ACK channel selection
for ![](media/image189.wmf){width="0.34375in"
height="0.16666666666666666in"}

  HARQ-ACK(0)   HARQ-ACK(1)   HARQ-ACK(2)   ![](media/image190.wmf){width="0.4583333333333333in" height="0.2708333333333333in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  ------------- ------------- ------------- ------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK           ACK           ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              1,1
  ACK           NACK/DTX      ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              1,0
  NACK/DTX      ACK           ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              0,1
  NACK/DTX      NACK/DTX      ACK           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}              1,1
  ACK           ACK           NACK/DTX      ![](media/image192.wmf){width="0.5833333333333334in" height="0.28125in"}              1,1
  ACK           NACK/DTX      NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              1,0
  NACK/DTX      ACK           NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              0,1
  NACK/DTX      NACK/DTX      NACK          ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  NACK          NACK/DTX      DTX           ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  NACK/DTX      NACK          DTX           ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  DTX           DTX           DTX           No Transmission                                                                       

Table 10.1.2.2.1-5: Transmission of Format 1b HARQ-ACK channel selection
for ![](media/image194.wmf){width="0.3645833333333333in"
height="0.15625in"}

  HARQ-ACK(0)   HARQ-ACK(1)   HARQ-ACK(2)   HARQ-ACK(3)   ![](media/image195.wmf){width="0.4583333333333333in" height="0.2708333333333333in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  ------------- ------------- ------------- ------------- ------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK           ACK           ACK           ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              1,1
  ACK           NACK/DTX      ACK           ACK           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}              0,1
  NACK/DTX      ACK           ACK           ACK           ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              0,1
  NACK/DTX      NACK/DTX      ACK           ACK           ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}              1,1
  ACK           ACK           ACK           NACK/DTX      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              1,0
  ACK           NACK/DTX      ACK           NACK/DTX      ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  NACK/DTX      ACK           ACK           NACK/DTX      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}              0,0
  NACK/DTX      NACK/DTX      ACK           NACK/DTX      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}              1,0
  ACK           ACK           NACK/DTX      ACK           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}              1,1
  ACK           NACK/DTX      NACK/DTX      ACK           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}              1,0
  NACK/DTX      ACK           NACK/DTX      ACK           ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}              0,1
  NACK/DTX      NACK/DTX      NACK/DTX      ACK           ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}              0,0
  ACK           ACK           NACK/DTX      NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              1,1
  ACK           NACK/DTX      NACK/DTX      NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              1,0
  NACK/DTX      ACK           NACK/DTX      NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              0,1
  NACK/DTX      NACK          NACK/DTX      NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  NACK          NACK/DTX      NACK/DTX      NACK/DTX      ![](media/image193.wmf){width="0.5833333333333334in" height="0.28125in"}              0,0
  DTX           DTX           NACK/DTX      NACK/DTX      No Transmission                                                                       

##### 10.1.2.2.2 PUCCH format 3 HARQ-ACK procedure

For PUCCH format 3, the UE shall use PUCCH resource
![](media/image197.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} or
![](media/image198.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK in
subframe/slot ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} for
![](media/image199.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* where

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding PDCCH with DCI formats other than DCI
format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G in subframe , or for a PDCCH
indicating downlink SPS release (defined in Clause 9.2) in subframe
![](media/image105.wmf){width="0.3125in" height="0.16666666666666666in"}
on the primary cell, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image200.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with
![](media/image201.wmf){width="1.5625in" height="0.2708333333333333in"}
for antenna port ![](media/image101.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}, where
![](media/image102.wmf){width="0.3125in" height="0.20833333333333334in"}
is the number of the first CCE (i.e. lowest CCE index used to construct
the PDCCH) used for transmission of the corresponding PDCCH and
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers. When two antenna port transmission is
configured for PUCCH format 1a/1b, the PUCCH resource for antenna port
![](media/image202.wmf){width="0.1875in" height="0.22916666666666666in"}
is given by ![](media/image203.wmf){width="1.7708333333333333in"
height="0.2708333333333333in"}.

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding PDCCH/EPDCCH detected in subframe
![](media/image105.wmf){width="0.3125in"
height="0.16666666666666666in"}, the UE shall use PUCCH format 1a/1b and
PUCCH resource ![](media/image204.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image205.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 9.2-2. For a UE configured for two antenna port
transmission for PUCCH format 1a/1b, a PUCCH resource value in Table
9.2-2 maps to two PUCCH resources with the first PUCCH resource
![](media/image134.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image135.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image136.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- for transmission of up to 2 HARQ-ACK bits in slot , when at least one
HARQ-ACK bit is sent in response to a PDSCH transmission indicated by
the detection of a corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or a semi-persistently scheduled
slot/subslot-PDSCH transmission or for a PDCCH/SPDCCH indicating
downlink SPS release in

\- slot or

\- in a subslot that is subslots before slot or

\- when scheduling request is sent in slot on a resource configured by
higher layer parameter *sr-slotSPUCCH-IndexFH or
sr-slotSPUCCH-IndexNoFH*,

the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image204.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.1-2. For a UE configured for two antenna
port transmission for PUCCH format 1a/1b, a PUCCH resource value in
Table 10.1.2.1-2 maps to two PUCCH resources with the first PUCCH
resource ![](media/image134.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image135.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image136.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- for a PDSCH transmission on the secondary cell indicated by the
detection of a corresponding PDCCH/EPDCCH in subframe with DCI formats
other than DCI format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G, the UE shall
use PUCCH format 3 and PUCCH resource
![](media/image207.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image208.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1.\
The TPC field in the DCI format of the corresponding PDCCH/EPDCCH shall
be used to determine the PUCCH resource values from one of the four
resource values configured by higher layers, with the mapping defined in
Table 10.1.2.2.2-1. For a UE configured for two antenna port
transmission for PUCCH format 3, a PUCCH resource value in Table
10.1.2.2.2-1 maps to two PUCCH resources with the first PUCCH resource
![](media/image209.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image210.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image211.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}. A UE shall assume that the same
HARQ-ACK PUCCH resource value is transmitted in each DCI format of the
corresponding secondary cell PDCCH/EPDCCH assignments in a given
subframe.

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding EPDCCH in subframe
![](media/image105.wmf){width="0.3125in"
height="0.16666666666666666in"}, or for a EPDCCH indicating downlink SPS
release (defined in Clause 9.2) in subframe
![](media/image105.wmf){width="0.3125in" height="0.16666666666666666in"}
on the primary cell, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image200.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image113.wmf){width="2.2291666666666665in"
height="0.2708333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image212.wmf){width="3.2291666666666665in"
height="0.5104166666666666in"}

> for antenna port ![](media/image101.wmf){width="0.19791666666666666in"
> height="0.2604166666666667in"}, where
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"},
> ![](media/image213.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1, ![](media/image117.wmf){width="0.59375in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image214.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image215.wmf){width="0.16666666666666666in"
> height="0.19791666666666666in"}is determined from the antenna port
> used for localized EPDCCH transmission which is described in Clause
> 6.8A.5 in \[3\]. When two antenna port transmission is configured for
> PUCCH format 1a/1b, the PUCCH resource for antenna port
> ![](media/image202.wmf){width="0.1875in"
> height="0.22916666666666666in"} is given by.

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image120.wmf){width="2.4375in" height="0.2708333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image216.wmf){width="3.4270833333333335in"
height="0.5104166666666666in"}

Table 10.1.2.2.2-1: PUCCH Resource Value for HARQ-ACK Resource for PUCCH

  ------------------------------------------------------------------------- -------------------------------------------------------------------------------------
  Value of \'TPC command for PUCCH\'\                                       ![](media/image217.wmf){width="0.4583333333333333in" height="0.2708333333333333in"}
  or \'HARQ-ACK resource offset\' or \'SPUCCH resource indication\' field   

  \'00\'                                                                    The 1^st^ PUCCH resource value configured by the higher layers

  \'01\'                                                                    The 2^nd^ PUCCH resource value configured by the higher layers

  \'10\'                                                                    The 3^rd^ PUCCH resource value configured by the higher layers

  \'11\'                                                                    The 4^th^ PUCCH resource value configured by the higher layers
  ------------------------------------------------------------------------- -------------------------------------------------------------------------------------

\- for transmission of 3-11 HARQ-ACK bits on slot-PUCCH when at least
one HARQ-ACK bit is sent in response to a PDSCH transmission indicated
by the detection of a corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or a semi-persistently scheduled
slot/subslot-PDSCH transmission or for a PDCCH/SPDCCH indicating
downlink SPS release in

\- slot or

\- any of the subslots given in Table 10.1-1 according to the value of
![](media/image16.wmf){width="0.25in" height="0.26666666666666666in"}
when the slot-PUCCH is transmitted in subframe *m* or

\- - when scheduling request is sent in slot on a resource configured by
higher layer parameter *sr-slotSPUCCH-IndexFH or
sr-slotSPUCCH-IndexNoFH*,

the UE shall use PUCCH format 3, if configured by higher layers, and
PUCCH resource![](media/image207.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration *n3SPUCCH-AN-List* and Table 10.1.2.2.2-1.

##### 10.1.2.2.3 PUCCH format 4 HARQ-ACK procedure

For PUCCH format 4, the UE shall use PUCCH resource or or
![](media/image198.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK and
scheduling request (if any) and periodic CSI (if any) in
subframe/slot/subslot ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} for
![](media/image199.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* where

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding PDCCH with DCI formats other than DCI
format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G in subframe , or for a PDCCH
indicating downlink SPS release (defined in Clause 9.2) in subframe
![](media/image105.wmf){width="0.3125in" height="0.16666666666666666in"}
on the primary cell, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image200.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with
![](media/image201.wmf){width="1.5625in" height="0.2708333333333333in"}
for antenna port ![](media/image101.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}, where
![](media/image102.wmf){width="0.3125in" height="0.20833333333333334in"}
is the number of the first CCE (i.e. lowest CCE index used to construct
the PDCCH) used for transmission of the corresponding PDCCH and
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers. When two antenna port transmission is
configured for PUCCH format 1a/1b, the PUCCH resource for antenna port
![](media/image202.wmf){width="0.1875in" height="0.22916666666666666in"}
is given by ![](media/image203.wmf){width="1.7708333333333333in"
height="0.2708333333333333in"}.

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding PDCCH/EPDCCH detected in subframe
![](media/image105.wmf){width="0.3125in"
height="0.16666666666666666in"}, the UE shall use PUCCH format 1a/1b and
PUCCH resource ![](media/image204.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image205.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 9.2-2. For a UE configured for two antenna port
transmission for PUCCH format 1a/1b, a PUCCH resource value in Table
9.2-2 maps to two PUCCH resources with the first PUCCH resource
![](media/image134.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image135.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image136.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- for transmission of up to 2 HARQ-ACK bits,

\- in slot for slot-PUCCH when at least one HARQ-ACK bit is sent in
response to a PDSCH transmission indicated by the detection of a
corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or a semi-persistently scheduled
slot/subslot-PDSCH transmission or for a PDCCH/SPDCCH indicating
downlink SPS release in

\- slot or

\- any of the subslots given in Table 10.1-1 according to the value of
![](media/image16.wmf){width="0.25in" height="0.2708333333333333in"}
when the slot-PUCCH is transmitted in subframe *m*

\- when scheduling request is sent in slot on a resource configured by
higher layer parameter *sr-slotSPUCCH-IndexFH or
sr-slotSPUCCH-IndexNoFH*,

the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image204.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.1-2. For a UE configured for two antenna
port transmission for PUCCH format 1a/1b, a PUCCH resource value in
Table 10.1.2.1-2 maps to two PUCCH resources with the first PUCCH
resource ![](media/image134.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image135.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image136.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- in subslot for subslot-PUCCH when at least one HARQ-ACK bit is sent
in response to a PDSCH transmission indicated by the detection of a
corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G in subslot or a semi-persistently
scheduled subslot-PDSCH transmission in subslot
![](media/image221.wmf){width="0.5in" height="0.25833333333333336in"} or
for a PDCCH/SPDCCH indicating downlink SPS release in subslot or when
scheduling request is sent in slot on a resource configured by higher
layer parameter *sr-subslotSPUCCH-Resource,* the UE shall use PUCCH
resource for transmission of HARQ-ACK in subslot
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* for
subslot-PUCCH transmission using format 1a/1b \[3\], where *PUCCH
resource group is* determined by higher layer configuration and Table
10.1.2.1-3, and is determined according to higher layer configuration
and Table 10.1.2.1-4 for PUCCH format 1a, and according to higher layer
configuration and Table 10.1.2.1-5 for PUCCH format 1b.

\- for a PDSCH transmission on the secondary cell indicated by the
detection of a corresponding PDCCH/EPDCCH in subframe with DCI formats
other than DCI format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G,

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is more than 22, the UE shall use
PUCCH format 4 and PUCCH resource where the value of is determined
according to higher layer configuration and Table 10.1.2.2.3-1.\
The TPC field in the DCI format of the corresponding PDCCH/EPDCCH shall
be used to determine the PUCCH resource values from one of the four
resource values configured by higher layers, with the mapping defined in
Table 10.1.2.2.3-1. A UE shall assume that the same HARQ-ACK PUCCH
resource value is transmitted in each DCI format of the corresponding
secondary cell PDCCH assignments in a given subframe.

\- If the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is no more than 22, the UE shall use
PUCCH format 3 and PUCCH resourcewhere the value ofis determined
according to higher layer configuration and Table 10.1.2.2.2-1. The TPC
field in the DCI format of the corresponding PDCCH/EPDCCH shall be used
to determine the PUCCH resource values from one of the four resource
values configured by higher layers, with the mapping defined in Table
10.1.2.2.2-1. For a UE configured for two antenna port transmission for
PUCCH format 3, a PUCCH resource value in Table 10.1.2.2.2-1 maps to two
PUCCH resources with the first PUCCH resourcefor antenna
port![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}and the second PUCCH resourcefor antenna
port![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resourcefor antenna
port![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}. A UE shall assume that the same
HARQ-ACK PUCCH resource value is transmitted in each DCI format of the
corresponding secondary cell PDCCH assignments in a given subframe.

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding EPDCCH in subframe
![](media/image105.wmf){width="0.3125in"
height="0.16666666666666666in"}, or for a EPDCCH indicating downlink SPS
release (defined in Clause 9.2) in subframe
![](media/image105.wmf){width="0.3125in" height="0.16666666666666666in"}
on the primary cell, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image200.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} given by

> \- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image113.wmf){width="2.2291666666666665in"
> height="0.2708333333333333in"}
>
> \- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image212.wmf){width="3.2291666666666665in"
> height="0.5104166666666666in"}
>
> for antenna port ![](media/image101.wmf){width="0.19791666666666666in"
> height="0.2604166666666667in"}, where
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"},
> ![](media/image213.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1, ![](media/image117.wmf){width="0.59375in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image214.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image215.wmf){width="0.16666666666666666in"
> height="0.19791666666666666in"}is determined from the antenna port
> used for localized EPDCCH transmission which is described in Clause
> 6.8A.5 in \[3\]. When two antenna port transmission is configured for
> PUCCH format 1a/1b, the PUCCH resource for antenna port
> ![](media/image202.wmf){width="0.1875in"
> height="0.22916666666666666in"} is given by.
>
> \- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission![](media/image120.wmf){width="2.4375in"
> height="0.2708333333333333in"}
>
> \- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image216.wmf){width="3.4270833333333335in"
> height="0.5104166666666666in"}

Table 10.1.2.2.3-1: PUCCH Resource Value for HARQ-ACK Resource for PUCCH

  ------------------------------------------------------------------------- ----------------------------------------------------------------
  Value of \'TPC command for PUCCH\'\                                       
  or \'HARQ-ACK resource offset\' or \'SPUCCH resource indication\' field   

  \'00\'                                                                    The 1^st^ PUCCH resource value configured by the higher layers

  \'01\'                                                                    The 2^nd^ PUCCH resource value configured by the higher layers

  \'10\'                                                                    The 3^rd^ PUCCH resource value configured by the higher layers

  \'11\'                                                                    The 4^th^ PUCCH resource value configured by the higher layers
  ------------------------------------------------------------------------- ----------------------------------------------------------------

\- for transmission of more than 2 HARQ-ACK bits, the UE shall use PUCCH
format 4, and PUCCH resourceis determined according to higher layer
configuration and Table 10.1.2.2.3-1,

\- for slot-PUCCH and when the UE is not configured with PUCCH format 3,
and at least one HARQ-ACK bit is sent in response to a PDSCH
transmission indicated by the detection of a corresponding PDCCH/SPDCCH
with DCI format 7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or a
semi-persistently scheduled slot-PDSCH transmission or for a
PDCCH/SPDCCH indicating downlink SPS release in

\- slot or

\- any of the subslots given in Table 10.1-1 according to the value of
![](media/image16.wmf){width="0.25in" height="0.2708333333333333in"}
when the slot-PUCCH is transmitted in subframe *m* or

\- when scheduling request is sent in slot on a resource configured by
higher layer parameter *sr-slotSPUCCH-IndexFH or
sr-slotSPUCCH-IndexNoFH*,

\- for subslot-PUCCH and when at least one HARQ-ACK bit is sent in
response to a PDSCH transmission indicated by the detection of a
corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G in subslot or a semi-persistently
scheduled slot-PDSCH transmission in subslot
![](media/image141.wmf){width="0.5in" height="0.25833333333333336in"} or
for a PDCCH/SPDCCH indicating downlink SPS release in subslot or when
scheduling request is sent in slot on a resource configured by higher
layer parameter *sr-subslotSPUCCH-Resource*

\- The UE is not expected to transmit PUCCH corresponding to 21 or 22
HARQ-ACK bits in a subslot if higher layer parameter
*n4numberOfPRBSubslot* indicates single resource block for PUCCH
transmission.

\- for slot-PUCCH and for transmission of 12 or more HARQ-ACK bits, the
UE shall use PUCCH format 4, and PUCCH resourceis determined according
to higher layer configuration and Table 10.1.2.2.3-1, when the UE is
configured with PUCCH format 3, and at least one HARQ-ACK bit is sent in
response to a PDSCH transmission indicated by the detection of a
corresponding PDCCH/SPDCCH with DCI format
7-1A/7-1B/7-1C/7-1D/7-1E/7-1F/7-1G or a semi-persistently scheduled
slot-PDSCH transmission or for a PDCCH/SPDCCH indicating downlink SPS
release in

\- slot or

\- any of the subslots given in Table 10.1-1 according to the value of
![](media/image16.wmf){width="0.25in" height="0.2708333333333333in"}
when the slot-PUCCH is transmitted in subframe *m* or

\- when scheduling request is sent in slot on a resource configured by
higher layer parameter *sr-slotSPUCCH-IndexFH or
sr-slotSPUCCH-IndexNoFH*.

##### 10.1.2.2.4 PUCCH format 5 HARQ-ACK procedure

The HARQ-ACK feedback procedure for PUCCH format 5 HARQ-ACK procedure is
as described in Clause 10.1.2.2.3, by replacing with .

10.1.2A FDD-TDD HARQ-ACK feedback procedures for primary cell frame
structure type 1

For a UE transmitting HARQ-ACK using PUCCH format 1b with channel
selection, the UE shall determine the number of HARQ-ACK bits
corresponding to subframe-PDSCH, ![](media/image95.wmf){width="0.125in"
height="0.13541666666666666in"} in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"},
based on the number of configured serving cells with subframe
![](media/image105.wmf){width="0.3125in" height="0.16666666666666666in"}
configured as a downlink or special subframe according to the
DL-reference UL/DL configuration (defined in Clause 10.2) of each
serving cell and the downlink transmission modes configured for each
serving cell. For a UE not configured with PUCCH format 4/5 and
transmitting HARQ-ACK using PUCCH format 3, the UE shall determine the
number of HARQ-ACK bits, ![](media/image95.wmf){width="0.125in"
height="0.13541666666666666in"} in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"},
based on the number of configured serving cells with subframe
![](media/image105.wmf){width="0.3125in" height="0.16666666666666666in"}
configured as a downlink or special subframe except a special subframe
of configurations 0, 5 and 10 if configured by *ssp10-CRS-LessDwPTS*
with normal downlink CP or of configurations 0 and 4 with extended
downlink CP according to the DL-reference UL/DL configuration (defined
in Clause 10.2) of each serving cell and the downlink transmission modes
configured for each serving cell. The UE shall use two HARQ-ACK bits for
a serving cell configured with a downlink transmission mode that support
up to two transport blocks; and one HARQ-ACK bit otherwise.

A UE that supports aggregating at most 2 serving cells shall use PUCCH
format 1b with channel selection for transmission of HARQ-ACK
corresponding to subframe-PDSCH when configured with primary cell frame
structure type 1 and secondary cell frame structure type 2.

A UE that supports aggregating more than 2 serving cells with primary
cell frame structure type 1 is configured by higher layers to use either
PUCCH format 1b with channel selection or PUCCH format 3/4/5 for
transmission of HARQ-ACK corresponding to subframe-PDSCH when configured
with more than one serving cell and primary cell frame structure type 1
and at least one secondary cell with frame structure type 2.

For HARQ-ACK transmission in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
with PUCCH format 1b with channel selection, the FDD-TDD HARQ-ACK
procedure follows HARQ-ACK procedure described in Clause 10.1.2.1 if
subframe ![](media/image232.wmf){width="0.375in"
height="0.2708333333333333in"} is an uplink or a special subframe of
configurations 0, 5 and 10 if configured by *ssp10-CRS-LessDwPTS* with
normal downlink CP or of configurations 0 and 4 with extended downlink
CP for the secondary cell according to the higher layer parameter
*subframeAssignment* for UE not configured with either higher layer
parameter *EIMTA-MainConfigServCell-r12* or higher layer parameter
*harq-ReferenceConfig-r14*, and according to the higher layer parameter
*eimta-HARQ-ReferenceConfig-r12* for UE configured with the higher layer
parameter *EIMTA-MainConfigServCell-r12*, and HARQ-ACK procedure
described in Clause 10.1.2.2.1 otherwise.

The FDD-TDD HARQ-ACK feedback procedure for PUCCH format 3 HARQ-ACK
procedure as described in Clause 10.1.2.2.2.

The FDD-TDD HARQ-ACK feedback procedure for PUCCH format 4 HARQ-ACK
procedure is as described in Clause 10.1.2.2.3.

The FDD-TDD HARQ-ACK feedback procedure for PUCCH format 5 HARQ-ACK
procedure is as described in Clause 10.1.2.2.4.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 3.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 1b with
channel selection and with two configured serving cells.

### 10.1.3 TDD HARQ-ACK feedback procedures

For TDD and a UE that does not support aggregating more than one serving
cell with frame structure type 2, two HARQ-ACK feedback modes are
supported by higher layer configuration.

-   HARQ-ACK bundling and

-   HARQ-ACK multiplexing

For TDD and a BL/CE UE, if multiple TBs are not scheduled by a single
DCI,

\- if the UE is configured with *csi-NumRepetitionCE* equal to 1 and
*mPDCCH-NumRepetition* equal to 1,

\- the UE may be configured with HARQ-ACK bundling or HARQ-ACK
multiplexing;

\- HARQ-ACK multiplexing can be configured only if
*pucch-NumRepetitionCE-format1* equal 1 and HARQ-ACK multiplexing is
performed according to the set of Tables 10.1.3-5/6/7

\- else

\- the UE is not expected to receive more than one PDSCH transmission,
or more than one of PDSCH and MPDCCH indicating downlink SPS releases,
with transmission ending within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 intended for the UE;

For TDD UL/DL configuration 5 and a UE that does not support aggregating
more than one serving cell with frame structure type 2 and the UE is not
configured with *EIMTA-MainConfigServCell-r12* for the serving cell,
only HARQ-ACK bundling is supported.

A UE that supports aggregating more than one serving cell with frame
structure type 2 is configured by higher layers to use either PUCCH
format 1b with channel selection or PUCCH format 3/4/5 for transmission
of HARQ-ACK corresponding to subframe-PDSCH when configured with more
than one serving cell with frame structure type 2.

For subframe-PUCCH and a UE that supports aggregating more than one
serving cell with frame structure type 2 and is not configured with the
parameter *EIMTA-MainConfigServCell-r12* for any serving cell is
configured by higher layers to use HARQ-ACK bundling, PUCCH format 1b
with channel selection according to the set of Tables 10.1.3-2/3/4 or
according to the set of Tables 10.1.3-5/6/7, or PUCCH format 3 for
transmission of HARQ-ACK when configured with one serving cell with
frame structure type 2.

For subframe-PUCCH and a UE that is configured with the parameter
*EIMTA-MainConfigServCell-r12* and configured with one serving cell is
configured by higher layers to use PUCCH format 1b with channel
selection according to the set of Tables 10.1.3-5/6/7, or PUCCH format 3
for transmission of HARQ-ACK. A UE that is configured with the parameter
*EIMTA-MainConfigServCell-r12* for at least one serving cell and
configured with more than one serving cell is configured by higher
layers to use PUCCH format 1b with channel selection according to the
set of Tables 10.1.3-5/6/7, or PUCCH format 3/4/5 for transmission of
HARQ-ACK.

PUCCH format 1b with channel selection according to the set of Tables
10.1.3-2/3/4 or according to the set of Tables 10.1.3-5/6/7 is not
supported for TDD UL/DL configuration 5.

TDD HARQ-ACK bundling is performed per codeword across
![](media/image235.wmf){width="0.1875in" height="0.15625in"} multiple
subframes/slots in downlink or special subframes associated with a
single UL subframe/slot *n*, where
![](media/image235.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Table 10.1.3.1-1C if the UE is configured
with higher layer parameter *shortTTI* for slot-PDSCH, in Table
10.1.3.1-1B if the UE is configured with higher layer parameter
*shortProcessingTime* and the corresponding PDCCH with CRC scrambled by
C-RNTI is in the UE-specific search space for subframe-PDSCH and in
Table 10.1.3.1-1 otherwise, by a logical AND operation of all the
individual PDSCH transmission (with and without corresponding
PDCCH/EPDCCH/MPDCCH/SPDCCH) HARQ-ACKs and ACK in response to
PDCCH/EPDCCH/MPDCCH/SPDCCH indicating downlink SPS release. For one
configured serving cell the bundled 1 or 2 HARQ-ACK bits are transmitted
using PUCCH format 1a or PUCCH format 1b, respectively.

For TDD HARQ-ACK multiplexing and a subframe *n* with
![](media/image236.wmf){width="0.375in" height="0.15625in"}, where
![](media/image235.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Table 10.1.3.1-1B if the UE is configured
with higher layer parameter *shortProcessingTime* and the corresponding
PDCCH with CRC scrambled by C-RNTI is in the UE-specific search space
for subframe-PDSCH and in Table 10.1.3.1-1 otherwise, spatial HARQ-ACK
bundling across multiple codewords within a downlink or special subframe
is performed by a logical AND operation of all the corresponding
individual HARQ-ACKs. PUCCH format 1b with channel selection is used in
case of one configured serving cell. For TDD HARQ-ACK multiplexing and a
subframe *n* with ![](media/image237.wmf){width="0.375in"
height="0.15625in"}, spatial HARQ-ACK bundling across multiple codewords
within a downlink or special subframe is not performed, 1 or 2 HARQ-ACK
bits are transmitted using PUCCH format 1a or PUCCH format 1b,
respectively for one configured serving cell.

In the case of TDD and more than one configured serving cell with PUCCH
format 1b with channel selection and more than 4 HARQ-ACK bits for
![](media/image235.wmf){width="0.1875in" height="0.15625in"} multiple
downlink or special subframes associated with a single UL subframe *n*,
where ![](media/image235.wmf){width="0.1875in" height="0.15625in"} is
defined in Clause 10.1.3.2.1, andÂ for the configured serving cells,
spatial HARQ-ACK bundling across multiple codewords within a downlink or
special subframe for all configured cells is performed and the bundled
HARQ-ACK bits for each configured serving cell is transmitted using
PUCCH format 1b with channel selection. For TDD and more than one
configured serving cell with PUCCH format 1b with channel selection and
up to 4 HARQ-ACK bits for![](media/image235.wmf){width="0.1875in"
height="0.15625in"} multiple downlink or special subframes associated
with a single UL subframe *n*, where
![](media/image235.wmf){width="0.1875in" height="0.15625in"} is defined
in Clause 10.1.3.2.1, and for the configured serving cells, spatial
HARQ-ACK bundling is not performed and the HARQ-ACK bits are transmitted
using PUCCH format 1b with channel selection.

In the case of TDD and more than one configured serving cell with PUCCH
format 3 and without PUCCH format 4/5 configured and more than 20
HARQ-ACK bits for ![](media/image235.wmf){width="0.1875in"
height="0.15625in"} multiple downlink or special subframes associated
with a single UL subframe *n*, where
![](media/image235.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Clause 10.1.3.2.2 andÂ for the configured
serving cells, spatial HARQ-ACK bundling across multiple codewords
within a downlink or special subframe is performed for each serving cell
by a logical AND operation of all of the corresponding individual
HARQ-ACKs and PUCCH format 3 is used. For TDD and more than one
configured serving cell with PUCCH format 3 and up to 20 HARQ-ACK bits
for ![](media/image235.wmf){width="0.1875in" height="0.15625in"}
multiple downlink or special subframes associated with a single UL
subframe *n*, where ![](media/image235.wmf){width="0.1875in"
height="0.15625in"} is the number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Clause 10.1.3.2.2 andÂ for the configured
serving cells, spatial HARQ-ACK bundling is not performed and the
HARQ-ACK bits are transmitted using PUCCH format 3.

For TDD with PUCCH format 3 without PUCCH format 4/5 configured, a UE
shall determine the number of HARQ-ACK bits,
![](media/image95.wmf){width="0.125in" height="0.13541666666666666in"},
associated with an UL subframe/slot *n*

according to ![](media/image238.wmf){width="0.90625in"
height="0.5729166666666666in"} where
![](media/image239.wmf){width="0.34375in"
height="0.22916666666666666in"} is the number of configured cells, and
![](media/image240.wmf){width="0.3854166666666667in"
height="0.2708333333333333in"}is the number of HARQ-bits for the *c*-th
serving cell defined in Clause 7.3.

TDD HARQ-ACK feedback procedures for one configured serving cell are
given in Clause 10.1.3.1 and procedures for more than one configured
serving cell are given in Clause 10.1.3.2.

#### 10.1.3.1 TDD HARQ-ACK procedure for one configured serving cell

HARQ-ACK transmissionÂ on two antenna ports
![](media/image241.wmf){width="0.8125in" height="0.20833333333333334in"}
is supported for PUCCH format 1a/1b with TDD HARQ-ACK bundling feedback
mode and for PUCCH format 3.

A UE that supports aggregating more than one serving cell with frame
structure type 2 can be configured by higher layers for HARQ-ACK
transmissionÂ on two antenna ports
![](media/image241.wmf){width="0.8125in" height="0.20833333333333334in"}
for PUCCH format 1b with channel selection.

The TDD HARQ-ACK procedure for a UE configured with PUCCH format 3 is as
described in Clause 10.1.3.2.2 when the UE receives PDSCH and/or SPS
release PDCCH/EPDCCH only on the primary cell.

If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12,* and the UE is not configured with the
higher layer parameter *shortProcessingTime*, for TDD HARQ-ACK bundling
or TDD HARQ-ACK multiplexing for one configured serving cell and a
subframe *n* with ![](media/image242.wmf){width="0.375in"
height="0.15625in"} where ![](media/image235.wmf){width="0.1875in"
height="0.15625in"} is the number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Table 10.1.3.1-1, the UE shall use PUCCH
resource ![](media/image243.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image199.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* for PUCCH
format 1a/1b, where

\- If there is PDSCH transmission indicated by the detection of
corresponding PDCCH/EPDCCH or there is PDCCH/EPDCCH indicating downlink
SPS release within subframe(s) ![](media/image244.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} *(defined in Table 10.1.3.1-1) is a set of M
elements* ![](media/image245.wmf){width="0.9166666666666666in"
height="0.22916666666666666in"} *depending on the subframe n* and the
UL/DL configuration (defined in Table 4.2-2 in \[3\]), and if PDCCH
indicating PDSCH transmission or downlink SPS release is detected in
subframe ![](media/image246.wmf){width="0.3958333333333333in"
height="0.20833333333333334in"}, where
![](media/image247.wmf){width="0.1875in" height="0.20833333333333334in"}
is the smallest value in set
![](media/image248.wmf){width="0.16666666666666666in"
height="0.15625in"}such that UE detects a PDCCH/EPDCCH indicating PDSCH
transmission or downlink SPS release within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"} and
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE first
selects a ![](media/image160.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} value out of {0, 1, 2, 3} which makes
![](media/image249.wmf){width="1.0729166666666667in"
height="0.20833333333333334in"} and shall use
![](media/image250.wmf){width="3.3854166666666665in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, where
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers,
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image102.wmf){width="0.3125in" height="0.20833333333333334in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"}and the corresponding *m*. When two
antenna port transmission is configured for PUCCH format 1a/1b, the
PUCCH resource for HARQ-ACK bundling for antenna port
![](media/image252.wmf){width="0.1875in" height="0.22916666666666666in"}
is given by ![](media/image253.wmf){width="3.59375in"
height="0.2708333333333333in"} .

\- For a non-BL/CE UE and if there is only a PDSCH transmission where
there is not a corresponding PDCCH/EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1, the UE shall use
PUCCH format 1a/1b and PUCCH resource
![](media/image254.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with the value of
![](media/image255.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 9.2-2. For a UE configured for two antenna port
transmission for PUCCH format 1a/1b and HARQ-ACK bundling, a PUCCH
resource value in Table 9.2-2 maps to two PUCCH resources with the first
PUCCH resource ![](media/image256.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"}for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image257.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"}for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image258.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"}for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- If there is PDSCH transmission indicated by the detection of
corresponding PDCCH/EPDCCH or there is PDCCH/EPDCCH indicating downlink
SPS release within subframe(s) ![](media/image244.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} *(defined in Table 10.1.3.1-1) is a set of M
elements* ![](media/image245.wmf){width="0.9166666666666666in"
height="0.22916666666666666in"} *depending on the subframe n* and the
UL/DL configuration (defined in Table 4.2-2 in \[3\]), and if EPDCCH
indicating PDSCH transmission or downlink SPS release is detected in
subframe ![](media/image246.wmf){width="0.3958333333333333in"
height="0.20833333333333334in"}, where
![](media/image247.wmf){width="0.1875in" height="0.20833333333333334in"}
is the smallest value in set
![](media/image248.wmf){width="0.16666666666666666in"
height="0.15625in"}such that UE detects a PDCCH/EPDCCH indicating PDSCH
transmission or downlink SPS release within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"} and
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE shall
use

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image259.wmf){width="3.21875in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image260.wmf){width="4.21875in" height="0.5104166666666666in"}

> for antenna port ![](media/image108.wmf){width="0.1875in"
> height="0.20833333333333334in"}, where
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image246.wmf){width="0.3958333333333333in"
> height="0.20833333333333334in"} and the corresponding *m*,
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image246.wmf){width="0.3958333333333333in"
> height="0.20833333333333334in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image246.wmf){width="0.3958333333333333in"
> height="0.20833333333333334in"}which is described in Clause 6.8A.5 in
> \[3\]. If ![](media/image262.wmf){width="0.40625in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image263.wmf){width="0.3958333333333333in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH
> in subframe ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs in
> EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}*configured for that UE in
> subframe*![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
> subframe ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs
> computed assuming EPDCCH-PRB-set*
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is *configured for that UE in subframe*
> ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"}. For normal downlink CP, if subframe
> ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0, 5 or 10 if configured by *ssp10-CRS-LessDwPTS*,
> ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
> if subframe ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 4 or 7, ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. When two antenna port
> transmission is configured for PUCCH format 1a/1b, the PUCCH resource
> for HARQ-ACK bundling for antenna port
> ![](media/image252.wmf){width="0.1875in"
> height="0.22916666666666666in"} is given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image266.wmf){width="3.4270833333333335in"
height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image267.wmf){width="4.4375in" height="0.5104166666666666in"}

\- For a BL/CE UE, if there is only a PDSCH transmission within one or
more consecutive BL/CE downlink subframe(s) where subframe
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, is the last
subframe in which the PDSCH is transmitted where
![](media/image28.wmf){width="0.375in" height="0.1875in"}and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 and there is not a
corresponding MPDCCH, the UE shall use PUCCH format 1a and PUCCH
resource where the value of is determined according to higher layer
configuration and Table 9.2-2.

\- If there is PDSCH transmission indicated by the detection of
corresponding MPDCCH or there is MPDCCH indicating downlink SPS release
within subframe(s) ![](media/image244.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} *(defined in Table 10.1.3.1-1) is a set of M
elements* ![](media/image245.wmf){width="0.9166666666666666in"
height="0.22916666666666666in"} *depending on the subframe n* and the
UL/DL configuration (defined in Table 4.2-2 in \[3\]) and subframe
![](media/image246.wmf){width="0.3958333333333333in"
height="0.20833333333333334in"} is the last subframe in which the PDSCH
or MPDCCH indicating downlink SPS release is transmitted and there is no
where and subframe is the last subframe in which a PDSCH indicated by
the detection of corresponding MPDCCH or MPDCCH indicating downlink SPS
release is transmitted, the UE shall use

\- if MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

\- if MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

> for antenna port ![](media/image108.wmf){width="0.1875in"
> height="0.20833333333333334in"}, where
> ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the MPDCCH) used for transmission
> of the corresponding DCI assignment in MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}, for MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"} is configured

\- by the higher layer parameter *n1PUCCH-AN-r13*, if configured;
otherwise:

\- by the higher layer parameter *n1PUCCH-AN-InfoList-r13* for the
corresponding CE level*,*

![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for MPDCCH-PRB-set
![](media/image112.wmf){width="0.125in" height="0.16666666666666666in"}
is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for the
MPDCCH transmission which is described in Clause 6.8A.5 in \[3\]. If
![](media/image262.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding MPDCCH as given in
Table 10.1.2.1-1. If
![](media/image263.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding MPDCCH as given in
Table 10.1.3.1-2. If subframe
![](media/image264.wmf){width="0.3854166666666667in" height="0.21875in"}
is a BL/CE downlink subframe, ![](media/image265.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs in
MPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}*configured for that UE in
subframe*![](media/image264.wmf){width="0.3854166666666667in"
height="0.21875in"}. If subframe
![](media/image264.wmf){width="0.3854166666666667in" height="0.21875in"}
is not a BL/CE downlink subframe,
![](media/image265.wmf){width="0.78125in" height="0.2708333333333333in"}
*is equal to 0*. If subframe
![](media/image264.wmf){width="0.3854166666666667in" height="0.21875in"}
is a BL/CE downlink special subframe in which MPDCCH is not supported,
the UE shall calculate ![](media/image265.wmf){width="0.78125in"
height="0.2708333333333333in"} by assuming for normal cyclic prefix and
for extended cyclic prefix. If an MPDCCH-PRB-set
![](media/image127.wmf){width="0.16666666666666666in"
height="0.1875in"}is 2+4, then . When an MPDCCH-PRB-set
![](media/image127.wmf){width="0.16666666666666666in"
height="0.1875in"}is 2+4, following procedures is applied.

\- if the detected MPDCCH is located within 2 PRB set, is obtained by
above procedure.

\- if the detected MPDCCH is located within 4 PRB set, is the sum
between and the value obtained by above procedure.

\- if the detected MPDCCH is MPDCCH format 5, is obtained by the above
procedure with = 0.

Table 10.1.3.1-1: Downlink association set
![](media/image277.wmf){width="0.1875in"
height="0.19791666666666666in"}*:*
![](media/image245.wmf){width="0.9166666666666666in"
height="0.22916666666666666in"} for TDD

<table>
<thead>
<tr class="header">
<th><p>UL/DL</p>
<p>Configuration</p></th>
<th>Subframe <em>n</em></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr class="even">
<td>0</td>
<td>-</td>
<td>-</td>
<td>6</td>
<td>-</td>
<td>4</td>
<td>-</td>
<td>-</td>
<td>6</td>
<td>-</td>
<td>4</td>
</tr>
<tr class="odd">
<td>1</td>
<td>-</td>
<td>-</td>
<td>7, 6</td>
<td>4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>7, 6</td>
<td>4</td>
<td>-</td>
</tr>
<tr class="even">
<td>2</td>
<td>-</td>
<td>-</td>
<td>8, 7, 4, 6</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>8, 7, 4, 6</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td>3</td>
<td>-</td>
<td>-</td>
<td>7, 6, 11</td>
<td>6, 5</td>
<td>5, 4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>4</td>
<td>-</td>
<td>-</td>
<td>12, 8, 7, 11</td>
<td>6, 5, 4, 7</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td>5</td>
<td>-</td>
<td>-</td>
<td>13, 12, 9, 8, 7, 5, 4, 11, 6</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>6</td>
<td>-</td>
<td>-</td>
<td>7</td>
<td>7</td>
<td>5</td>
<td>-</td>
<td>-</td>
<td>7</td>
<td>7</td>
<td>-</td>
</tr>
</tbody>
</table>

Table 10.1.3.1-1A: eIMTA downlink association set
![](media/image278.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"}*:*![](media/image279.wmf){width="1.0208333333333333in"
height="0.23958333333333334in"} for TDD

  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Higher layer parameter\                Higher layer parameter \'*subframeAssignment*\'   Subframe *n*                                                                   
  \'*eimta-HARQ-ReferenceConfig-r12*\'                                                                                                                                    
  -------------------------------------- ------------------------------------------------- -------------- ---- -------------------- --------- ---- ---- ---- ------- ---- ----
                                                                                           0              1    2                    3         4    5    6    7       8    9

  2                                      0                                                 \-             \-   7,8,4                \-        \-   \-   \-   7,8,4   \-   \-

                                         1                                                 \-             \-   8,4                  \-        \-   \-   \-   8,4     \-   \-

                                         6                                                 \-             \-   6,8,4                \-        \-   \-   \-   8,6,4   \-   \-

  4                                      0                                                 \-             \-   12,7,11,8            7,4,5,6   \-   \-   \-   \-      \-   \-

                                         1                                                 \-             \-   12,8,11              7,5,6     \-   \-   \-   \-      \-   \-

                                         3                                                 \-             \-   12,8                 4,7       \-   \-   \-   \-      \-   \-

                                         6                                                 \-             \-   12,11,8              4,5,6     \-   \-   \-   \-      \-   \-

  5                                      0                                                 \-             \-   12,7,11,13,8,4,9,5   \-        \-   \-   \-   \-      \-   \-

                                         1                                                 \-             \-   13,12,8,11,4,9,5     \-        \-   \-   \-   \-      \-   \-

                                         2                                                 \-             \-   13,12,9,11,5         \-        \-   \-   \-   \-      \-   \-

                                         3                                                 \-             \-   13,12,5,4,8,9        \-        \-   \-   \-   \-      \-   \-

                                         4                                                 \-             \-   13,5,4,6,9           \-        \-   \-   \-   \-      \-   \-

                                         6                                                 \-             \-   13,12,11,6,8,4,9,5   \-        \-   \-   \-   \-      \-   \-
  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 10.1.3.1-1B: Downlink association set
![](media/image278.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"}*:*![](media/image279.wmf){width="1.0208333333333333in"
height="0.23958333333333334in"} for TDD and UE configured with higher
layer parameter *shortProcessingTime*

<table>
<thead>
<tr class="header">
<th><p>UL/DL</p>
<p>Configuration</p></th>
<th>Subframe <em>n</em></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr class="even">
<td>0</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>3</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="odd">
<td>1</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>3</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>3</td>
<td>-</td>
</tr>
<tr class="even">
<td>2</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td>3</td>
<td>-</td>
<td>-</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>4</td>
<td>-</td>
<td>-</td>
<td>6</td>
<td>3</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td>5</td>
<td>-</td>
<td>-</td>
<td>3</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>6</td>
<td>-</td>
<td>-</td>
<td>6</td>
<td>4</td>
<td>4</td>
<td>-</td>
<td>-</td>
<td>6</td>
<td>3</td>
<td>-</td>
</tr>
</tbody>
</table>

Table 10.1.3.1-1C: Downlink association set
![](media/image277.wmf){width="0.1875in"
height="0.19791666666666666in"}*:*
![](media/image245.wmf){width="0.9166666666666666in"
height="0.22916666666666666in"} for TDD with special subframe
configuration 1, 2, 6, 7 and UE configured with higher layer parameter
*shortTTI*

<table>
<thead>
<tr class="header">
<th><p>UL/DL</p>
<p>Configuration</p></th>
<th>slot <em>n</em></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
</tr>
<tr class="even">
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td>5,4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td>5,4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>8,7,</p>
<p>12</p></td>
<td><p>7,6,</p>
<p>5,4</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>8,7,12</td>
<td>7,6,5,4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>14,</p>
<p>13,</p>
<p>12</p></td>
<td><p>12,11,</p>
<p>10</p></td>
<td>10,9</td>
<td>9,8</td>
<td>8,7</td>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>16,</p>
<p>15,</p>
<p>14,</p>
<p>13</p></td>
<td><p>13,12,</p>
<p>11,10</p></td>
<td><p>10,9,</p>
<p>8,7</p></td>
<td>7,6,5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>18,</p>
<p>17,</p>
<p>16,</p>
<p>15,</p>
<p>14,</p>
<p>13,</p>
<p>12,22</p></td>
<td><p>12,11,</p>
<p>10,9,</p>
<p>8,7,6,5,4</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6</td>
<td>6</td>
<td>6</td>
<td>6</td>
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 10.1.3.1-1D: Downlink association set
![](media/image277.wmf){width="0.18194444444444444in"
height="0.19722222222222222in"}*:*
![](media/image245.wmf){width="0.9166666666666666in"
height="0.23472222222222222in"} for TDD with special subframe
configuration 3, 4 or 8 and UE configured with higher layer parameter
*shortTTI*

<table>
<thead>
<tr class="header">
<th><p><strong>UL/DL</strong></p>
<p><strong>Configuration</strong></p></th>
<th><strong>slot <em>n</em></strong></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><strong>0</strong></td>
<td><strong>1</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>4</strong></td>
<td><strong>5</strong></td>
<td><strong>6</strong></td>
<td><strong>7</strong></td>
<td><strong>8</strong></td>
<td><strong>9</strong></td>
<td><strong>10</strong></td>
<td><strong>11</strong></td>
<td><strong>12</strong></td>
<td><strong>13</strong></td>
<td><strong>14</strong></td>
<td><strong>15</strong></td>
<td><strong>16</strong></td>
<td><strong>17</strong></td>
<td><strong>18</strong></td>
<td><strong>19</strong></td>
</tr>
<tr class="even">
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td>5,4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td>5,4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>8,7,</p>
<p>12,11</p></td>
<td><p>7,6,</p>
<p>5,4</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>8,7,12,11</td>
<td>7,6,5,4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>14,</p>
<p>13,</p>
<p>12</p></td>
<td><p>12,11,</p>
<p>10</p></td>
<td>10,9</td>
<td>9,8</td>
<td>8,7</td>
<td>7,6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>16,</p>
<p>15,</p>
<p>14,</p>
<p>13</p></td>
<td><p>13,12,</p>
<p>11,10</p></td>
<td><p>10,9,</p>
<p>8,7</p></td>
<td>7,6,5,4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>18,</p>
<p>17,</p>
<p>16,</p>
<p>15,</p>
<p>14,</p>
<p>13,</p>
<p>12,22,21</p></td>
<td><p>12,11,</p>
<p>10,9,</p>
<p>8,7,6,5,4</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6</td>
<td>6</td>
<td>6</td>
<td>6</td>
<td>6</td>
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 10.1.3.1-1E: Downlink association set
![](media/image277.wmf){width="0.18819444444444444in"
height="0.1951388888888889in"}*:*
![](media/image245.wmf){width="0.9152777777777777in"
height="0.23402777777777778in"} for TDD with special subframe
configuration 0, 5, 9, 10 and UE configured with higher layer parameter
*shortTTI*

<table>
<thead>
<tr class="header">
<th><p>UL/DL</p>
<p>Configuration</p></th>
<th>slot <em>n</em></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
</tr>
<tr class="even">
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>8,7,</p>
<p>12</p></td>
<td><p>7,6,</p>
<p>5,4</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>8,7,12</td>
<td>7,6,5,4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>14,</p>
<p>13,</p>
<p>12</p></td>
<td><p>12,11,</p>
<p>10</p></td>
<td>10,9</td>
<td>9,8</td>
<td>8,7</td>
<td>7</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>16,</p>
<p>15,</p>
<p>14,</p>
<p>13</p></td>
<td><p>13,12,</p>
<p>11,10</p></td>
<td><p>10,9,</p>
<p>8,7</p></td>
<td>7,6,5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>18,</p>
<p>17,</p>
<p>16,</p>
<p>15,</p>
<p>14,</p>
<p>13,</p>
<p>12,22</p></td>
<td><p>12,11,</p>
<p>10,9,</p>
<p>8,7,6,5,4</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6,5</td>
<td></td>
<td>6,5</td>
<td></td>
<td>6</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Table 10.1.3.1-2: Mapping of ACK/NACK Resource offset Field in DCI
format 1A/1B/1D/1/2A/2/2B/2C/2D/6-1A/6-1B to
![](media/image131.wmf){width="0.34375in"
height="0.22916666666666666in"}values for TDD when
![](media/image263.wmf){width="0.3958333333333333in" height="0.1875in"}

  -----------------------------------------------------------------------------------------------------------------
  ACK/NACK Resource offset field in\    ![](media/image131.wmf){width="0.34375in" height="0.22916666666666666in"}
  DCI format 1A/1B/1D/1/2A/2/2B/2C/2D   
  ------------------------------------- ---------------------------------------------------------------------------
  0                                     0

  1                                     ![](media/image280.wmf){width="1.34375in" height="0.4791666666666667in"}

  2                                     ![](media/image281.wmf){width="1.4895833333333333in" height="0.5in"}

  3                                     2
  -----------------------------------------------------------------------------------------------------------------

Table 10.1.3.1-3: Mapping of ACK/NACK Resource offset Field in DCI
format 1A/1B/1D/1/2A/2/2B/2C/2D to
![](media/image282.wmf){width="0.3333333333333333in"
height="0.22916666666666666in"}values for TDD when
![](media/image283.wmf){width="0.5208333333333334in"
height="0.1875in"}and ![](media/image284.wmf){width="0.40625in"
height="0.1875in"}

  ----------------------------------------------------------------------------------------------------------------------------
  ACK/NACK Resource offset field in\    ![](media/image282.wmf){width="0.3333333333333333in" height="0.22916666666666666in"}
  DCI format 1A/1B/1D/1/2A/2/2B/2C/2D   
  ------------------------------------- --------------------------------------------------------------------------------------
  0                                     0

  1                                     ![](media/image285.wmf){width="2.5625in" height="0.4791666666666667in"}

  2                                     ![](media/image286.wmf){width="4.864583333333333in" height="0.5in"}

  3                                     2
  ----------------------------------------------------------------------------------------------------------------------------

If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12,* and the UE is not configured with the
higher layer parameter *shortProcessingTime,* for TDD HARQ-ACK
multiplexing and sub-frame ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} with
![](media/image236.wmf){width="0.375in" height="0.15625in"} and one
configured serving cell, where ![](media/image287.wmf){width="0.1875in"
height="0.15625in"} is the number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Table 10.1.3.1-1, denote
![](media/image288.wmf){width="0.5729166666666666in" height="0.28125in"}
as the PUCCH resource derived from sub-frame
![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"} and HARQ-ACK(i) as the ACK/NACK/DTX
response from sub-frame ![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"}, where
![](media/image290.wmf){width="0.4166666666666667in"
height="0.20833333333333334in"}(defined in Table 10.1.3.1-1) and
![](media/image291.wmf){width="0.7291666666666666in"
height="0.16666666666666666in"}.

\- For a PDSCH transmission indicated by the detection of corresponding
PDCCH or a PDCCH indicating downlink SPS release in sub-frame
![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"} where
![](media/image290.wmf){width="0.4166666666666667in"
height="0.20833333333333334in"}, the PUCCH resource
![](media/image292.wmf){width="3.2291666666666665in"
height="0.28125in"}, where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image294.wmf){width="1.1354166666666667in"
height="0.21875in"},
![](media/image295.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"},
![](media/image296.wmf){width="0.3645833333333333in" height="0.21875in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"}, and
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers.

\- For a PDSCH transmission where there is not a corresponding
PDCCH/EPDCCH detected in subframe
![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"}, the value of
![](media/image288.wmf){width="0.5729166666666666in" height="0.28125in"}
is determined according to higher layer configuration and Table 9.2-2.

\- For a non-BL/CE UE and for a PDSCH transmission indicated by the
detection of corresponding EPDCCH or a EPDCCH indicating downlink SPS
release in sub-frame ![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"} where
![](media/image290.wmf){width="0.4166666666666667in"
height="0.20833333333333334in"}, the UE shall use

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image297.wmf){width="3.28125in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image298.wmf){width="4.28125in" height="0.5104166666666666in"}

> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image299.wmf){width="0.34375in" height="0.21875in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image299.wmf){width="0.34375in" height="0.21875in"}is given
> in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe ![](media/image299.wmf){width="0.34375in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
> ![](media/image300.wmf){width="0.3229166666666667in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image301.wmf){width="0.3229166666666667in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.3.1-2, where the variable
> ![](media/image302.wmf){width="0.1875in" height="0.15625in"}in the
> table is substituted with
> ![](media/image303.wmf){width="0.10416666666666667in"
> height="0.1875in"}. If the UE is configured to monitor EPDCCH in
> subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs in
> EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}*configured for that UE in subframe*
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
> subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs
> computed assuming EPDCCH-PRB-set*
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is *configured for that UE in subframe*
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. For normal downlink CP, if subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0, 5 or 10 if configured by *ssp10-CRS-LessDwPTS*,
> ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
> if subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0.

\- For a BL/CE UE, for a PDSCH transmission detected in subframe
![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"}without a corresponding MPDCCH, the value
of ![](media/image288.wmf){width="0.5729166666666666in"
height="0.28125in"} is determined according to higher layer
configuration and Table 9.2-2.

\- For a BL/CE UE, for a PDSCH transmission in sub-frame
![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"} where
![](media/image290.wmf){width="0.4166666666666667in"
height="0.20833333333333334in"} indicated by the detection of
corresponding MPDCCH or a MPDCCH indicating downlink SPS release in
sub-frame ![](media/image289.wmf){width="0.34375in"
height="0.20833333333333334in"} where
![](media/image290.wmf){width="0.4166666666666667in"
height="0.20833333333333334in"}, the UE shall use

\- if MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

\- if MPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the MPDCCH) used for transmission
> of the corresponding DCI assignment in MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}, for MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"} is configured

\- by the higher layer parameter *n1PUCCH-AN-r13*, if configured;
otherwise:

\- by the higher layer parameter *n1PUCCH-AN-InfoList-r13* for the
corresponding CE level*,*

> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"} for MPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for the
> MPDCCH transmission which is described in Clause 6.8A.5 in \[3\]. If
> ![](media/image300.wmf){width="0.3229166666666667in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding MPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image301.wmf){width="0.3229166666666667in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding MPDCCH as
> given in Table 10.1.3.1-2, where the variable
> ![](media/image302.wmf){width="0.1875in" height="0.15625in"}in the
> table is substituted with
> ![](media/image303.wmf){width="0.10416666666666667in"
> height="0.1875in"}. If subframe
> ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a BL/CE downlink subframe,
> ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs in
> MPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}*configured for that UE in
> subframe*![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If subframe
> ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"} is not a BL/CE downlink subframe,
> ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to 0*. If subframe
> ![](media/image264.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a BL/CE downlink special subframe in which
> MPDCCH is not supported, the UE shall calculate
> ![](media/image265.wmf){width="0.78125in"
> height="0.2708333333333333in"} by assuming for normal cyclic prefix
> and for extended cyclic prefix. If an MPDCCH-PRB-set
> ![](media/image127.wmf){width="0.16666666666666666in"
> height="0.1875in"}is 2+4, then . When an MPDCCH-PRB-set
> ![](media/image127.wmf){width="0.16666666666666666in"
> height="0.1875in"}is 2+4, following procedures is applied.

\- if the detected MPDCCH is located within 2 PRB set, is obtained by
above procedure.

\- if the detected MPDCCH is located within 4 PRB set, is the sum
between and the value obtained by above procedure.

\- if the detected MPDCCH is MPDCCH format 5, is obtained by the above
procedure with = 0.

If a UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*, or the UE is configured with the higher
layer parameter *shortProcessingTime*,
then![](media/image308.wmf){width="0.4583333333333333in"
height="0.16666666666666666in"} where the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}is defined in Table 10.1.3.1-1B if the UE is
configured with higher layer parameter *shortProcessingTime* and the
corresponding PDCCH with CRC scrambled by C-RNTI is in the UE-specific
search space for subframe-PDSCH and in Table 10.1.3.1-1 otherwise (where
\"UL/DL configuration\" in the table refers to the higher layer
parameter *subframeAsssignment* if the UE is configured with the higher
layer parameter *EIMTA-MainConfigServCell-r12*), and
![](media/image309.wmf){width="0.20833333333333334in"
height="0.15625in"}is the number of elements in set
![](media/image310.wmf){width="0.19791666666666666in"
height="0.16666666666666666in"}.

If a UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*, or the UE is configured with the higher
layer parameter *shortProcessingTime*, then the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}for the rest of this Clause is as defined in Clause
10.2, and ![](media/image287.wmf){width="0.1875in" height="0.15625in"}is
the number of elements for subframe *n* in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}

If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*, or the UE is configured with the higher
layer parameter *shortProcessingTime,* for TDD HARQ-ACK multiplexing and
sub-frame ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}, denote
![](media/image311.wmf){width="0.5729166666666666in" height="0.28125in"}
as the PUCCH resource derived from sub-frame
![](media/image312.wmf){width="0.34375in" height="0.21875in"}and
HARQ-ACK(i0) as the ACK/NACK/DTX response from
sub-frame![](media/image312.wmf){width="0.34375in" height="0.21875in"},
where ![](media/image290.wmf){width="0.4166666666666667in"
height="0.20833333333333334in"}, and
![](media/image291.wmf){width="0.7395833333333334in"
height="0.16666666666666666in"}.

\- ![](media/image313.wmf){width="0.15625in"
height="0.16666666666666666in"} corresponding to each subframe
![](media/image312.wmf){width="0.34375in"
height="0.21875in"},![](media/image314.wmf){width="0.9375in"
height="0.1875in"} is determined as follows

> Set ![](media/image315.wmf){width="0.3333333333333333in"
> height="0.16666666666666666in"};
>
> for ![](media/image316.wmf){width="0.9270833333333334in"
> height="0.20833333333333334in"}
>
> if the value of ![](media/image317.wmf){width="0.20833333333333334in"
> height="0.22916666666666666in"} is the same as the value of an element
> ![](media/image318.wmf){width="0.15625in"
> height="0.20833333333333334in"} in set
> ![](media/image319.wmf){width="0.15625in" height="0.15625in"}, where
> ![](media/image320.wmf){width="0.5208333333333334in"
> height="0.23958333333333334in"},
>
> ![](media/image321.wmf){width="0.16666666666666666in"
> height="0.16666666666666666in"}corresponding to subframe
> ![](media/image312.wmf){width="0.34375in"
> height="0.21875in"}=![](media/image322.wmf){width="0.125in"
> height="0.16666666666666666in"};
>
> ![](media/image323.wmf){width="0.5in" height="0.16666666666666666in"}
>
> end if
>
> end for
>
> for
>
> if the value of ![](media/image325.wmf){width="0.20833333333333334in"
> height="0.25in"}is same as the value of an element
> ![](media/image318.wmf){width="0.15625in"
> height="0.20833333333333334in"} in set
> ![](media/image319.wmf){width="0.15625in" height="0.15625in"}, where
> ![](media/image326.wmf){width="0.5104166666666666in"
> height="0.23958333333333334in"} (defined in Table 10.1.3.1-1A if the
> UE is configured with the higher layer parameter
> *EIMTA-MainConfigServCell-r12*, or Table 10.1.3.1-1B if the UE is
> configured with the higher layer parameter *shortProcessingTime*)
>
> ![](media/image321.wmf){width="0.16666666666666666in"
> height="0.16666666666666666in"} corresponding to subframe
> ![](media/image312.wmf){width="0.34375in"
> height="0.21875in"}=![](media/image322.wmf){width="0.125in"
> height="0.16666666666666666in"};
>
> ![](media/image323.wmf){width="0.5in" height="0.16666666666666666in"}
>
> end if
>
> end for

\- For a PDSCH transmission indicated by the detection of corresponding
PDCCH or a PDCCH indicating downlink SPS release in sub-frame
![](media/image312.wmf){width="0.34375in" height="0.21875in"},

\- if the value of ![](media/image327.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image328.wmf){width="0.22916666666666666in"
height="0.21875in"}in set
![](media/image329.wmf){width="0.17708333333333334in"
height="0.15625in"}, the PUCCH resource
![](media/image311.wmf){width="0.5729166666666666in" height="0.28125in"}
is given by ![](media/image330.wmf){width="3.4375in"
height="0.2604166666666667in"};

\- if the value of ![](media/image331.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in"
height="0.17708333333333334in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A if the UE
is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*), the PUCCH resource
![](media/image311.wmf){width="0.5729166666666666in" height="0.28125in"}
is given by ;

\- if the value of ![](media/image331.wmf){width="0.16666666666666666in"
height="0.23333333333333334in"} is same as the value of an element
![](media/image332.wmf){width="0.175in" height="0.23333333333333334in"}
in set ![](media/image333.wmf){width="0.225in" height="0.175in"}, where
![](media/image334.wmf){width="0.5in"
height="0.23333333333333334in"}(defined in Table 10.1.3.1-1B if the UE
is configured with the higher layer parameter *shortProcessingTime*),
the PUCCH resource ![](media/image311.wmf){width="0.5666666666666667in"
height="0.2833333333333333in"} is given by
![](media/image336.wmf){width="2.4895833333333335in"
height="0.28125in"};

> where ![](media/image337.wmf){width="0.2916666666666667in"
> height="0.20833333333333334in"} is the number of elements in the set
> ![](media/image338.wmf){width="0.2604166666666667in"
> height="0.20833333333333334in"} defined in Table 10.1.3.1-1A if the UE
> is configured with the higher layer parameter
> *EIMTA-MainConfigServCell-r12*, or Table 10.1.3.1-1B if the UE is
> configured with the higher layer parameter *shortProcessingTime*,
> ![](media/image293.wmf){width="0.11458333333333333in"
> height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such
> that ![](media/image294.wmf){width="1.1354166666666667in"
> height="0.21875in"},
> ![](media/image295.wmf){width="2.4583333333333335in"
> height="0.3333333333333333in"},
> ![](media/image296.wmf){width="0.3645833333333333in"
> height="0.21875in"} is the number of the first CCE used for
> transmission of the corresponding PDCCH in subframe
> ![](media/image339.wmf){width="0.3854166666666667in"
> height="0.22916666666666666in"}, and
> ![](media/image340.wmf){width="0.5208333333333334in"
> height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
> height="0.23958333333333334in"}, are configured by higher layers.

\- For a PDSCH transmission where there is not a corresponding
PDCCH/EPDCCH detected in subframe
![](media/image341.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}, the value of
![](media/image311.wmf){width="0.5729166666666666in" height="0.28125in"}
is determined according to higher layer configuration and Table 9.2-2.

\- For a PDSCH transmission indicated by the detection of corresponding
EPDCCH or a EPDCCH indicating downlink SPS release in sub-frame
![](media/image342.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"} where
![](media/image343.wmf){width="0.4895833333333333in"
height="0.22916666666666666in"}, the UE shall use

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission\
![](media/image344.wmf){width="4.375in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission\
![](media/image345.wmf){width="5.4375in" height="0.5104166666666666in"}

> where

\- if the value of ![](media/image331.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"}is same as the value of an index
![](media/image328.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image346.wmf){width="0.5in"
height="0.21875in"}, then
![](media/image347.wmf){width="0.4166666666666667in"
height="0.16666666666666666in"}and
![](media/image348.wmf){width="0.375in" height="0.16666666666666666in"};

\- otherwise, if the value of
![](media/image331.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"}is same as the value of an index
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"}, where
![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
then ![](media/image349.wmf){width="0.4791666666666667in"
height="0.16666666666666666in"}and
![](media/image350.wmf){width="0.40625in"
height="0.16666666666666666in"};

, and where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image342.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"},
![](media/image117.wmf){width="0.6041666666666666in"
height="0.2708333333333333in"} for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image342.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"} is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image342.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"} which is described in Clause 6.8A.5 in
\[3\].

![](media/image351.wmf){width="0.375in" height="0.22916666666666666in"}
is determined as follows

\- If ![](media/image352.wmf){width="0.40625in" height="0.1875in"} and
![](media/image353.wmf){width="0.40625in" height="0.1875in"},
![](media/image354.wmf){width="0.375in" height="0.22916666666666666in"}
is determined from the HARQ-ACK resource offset field in the DCI format
of the corresponding EPDCCH as given in Table 10.1.2.1-1.

\- If ![](media/image355.wmf){width="0.7604166666666666in"
height="0.1875in"} and ![](media/image353.wmf){width="0.40625in"
height="0.1875in"}, ![](media/image356.wmf){width="0.375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2, where the variable
![](media/image357.wmf){width="0.34375in"
height="0.22916666666666666in"}in the table is substituted
with![](media/image356.wmf){width="0.375in"
height="0.22916666666666666in"}, the variable
![](media/image302.wmf){width="0.1875in" height="0.15625in"}in the table
is substituted with
![](media/image358.wmf){width="0.16666666666666666in"
height="0.1875in"}, the variable
![](media/image359.wmf){width="0.19791666666666666in" height="0.1875in"}
in the table is substituted with
![](media/image360.wmf){width="0.20833333333333334in"
height="0.1875in"}and the variable
![](media/image361.wmf){width="0.16666666666666666in"
height="0.21875in"}in the table is substituted with
![](media/image362.wmf){width="0.21875in" height="0.21875in"}.

\- If ![](media/image283.wmf){width="0.5208333333333334in"
height="0.1875in"} and ![](media/image284.wmf){width="0.40625in"
height="0.1875in"}, ![](media/image363.wmf){width="0.375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-3,

For a given subframe ![](media/image364.wmf){width="0.125in"
height="0.13541666666666666in"},
![](media/image365.wmf){width="0.65625in" height="0.2708333333333333in"}
is determined as follows

\- If the UE is configured to monitor EPDCCH in subframe
![](media/image364.wmf){width="0.125in" height="0.13541666666666666in"},
![](media/image366.wmf){width="0.65625in" height="0.2708333333333333in"}
is equal to the number of ECCEs in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}configured for that UE in subframe
![](media/image364.wmf){width="0.125in" height="0.13541666666666666in"}.

\- If the UE is not configured to monitor EPDCCH in subframe
![](media/image364.wmf){width="0.125in" height="0.13541666666666666in"},
![](media/image367.wmf){width="0.65625in" height="0.2708333333333333in"}
is equal to the number of ECCEs computed assuming EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for that UE in subframe
![](media/image364.wmf){width="0.125in" height="0.13541666666666666in"}.

\- For normal downlink CP, if subframe
![](media/image364.wmf){width="0.125in" height="0.13541666666666666in"}
is a special subframe with special subframe configuration 0, 5 or 10 if
configured by *ssp10-CRS-LessDwPTS*,
![](media/image368.wmf){width="0.65625in" height="0.2708333333333333in"}
is equal to 0.

\- For extended downlink CP, if subframe
![](media/image364.wmf){width="0.125in" height="0.13541666666666666in"}
is a special subframe with special subframe configuration 0 or 4 or 7,
![](media/image369.wmf){width="0.65625in" height="0.2708333333333333in"}
is equal to 0.

For a non-BL/CE UE, if the UE is not configured with two antenna port
transmission for PUCCH format 1b with channel selection, and if the UE
is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12,* based on higher layer signalling the UE
configured with a single serving cell will perform channel selection
either according to the set of Tables 10.1.3-2, 10.1.3-3, and 10.1.3-4
or according to the set of Tables 10.1.3-5, 10.1.3-6, and 10.1.3-7.

If a UE is configured with two antenna port transmission for PUCCH
format 1b with channel selection, and if the UE is not configured with
the higher layer parameter *EIMTA-MainConfigServCell-r12,* then the UE
will perform channel selection according to the set of Tables 10.1.3-5,
10.1.3-6, and 10.1.3-7.

If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12,* the UE configured with a single serving
cell will perform channel selection according to the set of Tables
10.1.3-5, 10.1.3-6, and 10.1.3-7.

For the selected table set, the UE shall transmit
![](media/image370.wmf){width="0.5208333333333334in"
height="0.17708333333333334in"} on PUCCH resource
![](media/image371.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"}in sub-frame
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port
![](media/image372.wmf){width="0.16666666666666666in" height="0.1875in"}
using PUCCH format 1b according to Clause 5.4.1 in \[3\] where

\- ![](media/image373.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"}=![](media/image157.wmf){width="0.5in"
height="0.2708333333333333in"}for antenna port
![](media/image374.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}and the value of
![](media/image370.wmf){width="0.5208333333333334in"
height="0.17708333333333334in"} and the PUCCH resource
![](media/image375.wmf){width="0.5in" height="0.2708333333333333in"} are
generated by channel selection according to the selected set of Tables
for *M* = 2, 3, and 4 respectively

\- ![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} for antenna
port![](media/image155.wmf){width="0.1875in"
height="0.22916666666666666in"}, where
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is selected from PUCCH resources
![](media/image159.wmf){width="0.5104166666666666in"
height="0.28125in"}configured by higher layers where
![](media/image376.wmf){width="0.7395833333333334in"
height="0.16666666666666666in"}, according to selected set of Tables for
*M* = 2, 3, and 4 respectively by replacing
![](media/image157.wmf){width="0.5in" height="0.2708333333333333in"}with
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"}and replacing
![](media/image158.wmf){width="0.5104166666666666in" height="0.28125in"}
with ![](media/image159.wmf){width="0.5104166666666666in"
height="0.28125in"}, when the UE is configured with two antenna port
transmission for PUCCH format 1b with channel selection.

Table 10.1.3-2: Transmission of HARQ-ACK multiplexing for *M* = 2

  HARQ-ACK(0), HARQ-ACK(1)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image370.wmf){width="0.5208333333333334in" height="0.17708333333333334in"}
  -------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK                   ![](media/image378.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, NACK/DTX              ![](media/image379.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, ACK              ![](media/image378.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 0
  NACK/DTX, NACK             ![](media/image378.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK, DTX                  ![](media/image379.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  DTX, DTX                   No transmission                                                                        

Table 10.1.3-3: Transmission of HARQ-ACK multiplexing for *M* = 3

  HARQ-ACK(0), HARQ-ACK(1), HARQ-ACK(2)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image370.wmf){width="0.5208333333333334in" height="0.17708333333333334in"}
  --------------------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK, ACK                           ![](media/image380.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, NACK/DTX                      ![](media/image381.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, NACK/DTX, ACK                      ![](media/image382.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, NACK/DTX, NACK/DTX                 ![](media/image383.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, ACK, ACK                      ![](media/image384.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK/DTX, ACK, NACK/DTX                 ![](media/image385.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 0
  NACK/DTX, NACK/DTX, ACK                 ![](media/image386.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 0
  DTX, DTX, NACK                          ![](media/image387.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  DTX, NACK, NACK/DTX                     ![](media/image388.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK, NACK/DTX, NACK/DTX                ![](media/image389.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  DTX, DTX, DTX                           No transmission                                                                        

Table 10.1.3-4: Transmission of HARQ-ACK multiplexing for *M* = 4

  HARQ-ACK(0), HARQ-ACK(1), HARQ-ACK(2), HARQ-ACK(3)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image370.wmf){width="0.5208333333333334in" height="0.17708333333333334in"}
  ---------------------------------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK, ACK, ACK                                   ![](media/image390.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, ACK, NACK/DTX                              ![](media/image391.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK/DTX,NACK/DTX,NACK,DTX                           ![](media/image392.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, NACK/DTX, ACK                              ![](media/image393.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK, DTX, DTX, DTX                                  ![](media/image394.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  ACK, ACK, NACK/DTX, NACK/DTX                         ![](media/image395.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, ACK, ACK                              ![](media/image396.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, NACK/DTX, NACK                   ![](media/image397.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  ACK, NACK/DTX, ACK, NACK/DTX                         ![](media/image398.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  ACK, NACK/DTX, NACK/DTX, ACK                         ![](media/image399.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  ACK, NACK/DTX, NACK/DTX, NACK/DTX                    ![](media/image400.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK, ACK, ACK                              ![](media/image401.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, NACK, DTX, DTX                             ![](media/image402.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 0
  NACK/DTX, ACK, ACK, NACK/DTX                         ![](media/image403.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK/DTX, ACK, NACK/DTX, ACK                         ![](media/image404.wmf){width="0.5208333333333334in" height="0.28125in"}               1, 0
  NACK/DTX, ACK, NACK/DTX, NACK/DTX                    ![](media/image405.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK, ACK                         ![](media/image406.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK, NACK/DTX                    ![](media/image407.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 0
  NACK/DTX, NACK/DTX, NACK/DTX, ACK                    ![](media/image408.wmf){width="0.5208333333333334in" height="0.28125in"}               0, 0
  DTX, DTX, DTX, DTX                                   No transmission                                                                        

Table 10.1.3-5: Transmission of HARQ-ACK multiplexing for *M* = 2

  HARQ-ACK(0), HARQ-ACK(1)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  -------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK                   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  ACK, NACK/DTX              ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK              ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK, NACK/DTX             ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  DTX, NACK/DTX              No Transmission                                                                        

Table 10.1.3-6: Transmission of HARQ-ACK multiplexing for *M* = 3

  HARQ-ACK(0), HARQ-ACK(1), HARQ-ACK(2)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image409.wmf){width="0.5208333333333334in" height="0.19791666666666666in"}
  --------------------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK, ACK                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, NACK/DTX                      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, ACK                      ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, NACK/DTX                 ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK, ACK                      ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, ACK, NACK/DTX                 ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK                 ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  NACK, NACK/DTX, NACK/DTX                ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  DTX, NACK/DTX, NACK/DTX                 No Transmission                                                                        

Table 10.1.3-7: Transmission of HARQ-ACK multiplexing for *M* = 4

  HARQ-ACK(0), HARQ-ACK(1), HARQ-ACK(2), HARQ-ACK(3)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  ---------------------------------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK, ACK, ACK                                   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1
  ACK, ACK, ACK, NACK/DTX                              ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, NACK/DTX, ACK                              ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0
  ACK, ACK, NACK/DTX, NACK/DTX                         ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, ACK, ACK                              ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1
  ACK, NACK/DTX, ACK, NACK/DTX                         ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, NACK/DTX, ACK                         ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1
  ACK, NACK/DTX, NACK/DTX, NACK/DTX                    ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK, ACK, ACK                              ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0
  NACK/DTX, ACK, ACK, NACK/DTX                         ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, ACK, NACK/DTX, ACK                         ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  NACK/DTX, ACK, NACK/DTX, NACK/DTX                    ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK, ACK                         ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK, NACK/DTX                    ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  NACK/DTX, NACK/DTX, NACK/DTX, ACK                    ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0
  NACK, NACK/DTX, NACK/DTX, NACK/DTX                   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  DTX, NACK/DTX, NACK/DTX, NACK/DTX                    No Transmission                                                                        

####  10.1.3.2 TDD HARQ-ACK procedure for more than one configured serving cell

If a UE configured with *EIMTA-MainConfigServCell-r12* for a serving
cell, \"UL/DL configuration\" of the serving cell in the rest of this
Clause refers to the UL/DL configuration given by the parameter
*eimta-HARQ-ReferenceConfig-r12* for the serving cell unless specified
otherwise.

For TDD serving cell not configured for PUSCH/PUCCH transmission,
\"UL/DL configuration\" of the serving cell in the rest of this Clause
refers to the UL/DL configuration given by the parameter
*harq-ReferenceConfig-r14* for the serving cell unless specified
otherwise.

The TDD HARQ-ACK feedback procedures for more than one configured
serving cell are either based on a PUCCH format 1b with channel
selection HARQ-ACK procedure as described in Clause 10.1.3.2.1 or a
PUCCH format 3 HARQ-ACK procedure as described in Clause 10.1.3.2.2 or a
PUCCH format 4 HARQ-ACK procedure as described in Clause 10.1.3.2.3 or a
PUCCH format 5 HARQ-ACK procedure as described in Clause 10.1.3.2.4.

HARQ-ACK transmissionÂ on two antenna ports
![](media/image410.wmf){width="0.8125in" height="0.20833333333333334in"}
is supported for PUCCH format 3 and TDD with more than one configured
serving cell.

If a UE is configured with more than one serving cell and the TDD UL/DL
configurations of all serving cells are the same, TDD UL/DL
configuration 5 with PUCCH format 3 is only supported for up to two
configured serving cells.\
If a UE is configured with two serving cells and the TDD UL/DL
configuration of the two serving cells is the same, TDD UL/DL
configuration 5 with PUCCH format 1b with channel selection for two
configured serving cells is not supported. If a UE is configured with
two serving cells and if the TDD UL/DL configuration of the two serving
cells are not the same and if the DL-reference UL/DL configuration (as
defined in Clause 10.2) of at least one serving cell is TDD UL/DL
Configuration 5, PUCCH format 1b with channel selection is not
supported.

If a UE is configured with the parameter *EIMTA-MainConfigServCell-r12*
for at least one serving cell and is configured with PUCCH format 3
without PUCCH format 4/5 configured, the UE is not expected to be
configured with more than two serving cells having UL/DL Configuration 5
as a DL-reference UL/DL configuration.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 1b with
channel selection and TDD with two configured serving cells.

##### 10.1.3.2.1 PUCCH format 1b with channel selection HARQ-ACK procedure

If a UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*,
then![](media/image411.wmf){width="0.3958333333333333in"
height="0.15625in"} where the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 (where \"UL/DL
configuration\" in the table refers to the higher layer parameter
*subframeAssignment*), and
![](media/image412.wmf){width="0.22916666666666666in"
height="0.17708333333333334in"}is the number of elements in set
![](media/image413.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with two serving cells with the same UL/DL
configurations, then in the rest of this clause,
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is as defined in Clause 10.2 and
![](media/image235.wmf){width="0.1875in" height="0.15625in"}is the
number of elements for subframe *n* in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}, and
![](media/image414.wmf){width="0.7604166666666666in"
height="0.21875in"}.

If a UE is configured with two serving cells with different UL/DL
configurations,

\- then the UE shall determine ![](media/image415.wmf){width="0.21875in"
height="0.1875in"} for a subframe *n* in this Clause
as![](media/image416.wmf){width="1.9791666666666667in"
height="0.2708333333333333in"}, where

\- ![](media/image417.wmf){width="0.5416666666666666in"
height="0.2708333333333333in"} denotes the number of elements for
subframe *n* in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} for the primary cell (as defined in Clause 10.2)

\- ![](media/image418.wmf){width="0.53125in" height="0.21875in"} denotes
the number of elements for subframe *n* in the
set![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"} for the secondary serving cell (as
defined in Clause 10.2)

\- if ![](media/image420.wmf){width="0.9791666666666666in"
height="0.2708333333333333in"}, then the UE shall, for the secondary
serving cell, set HARQ-ACK(j) to DTX for *j* =
![](media/image421.wmf){width="0.53125in" height="0.21875in"}to
![](media/image422.wmf){width="0.4270833333333333in" height="0.1875in"}.

\- if ![](media/image423.wmf){width="0.9166666666666666in"
height="0.2708333333333333in"}, then the UE shall, for the primary cell,
set HARQ-ACK(j) to DTX for *j* =
![](media/image417.wmf){width="0.5416666666666666in"
height="0.2708333333333333in"} to
![](media/image422.wmf){width="0.4270833333333333in" height="0.1875in"}

If the UE is configured with two serving cells with different UL/DL
configurations, then in the rest of this Clause,
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}
=![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"} where
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"}is defined in Clause 10.2.

For TDD HARQ-ACK multiplexing with PUCCH format 1b with channel
selection and two configured serving cells and a subframe *n* with
![](media/image424.wmf){width="0.375in" height="0.15625in"}, a UE shall
determine the number of HARQ-ACK bits,
![](media/image95.wmf){width="0.125in" height="0.13541666666666666in"},
based on the number of configured serving cells and the downlink
transmission modes configured for each serving cell. The UE shall use
two HARQ-ACK bits for a serving cell configured with a downlink
transmission mode that supports up to two transport blocks; and one
HARQ-ACK bit otherwise.

For TDD HARQ-ACK multiplexing with PUCCH format 1b with channel
selection and two configured serving cells and a subframe *n* with
![](media/image39.wmf){width="0.3958333333333333in" height="0.15625in"},
the UE shall transmit ![](media/image146.wmf){width="0.40625in"
height="0.15625in"} on PUCCH resource
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for
![](media/image98.wmf){width="0.15625in" height="0.20833333333333334in"}
mapped to antenna port *p* using PUCCH format 1b where

\- ![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} = ![](media/image148.wmf){width="0.5in"
height="0.2708333333333333in"} for antenna port
![](media/image101.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}, where
![](media/image148.wmf){width="0.5in" height="0.2708333333333333in"}
selected from ![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources,
![](media/image425.wmf){width="0.5416666666666666in" height="0.28125in"}
where ![](media/image426.wmf){width="0.71875in" height="0.1875in"}
and![](media/image427.wmf){width="0.6354166666666666in"
height="0.1875in"}, according to Tables 10.1.3.2-1, 10.1.3.2-2, and
10.1.3.2-3 in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b.

\- ![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} for antenna
port![](media/image155.wmf){width="0.1875in"
height="0.22916666666666666in"}, where
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} selected from
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources,
![](media/image156.wmf){width="0.5416666666666666in"
height="0.28125in"}configured by higher layers where
![](media/image426.wmf){width="0.71875in" height="0.1875in"}
and![](media/image427.wmf){width="0.6354166666666666in"
height="0.1875in"}, according to Tables 10.1.3.2-1, 10.1.3.2-2, and
10.1.3.2-3 by replacing ![](media/image157.wmf){width="0.5in"
height="0.2708333333333333in"}with
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"}and replacing
![](media/image158.wmf){width="0.5104166666666666in" height="0.28125in"}
with ![](media/image159.wmf){width="0.5104166666666666in"
height="0.28125in"} in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"}, when the UE is configured with two
antenna port transmission for PUCCH format 1b with channel selection,

and for a subframe *n* with ![](media/image428.wmf){width="0.375in"
height="0.15625in"}, HARQ-ACK(*j*) denotes the ACK/NACK/DTX response for
a transport block or SPS release PDCCH/EPDCCH associated with serving
cell, where the transport block and serving cell for HARQ-ACK(*j*) and
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources are given by Table 10.1.2.2.1-1. For
a subframe *n* with ![](media/image429.wmf){width="0.3958333333333333in"
height="0.15625in"}, HARQ-ACK(*j*) denotes the ACK/NACK/DTX response for
a PDSCH transmission or SPS release PDCCH/EPDCCH within subframe(s)
given by set ![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} on each serving cell, where the subframes on each
serving cell for HARQ-ACK(*j*) and
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources are given by Table 10.1.3.2-4.

If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12,* the UE shall determine the
![](media/image149.wmf){width="0.13541666666666666in"
height="0.15625in"} PUCCH resources,
![](media/image430.wmf){width="0.5416666666666666in" height="0.28125in"}
associated with HARQ-ACK(*j*) where
![](media/image431.wmf){width="0.71875in" height="0.1875in"} in Table
10.1.2.2.1-1 for ![](media/image428.wmf){width="0.375in"
height="0.15625in"} and Table 10.1.3.2-4 for
![](media/image429.wmf){width="0.3958333333333333in"
height="0.15625in"}, according to

\- for a PDSCH transmission indicated by the detection of a
corresponding PDCCH in subframe ![](media/image432.wmf){width="0.4375in"
height="0.2604166666666667in"}, where
![](media/image433.wmf){width="0.4375in" height="0.20833333333333334in"}
on the primary cell, or for a PDCCH indicating downlink SPS release
(defined in Clause 9.2) in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.4375in"
height="0.20833333333333334in"} on the primary cell, the PUCCH resource
is ![](media/image434.wmf){width="3.9270833333333335in"
height="0.28125in"}, where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell, and
for a subframe *n* with ![](media/image428.wmf){width="0.375in"
height="0.15625in"} and a transmission mode that supports up to two
transport blocks on the serving cell where the corresponding PDSCH
transmission occurs, the PUCCH resource
![](media/image438.wmf){width="0.6354166666666666in" height="0.28125in"}
is given by ![](media/image439.wmf){width="4.229166666666667in"
height="0.28125in"} where
![](media/image440.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding DCI assignment and
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers.

\- for a PDSCH transmission on the primary cell where there is not a
corresponding PDCCH/EPDCCH detected within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the value of
![](media/image441.wmf){width="0.5416666666666666in" height="0.28125in"}
is determined according to higher layer configuration and Table 9.2-2.

\- For a PDSCH transmission indicated by the detection of corresponding
EPDCCH or a EPDCCH indicating downlink SPS release in sub-frame
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"}
where![](media/image433.wmf){width="0.4375in"
height="0.20833333333333334in"} on the primary cell, the PUCCH resource
![](media/image441.wmf){width="0.5416666666666666in" height="0.28125in"}
is given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image442.wmf){width="3.28125in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image443.wmf){width="4.28125in" height="0.5104166666666666in"}

> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
> ![](media/image445.wmf){width="0.40625in" height="0.1875in"},
> ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image446.wmf){width="0.3958333333333333in"
> height="0.1875in"}, ![](media/image116.wmf){width="0.34375in"
> height="0.22916666666666666in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH
> in subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs in
> EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}*configured for that UE in subframe*
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
> subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} *is equal to the number of ECCEs
> computed assuming EPDCCH-PRB-set*
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is *configured for that UE in subframe*
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. For normal downlink CP, if subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0, 5 or 10 if configured by *ssp10-CRS-LessDwPTS*,
> ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
> if subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For a subframe *n* with
> ![](media/image428.wmf){width="0.375in" height="0.15625in"} and a
> transmission mode that supports up to two transport blocks on the
> serving cell where the corresponding PDSCH transmission occurs, the
> PUCCH resource ![](media/image438.wmf){width="0.6354166666666666in"
> height="0.28125in"} is given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image266.wmf){width="3.4270833333333335in"
height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image267.wmf){width="4.4375in" height="0.5104166666666666in"}

\- for a PDSCH transmission indicated by the detection of a
corresponding PDCCH/EPDCCH within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} on the
secondary cell, the value of
![](media/image447.wmf){width="0.5416666666666666in"
height="0.28125in"}, and the value of
![](media/image448.wmf){width="0.6354166666666666in" height="0.28125in"}
for a subframe *n* with ![](media/image449.wmf){width="0.40625in"
height="0.15625in"} or for a subframe *n* with
![](media/image428.wmf){width="0.375in" height="0.15625in"} and a
transmission mode on the secondary cell that supports up to two
transport blocks is determined according to higher layer configuration
and Table 10.1.2.2.1-2. The TPC field in the DCI format of the
corresponding PDCCH/EPDCCH shall be used to determine the PUCCH resource
values from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.1-2. For a UE configured for
a transmission mode on the secondary cell that supports up to two
transport blocks and a subframe *n* with
![](media/image428.wmf){width="0.375in" height="0.15625in"}, or for a
subframe *n* with ![](media/image449.wmf){width="0.40625in"
height="0.15625in"}, a PUCCH resource value in Table 10.1.2.2.1-2 maps
to two PUCCH resources
![](media/image450.wmf){width="1.3333333333333333in"
height="0.28125in"}, otherwise, the PUCCH resource value maps to a
single PUCCH resource
![](media/image451.wmf){width="0.5416666666666666in"
height="0.28125in"}. A UE shall assume that the same HARQ-ACK PUCCH
resource value is transmitted in the TPC field on all PDCCH/EPDCCH
assignments on the secondary cell within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

Table 10.1.3.2-1: Transmission of HARQ-ACK multiplexing for *A* = 2

  HARQ-ACK(0), HARQ-ACK(1)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  -------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK                   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  ACK, NACK/DTX              ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK              ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK, NACK/DTX             ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  DTX, NACK/DTX              No Transmission                                                                        

Table 10.1.3.2-2: Transmission of HARQ-ACK multiplexing for *A* = 3

  HARQ-ACK(0), HARQ-ACK(1), HARQ-ACK(2)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image409.wmf){width="0.5208333333333334in" height="0.19791666666666666in"}
  --------------------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK, ACK                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, NACK/DTX                      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, ACK                      ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, NACK/DTX                 ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK, ACK                      ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, ACK, NACK/DTX                 ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK                 ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  NACK, NACK/DTX, NACK/DTX                ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  DTX, NACK/DTX, NACK/DTX                 No Transmission                                                                        

Table 10.1.3.2-3: Transmission of HARQ-ACK multiplexing for *A* = 4

  HARQ-ACK(0), HARQ-ACK(1), HARQ-ACK(2), HARQ-ACK(3)   ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image186.wmf){width="0.4583333333333333in" height="0.17708333333333334in"}
  ---------------------------------------------------- -------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------
  ACK, ACK, ACK, ACK                                   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1
  ACK, ACK, ACK, NACK/DTX                              ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  ACK, ACK, NACK/DTX, ACK                              ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0
  ACK, ACK, NACK/DTX, NACK/DTX                         ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, ACK, ACK                              ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1
  ACK, NACK/DTX, ACK, NACK/DTX                         ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0
  ACK, NACK/DTX, NACK/DTX, ACK                         ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1
  ACK, NACK/DTX, NACK/DTX, NACK/DTX                    ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1
  NACK/DTX, ACK, ACK, ACK                              ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0
  NACK/DTX, ACK, ACK, NACK/DTX                         ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1
  NACK/DTX, ACK, NACK/DTX, ACK                         ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0
  NACK/DTX, ACK, NACK/DTX, NACK/DTX                    ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK, ACK                         ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1
  NACK/DTX, NACK/DTX, ACK, NACK/DTX                    ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  NACK/DTX, NACK/DTX, NACK/DTX, ACK                    ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0
  NACK, NACK/DTX, NACK/DTX, NACK/DTX                   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0
  DTX, NACK/DTX, NACK/DTX, NACK/DTX                    No Transmission                                                                        

Table 10.1.3.2-4: Mapping of subframes on each serving cell to
HARQ-ACK(*j*) for PUCCH format 1b HARQ-ACK channel selection for TDD
with ![](media/image429.wmf){width="0.3958333333333333in"
height="0.15625in"}

  ---------------------------------------------------------------------------------------------
  A   HARQ-ACK(j)                                                        
  --- --------------------- ---------------------- --------------------- ----------------------
      HARQ-ACK(0)           HARQ-ACK(1)            HARQ-ACK(2)           HARQ-ACK(3)

  4   The first subframe\   The second subframe\   The first subframe\   The second subframe\
      of Primary cell       of Primary cell        of Secondary cell     of Secondary cell
  ---------------------------------------------------------------------------------------------

For TDD HARQ-ACK multiplexing with PUCCH format 1b with channel
selection and sub-frame ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} with
![](media/image452.wmf){width="0.40625in" height="0.15625in"} and two
configured serving cells, denotes
![](media/image453.wmf){width="0.5729166666666666in" height="0.28125in"}
![](media/image454.wmf){width="0.5in" height="0.16666666666666666in"}as
the PUCCH resource derived from the transmissions in
![](media/image235.wmf){width="0.1875in" height="0.15625in"} downlink or
special sub-frames associated with the UL subframe *n* .
![](media/image455.wmf){width="0.5208333333333334in" height="0.28125in"}
and ![](media/image456.wmf){width="0.5208333333333334in"
height="0.28125in"}are associated with the PDSCH transmission(s) or a
PDCCH/EPDCCH indicating downlink SPS release (defined in Clause 9.2) on
the primary cell and
![](media/image457.wmf){width="0.5208333333333334in" height="0.28125in"}
and ![](media/image458.wmf){width="0.5208333333333334in"
height="0.28125in"}are associated with the PDSCH transmission(s) on the
secondary cell.

For Primary cell:

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, and if there is a
PDSCH transmission on the primary cell without a corresponding
PDCCH/EPDCCH detected within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"},

\- the value of ![](media/image455.wmf){width="0.5208333333333334in"
height="0.28125in"} is determined according to higher layer
configuration and Table 9.2-2.

\- for a PDSCH transmission on the primary cell indicated by the
detection of a corresponding PDCCH in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5104166666666666in"
height="0.22916666666666666in"} with the DAI value in the PDCCH equal to
\'1\' (defined in Table 7.3-X) or a PDCCH indicating downlink SPS
release (defined in Clause 9.2) in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5625in"
height="0.2604166666666667in"} with the DAI value in the PDCCH equal to
\'1\', the PUCCH resource
![](media/image459.wmf){width="3.8020833333333335in"
height="0.2708333333333333in"} where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image460.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"}, where
![](media/image440.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image461.wmf){width="0.375in" height="0.20833333333333334in"}
and ![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"}
is configured by higher layers.

\- for a PDSCH transmission on the primary cell indicated by the
detection of a corresponding EPDCCH in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} with the DAI value in the EPDCCH equal
to \'1\' (defined in Table 7.3-X) or an EPDCCH indicating downlink SPS
release (defined in Clause 9.2) in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5625in"
height="0.2604166666666667in"} with the DAI value in the EPDCCH equal to
\'1\', the PUCCH resource is given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image462.wmf){width="3.28125in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image463.wmf){width="4.291666666666667in"
height="0.5104166666666666in"}

where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
![](media/image445.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.2.1-1. If
![](media/image446.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs in
EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}*configured for that UE in subframe*
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs computed
assuming EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is *configured for that UE in
subframe*![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. For normal downlink CP, if subframe
![](media/image304.wmf){width="0.3854166666666667in" height="0.21875in"}
is a special subframe with special subframe configuration 0, 5 or 10 if
configured by *ssp10-CRS-LessDwPTS*,
![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
if subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"} is a special subframe with special subframe
configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, and if there is a
PDSCH transmission on the primary cell without a corresponding
PDCCH/EPDCCH detected within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"},

\- the value of ![](media/image455.wmf){width="0.5208333333333334in"
height="0.28125in"} is determined according to higher layer
configuration and Table 9.2-2.

\- for a PDSCH transmission on the primary cell indicated by the
detection of a corresponding PDCCH in subframe
![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}, where
![](media/image465.wmf){width="0.4895833333333333in"
height="0.22916666666666666in"} with the DAI value in the PDCCH equal to
\'1\' (defined in Table 7.3-X) or a PDCCH indicating downlink SPS
release (defined in Clause 9.2) in subframe
![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}, where
![](media/image465.wmf){width="0.4895833333333333in"
height="0.22916666666666666in"} with the DAI value in the PDCCH equal to
\'1\',

\- if the value of ![](media/image466.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, the PUCCH resource
![](media/image469.wmf){width="0.5208333333333334in" height="0.28125in"}
is given by ![](media/image470.wmf){width="3.3645833333333335in"
height="0.2708333333333333in"};

\- otherwise, if the value of
![](media/image466.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"} is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A), the PUCCH
resource ![](media/image469.wmf){width="0.5208333333333334in"
height="0.28125in"} is given by
![](media/image471.wmf){width="3.3854166666666665in"
height="0.2916666666666667in"};

where ![](media/image337.wmf){width="0.2916666666666667in"
height="0.20833333333333334in"} is the number of elements in the set
![](media/image338.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image472.wmf){width="1.1979166666666667in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image296.wmf){width="0.3645833333333333in" height="0.21875in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}, and
![](media/image473.wmf){width="0.5in" height="0.2604166666666667in"},
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"},
are configured by higher layers .

\- for a PDSCH transmission on the primary cell indicated by the
detection of a corresponding EPDCCH in
subframe![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}, where
![](media/image465.wmf){width="0.4895833333333333in"
height="0.22916666666666666in"} with the DAI value in the EPDCCH equal
to \'1\' (defined in Table 7.3-X) or an EPDCCH indicating downlink SPS
release (defined in Clause 9.2) in subframe
![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}, where
![](media/image465.wmf){width="0.4895833333333333in"
height="0.22916666666666666in"} with the DAI value in the EPDCCH equal
to \'1\', the PUCCH resource is given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image474.wmf){width="4.34375in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image475.wmf){width="5.40625in" height="0.5104166666666666in"}

where

\- if the value of ![](media/image466.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"} is same as the value of an index
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, then
![](media/image347.wmf){width="0.4166666666666667in"
height="0.16666666666666666in"}and
![](media/image476.wmf){width="0.375in" height="0.16666666666666666in"};

\- otherwise, if the value of
![](media/image466.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"}is same as the value of an index
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"}, where
![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
then ![](media/image477.wmf){width="0.4791666666666667in"
height="0.16666666666666666in"}and
![](media/image478.wmf){width="0.40625in"
height="0.16666666666666666in"};

, and where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image464.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
![](media/image479.wmf){width="0.375in" height="0.22916666666666666in"},
![](media/image480.wmf){width="0.84375in"
height="0.2708333333333333in"}, ![](media/image481.wmf){width="0.8125in"
height="0.2916666666666667in"} are determined as described in Clause
10.1.3.1.

\- HARQ-ACK(0) is the ACK/NACK/DTX response for the PDSCH transmission
without a corresponding PDCCH/EPDCCH. For
![](media/image482.wmf){width="0.7708333333333334in" height="0.1875in"},
if a PDSCH transmission with a corresponding PDCCH/EPDCCH and DAI value
in the PDCCH/EPDCCH equal to
\'![](media/image483.wmf){width="0.11458333333333333in"
height="0.17708333333333334in"}\' or a PDCCH/EPDCCH indicating downlink
SPS release and with DAI value in the PDCCH/EPDCCH equal to
\'![](media/image483.wmf){width="0.11458333333333333in"
height="0.17708333333333334in"}\' is received, HARQ-ACK(j) is the
corresponding ACK/NACK/DTX response; otherwise HARQ-ACK(j) shall be set
to DTX.

\- Otherwise,

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, for a PDSCH
transmission on the primary cell indicated by the detection of a
corresponding PDCCH in subframe ![](media/image432.wmf){width="0.4375in"
height="0.2604166666666667in"}, where
![](media/image484.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6} the DAI value in the PDCCH equal
to either \'1\' or \'2\' or a PDCCH indicating downlink SPS release
(defined in Clause 9.2) in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image484.wmf){width="0.5104166666666666in"
height="0.22916666666666666in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6} the DAI value in the PDCCH equal
to either \'1\' or \'2\', the PUCCH resource
![](media/image485.wmf){width="3.90625in" height="0.28125in"}, where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image460.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"}, where
![](media/image440.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image461.wmf){width="0.4375in"
height="0.23958333333333334in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"} is configured by higher layers and for
TDD UL/DL configuration of the primary cell belonging to {1,2,3,4,6},
![](media/image486.wmf){width="0.34375in"
height="0.19791666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'1\' and ![](media/image487.wmf){width="0.3125in"
height="0.19791666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'2\', and for the primary cell with TDD UL/DL
configuration 0 ![](media/image486.wmf){width="0.34375in"
height="0.1875in"} for the corresponding PDCCH.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, for a PDSCH
transmission on the primary cell indicated by the detection of a
corresponding PDCCH in subframe
![](media/image488.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, where
![](media/image489.wmf){width="0.4791666666666667in"
height="0.22916666666666666in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6} the DAI value in the PDCCH equal
to either \'1\' or \'2\' or a PDCCH indicating downlink SPS release
(defined in Clause 9.2) in subframe
![](media/image490.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, where
![](media/image489.wmf){width="0.4791666666666667in"
height="0.22916666666666666in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6} the DAI value in the PDCCH equal
to either \'1\' or \'2\',

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, the PUCCH resource
![](media/image492.wmf){width="0.5104166666666666in" height="0.28125in"}
is given by ![](media/image493.wmf){width="3.3854166666666665in"
height="0.2708333333333333in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A), the PUCCH
resource ![](media/image492.wmf){width="0.5104166666666666in"
height="0.28125in"} is given by
![](media/image494.wmf){width="3.4479166666666665in"
height="0.2916666666666667in"};

where ![](media/image495.wmf){width="0.28125in" height="0.25in"} is the
number of elements in the set
![](media/image338.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"}, where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image496.wmf){width="0.375in" height="0.22916666666666666in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image488.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, and
![](media/image497.wmf){width="0.5104166666666666in"
height="0.28125in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"}, are configured by higher layers. Here,
for TDD UL/DL configuration of the primary cell belonging to
{1,2,3,4,6}, ![](media/image486.wmf){width="0.34375in"
height="0.19791666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'1\' and ![](media/image487.wmf){width="0.3125in"
height="0.19791666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'2\', and for the primary cell with TDD UL/DL
configuration 0 ![](media/image486.wmf){width="0.34375in"
height="0.1875in"} for the corresponding PDCCH.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell for a PDSCH
transmission on the primary cell indicated by the detection of a
corresponding EPDCCH in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6} the DAI value in the EPDCCH equal
to either \'1\' or \'2\' or an EPDCCH indicating downlink SPS release
(defined in Clause 9.2) in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5625in"
height="0.2604166666666667in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6}the DAI value in the EPDCCH equal
to either \'1\' or \'2\', the PUCCH resource is given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image498.wmf){width="3.28125in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image499.wmf){width="4.28125in" height="0.5104166666666666in"}

where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
![](media/image445.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.2.1-1. If
![](media/image446.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs in
EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}*configured for that UE in subframe*
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
subframe![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs computed
assuming EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is *configured for that UE in subframe*
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. For normal downlink CP, if subframe
![](media/image304.wmf){width="0.3854166666666667in" height="0.21875in"}
is a special subframe with special subframe configuration 0, 5 or 10 if
configured by *ssp10-CRS-LessDwPTS*,
![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
if subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"} is a special subframe with special subframe
configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. Here, for TDD UL/DL
configuration of the primary cell belonging to {1,2,3,4,6}
![](media/image486.wmf){width="0.34375in" height="0.1875in"} for the
corresponding EPDCCH with the DAI value equal to \'1\' and
![](media/image487.wmf){width="0.3125in" height="0.1875in"} for the
corresponding EPDCCH with the DAI value equal to \'2\', and for the
primary cell with TDD UL/DL configuration 0
![](media/image486.wmf){width="0.3333333333333333in"
height="0.1875in"}for the corresponding EPDCCH.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell for a PDSCH
transmission on the primary cell indicated by the detection of a
corresponding EPDCCH in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
where ![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6} the DAI value in the EPDCCH equal
to either \'1\' or \'2\' or an EPDCCH indicating downlink SPS release
(defined in Clause 9.2) in
subframe![](media/image432.wmf){width="0.4375in"
height="0.2604166666666667in"}, where
![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} and for TDD UL/DL configuration of the
primary cell belonging to {1,2,3,4,6}the DAI value in the EPDCCH equal
to either \'1\' or \'2\', the PUCCH resource is given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image500.wmf){width="4.333333333333333in"
height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image501.wmf){width="5.395833333333333in"
height="0.5104166666666666in"}

where

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"} is same as the value of an index
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, then
![](media/image347.wmf){width="0.4166666666666667in"
height="0.16666666666666666in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"} is same as the value of an index
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"}, where
![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
then ![](media/image502.wmf){width="0.4166666666666667in"
height="0.16666666666666666in"};

, and where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"}
is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]..
![](media/image479.wmf){width="0.375in" height="0.22916666666666666in"},
![](media/image503.wmf){width="0.8020833333333334in"
height="0.2708333333333333in"},
![](media/image504.wmf){width="0.78125in"
height="0.2916666666666667in"}are determined as described in Clause
10.1.3.1. Here, for TDD UL/DL configuration of the primary cell
belonging to {1,2,3,4,6} ![](media/image486.wmf){width="0.34375in"
height="0.1875in"} for the corresponding EPDCCH with the DAI value equal
to \'1\' and ![](media/image487.wmf){width="0.3125in" height="0.1875in"}
for the corresponding EPDCCH with the DAI value equal to \'2\', and for
the primary cell with TDD UL/DL configuration 0
![](media/image486.wmf){width="0.3333333333333333in"
height="0.1875in"}for the corresponding EPDCCH.

\- For ![](media/image505.wmf){width="0.7916666666666666in"
height="0.1875in"} and TDD UL/DL configuration of the primary cell
belonging to {1,2,3,4,6}, if a PDSCH transmission with a corresponding
PDCCH/EPDCCH and DAI value in the PDCCH/EPDCCH equal to
\'![](media/image506.wmf){width="0.2916666666666667in"
height="0.1875in"}\' or a PDCCH/EPDCCH indicating downlink SPS release
and with DAI value in the PDCCH/EPDCCH equal to
\'![](media/image506.wmf){width="0.2916666666666667in"
height="0.1875in"}\' is received, HARQ-ACK(j) is the corresponding
ACK/NACK/DTX response; otherwise HARQ-ACK(j) shall be set to DTX. For
![](media/image505.wmf){width="0.7916666666666666in" height="0.1875in"}
and the primary cell with TDD UL/DL configuration 0, if a PDSCH
transmission with a corresponding PDCCH/EPDCCH or a PDCCH/EPDCCH
indicating downlink SPS release is received, HARQ-ACK(0) is the
corresponding ACK/NACK/DTX response; otherwise HARQ-ACK(j) shall be set
to DTX.

For Secondary cell:

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, for a PDSCH
transmission on the secondary cell indicated by the detection of a
corresponding PDCCH on the primary cell in subframe
![](media/image461.wmf){width="0.4375in"
height="0.23958333333333334in"}, where
![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} with the DAI value in the PDCCH equal to
either \'1\' or \'2\', the PUCCH resources
![](media/image507.wmf){width="3.90625in" height="0.28125in"}, where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image508.wmf){width="1.0625in" height="0.21875in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"}, where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image509.wmf){width="0.3645833333333333in" height="0.21875in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe ![](media/image461.wmf){width="0.375in"
height="0.20833333333333334in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"} is configured by higher layers,
![](media/image510.wmf){width="0.3020833333333333in"
height="0.16666666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'1\' and
![](media/image511.wmf){width="0.2916666666666667in"
height="0.16666666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'2\'.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, for a PDSCH
transmission on the secondary cell indicated by the detection of a
corresponding PDCCH on the primary cell in subframe
![](media/image461.wmf){width="0.4375in"
height="0.23958333333333334in"}, where
![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} with the DAI value in the PDCCH equal to
either \'1\' or \'2\',

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, the PUCCH resource
![](media/image492.wmf){width="0.5104166666666666in" height="0.28125in"}
is given by ![](media/image493.wmf){width="3.3854166666666665in"
height="0.2708333333333333in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
\"UL/DL configuration\" in the table refers to the higher layer
parameter *subframeAssignment*), the PUCCH resource
![](media/image492.wmf){width="0.5104166666666666in" height="0.28125in"}
is given by ![](media/image512.wmf){width="3.4479166666666665in"
height="0.2916666666666667in"};

where ![](media/image337.wmf){width="0.2916666666666667in"
height="0.20833333333333334in"} is the number of elements in the set
![](media/image338.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image496.wmf){width="0.375in" height="0.22916666666666666in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image488.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, and
![](media/image513.wmf){width="0.5208333333333334in"
height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"}, are configured by higher layers. Here,
![](media/image510.wmf){width="0.3020833333333333in"
height="0.16666666666666666in"} for the corresponding PDCCH with the DAI
value equal to \'1\' and
![](media/image511.wmf){width="0.2916666666666667in"
height="0.16666666666666666in"} for the corresponding PDCCH the DAI
value in the PDCCH equal to either \'1\' or \'2\'.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, for a PDSCH
transmission on the secondary cell indicated by the detection of a
corresponding EPDCCH on the primary cell in subframe
![](media/image461.wmf){width="0.4375in"
height="0.23958333333333334in"}, where
![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} with the DAI value in the PDCCH equal to
either \'1\' or \'2\', the PUCCH resources are given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image498.wmf){width="3.28125in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image499.wmf){width="4.28125in" height="0.5104166666666666in"}

where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
![](media/image445.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.2.1-1. If
![](media/image446.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs in
EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}*configured for that UE in subframe*
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
subframe![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} *is equal to the number of ECCEs computed
assuming EPDCCH-PRB-set* ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is *configured for that UE in
subframe*![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. For normal downlink CP, if subframe
![](media/image304.wmf){width="0.3854166666666667in" height="0.21875in"}
is a special subframe with special subframe configuration 0, 5 or 10 if
configured by *ssp10-CRS-LessDwPTS*,
![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
if subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"} is a special subframe with special subframe
configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. Here,
![](media/image510.wmf){width="0.3125in" height="0.16666666666666666in"}
for the corresponding EPDCCH with the DAI value equal to \'1\' and
![](media/image511.wmf){width="0.2916666666666667in"
height="0.16666666666666666in"} for the corresponding EPDCCH with the
DAI value equal to \'2\'.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, for a PDSCH
transmission on the secondary cell indicated by the detection of a
corresponding EPDCCH on the primary cell in subframe
![](media/image461.wmf){width="0.4375in"
height="0.23958333333333334in"}, where
![](media/image433.wmf){width="0.5104166666666666in"
height="0.23958333333333334in"} with the DAI value in the PDCCH equal to
either \'1\' or \'2\', the PUCCH resources are given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image514.wmf){width="4.333333333333333in"
height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image515.wmf){width="5.395833333333333in"
height="0.5104166666666666in"}

where

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"} is same as the value of an index
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, then
![](media/image347.wmf){width="0.4166666666666667in"
height="0.16666666666666666in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"} is same as the value of an index
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"}, where
![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
then ![](media/image502.wmf){width="0.4166666666666667in"
height="0.16666666666666666in"};

and where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter *pucch-ResourceStartOffset-r11 ,*
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image432.wmf){width="0.4375in" height="0.2604166666666667in"}
is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image444.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
![](media/image479.wmf){width="0.375in" height="0.22916666666666666in"},
![](media/image516.wmf){width="0.84375in"
height="0.2708333333333333in"}, ![](media/image517.wmf){width="0.8125in"
height="0.2916666666666667in"}are determined as described in Clause
10.1.3.1. For extended downlink CP, if subframe
![](media/image518.wmf){width="0.3854166666666667in"
height="0.22916666666666666in"} is a special subframe with special
subframe configuration 0 or 4 or 7,
![](media/image519.wmf){width="0.78125in" height="0.2916666666666667in"}
is equal to 0. Here, ![](media/image510.wmf){width="0.3125in"
height="0.16666666666666666in"} for the corresponding EPDCCH with the
DAI value equal to \'1\' and
![](media/image511.wmf){width="0.2916666666666667in"
height="0.16666666666666666in"} for the corresponding EPDCCH with the
DAI value equal to \'2\'.

\- for a PDSCH transmission indicated by the detection of a
corresponding PDCCH/EPDCCH within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image520.wmf){width="0.375in" height="0.16666666666666666in"}
on the secondary cell, the value of
![](media/image521.wmf){width="0.5416666666666666in"
height="0.28125in"}and
![](media/image522.wmf){width="0.5416666666666666in" height="0.28125in"}
is determined according to higher layer configuration and Table
10.1.2.2.1-2. The TPC field in the DCI format of the corresponding
PDCCH/EPDCCH shall be used to determine the PUCCH resource values from
one of the four resource values configured by higher layers, with the
mapping defined in Table 10.1.2.2.1-2. A UE shall assume that the same
HARQ-ACK PUCCH resource value is transmitted in the TPC field on all
PDCCH/EPDCCH assignments on the secondary cell within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- For ![](media/image505.wmf){width="0.7916666666666666in"
height="0.1875in"}, if a PDSCH transmission with a corresponding
PDCCH/EPDCCH and DAI value in the PDCCH/EPDCCH equal to
\'![](media/image506.wmf){width="0.2916666666666667in"
height="0.1875in"}\' is received, HARQ-ACK(j) is the corresponding
ACK/NACK/DTX response; otherwise HARQ-ACK(j) shall be set to DTX.

A UE shall perform channel selection according to the Tables 10.1.3.2-5,
and 10.1.3.2-6 and transmit
![](media/image370.wmf){width="0.5208333333333334in"
height="0.17708333333333334in"} on PUCCH resource
![](media/image97.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for
![](media/image98.wmf){width="0.15625in" height="0.20833333333333334in"}
mapped to antenna port *p* using PUCCH format 1b according to Clause
5.4.1 in \[3\] where

\- ![](media/image523.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} =
![](media/image524.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} in sub-frame
![](media/image525.wmf){width="0.13541666666666666in"
height="0.15625in"} for ![](media/image98.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port
![](media/image101.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"} where \"any\" in Tables 10.1.3.2-5, and
10.1.3.2-6 represents any response of ACK, NACK, or DTX. The value of
![](media/image370.wmf){width="0.5208333333333334in"
height="0.17708333333333334in"} and the PUCCH resource
![](media/image524.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} are generated by channel selection
according to Tables 10.1.3.2-5, and 10.1.3.2-6 for *M* = 3, and 4
respectively.

\- ![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} for antenna
port![](media/image155.wmf){width="0.1875in"
height="0.22916666666666666in"}, where
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} selected from PUCCH resources,
![](media/image159.wmf){width="0.5104166666666666in"
height="0.28125in"}configured by higher layers where
![](media/image526.wmf){width="0.4895833333333333in"
height="0.16666666666666666in"} according Tables 10.1.3.2-5, and
10.1.3.2-6 for *M* = 3, and 4 respectively by replacing
![](media/image157.wmf){width="0.5in" height="0.2708333333333333in"}with
![](media/image154.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"}and replacing
![](media/image158.wmf){width="0.5104166666666666in" height="0.28125in"}
with ![](media/image159.wmf){width="0.5104166666666666in"
height="0.28125in"}, where \"any\" in Tables 10.1.3.2-5, and 10.1.3.2-6
represents any response of ACK, NACK, or DTX, when the UE is configured
with two antenna port transmission for PUCCH format 1b with channel
selection.

Table 10.1.3.2-5: Transmission of HARQ-ACK multiplexing for *M* = 3

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Primary Cell         Secondary Cell       Resource                                                                               Constellation                                                                          RM Code\
                                                                                                                                                                                                                          Input Bits
  -------------------- -------------------- -------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------- ---------------------------------------------------------------------------
  HARQ-ACK(0),\        HARQ-ACK(0),\        ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image370.wmf){width="0.5208333333333334in" height="0.17708333333333334in"}   ![](media/image527.wmf){width="1.09375in" height="0.17708333333333334in"}
  HARQ-ACK(1),\        HARQ-ACK(1),\                                                                                                                                                                                      
  HARQ-ACK(2)          HARQ-ACK(2)                                                                                                                                                                                        

  ACK, ACK, ACK        ACK, ACK, ACK        ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1                                                                                   1,1,1,1

  ACK, ACK, NACK/DTX   ACK, ACK, ACK        ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0                                                                                   1,0,1,1

  ACK, NACK/DTX, any   ACK, ACK, ACK        ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1                                                                                   0,1,1,1

  NACK/DTX, any, any   ACK, ACK, ACK        ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1                                                                                   0,0,1,1

  ACK, ACK, ACK        ACK, ACK, NACK/DTX   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   1,1,1,0

  ACK, ACK, NACK/DTX   ACK, ACK, NACK/DTX   ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0                                                                                   1,0,1,0

  ACK, NACK/DTX, any   ACK, ACK, NACK/DTX   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1                                                                                   0,1,1,0

  NACK/DTX, any, any   ACK, ACK, NACK/DTX   ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0                                                                                   0,0,1,0

  ACK, ACK, ACK        ACK, NACK/DTX, any   ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   1, 1, 0, 1

  ACK, ACK, NACK/DTX   ACK, NACK/DTX, any   ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1                                                                                   1, 0, 0, 1

  ACK, NACK/DTX, any   ACK, NACK/DTX, any   ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   0, 1, 0, 1

  NACK/DTX, any, any   ACK, NACK/DTX, any   ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 1

  ACK, ACK, ACK        NACK/DTX, any, any   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0                                                                                   1, 1, 0, 0

  ACK, ACK, NACK/DTX   NACK/DTX, any, any   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1                                                                                   1, 0, 0, 0

  ACK, NACK/DTX, any   NACK/DTX, any, any   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   0, 1, 0, 0

  NACK, any, any       NACK/DTX, any, any   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 0

  DTX, any, any        NACK/DTX, any, any   No Transmission                                                                        0, 0, 0, 0                                                                             
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 10.1.3.2-6: Transmission of HARQ-ACK multiplexing for *M* = 4

  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Primary Cell                                                 Secondary Cell                                               Resource                                                                               Constellation                                                                          RM Code\
                                                                                                                                                                                                                                                                                                          Input Bits
  ------------------------------------------------------------ ------------------------------------------------------------ -------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------- ---------------------------------------------------------------------------
  HARQ-ACK(0),\                                                HARQ-ACK(0),\                                                ![](media/image377.wmf){width="0.4583333333333333in" height="0.22916666666666666in"}   ![](media/image370.wmf){width="0.5208333333333334in" height="0.17708333333333334in"}   ![](media/image527.wmf){width="1.09375in" height="0.17708333333333334in"}
  HARQ-ACK(1),\                                                HARQ-ACK(1),\                                                                                                                                                                                                                              
  HARQ-ACK(2),\                                                HARQ-ACK(2),\                                                                                                                                                                                                                              
  HARQ-ACK(3)                                                  HARQ-ACK(3)                                                                                                                                                                                                                                

  ACK, ACK, ACK, NACK/DTX                                      ACK, ACK, ACK, NACK/DTX                                      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1                                                                                   1, 1, 1, 1

  ACK, ACK, NACK/DTX, any                                      ACK, ACK, ACK, NACK/DTX                                      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0                                                                                   1, 0, 1, 1

  ACK, DTX, DTX, DTX                                           ACK, ACK, ACK, NACK/DTX                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1                                                                                   0, 1, 1, 1

  ACK, ACK, ACK, ACK                                           ACK, ACK, ACK, NACK/DTX                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 1                                                                                   0, 1, 1, 1

  NACK/DTX, any, any, any                                      ACK, ACK, ACK, NACK/DTX                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1                                                                                   0, 0, 1, 1

  (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ACK, ACK, ACK, NACK/DTX                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1                                                                                   0, 0, 1, 1

  ACK, ACK, ACK, NACK/DTX                                      ACK, ACK, NACK/DTX, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   1, 1, 1, 0

  ACK, ACK, NACK/DTX, any                                      ACK, ACK, NACK/DTX, any                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0                                                                                   1, 0, 1, 0

  ACK, DTX, DTX, DTX                                           ACK, ACK, NACK/DTX, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1                                                                                   0, 1, 1, 0

  ACK, ACK, ACK, ACK                                           ACK, ACK, NACK/DTX, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1                                                                                   0, 1, 1, 0

  NACK/DTX, any, any, any                                      ACK, ACK, NACK/DTX, any                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0                                                                                   0, 0, 1, 0

  (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ACK, ACK, NACK/DTX, any                                      ![](media/image196.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 0                                                                                   0, 0, 1, 0

  ACK, ACK, ACK, NACK/DTX                                      ACK, DTX, DTX, DTX                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   1, 1, 0, 1

  ACK, ACK, ACK, NACK/DTX                                      ACK, ACK, ACK, ACK                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   1, 1, 0, 1

  ACK, ACK, NACK/DTX, any                                      ACK, DTX, DTX, DTX                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1                                                                                   1, 0, 0, 1

  ACK, ACK, NACK/DTX, any                                      ACK, ACK, ACK, ACK                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 1                                                                                   1, 0, 0, 1

  ACK, DTX, DTX, DTX                                           ACK, DTX, DTX, DTX                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   0, 1, 0, 1

  ACK, DTX, DTX, DTX                                           ACK, ACK, ACK, ACK                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   0, 1, 0, 1

  ACK, ACK, ACK, ACK                                           ACK, DTX, DTX, DTX                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   0, 1, 0, 1

  ACK, ACK, ACK, ACK                                           ACK, ACK, ACK, ACK                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 0                                                                                   0, 1, 0, 1

  NACK/DTX, any, any, any                                      ACK, DTX, DTX, DTX                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 1

  NACK/DTX, any, any, any                                      ACK, ACK, ACK, ACK                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 1

  (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ACK, DTX, DTX, DTX                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 1

  (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ACK, ACK, ACK, ACK                                           ![](media/image191.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 1

  ACK, ACK, ACK, NACK/DTX                                      NACK/DTX, any, any, any                                      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0                                                                                   1, 1, 0, 0

  ACK, ACK, ACK, NACK/DTX                                      (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               1, 0                                                                                   1, 1, 0, 0

  ACK, ACK, NACK/DTX, any                                      NACK/DTX, any, any, any                                      ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1                                                                                   1, 0, 0, 0

  ACK, ACK, NACK/DTX, any                                      (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ![](media/image187.wmf){width="0.5729166666666666in" height="0.28125in"}               0, 1                                                                                   1, 0, 0, 0

  ACK, DTX, DTX, DTX                                           NACK/DTX, any, any, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   0, 1, 0, 0

  ACK, DTX, DTX, DTX                                           (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   0, 1, 0, 0

  ACK, ACK, ACK, ACK                                           NACK/DTX, any, any, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   0, 1, 0, 0

  ACK, ACK, ACK, ACK                                           (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               1, 1                                                                                   0, 1, 0, 0

  NACK, any, any, any                                          NACK/DTX, any, any, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 0

  NACK, any, any, any                                          (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 0

  (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   NACK/DTX, any, any, any                                      ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 0

  (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   ![](media/image188.wmf){width="0.5833333333333334in" height="0.28125in"}               0, 0                                                                                   0, 0, 0, 0

  DTX, any, any, any                                           NACK/DTX, any, any, any                                      No Transmission                                                                        0, 0, 0, 0                                                                             

  DTX, any, any, any                                           (ACK, NACK/DTX, any, any), except for (ACK, DTX, DTX, DTX)   No Transmission                                                                        0, 0, 0, 0                                                                             
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

#####  10.1.3.2.2 PUCCH format 3 HARQ-ACK procedure

If a UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*,
then![](media/image411.wmf){width="0.3958333333333333in"
height="0.15625in"} where the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 (where \"UL/DL
configuration\" in the table refers to the higher layer parameter
*subframeAssignment*), and
![](media/image412.wmf){width="0.22916666666666666in"
height="0.17708333333333334in"}is the number of elements in set
![](media/image413.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with one serving cell, or if a UE is configured
with more than one serving cells and the UL/DL configuration of all
serving cells is same, then in the rest of this Clause
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is as defined in Sec 10.2, and
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with more than one serving cell and if at least
two cells have different UL/DL configurations, then
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}in this Clause refers to
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"} (as defined in Clause 10.2) , and
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}.

For TDD HARQ-ACK transmission with PUCCH format 3 and sub-frame
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
with ![](media/image528.wmf){width="0.375in" height="0.15625in"} and
more than one configured serving cell, where
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}, the UE shall use PUCCH resource
![](media/image529.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} or
![](media/image530.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image199.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* where

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image535.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with
![](media/image536.wmf){width="3.4895833333333335in" height="0.28125in"}
for antenna port ![](media/image537.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}, where
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers,
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image538.wmf){width="1.1041666666666667in"
height="0.22916666666666666in"},
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image539.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"} where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}. When two antenna port transmission is
configured for PUCCH format 1a/1b, the PUCCH resource for antenna port
![](media/image540.wmf){width="0.1875in" height="0.23958333333333334in"}
is given by ![](media/image541.wmf){width="1.28125in"
height="0.2708333333333333in"}

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b, and

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, the PUCCH resource
![](media/image542.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is given by
![](media/image543.wmf){width="3.34375in"
height="0.2708333333333333in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
\"UL/DL configuration\" in the table refers to the higher layer
parameter *subframeAssignment*), the PUCCH resource
![](media/image544.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is given by
![](media/image545.wmf){width="3.4166666666666665in"
height="0.2916666666666667in"};

where ![](media/image337.wmf){width="0.2916666666666667in"
height="0.20833333333333334in"} is the number of elements in the set
![](media/image338.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image496.wmf){width="0.375in" height="0.22916666666666666in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image488.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, and
![](media/image513.wmf){width="0.5208333333333334in"
height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"}, are configured by higher layers. When
two antenna port transmission is configured for PUCCH format 1a/1b, the
PUCCH resource for antenna port ![](media/image540.wmf){width="0.1875in"
height="0.23958333333333334in"} is given by
![](media/image541.wmf){width="1.28125in" height="0.2708333333333333in"}

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image546.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image547.wmf){width="3.21875in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image548.wmf){width="4.21875in" height="0.5104166666666666in"}

where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter pucch-ResourceStartOffset-r11 ,
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
![](media/image445.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.2.1-1. If
![](media/image446.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} is equal to the number of ECCEs in
EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}configured for that UE in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
subframe![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} is equal to the number of ECCEs computed
assuming EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for that UE in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. For normal downlink CP, if subframe
![](media/image304.wmf){width="0.3854166666666667in" height="0.21875in"}
is a special subframe with special subframe configuration 0, 5 or 10 if
configured by *ssp10-CRS-LessDwPTS*,
![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
if subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"} is a special subframe with special subframe
configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. When two antenna port
transmission is configured for PUCCH format 1a/1b, the PUCCH resource
for antenna port ![](media/image540.wmf){width="0.1875in"
height="0.23958333333333334in"} is given by
![](media/image541.wmf){width="1.28125in"
height="0.2708333333333333in"}.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image550.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image551.wmf){width="4.28125in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image552.wmf){width="5.34375in" height="0.5104166666666666in"}

where

> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, then
> ![](media/image347.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"}, where
> ![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
> then ![](media/image502.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> and where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
> ![](media/image479.wmf){width="0.375in"
> height="0.22916666666666666in"},
> ![](media/image516.wmf){width="0.84375in"
> height="0.2708333333333333in"},
> ![](media/image517.wmf){width="0.8125in"
> height="0.2916666666666667in"}are determined as described in Clause
> 10.1.3.1. When two antenna port transmission is configured for PUCCH
> format 1a/1b, the PUCCH resource for antenna port
> ![](media/image540.wmf){width="0.1875in"
> height="0.23958333333333334in"} is given by
> ![](media/image541.wmf){width="1.28125in"
> height="0.2708333333333333in"}.

\- for a single PDSCH transmission only on the primary cell where there
is not a corresponding PDCCH/EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} and no
PDCCH/EPDCCH indicating downlink SPS release (defined in Clause 9.2)
within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image553.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with the value of
![](media/image554.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 9.2-2. For a UE configured for two antenna port
transmission for PUCCH format 1a/1b, a PUCCH resource value in Table
9.2-2 maps to two PUCCH resources with the first PUCCH resource
![](media/image555.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image556.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image557.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding PDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, and

\- for an additional PDSCH transmission only on the primary cell
indicated by the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH equal to
\'1\' (defined in Table 7.3-X), or

\- for an additional PDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH equal to
\'1\',

\- the UE shall transmit
![](media/image558.wmf){width="0.6041666666666666in" height="0.21875in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b on PUCCH resource
![](media/image559.wmf){width="0.40625in"
height="0.22916666666666666in"} selected from
![](media/image560.wmf){width="0.16666666666666666in" height="0.1875in"}
PUCCH resources ![](media/image561.wmf){width="0.5104166666666666in"
height="0.28125in"} where
![](media/image562.wmf){width="0.8229166666666666in" height="0.1875in"},
according to Table 10.1.3.2-1 and Table 10.1.3.2-2 for
![](media/image563.wmf){width="0.4166666666666667in" height="0.1875in"}
and ![](media/image564.wmf){width="0.40625in"
height="0.19791666666666666in"}, respectively. For a UE configured with
a transmission mode that supports up to two transport blocks on the
primary cell, ![](media/image565.wmf){width="0.40625in"
height="0.19791666666666666in"}; otherwise,
![](media/image566.wmf){width="0.4166666666666667in" height="0.1875in"}.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.23958333333333334in"} is determined as
![](media/image569.wmf){width="3.4895833333333335in"
height="0.28125in"}, where ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"} is configured by higher layers,
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.0833333333333333in"
height="0.22916666666666666in"},
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image539.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"} where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.23958333333333334in"} is determined as

> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"}is same as the value of an element
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, the PUCCH resource
> ![](media/image570.wmf){width="0.4895833333333333in"
> height="0.23958333333333334in"}is given by
> ![](media/image571.wmf){width="3.4791666666666665in"
> height="0.2708333333333333in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"}is same as the value of an element
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"} in set
> ![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
> ![](media/image334.wmf){width="0.5in"
> height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
> \"UL/DL configuration\" in the table refers to the higher layer
> parameter *subframeAssignment*), the PUCCH resource
> ![](media/image572.wmf){width="0.5208333333333334in"
> height="0.28125in"} is given by
> ![](media/image573.wmf){width="3.4583333333333335in"
> height="0.2916666666666667in"};
>
> where ![](media/image337.wmf){width="0.2916666666666667in"
> height="0.20833333333333334in"} is the number of elements in the set
> ![](media/image338.wmf){width="0.2604166666666667in"
> height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
> ![](media/image293.wmf){width="0.11458333333333333in"
> height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such
> that ![](media/image435.wmf){width="1.1145833333333333in"
> height="0.23958333333333334in"},
> ![](media/image436.wmf){width="2.5833333333333335in"
> height="0.3020833333333333in"},
> ![](media/image496.wmf){width="0.375in"
> height="0.22916666666666666in"} is the number of the first CCE used
> for transmission of the corresponding PDCCH in subframe
> ![](media/image488.wmf){width="0.3958333333333333in"
> height="0.22916666666666666in"}, and
> ![](media/image513.wmf){width="0.5208333333333334in"
> height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
> height="0.22916666666666666in"}, are configured by higher layers.

\- For a UE configured with a transmission mode that supports up to two
transport blocks on the primary cell, the PUCCH resource
![](media/image574.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined as
![](media/image575.wmf){width="1.2916666666666667in"
height="0.2604166666666667in"}.HARQ-ACK(0) is the ACK/NACK/DTX response
for the PDSCH without a corresponding PDCCH detected. HARQ-ACK(1) is the
ACK/NACK/DTX response for the first transport block of the PDSCH
indicated by the detection of a corresponding PDCCH for which the value
of the DAI field in the corresponding DCI format is equal to \'1\' or
for the PDCCH indicating downlink SPS release for which the value of the
DAI field in the corresponding DCI format is equal to \'1\'. HARQ-ACK(2)
is the ACK/NACK/DTX response for the second transport block of the PDSCH
indicated by the detection of a corresponding PDCCH for which the value
of the DAI field in the corresponding DCI format is equal to \'1\'.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} , and

\- for an additional PDSCH transmission only on the primary cell
indicated by the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH equal
to \'1\' (defined in Table 7.3-X), or

\- for an additional EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH equal
to \'1\',

\- the UE shall transmit
![](media/image558.wmf){width="0.6041666666666666in" height="0.21875in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b on PUCCH resource
![](media/image559.wmf){width="0.40625in"
height="0.22916666666666666in"} selected from
![](media/image560.wmf){width="0.16666666666666666in" height="0.1875in"}
PUCCH resources ![](media/image561.wmf){width="0.5104166666666666in"
height="0.28125in"} where ![](media/image562.wmf){width="0.8125in"
height="0.1875in"}, according to Table 10.1.3.2-1 and Table 10.1.3.2-2
for ![](media/image563.wmf){width="0.4166666666666667in"
height="0.1875in"} and
![](media/image564.wmf){width="0.3958333333333333in" height="0.1875in"},
respectively. For a UE configured with a transmission mode that supports
up to two transport blocks on the primary cell,
![](media/image565.wmf){width="0.3958333333333333in" height="0.1875in"};
otherwise, ![](media/image566.wmf){width="0.4166666666666667in"
height="0.1875in"}.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.2604166666666667in"} is determined as

> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image576.wmf){width="3.28125in"
> height="0.4583333333333333in"}
>
> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image577.wmf){width="4.291666666666667in"
> height="0.5104166666666666in"}
>
> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter pucch-ResourceStartOffset-r11 ,
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
> ![](media/image580.wmf){width="0.4270833333333333in"
> height="0.1875in"}, ![](media/image581.wmf){width="0.375in"
> height="0.2604166666666667in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image582.wmf){width="0.4166666666666667in"
> height="0.1875in"}, ![](media/image581.wmf){width="0.375in"
> height="0.2604166666666667in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH
> in subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} is equal to the number of ECCEs in
> EPDCCH-PRB-set ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}configured for that UE in subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
> subframe![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} is equal to the number of ECCEs
> computed assuming EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}is configured for that UE in
> subframe![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. For normal downlink CP, if subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0, 5 or 10 if configured by *ssp10-CRS-LessDwPTS*,
> ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
> if subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.2604166666666667in"} is determined as

> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image583.wmf){width="4.333333333333333in"
> height="0.4583333333333333in"}
>
> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image584.wmf){width="5.395833333333333in"
> height="0.5104166666666666in"}
>
> where
>
> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, then
> ![](media/image347.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"}, where
> ![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
> then ![](media/image502.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- and where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
> ![](media/image479.wmf){width="0.375in"
> height="0.22916666666666666in"},
> ![](media/image516.wmf){width="0.84375in"
> height="0.2708333333333333in"},
> ![](media/image517.wmf){width="0.8125in"
> height="0.2916666666666667in"}are determined as described in Clause
> 10.1.3.1.

\- For a UE configured with a transmission mode that supports up to two
transport blocks on the primary cell, the PUCCH resource
![](media/image574.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined as
![](media/image575.wmf){width="1.2916666666666667in"
height="0.2604166666666667in"}.HARQ-ACK(0) is the ACK/NACK/DTX response
for the PDSCH without a corresponding EPDCCH detected. HARQ-ACK(1) is
the ACK/NACK/DTX response for the first transport block of the PDSCH
indicated by the detection of a corresponding EPDCCH for which the value
of the DAI field in the corresponding DCI format is equal to \'1\' or
for the EPDCCH indicating downlink SPS release for which the value of
the DAI field in the corresponding DCI format is equal to \'1\'.
HARQ-ACK(2) is the ACK/NACK/DTX response for the second transport block
of the PDSCH indicated by the detection of a corresponding EPDCCH for
which the value of the DAI field in the corresponding DCI format is
equal to \'1\'.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH greater
than \'1\' (defined in Table 7.3-X), or

\- for a PDCCH indicating downlink SPS release (defined in Clause 9.2)
in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH greater
than \'1\', or

\- for and for a PDSCH transmission only on the primary cell indicated
by the detection of a corresponding PDCCH in subframe , where with the
DAI value in the PDCCH equal to \'1\' (defined in Table 7.3-X) not being
the first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', or

\- for and for a PDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe , where with the DAI value in the PDCCH equal to
\'1\' (defined in Table 7.3-X) not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',

\- the UE shall use PUCCH format 3 and PUCCH resource
![](media/image592.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image593.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the TPC field in a PDCCH
assignment with DAI value greater than \'1\' (defined in Table 7.3-X) or
with DAI value equal to \'1\', not being the first PDCCH/EPDCCH
assignment in subframe(s) , where with the DAI value equal to \'1\',
shall be used to determine the PUCCH resource value from one of the four
PUCCH resource values configured by higher layers, with the mapping
defined in Table 10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK
PUCCH resource value is transmitted on all PDCCH assignments used to
determine the PUCCH resource values within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH greater
than \'1\' (defined in Table 7.3-X), or

\- for an EPDCCH indicating downlink SPS release (defined in Clause 9.2)
in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH greater
than \'1\', or

\- for and for a PDSCH transmission only on the primary cell indicated
by the detection of a corresponding EPDCCH in subframe , where with the
DAI value in the EPDCCH equal to \'1\' (defined in Table 7.3-X) not
being the first PDCCH/EPDCCH transmission in subframe(s) , where with
the DAI value equal to \'1\', or

\- for and for an EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe , where with the DAI value in the EPDCCH equal
to \'1\' (defined in Table 7.3-X) not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',

\- the UE shall use PUCCH format 3 and PUCCH resource
![](media/image592.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image593.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the HARQ-ACK resource offset
field in the DCI format of the corresponding EPDCCH assignment with DAI
value greater than \'1\' or with DAI value equal to \'1\' (defined in
Table 7.3-X), not being the first PDCCH/EPDCCH assignment in subframe(s)
, where with the DAI value equal to \'1\', shall be used to determine
the PUCCH resource value from one of the four PUCCH resource values
configured by higher layers, with the mapping defined in Table
10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK PUCCH resource
value is transmitted on all EPDCCH assignments used to determine the
PUCCH resource values within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- If the UL/DL configurations of all serving cells are the same, for a
PDSCH transmission on the secondary cell indicated by the detection of a
corresponding PDCCH/EPDCCH within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE shall
use PUCCH format 3 and PUCCH resource
![](media/image602.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image603.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the TPC field in the
corresponding PDCCH/EPDCCH shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. For TDD UL/DL
configurations 1-6, if a PDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or a PDCCH indicating downlink SPS release (defined
in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the TPC field in the PDCCH with the DAI value greater than \'1\' or with
DAI value equal to \'1\', not being the first PDCCH/EPDCCH transmission
in subframe(s) , where with the DAI value equal to \'1\' (defined in
Table 7.3-X), shall be used to determine the PUCCH resource value from
one of the four resource values configured by higher layers, with the
mapping defined in Table 10.1.2.2.2-1. A UE shall assume that the same
HARQ-ACK PUCCH resource value is transmitted on all PDCCH assignments in
the primary cell and in each secondary cell that are used to determined
the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For TDD UL/DL
configurations 1-6, if an EPDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or an EPDCCH indicating downlink SPS release
(defined in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the HARQ-ACK resource offset field in the DCI format of the
corresponding EPDCCH assignment with the DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all EPDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- If the UL/DL configurations of at least two serving cells are
different, for a PDSCH transmission on the secondary cell indicated by
the detection of a corresponding PDCCH/EPDCCH within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE shall
use PUCCH format 3 and PUCCH resource
![](media/image602.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image603.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the TPC field in the
corresponding PDCCH/EPDCCH shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. For a UL/DL
configuration of the primary cell belonging to {1,2,3,4,5,6} as defined
in Clause 10.2, if a PDCCH corresponding to a PDSCH on the primary cell
within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or a PDCCH indicating downlink SPS release (defined
in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the TPC field in the PDCCH with the DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all PDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For a UL/DL
configuration of the primary cell belonging to {1,2,3,4,5,6} as defined
in Clause 10.2, if an EPDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or an EPDCCH indicating downlink SPS release
(defined in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the HARQ-ACK resource offset field in the DCI format of the
corresponding EPDCCH assignment with the DAI value greater than \'1\' or
with DAI value equal to \'1\', not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',
shall be used to determine the PUCCH resource value from one of the four
resource values configured by higher layers, with the mapping defined in
Table 10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK PUCCH
resource value is transmitted on all EPDCCH assignments in the primary
cell and in each secondary cell that are used to determined the PUCCH
resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- For PUCCH format 3 and PUCCH resource
![](media/image612.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} and a UE configured for two antenna port
transmission, a PUCCH resource value in Table 10.1.2.2.2-1 maps to two
PUCCH resources with the first PUCCH resource
![](media/image613.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image614.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image615.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

##### 10.1.3.2.3 PUCCH format 4 HARQ-ACK procedure

TDD HARQ-ACK feedback procedures for a UE configured with PUCCH format 4
and *codebooksizeDetermination-r13 = cc* is described in Clause
10.1.3.2.3.1.

TDD HARQ-ACK feedback procedures for a UE configured with PUCCH format 4
and *codebooksizeDetermination-r13 = dai* is described in Clause
10.1.3.2.3.2.

##### 10.1.3.2.3.1 PUCCH format 4 HARQ-ACK procedure without adaptive codebook {#pucch-format-4-harq-ack-procedure-without-adaptive-codebook .H6}

The procedure in this Clause applies to a UE configured with PUCCH
format 4 and *codebooksizeDetermination-r13 = cc*.

If a UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*,
then![](media/image411.wmf){width="0.3958333333333333in"
height="0.15625in"} where the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 (where \"UL/DL
configuration\" in the table refers to the higher layer parameter
*subframeAssignment*), and
![](media/image412.wmf){width="0.22916666666666666in"
height="0.17708333333333334in"}is the number of elements in set
![](media/image413.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with more than one serving cells and the UL/DL
configuration of all serving cells is same, then in the rest of this
Clause ![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is as defined in Sec 10.2, and
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with more than one serving cell and if at least
two cells have different UL/DL configurations, then
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}in this Clause refers to
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"} (as defined in Clause 10.2) , and
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}.

For TDD HARQ-ACK transmission with PUCCH format 4 and sub-frame
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
with ![](media/image528.wmf){width="0.375in" height="0.15625in"} and
more than one configured serving cell, where
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}, the UE shall use PUCCH resource or or
![](media/image530.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK and
scheduling request (if any) and periodic CSI (if any) in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image199.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* where

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image535.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with
![](media/image536.wmf){width="3.4895833333333335in" height="0.28125in"}
for antenna port ![](media/image537.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}, where
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers,
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image538.wmf){width="1.1041666666666667in"
height="0.22916666666666666in"},
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image539.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"} where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}. When two antenna port transmission is
configured for PUCCH format 1a/1b, the PUCCH resource for antenna port
![](media/image540.wmf){width="0.1875in" height="0.23958333333333334in"}
is given by ![](media/image541.wmf){width="1.28125in"
height="0.2708333333333333in"}

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the PDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b, and

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, the PUCCH resource
![](media/image542.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is given by
![](media/image543.wmf){width="3.34375in"
height="0.2708333333333333in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
\"UL/DL configuration\" in the table refers to the higher layer
parameter *subframeAssignment*), the PUCCH resource
![](media/image544.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is given by
![](media/image545.wmf){width="3.4166666666666665in"
height="0.2916666666666667in"};

where ![](media/image337.wmf){width="0.2916666666666667in"
height="0.20833333333333334in"} is the number of elements in the set
![](media/image338.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image496.wmf){width="0.375in" height="0.22916666666666666in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image488.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, and
![](media/image513.wmf){width="0.5208333333333334in"
height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"}, are configured by higher layers. When
two antenna port transmission is configured for PUCCH format 1a/1b, the
PUCCH resource for antenna port ![](media/image540.wmf){width="0.1875in"
height="0.23958333333333334in"} is given by
![](media/image541.wmf){width="1.28125in" height="0.2708333333333333in"}

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image546.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image547.wmf){width="3.21875in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image548.wmf){width="4.21875in" height="0.5104166666666666in"}

where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter pucch-ResourceStartOffset-r11 ,
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
![](media/image445.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.2.1-1. If
![](media/image446.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} is equal to the number of ECCEs in
EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}configured for that UE in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
subframe![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} is equal to the number of ECCEs computed
assuming EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for that UE in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. For normal downlink CP, if subframe
![](media/image304.wmf){width="0.3854166666666667in" height="0.21875in"}
is a special subframe with special subframe configuration 0, 5 or 10 if
configured by *ssp10-CRS-LessDwPTS*,
![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
if subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"} is a special subframe with special subframe
configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. When two antenna port
transmission is configured for PUCCH format 1a/1b, the PUCCH resource
for antenna port ![](media/image540.wmf){width="0.1875in"
height="0.23958333333333334in"} is given by
![](media/image541.wmf){width="1.28125in"
height="0.2708333333333333in"}.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\' (defined in Table 7.3-X), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and for a TDD UL/DL configuration of
the primary cell belonging to {1,2,3,4,5,6} the DAI value in the EPDCCH
is equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image550.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image551.wmf){width="4.28125in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image552.wmf){width="5.34375in" height="0.5104166666666666in"}

where

> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, then
> ![](media/image347.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"}, where
> ![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
> then ![](media/image502.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> and where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
> ![](media/image479.wmf){width="0.375in"
> height="0.22916666666666666in"},
> ![](media/image516.wmf){width="0.84375in"
> height="0.2708333333333333in"},
> ![](media/image517.wmf){width="0.8125in"
> height="0.2916666666666667in"}are determined as described in Clause
> 10.1.3.1. When two antenna port transmission is configured for PUCCH
> format 1a/1b, the PUCCH resource for antenna port
> ![](media/image540.wmf){width="0.1875in"
> height="0.23958333333333334in"} is given by
> ![](media/image541.wmf){width="1.28125in"
> height="0.2708333333333333in"}.

\- for a single PDSCH transmission only on the primary cell where there
is not a corresponding PDCCH/EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} and no
PDCCH/EPDCCH indicating downlink SPS release (defined in Clause 9.2)
within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image553.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with the value of
![](media/image554.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 9.2-2. For a UE configured for two antenna port
transmission for PUCCH format 1a/1b, a PUCCH resource value in Table
9.2-2 maps to two PUCCH resources with the first PUCCH resource
![](media/image555.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image556.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image557.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding PDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, and

\- for an additional PDSCH transmission only on the primary cell
indicated by the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH equal to
\'1\' (defined in Table 7.3-X), or

\- for an additional PDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH equal to
\'1\',

\- the UE shall transmit
![](media/image558.wmf){width="0.6041666666666666in" height="0.21875in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b on PUCCH resource
![](media/image559.wmf){width="0.40625in"
height="0.22916666666666666in"} selected from
![](media/image560.wmf){width="0.16666666666666666in" height="0.1875in"}
PUCCH resources ![](media/image561.wmf){width="0.5104166666666666in"
height="0.28125in"} where
![](media/image562.wmf){width="0.8229166666666666in" height="0.1875in"},
according to Table 10.1.3.2-1 and Table 10.1.3.2-2 for
![](media/image563.wmf){width="0.4166666666666667in" height="0.1875in"}
and ![](media/image564.wmf){width="0.40625in"
height="0.19791666666666666in"}, respectively. For a UE configured with
a transmission mode that supports up to two transport blocks on the
primary cell, ![](media/image565.wmf){width="0.40625in"
height="0.19791666666666666in"}; otherwise,
![](media/image566.wmf){width="0.4166666666666667in" height="0.1875in"}.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.23958333333333334in"} is determined as
![](media/image569.wmf){width="3.4895833333333335in"
height="0.28125in"}, where ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"} is configured by higher layers,
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.0833333333333333in"
height="0.22916666666666666in"},
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image539.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"} where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.23958333333333334in"} is determined as

> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"}is same as the value of an element
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, the PUCCH resource
> ![](media/image570.wmf){width="0.4895833333333333in"
> height="0.23958333333333334in"}is given by
> ![](media/image571.wmf){width="3.4791666666666665in"
> height="0.2708333333333333in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"}is same as the value of an element
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"} in set
> ![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
> ![](media/image334.wmf){width="0.5in"
> height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
> \"UL/DL configuration\" in the table refers to the higher layer
> parameter *subframeAssignment*), the PUCCH resource
> ![](media/image572.wmf){width="0.5208333333333334in"
> height="0.28125in"} is given by
> ![](media/image573.wmf){width="3.4583333333333335in"
> height="0.2916666666666667in"};
>
> where ![](media/image337.wmf){width="0.2916666666666667in"
> height="0.20833333333333334in"} is the number of elements in the set
> ![](media/image338.wmf){width="0.2604166666666667in"
> height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
> ![](media/image293.wmf){width="0.11458333333333333in"
> height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such
> that ![](media/image435.wmf){width="1.1145833333333333in"
> height="0.23958333333333334in"},
> ![](media/image436.wmf){width="2.5833333333333335in"
> height="0.3020833333333333in"},
> ![](media/image496.wmf){width="0.375in"
> height="0.22916666666666666in"} is the number of the first CCE used
> for transmission of the corresponding PDCCH in subframe
> ![](media/image488.wmf){width="0.3958333333333333in"
> height="0.22916666666666666in"}, and
> ![](media/image513.wmf){width="0.5208333333333334in"
> height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
> height="0.22916666666666666in"}, are configured by higher layers.

\- For a UE configured with a transmission mode that supports up to two
transport blocks on the primary cell, the PUCCH resource
![](media/image574.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined as
![](media/image575.wmf){width="1.2916666666666667in"
height="0.2604166666666667in"}.HARQ-ACK(0) is the ACK/NACK/DTX response
for the PDSCH without a corresponding PDCCH detected. HARQ-ACK(1) is the
ACK/NACK/DTX response for the first transport block of the PDSCH
indicated by the detection of a corresponding PDCCH for which the value
of the DAI field in the corresponding DCI format is equal to \'1\' or
for the PDCCH indicating downlink SPS release for which the value of the
DAI field in the corresponding DCI format is equal to \'1\'. HARQ-ACK(2)
is the ACK/NACK/DTX response for the second transport block of the PDSCH
indicated by the detection of a corresponding PDCCH for which the value
of the DAI field in the corresponding DCI format is equal to \'1\'.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} , and

\- for an additional PDSCH transmission only on the primary cell
indicated by the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH equal
to \'1\' (defined in Table 7.3-X), or

\- for an additional EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH equal
to \'1\',

\- the UE shall transmit
![](media/image558.wmf){width="0.6041666666666666in" height="0.21875in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b on PUCCH resource
![](media/image559.wmf){width="0.40625in"
height="0.22916666666666666in"} selected from
![](media/image560.wmf){width="0.16666666666666666in" height="0.1875in"}
PUCCH resources ![](media/image561.wmf){width="0.5104166666666666in"
height="0.28125in"} where ![](media/image562.wmf){width="0.8125in"
height="0.1875in"}, according to Table 10.1.3.2-1 and Table 10.1.3.2-2
for ![](media/image563.wmf){width="0.4166666666666667in"
height="0.1875in"} and
![](media/image564.wmf){width="0.3958333333333333in" height="0.1875in"},
respectively. For a UE configured with a transmission mode that supports
up to two transport blocks on the primary cell,
![](media/image565.wmf){width="0.3958333333333333in" height="0.1875in"};
otherwise, ![](media/image566.wmf){width="0.4166666666666667in"
height="0.1875in"}.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.2604166666666667in"} is determined as

> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image576.wmf){width="3.28125in"
> height="0.4583333333333333in"}
>
> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image577.wmf){width="4.291666666666667in"
> height="0.5104166666666666in"}
>
> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter pucch-ResourceStartOffset-r11 ,
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
> ![](media/image580.wmf){width="0.4270833333333333in"
> height="0.1875in"}, ![](media/image581.wmf){width="0.375in"
> height="0.2604166666666667in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image582.wmf){width="0.4166666666666667in"
> height="0.1875in"}, ![](media/image581.wmf){width="0.375in"
> height="0.2604166666666667in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH
> in subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} is equal to the number of ECCEs in
> EPDCCH-PRB-set ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}configured for that UE in subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
> subframe![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} is equal to the number of ECCEs
> computed assuming EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}is configured for that UE in
> subframe![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. For normal downlink CP, if subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0, 5 or 10 if configured by *ssp10-CRS-LessDwPTS*,
> ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
> if subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.2604166666666667in"} is determined as

> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image583.wmf){width="4.333333333333333in"
> height="0.4583333333333333in"}
>
> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image584.wmf){width="5.395833333333333in"
> height="0.5104166666666666in"}
>
> where
>
> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, then
> ![](media/image347.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"}, where
> ![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
> then ![](media/image502.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- and where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
> ![](media/image479.wmf){width="0.375in"
> height="0.22916666666666666in"},
> ![](media/image516.wmf){width="0.84375in"
> height="0.2708333333333333in"},
> ![](media/image517.wmf){width="0.8125in"
> height="0.2916666666666667in"}are determined as described in Clause
> 10.1.3.1.

\- For a UE configured with a transmission mode that supports up to two
transport blocks on the primary cell, the PUCCH resource
![](media/image574.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined as
![](media/image575.wmf){width="1.2916666666666667in"
height="0.2604166666666667in"}.HARQ-ACK(0) is the ACK/NACK/DTX response
for the PDSCH without a corresponding EPDCCH detected. HARQ-ACK(1) is
the ACK/NACK/DTX response for the first transport block of the PDSCH
indicated by the detection of a corresponding EPDCCH for which the value
of the DAI field in the corresponding DCI format is equal to \'1\' or
for the EPDCCH indicating downlink SPS release for which the value of
the DAI field in the corresponding DCI format is equal to \'1\'.
HARQ-ACK(2) is the ACK/NACK/DTX response for the second transport block
of the PDSCH indicated by the detection of a corresponding EPDCCH for
which the value of the DAI field in the corresponding DCI format is
equal to \'1\'.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH greater
than \'1\' (defined in Table 7.3-X), or

\- for a PDCCH indicating downlink SPS release (defined in Clause 9.2)
in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the PDCCH greater
than \'1\', or

\- for and for a PDSCH transmission only on the primary cell indicated
by the detection of a corresponding PDCCH in subframe , where with the
DAI value in the PDCCH equal to \'1\' (defined in Table 7.3-X) not being
the first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', or

\- for and for a PDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe , where with the DAI value in the PDCCH equal to
\'1\' (defined in Table 7.3-X) not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is more than 22, the UE shall use
PUCCH format 4 and PUCCH resource where the value of is determined
according to higher layer configuration and Table 10.1.2.2.3-1 and the
TPC field in a PDCCH assignment with DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH assignment in subframe(s) , where with the DAI value
equal to \'1\', shall be used to determine the PUCCH resource value from
one of the four PUCCH resource values configured by higher layers, with
the mapping defined in Table 10.1.2.2.3-1. A UE shall assume that the
same HARQ-ACK PUCCH resource value is transmitted on all PDCCH
assignments used to determine the PUCCH resource values within the
subframe(s) ![](media/image233.wmf){width="0.3125in" height="0.1875in"},
where ![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is no more than 22, the UE shall use
PUCCH format 3 and PUCCH resource
![](media/image592.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image593.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the TPC field in a PDCCH
assignment with DAI value greater than \'1\' (defined in Table 7.3-X) or
with DAI value equal to \'1\', not being the first PDCCH/EPDCCH
assignment in subframe(s) , where with the DAI value equal to \'1\',
shall be used to determine the PUCCH resource value from one of the four
PUCCH resource values configured by higher layers, with the mapping
defined in Table 10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK
PUCCH resource value is transmitted on all PDCCH assignments used to
determine the PUCCH resource values within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell indicated by the
detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH greater
than \'1\' (defined in Table 7.3-X), or

\- for an EPDCCH indicating downlink SPS release (defined in Clause 9.2)
in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with the DAI value in the EPDCCH greater
than \'1\', or

\- for and for a PDSCH transmission only on the primary cell indicated
by the detection of a corresponding EPDCCH in subframe , where with the
DAI value in the EPDCCH equal to \'1\' (defined in Table 7.3-X) not
being the first PDCCH/EPDCCH transmission in subframe(s) , where with
the DAI value equal to \'1\', or

\- for and for an EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe , where with the DAI value in the EPDCCH equal
to \'1\' (defined in Table 7.3-X) not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is more than 22, the UE shall use
PUCCH format 4 and PUCCH resource where the value of is determined
according to higher layer configuration and Table 10.1.2.2.3-1 and the
HARQ-ACK resource offset field in the DCI format of the corresponding
EPDCCH assignment with DAI value greater than \'1\' or with DAI value
equal to \'1\' (defined in Table 7.3-X), not being the first
PDCCH/EPDCCH assignment in subframe(s) , where with the DAI value equal
to \'1\', shall be used to determine the PUCCH resource value from one
of the four PUCCH resource values configured by higher layers, with the
mapping defined in Table 10.1.2.2.3-1. A UE shall assume that the same
HARQ-ACK PUCCH resource value is transmitted on all EPDCCH assignments
used to determine the PUCCH resource values within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is no more than 22, the UE shall use
PUCCH format 3 and PUCCH resource
![](media/image592.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image593.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the HARQ-ACK resource offset
field in the DCI format of the corresponding EPDCCH assignment with DAI
value greater than \'1\' or with DAI value equal to \'1\' (defined in
Table 7.3-X), not being the first PDCCH/EPDCCH assignment in subframe(s)
, where with the DAI value equal to \'1\', shall be used to determine
the PUCCH resource value from one of the four PUCCH resource values
configured by higher layers, with the mapping defined in Table
10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK PUCCH resource
value is transmitted on all EPDCCH assignments used to determine the
PUCCH resource values within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- If the UL/DL configurations of all serving cells are the same and the
total number of HARQ-ACK bits and scheduling request bit (if any) and
periodic CSI bits (if any) is more than 22, for a PDSCH transmission on
the secondary cell indicated by the detection of a corresponding
PDCCH/EPDCCH within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, the UE shall use PUCCH format 4 and PUCCH resource
where the value of is determined according to higher layer configuration
and Table 10.1.2.2.3-1 and the TPC field in the corresponding
PDCCH/EPDCCH shall be used to determine the PUCCH resource value from
one of the four resource values configured by higher layers, with the
mapping defined in Table 10.1.2.2.3-1. For TDD UL/DL configurations 1-6,
if a PDCCH corresponding to a PDSCH on the primary cell within
subframe(s) ![](media/image233.wmf){width="0.3125in" height="0.1875in"},
where ![](media/image28.wmf){width="0.375in" height="0.1875in"}, or a
PDCCH indicating downlink SPS release (defined in Clause 9.2) within
subframe(s) ![](media/image233.wmf){width="0.3125in" height="0.1875in"},
where ![](media/image28.wmf){width="0.375in" height="0.1875in"}, is
detected, the TPC field in the PDCCH with the DAI value greater than
\'1\' or with DAI value equal to \'1\', not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\'
(defined in Table 7.3-X), shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.3-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all PDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For TDD UL/DL
configurations 1-6, if an EPDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or an EPDCCH indicating downlink SPS release
(defined in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the HARQ-ACK resource offset field in the DCI format of the
corresponding EPDCCH assignment with the DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.3-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all EPDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- If the UL/DL configurations of at least two serving cells are
different and the total number of HARQ-ACK bits and scheduling request
bit (if any) and periodic CSI bits (if any) is more than 22, for a PDSCH
transmission on the secondary cell indicated by the detection of a
corresponding PDCCH/EPDCCH within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE shall
use PUCCH format 4 and PUCCH resource where the value of is determined
according to higher layer configuration and Table 10.1.2.2.3-1 and the
TPC field in the corresponding PDCCH/EPDCCH shall be used to determine
the PUCCH resource value from one of the four resource values configured
by higher layers, with the mapping defined in Table 10.1.2.2.3-1. For a
UL/DL configuration of the primary cell belonging to {1,2,3,4,5,6} as
defined in Clause 10.2, if a PDCCH corresponding to a PDSCH on the
primary cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or a PDCCH indicating downlink SPS release (defined
in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the TPC field in the PDCCH with the DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.3-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all PDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For a UL/DL
configuration of the primary cell belonging to {1,2,3,4,5,6} as defined
in Clause 10.2, if an EPDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or an EPDCCH indicating downlink SPS release
(defined in Clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the HARQ-ACK resource offset field in the DCI format of the
corresponding EPDCCH assignment with the DAI value greater than \'1\' or
with DAI value equal to \'1\', not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',
shall be used to determine the PUCCH resource value from one of the four
resource values configured by higher layers, with the mapping defined in
Table 10.1.2.2.3-1. A UE shall assume that the same HARQ-ACK PUCCH
resource value is transmitted on all EPDCCH assignments in the primary
cell and in each secondary cell that are used to determined the PUCCH
resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}.

\- If the UL/DL configurations of all serving cells are the same, and
the total number of HARQ-ACK bits and scheduling request bit (if any)
and periodic CSI bits (if any) is no more than 22, for a PDSCH
transmission on the secondary cell indicated by the detection of a
corresponding PDCCH/EPDCCH within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE shall
use PUCCH format 3 and PUCCH resource
![](media/image602.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image603.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the TPC field in the
corresponding PDCCH/EPDCCH shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. For TDD UL/DL
configurations 1-6, if a PDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or a PDCCH indicating downlink SPS release (defined
in clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the TPC field in the PDCCH with the DAI value greater than \'1\' or with
DAI value equal to \'1\', not being the first PDCCH/EPDCCH transmission
in subframe(s) , where with the DAI value equal to \'1\' (defined in
Table 7.3-X), shall be used to determine the PUCCH resource value from
one of the four resource values configured by higher layers, with the
mapping defined in Table 10.1.2.2.2-1. A UE shall assume that the same
HARQ-ACK PUCCH resource value is transmitted on all PDCCH assignments in
the primary cell and in each secondary cell that are used to determined
the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For TDD UL/DL
configurations 1-6, if an EPDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or an EPDCCH indicating downlink SPS release
(defined in clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the HARQ-ACK resource offset field in the DCI format of the
corresponding EPDCCH assignment with the DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all EPDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For a UE
configured for two antenna port transmission for PUCCH format 3, a PUCCH
resource value in Table 10.1.2.2.2-1 maps to two PUCCH resources with
the first PUCCH resourcefor antenna
port![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}and the second PUCCH resourcefor antenna
port![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resourcefor antenna
port![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- If the UL/DL configurations of at least two serving cells are
different and the total number of HARQ-ACK bits and scheduling request
bit (if any) and periodic CSI bits (if any) is no more than 22, for a
PDSCH transmission on the secondary cell indicated by the detection of a
corresponding PDCCH/EPDCCH within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, the UE shall
use PUCCH format 3 and PUCCH resource
![](media/image602.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} where the value of
![](media/image603.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 10.1.2.2.2-1 and the TPC field in the
corresponding PDCCH/EPDCCH shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. For a UL/DL
configuration of the primary cell belonging to {1,2,3,4,5,6} as defined
in clause 10.2, if a PDCCH corresponding to a PDSCH on the primary cell
within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or a PDCCH indicating downlink SPS release (defined
in clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the TPC field in the PDCCH with the DAI value greater than \'1\'
(defined in Table 7.3-X) or with DAI value equal to \'1\', not being the
first PDCCH/EPDCCH transmission in subframe(s) , where with the DAI
value equal to \'1\', shall be used to determine the PUCCH resource
value from one of the four resource values configured by higher layers,
with the mapping defined in Table 10.1.2.2.2-1. A UE shall assume that
the same HARQ-ACK PUCCH resource value is transmitted on all PDCCH
assignments in the primary cell and in each secondary cell that are used
to determined the PUCCH resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For a UL/DL
configuration of the primary cell belonging to {1,2,3,4,5,6} as defined
in clause 10.2, if an EPDCCH corresponding to a PDSCH on the primary
cell within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, or an EPDCCH indicating downlink SPS release
(defined in clause 9.2) within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, is detected,
the HARQ-ACK resource offset field in the DCI format of the
corresponding EPDCCH assignment with the DAI value greater than \'1\' or
with DAI value equal to \'1\', not being the first PDCCH/EPDCCH
transmission in subframe(s) , where with the DAI value equal to \'1\',
shall be used to determine the PUCCH resource value from one of the four
resource values configured by higher layers, with the mapping defined in
Table 10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK PUCCH
resource value is transmitted on all EPDCCH assignments in the primary
cell and in each secondary cell that are used to determined the PUCCH
resource value within the subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}. For a UE
configured for two antenna port transmission for PUCCH format 3, a PUCCH
resource value in Table 10.1.2.2.2-1 maps to two PUCCH resources with
the first PUCCH resourcefor antenna
port![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}and the second PUCCH resourcefor antenna
port![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resourcefor antenna
port![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

##### 10.1.3.2.3.2 PUCCH format 4 HARQ-ACK procedure with adaptive codebook {#pucch-format-4-harq-ack-procedure-with-adaptive-codebook .H6}

The procedure in this Clause applies to a UE configured with PUCCH
format 4 and *codebooksizeDetermination-r13 = dai*.

If a UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*,
then![](media/image411.wmf){width="0.3958333333333333in"
height="0.15625in"} where the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 (where \"UL/DL
configuration\" in the table refers to the higher layer parameter
*subframeAssignment*), and
![](media/image412.wmf){width="0.22916666666666666in"
height="0.17708333333333334in"}is the number of elements in set
![](media/image413.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with more than one serving cells and the UL/DL
configuration of all serving cells is same, then in the rest of this
Clause ![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is as defined in Sec 10.2, and
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}.

If a UE is configured with more than one serving cell and if at least
two cells have different UL/DL configurations, then
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}in this Clause refers to
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"} (as defined in Clause 10.2) , and
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}.

For TDD HARQ-ACK transmission with PUCCH format 4 and sub-frame
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
with ![](media/image528.wmf){width="0.375in" height="0.15625in"} and
more than one configured serving cell, where
![](media/image287.wmf){width="0.1875in" height="0.15625in"} is the
number of elements in the set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}, the UE shall use PUCCH resource or or
![](media/image530.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for transmission of HARQ-ACK and
scheduling request (if any) and periodic CSI (if any) in subframe
![](media/image7.wmf){width="0.125in" height="0.13541666666666666in"}
for ![](media/image199.wmf){width="0.15625in"
height="0.20833333333333334in"} mapped to antenna port *p* where

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the PDCCH are equal to \'1\' (defined in Table
7.3.2.1-1), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the PDCCH are equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image535.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with
![](media/image536.wmf){width="3.4895833333333335in" height="0.28125in"}
for antenna port ![](media/image537.wmf){width="0.19791666666666666in"
height="0.2604166666666667in"}, where
![](media/image44.wmf){width="0.5in" height="0.22916666666666666in"} is
configured by higher layers,
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image538.wmf){width="1.1041666666666667in"
height="0.22916666666666666in"},
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image539.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"} where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}. When two antenna port transmission is
configured for PUCCH format 1a/1b, the PUCCH resource for antenna port
![](media/image540.wmf){width="0.1875in" height="0.23958333333333334in"}
is given by ![](media/image541.wmf){width="1.28125in"
height="0.2708333333333333in"}

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the PDCCH are equal to \'1\' (defined in Table
7.3.2.1-1), or

\- for a single PDCCH indicating downlink SPS release (defined in Clause
9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the PDCCH are equal to \'1\',

\- the UE shall use PUCCH format 1a/1b, and

\- if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image467.wmf){width="0.22916666666666666in"
height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
height="0.21875in"}, the PUCCH resource
![](media/image542.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is given by
![](media/image543.wmf){width="3.34375in"
height="0.2708333333333333in"};

\- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
height="0.22916666666666666in"}is same as the value of an element
![](media/image332.wmf){width="0.17708333333333334in"
height="0.22916666666666666in"} in set
![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
![](media/image334.wmf){width="0.5in"
height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
\"UL/DL configuration\" in the table refers to the higher layer
parameter *subframeAssignment*), the PUCCH resource
![](media/image544.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is given by
![](media/image545.wmf){width="3.4166666666666665in"
height="0.2916666666666667in"};

where ![](media/image337.wmf){width="0.2916666666666667in"
height="0.20833333333333334in"} is the number of elements in the set
![](media/image338.wmf){width="0.2604166666666667in"
height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.21875in"
height="0.2708333333333333in"},
![](media/image436.wmf){width="2.8854166666666665in"
height="0.3333333333333333in"} where
![](media/image437.wmf){width="0.3333333333333333in"
height="0.2604166666666667in"} is determined from the primary cell,
![](media/image496.wmf){width="0.375in" height="0.22916666666666666in"}
is the number of the first CCE used for transmission of the
corresponding PDCCH in subframe
![](media/image488.wmf){width="0.3958333333333333in"
height="0.22916666666666666in"}, and
![](media/image513.wmf){width="0.5208333333333334in"
height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"}, are configured by higher layers. When
two antenna port transmission is configured for PUCCH format 1a/1b, the
PUCCH resource for antenna port ![](media/image540.wmf){width="0.1875in"
height="0.23958333333333334in"} is given by
![](media/image541.wmf){width="1.28125in" height="0.2708333333333333in"}

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the EPDCCH are equal to \'1\' (defined in Table
7.3.2.1-1), or

\- for a single EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the EPDCCH are equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image546.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} given by

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image547.wmf){width="3.21875in" height="0.4583333333333333in"}

\- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image548.wmf){width="4.21875in" height="0.5104166666666666in"}

where ![](media/image115.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} is the number of the first ECCE (i.e.
lowest ECCE index used to construct the EPDCCH) used for transmission of
the corresponding DCI assignment in EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"},
![](media/image117.wmf){width="0.6041666666666666in" height="0.28125in"}
for EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured by the higher layer
parameter pucch-ResourceStartOffset-r11 ,
![](media/image118.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}for EPDCCH-PRB-set
![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
![](media/image261.wmf){width="0.16666666666666666in"
height="0.1875in"}is determined from the antenna port used for EPDCCH
transmission in subframe
![](media/image549.wmf){width="0.3854166666666667in"
height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
![](media/image445.wmf){width="0.40625in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.2.1-1. If
![](media/image446.wmf){width="0.3958333333333333in" height="0.1875in"},
![](media/image116.wmf){width="0.34375in"
height="0.22916666666666666in"} is determined from the HARQ-ACK resource
offset field in the DCI format of the corresponding EPDCCH as given in
Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} is equal to the number of ECCEs in
EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}configured for that UE in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
subframe![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"} is equal to the number of ECCEs computed
assuming EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for that UE in subframe
![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"}. For normal downlink CP, if subframe
![](media/image304.wmf){width="0.3854166666666667in" height="0.21875in"}
is a special subframe with special subframe configuration 0 or 5,
![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
if subframe ![](media/image304.wmf){width="0.3854166666666667in"
height="0.21875in"} is a special subframe with special subframe
configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
height="0.2708333333333333in"}is equal to 0. When two antenna port
transmission is configured for PUCCH format 1a/1b, the PUCCH resource
for antenna port ![](media/image540.wmf){width="0.1875in"
height="0.23958333333333334in"} is given by
![](media/image541.wmf){width="1.28125in"
height="0.2708333333333333in"}.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell,

\- for a single PDSCH transmission only on the primary cell indicated by
the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the EPDCCH are equal to \'1\' (defined in Table
7.3.2.1-1), or

\- for a single EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image533.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}, and both the counter DAI value and the
total DAI value in the EPDCCH are equal to \'1\',

\- the UE shall use PUCCH format 1a/1b and PUCCH resource
![](media/image550.wmf){width="0.4791666666666667in"
height="0.2708333333333333in"} given by

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for distributed
transmission

![](media/image551.wmf){width="4.28125in" height="0.4583333333333333in"}

\- if EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
height="0.16666666666666666in"}is configured for localized transmission

![](media/image552.wmf){width="5.34375in" height="0.5104166666666666in"}

where

> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, then
> ![](media/image347.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"}, where
> ![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
> then ![](media/image502.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> and where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
> ![](media/image479.wmf){width="0.375in"
> height="0.22916666666666666in"},
> ![](media/image516.wmf){width="0.84375in"
> height="0.2708333333333333in"},
> ![](media/image517.wmf){width="0.8125in"
> height="0.2916666666666667in"}are determined as described in Clause
> 10.1.3.1. When two antenna port transmission is configured for PUCCH
> format 1a/1b, the PUCCH resource for antenna port
> ![](media/image540.wmf){width="0.1875in"
> height="0.23958333333333334in"} is given by
> ![](media/image541.wmf){width="1.28125in"
> height="0.2708333333333333in"}.

\- for a single PDSCH transmission only on the primary cell where there
is not a corresponding PDCCH/EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} and no
PDCCH/EPDCCH indicating downlink SPS release (defined in Clause 9.2)
within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"}, the UE shall use PUCCH format 1a/1b and PUCCH
resource ![](media/image553.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} with the value of
![](media/image554.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} is determined according to higher layer
configuration and Table 9.2-2. For a UE configured for two antenna port
transmission for PUCCH format 1a/1b, a PUCCH resource value in Table
9.2-2 maps to two PUCCH resources with the first PUCCH resource
![](media/image555.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image556.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image557.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding PDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"}, and

\- for an additional PDSCH transmission only on the primary cell
indicated by the detection of a corresponding PDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with both the counter DAI value and the
total DAI value in the PDCCH equal to \'1\' (defined in Table
7.3.2.1-1), or

\- for an additional PDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with both the counter DAI value and the
total DAI value in the PDCCH equal to \'1\',

\- the UE shall transmit
![](media/image558.wmf){width="0.6041666666666666in" height="0.21875in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b on PUCCH resource
![](media/image559.wmf){width="0.40625in"
height="0.22916666666666666in"} selected from
![](media/image560.wmf){width="0.16666666666666666in" height="0.1875in"}
PUCCH resources ![](media/image561.wmf){width="0.5104166666666666in"
height="0.28125in"} where
![](media/image562.wmf){width="0.8229166666666666in" height="0.1875in"},
according to Table 10.1.3.2-1 and Table 10.1.3.2-2 for
![](media/image563.wmf){width="0.4166666666666667in" height="0.1875in"}
and ![](media/image564.wmf){width="0.40625in"
height="0.19791666666666666in"}, respectively. For a UE configured with
a transmission mode that supports up to two transport blocks on the
primary cell, ![](media/image565.wmf){width="0.40625in"
height="0.19791666666666666in"}; otherwise,
![](media/image566.wmf){width="0.4166666666666667in" height="0.1875in"}.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.23958333333333334in"} is determined as
![](media/image569.wmf){width="3.4895833333333335in"
height="0.28125in"}, where ![](media/image44.wmf){width="0.5in"
height="0.22916666666666666in"} is configured by higher layers,
![](media/image293.wmf){width="0.11458333333333333in"
height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such that
![](media/image435.wmf){width="1.0833333333333333in"
height="0.22916666666666666in"},
![](media/image251.wmf){width="2.4583333333333335in"
height="0.3333333333333333in"}, and
![](media/image539.wmf){width="0.4270833333333333in"
height="0.2708333333333333in"} is the number of the first CCE used for
transmission of the corresponding PDCCH in subframe
![](media/image246.wmf){width="0.3854166666666667in"
height="0.20833333333333334in"} where
![](media/image534.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"}.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.23958333333333334in"} is determined as

> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"}is same as the value of an element
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, the PUCCH resource
> ![](media/image570.wmf){width="0.4895833333333333in"
> height="0.23958333333333334in"}is given by
> ![](media/image571.wmf){width="3.4791666666666665in"
> height="0.2708333333333333in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"}is same as the value of an element
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"} in set
> ![](media/image333.wmf){width="0.21875in" height="0.1875in"}, where
> ![](media/image334.wmf){width="0.5in"
> height="0.22916666666666666in"}(defined in Table 10.1.3.1-1A, where
> \"UL/DL configuration\" in the table refers to the higher layer
> parameter *subframeAssignment*), the PUCCH resource
> ![](media/image572.wmf){width="0.5208333333333334in"
> height="0.28125in"} is given by
> ![](media/image573.wmf){width="3.4583333333333335in"
> height="0.2916666666666667in"};
>
> where ![](media/image337.wmf){width="0.2916666666666667in"
> height="0.20833333333333334in"} is the number of elements in the set
> ![](media/image338.wmf){width="0.2604166666666667in"
> height="0.20833333333333334in"} defined in Table 10.1.3.1-1A , where
> ![](media/image293.wmf){width="0.11458333333333333in"
> height="0.13541666666666666in"} is selected from {0, 1, 2, 3} such
> that ![](media/image435.wmf){width="1.1145833333333333in"
> height="0.23958333333333334in"},
> ![](media/image436.wmf){width="2.5833333333333335in"
> height="0.3020833333333333in"},
> ![](media/image496.wmf){width="0.375in"
> height="0.22916666666666666in"} is the number of the first CCE used
> for transmission of the corresponding PDCCH in subframe
> ![](media/image488.wmf){width="0.3958333333333333in"
> height="0.22916666666666666in"}, and
> ![](media/image513.wmf){width="0.5208333333333334in"
> height="0.2916666666666667in"}, ![](media/image44.wmf){width="0.5in"
> height="0.22916666666666666in"}, are configured by higher layers.

\- For a UE configured with a transmission mode that supports up to two
transport blocks on the primary cell, the PUCCH resource
![](media/image574.wmf){width="0.4895833333333333in"
height="0.23958333333333334in"} is determined as
![](media/image575.wmf){width="1.2916666666666667in"
height="0.2604166666666667in"}.HARQ-ACK(0) is the ACK/NACK/DTX response
for the PDSCH without a corresponding PDCCH detected. HARQ-ACK(1) is the
ACK/NACK/DTX response for the first transport block of the PDSCH
indicated by the detection of a corresponding PDCCH for which the value
of both the counter DAI field and total DAI field in the corresponding
DCI format is equal to \'1\' or for the PDCCH indicating downlink SPS
release for which the value of both the counter DAI field and total DAI
field in the corresponding DCI format is equal to \'1\'. HARQ-ACK(2) is
the ACK/NACK/DTX response for the second transport block of the PDSCH
indicated by the detection of a corresponding PDCCH for which the value
of both the counter DAI field and the total DAI field in the
corresponding DCI format is equal to \'1\'.

\- for ![](media/image236.wmf){width="0.375in" height="0.15625in"}, and

\- for a PDSCH transmission only on the primary cell where there is not
a corresponding EPDCCH detected within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} , and

\- for an additional PDSCH transmission only on the primary cell
indicated by the detection of a corresponding EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with both the counter DAI value and the
total DAI value in the EPDCCH equal to \'1\' (defined in Table
7.3.2.1-1), or

\- for an additional EPDCCH indicating downlink SPS release (defined in
Clause 9.2) in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with both the counter DAI value and the
total DAI value in the EPDCCH equal to \'1\',

\- the UE shall transmit
![](media/image558.wmf){width="0.6041666666666666in" height="0.21875in"}
in subframe ![](media/image7.wmf){width="0.125in"
height="0.13541666666666666in"} using PUCCH format 1b on PUCCH resource
![](media/image559.wmf){width="0.40625in"
height="0.22916666666666666in"} selected from
![](media/image560.wmf){width="0.16666666666666666in" height="0.1875in"}
PUCCH resources ![](media/image561.wmf){width="0.5104166666666666in"
height="0.28125in"} where ![](media/image562.wmf){width="0.8125in"
height="0.1875in"}, according to Table 10.1.3.2-1 and Table 10.1.3.2-2
for ![](media/image563.wmf){width="0.4166666666666667in"
height="0.1875in"} and
![](media/image564.wmf){width="0.3958333333333333in" height="0.1875in"},
respectively. For a UE configured with a transmission mode that supports
up to two transport blocks on the primary cell,
![](media/image565.wmf){width="0.3958333333333333in" height="0.1875in"};
otherwise, ![](media/image566.wmf){width="0.4166666666666667in"
height="0.1875in"}.

\- If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.2604166666666667in"} is determined as

> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image576.wmf){width="3.28125in"
> height="0.4583333333333333in"}
>
> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image577.wmf){width="4.291666666666667in"
> height="0.5104166666666666in"}
>
> where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter pucch-ResourceStartOffset-r11 ,
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"}is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image579.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\]. If
> ![](media/image580.wmf){width="0.4270833333333333in"
> height="0.1875in"}, ![](media/image581.wmf){width="0.375in"
> height="0.2604166666666667in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.2.1-1. If
> ![](media/image582.wmf){width="0.4166666666666667in"
> height="0.1875in"}, ![](media/image581.wmf){width="0.375in"
> height="0.2604166666666667in"} is determined from the HARQ-ACK
> resource offset field in the DCI format of the corresponding EPDCCH as
> given in Table 10.1.3.1-2. If the UE is configured to monitor EPDCCH
> in subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} is equal to the number of ECCEs in
> EPDCCH-PRB-set ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}configured for that UE in subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. If the UE is not configured to monitor EPDCCH in
> subframe![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"} is equal to the number of ECCEs
> computed assuming EPDCCH-PRB-set
> ![](media/image578.wmf){width="0.11458333333333333in"
> height="0.16666666666666666in"}is configured for that UE in
> subframe![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"}. For normal downlink CP, if subframe
> ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 5, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0. For extended downlink CP,
> if subframe ![](media/image304.wmf){width="0.3854166666666667in"
> height="0.21875in"} is a special subframe with special subframe
> configuration 0 or 4 or 7, ![](media/image305.wmf){width="0.78125in"
> height="0.2708333333333333in"}is equal to 0.

\- If the UE is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* on the primary cell, the PUCCH resource
![](media/image567.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined according to higher layer
configuration and Table 9.2-2. The PUCCH resource
![](media/image568.wmf){width="0.4791666666666667in"
height="0.2604166666666667in"} is determined as

> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for distributed
> transmission
>
> ![](media/image583.wmf){width="4.333333333333333in"
> height="0.4583333333333333in"}
>
> \- If EPDCCH-PRB-set ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured for localized
> transmission
>
> ![](media/image584.wmf){width="5.395833333333333in"
> height="0.5104166666666666in"}
>
> where
>
> \- if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image467.wmf){width="0.22916666666666666in"
> height="0.21875in"}, where ![](media/image468.wmf){width="0.5in"
> height="0.21875in"}, then
> ![](media/image347.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- otherwise, if the value of ![](media/image491.wmf){width="0.1875in"
> height="0.22916666666666666in"} is same as the value of an index
> ![](media/image332.wmf){width="0.17708333333333334in"
> height="0.22916666666666666in"}, where
> ![](media/image334.wmf){width="0.5in" height="0.22916666666666666in"},
> then ![](media/image502.wmf){width="0.4166666666666667in"
> height="0.16666666666666666in"};
>
> \- and where ![](media/image115.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is the number of the first ECCE (i.e.
> lowest ECCE index used to construct the EPDCCH) used for transmission
> of the corresponding DCI assignment in EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"},
> ![](media/image117.wmf){width="0.6041666666666666in"
> height="0.28125in"} for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}is configured by the higher layer
> parameter *pucch-ResourceStartOffset-r11 ,*
> ![](media/image118.wmf){width="0.5416666666666666in"
> height="0.2604166666666667in"}for EPDCCH-PRB-set
> ![](media/image112.wmf){width="0.125in"
> height="0.16666666666666666in"}in subframe
> ![](media/image432.wmf){width="0.4375in"
> height="0.2604166666666667in"} is given in Clause 6.8A.1 in \[3\],
> ![](media/image261.wmf){width="0.16666666666666666in"
> height="0.1875in"}is determined from the antenna port used for EPDCCH
> transmission in subframe
> ![](media/image444.wmf){width="0.3854166666666667in"
> height="0.21875in"}which is described in Clause 6.8A.5 in \[3\].
> ![](media/image479.wmf){width="0.375in"
> height="0.22916666666666666in"},
> ![](media/image516.wmf){width="0.84375in"
> height="0.2708333333333333in"},
> ![](media/image517.wmf){width="0.8125in"
> height="0.2916666666666667in"}are determined as described in Clause
> 10.1.3.1.

\- For a UE configured with a transmission mode that supports up to two
transport blocks on the primary cell, the PUCCH resource
![](media/image574.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} is determined as
![](media/image575.wmf){width="1.2916666666666667in"
height="0.2604166666666667in"}.HARQ-ACK(0) is the ACK/NACK/DTX response
for the PDSCH without a corresponding EPDCCH detected. HARQ-ACK(1) is
the ACK/NACK/DTX response for the first transport block of the PDSCH
indicated by the detection of a corresponding EPDCCH for which the value
of both the counter DAI field and the total DAI field in the
corresponding DCI format is equal to \'1\' or for the EPDCCH indicating
downlink SPS release for which the value of both the counter DAI field
and the total DAI field in the corresponding DCI format is equal to
\'1\'. HARQ-ACK(2) is the ACK/NACK/DTX response for the second transport
block of the PDSCH indicated by the detection of a corresponding EPDCCH
for which the value of both the counter DAI field and the total DAI
field in the corresponding DCI format is equal to \'1\'.

\- if a PDSCH transmission is indicated by the detection of a
corresponding PDCCH/EPDCCH in subframe
![](media/image531.wmf){width="0.375in" height="0.20833333333333334in"},
where ![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with either the counter DAI value or the
total DAI value in the PDCCH/EPDCCH greater than \'1\' (defined in Table
7.3.2.1-1) on the primary cell, or

\- if a PDCCH/EPDCCH indicating downlink SPS release (defined in Clause
9.2) is detected in subframe ![](media/image531.wmf){width="0.375in"
height="0.20833333333333334in"}, where
![](media/image532.wmf){width="0.4270833333333333in"
height="0.20833333333333334in"} with either the counter DAI value or the
total DAI value in the PDCCH/EPDCCH greater than \'1\' on the primary
cell, or

\- if a PDSCH transmission is indicated by the detection of a
corresponding PDCCH/EPDCCH in subframe , where on a secondary cell,

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is more than 22, the UE shall use
PUCCH format 4 and PUCCCH resource where the value of is determined
according to higher layer configuration and Table 10.1.2.2.3-1. Denote
as the set of configured serving cells for the UE. Denote is the
smallest value in such that PDCCH/EPDCCH scheduling PDSCH or indicating
DL SPS release is detected in subframe on serving cell and . The TPC
field in a PDCCH/EPDCCH scheduling PDSCH or indicating downlink SPS
release in subframe on a serving cell satisfying shall be used to
determine the PUCCH resource value from one of the four resource values
configured by higher layers, with the mapping defined in Table
10.1.2.2.3-1. A UE shall assume that the same HARQ-ACK PUCCH resource
value is transmitted on any PDCCH/EPDCCH scheduling PDSCH or indicating
downlink SPS release in subframe on any serving cell satisfying.

\- if the total number of HARQ-ACK bits and scheduling request bit (if
any) and periodic CSI bits (if any) is no more than 22, the UE shall use
PUCCH format 3 and PUCCH resource where the value of is determined
according to higher layer configuration and Table 10.1.2.2.2-1. Denote
as the set of configured serving cells for the UE. Denote is the
smallest value in such that PDCCH/EPDCCH scheduling PDSCH or indicating
DL SPS release is detected in subframe on serving cell and . The TPC
field in a PDCCH/EPDCCH scheduling PDSCH or indicating downlink SPS
release in subframe on a serving cell satisfying shall be used to
determine the PUCCH resource value from one of the four resource values
configured by higher layers, with the mapping defined in Table
10.1.2.2.2-1. A UE shall assume that the same HARQ-ACK PUCCH resource
value is transmitted on any PDCCH/EPDCCH scheduling PDSCH or indicating
downlink SPS release in subframe on any serving cell satisfying. If a UE
is configured for two antenna port transmission for PUCCH format 3, a
PUCCH resource value in Table 10.1.2.2.2-1 maps to two PUCCH resources
with the first PUCCH resource
![](media/image613.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"} and the second PUCCH resource
![](media/image614.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image110.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}, otherwise, the PUCCH resource value
maps to a single PUCCH resource
![](media/image615.wmf){width="0.4583333333333333in"
height="0.2708333333333333in"} for antenna port
![](media/image108.wmf){width="0.19791666666666666in"
height="0.20833333333333334in"}.

##### 10.1.3.2.4 PUCCH format 5 HARQ-ACK procedure

TDD HARQ-ACK feedback procedures for a UE configured with PUCCH format 5
and *codebooksizeDetermination-r13 = cc* is described in Clause
10.1.3.2.4.1.

TDD HARQ-ACK feedback procedures for a UE configured with PUCCH format 5
and *codebooksizeDetermination-r13 = dai* is described in Clause
10.1.3.2.4.2.

##### 10.1.3.2.4.1 PUCCH format 5 HARQ-ACK procedure without adaptive codebook {#pucch-format-5-harq-ack-procedure-without-adaptive-codebook .H6}

The HARQ-ACK feedback procedure for PUCCH format 5 HARQ-ACK procedure is
as described in Clause 10.1.3.2.3.1, by replacing with.

##### 10.1.3.2.4.2 PUCCH format 5 HARQ-ACK procedure with adaptive codebook {#pucch-format-5-harq-ack-procedure-with-adaptive-codebook .H6}

The HARQ-ACK feedback procedure for PUCCH format 5 HARQ-ACK procedure is
as described in Clause 10.1.3.2.3.2, by replacing with .

### 10.1.3A FDD-TDD HARQ-ACK feedback procedures for primary cell frame structure type 2

A UE is configured by higher layers to use either PUCCH format 1b with
channel selection or PUCCH format 3/4/5 for transmission of HARQ-ACK.

For a serving cell, if the serving cell is frame structure type 1, and a
UE is not configured to monitor PDCCH/EPDCCH in another serving cell for
scheduling the serving cell, set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}is defined in Table 10.1.3A-1, otherwise set
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}is defined in Table 10.1.3.1-1C if the UE is
configured with higher layer parameter *shortTTI* for slot-PDSCH, in
Table 10.1.3.1-1B if the UE is configured with higher layer parameter
*shortProcessingTime* and the corresponding PDCCH with CRC scrambled by
C-RNTI is in the UE-specific search space for subframe-PDSCH and in
Table 10.1.3.1-1 otherwise.

PUCCH format 1b with channel selection is not supported if a UE is
configured with more than two serving cells, or if the DL-reference
UL/DL configuration 5 (as defined in Clause 10.2) is defined for any
serving cell, or if the DL-reference UL/DL configuration of a serving
cell with frame structure type 1 belongs to {2, 3, 4} and the UE is not
configured to monitor PDCCH/EPDCCH in another serving cell for
scheduling the serving cell.

If a UE is configured with the parameter *EIMTA-MainConfigServCell-r12*
for at least one serving cell and is configured with PUCCH format 3
without PUCCH format 4/5 configured, the UE is not expected to be
configured with more than two serving cells having DL-reference UL/DL
configuration 5.

If a UE is configured to use PUCCH format 1b with channel selection for
HARQ-ACK transmission, for the serving cells,

\- if more than 4 HARQ-ACK bits for
![](media/image235.wmf){width="0.1875in" height="0.15625in"}multiple
downlink and special subframes associated with a single UL subframe *n*,
where ![](media/image235.wmf){width="0.1875in" height="0.15625in"} is as
defined in Clause 10.1.3.2.1 for case where the UE is configured with
two serving cells with different UL/DL configurations,

\- spatial HARQ-ACK bundling across multiple codewords within a downlink
or special subframe is performed for each serving cell by a logical AND
operation of all the corresponding individual HARQ-ACKs, and the bundled
HARQ-ACK bits for each serving cell is transmitted using PUCCH format 1b
with channel selection,

\- otherwise,

\- spatial HARQ-ACK bundling is not performed, and the HARQ-ACK bits are
transmitted using PUCCH format 1b with channel selection.

If a UE is configured to use PUCCH format 3 without PUCCH format 4/5
configured for HARQ-ACK transmission, for the serving cells,

\- if more than 21 HARQ-ACK bits for
![](media/image235.wmf){width="0.1875in" height="0.15625in"} multiple
subframes in downlink and special subframes associated with a single UL
subframe *n*, where ![](media/image235.wmf){width="0.1875in"
height="0.15625in"} as defined in Clause 10.1.3.2.2 for the case of UE
configured with more than one serving cell and if at least two cells
have different UL/DL configurations,

\- spatial HARQ-ACK bundling across multiple codewords within a downlink
subframe or a special subframe is performed for each serving cell by a
logical AND operation of all of the corresponding individual HARQ-ACKs,
and PUCCH format 3 is used,

\- otherwise,

\- spatial HARQ-ACK bundling is not performed, and the HARQ-ACK bits are
transmitted using PUCCH format 3.

\- UE shall determine the number of HARQ-ACK bits,
![](media/image95.wmf){width="0.125in" height="0.13541666666666666in"},
associated with an UL subframe/slot *n* according to
![](media/image238.wmf){width="0.90625in" height="0.5729166666666666in"}
where ![](media/image239.wmf){width="0.34375in"
height="0.22916666666666666in"} is the number of configured cells, and
![](media/image240.wmf){width="0.3854166666666667in"
height="0.2708333333333333in"}is the number of HARQ-bits for the *c*-th
serving cell defined in Clause 7.3.4. If a UE is not configured to
monitor PDCCH/EPDCCH/SPDCCH in another serving cell for scheduling a
serving cell with frame structure type 1, and the DL-reference UL/DL
configuration of the serving cell belongs to {2, 3, 4, 5}, then the UE
is not expected to be configured with
![](media/image239.wmf){width="0.34375in"
height="0.22916666666666666in"} which result in
![](media/image641.wmf){width="0.40625in"
height="0.16666666666666666in"}.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 3.

HARQ-ACK transmission on two antenna ports
![](media/image10.wmf){width="0.7916666666666666in"
height="0.20833333333333334in"} is supported for PUCCH format 1b with
channel selection and with two configured serving cells.

The FDD-TDD HARQ-ACK feedback procedure for PUCCH format 1b with channel
selection follows the HARQ-ACK procedure described in Clause 10.1.3.2.1
for the case of UE configured with two serving cells with different
UL/DL configurations, and for PUCCH format 3/4/5 follows the HARQ-ACK
procedure described in Clause 10.1.3.2.2/10.1.3.2.3/10.2.3.2.4 for the
case of UE configured with more than one serving cell and if at least
two cells have different UL/DL configurations.

Table 10.1.3A-1: Downlink association set
![](media/image277.wmf){width="0.1875in"
height="0.19791666666666666in"}*:*
![](media/image245.wmf){width="0.9166666666666666in"
height="0.22916666666666666in"} for FDD-TDD and serving cell frame
structure type 1

<table>
<thead>
<tr class="header">
<th><p>DL-reference UL/DL</p>
<p>Configuration</p></th>
<th>Subframe <em>n</em></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr class="even">
<td>0</td>
<td>-</td>
<td>-</td>
<td>6, 5</td>
<td>5, 4</td>
<td>4</td>
<td>-</td>
<td>-</td>
<td>6, 5</td>
<td>5, 4</td>
<td>4</td>
</tr>
<tr class="odd">
<td>1</td>
<td>-</td>
<td>-</td>
<td>7, 6</td>
<td>6, 5, 4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>7, 6</td>
<td>6, 5, 4</td>
<td>-</td>
</tr>
<tr class="even">
<td>2</td>
<td>-</td>
<td>-</td>
<td>8, 7, 6, 5, 4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>8, 7, 6, 5, 4</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td>3</td>
<td>-</td>
<td>-</td>
<td>11, 10, 9, 8, 7, 6</td>
<td>6, 5</td>
<td>5, 4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>4</td>
<td>-</td>
<td>-</td>
<td>12, 11, 10, 9, 8, 7</td>
<td>7, 6, 5, 4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td>5</td>
<td>-</td>
<td>-</td>
<td>13, 12, 11, 10, 9, 8, 7, 6, 5, 4</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>6</td>
<td>-</td>
<td>-</td>
<td>8, 7</td>
<td>7, 6</td>
<td>6, 5</td>
<td>-</td>
<td>-</td>
<td>7</td>
<td>7, 6, 5</td>
<td>-</td>
</tr>
</tbody>
</table>

### 10.1.4 HARQ-ACK Repetition procedure

> For a non-BL/CE UE, HARQ-ACK repetition is enabled or disabled by a UE
> specific parameter *ackNackRepetition* configured by higher layers.
> Once enabled, the UE shall repeat any HARQ-ACK transmission with a
> repetition factor ![](media/image642.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"}, where
> ![](media/image642.wmf){width="0.4791666666666667in"
> height="0.2708333333333333in"} is provided by higher layers and
> includes the initial HARQ-ACK transmission, until HARQ-ACK repetition
> is disabled by higher layers. For a PDSCH transmission without a
> corresponding PDCCH/EPDCCH detected, the UE shall transmit the
> corresponding HARQ-ACK response
> ![](media/image643.wmf){width="0.4895833333333333in"
> height="0.2708333333333333in"} times using PUCCH resource
> ![](media/image644.wmf){width="0.4583333333333333in"
> height="0.2708333333333333in"} configured by higher layers. For a
> PDSCH transmission with a corresponding PDCCH/EPDCCH detected, or for
> a PDCCH/EPDCCH indicating downlink SPS release, the UE shall first
> transmit the corresponding HARQ-ACK response once using PUCCH resource
> derived from the corresponding PDCCH CCE index or EPDCCH ECCE index
> (as described in Clauses 10.1.2 and 10.1.3), and repeat the
> transmission of the corresponding HARQ-ACK response
> ![](media/image645.wmf){width="0.7083333333333334in"
> height="0.2708333333333333in"} times always using PUCCH resource
> ![](media/image646.wmf){width="0.8020833333333334in"
> height="0.28125in"}, where
> ![](media/image647.wmf){width="0.8020833333333334in"
> height="0.28125in"}is configured by higher layers.
>
> HARQ-ACK repetition is only applicable for UEs configured with one
> serving cell for FDD and TDD. For TDD, HARQ-ACK repetition is only
> applicable for HARQ-ACK bundling.
>
> HARQ-ACK repetition can be enabled with PUCCH format 1a/1b on two
> antenna ports. For a UE configured for two antenna port transmission
> for HARQ-ACK repetition with PUCCH format 1a/1b, a PUCCH resource
> value ![](media/image646.wmf){width="0.8020833333333334in"
> height="0.28125in"} maps to two PUCCH resources with the first PUCCH
> resource ![](media/image648.wmf){width="0.8020833333333334in"
> height="0.28125in"} for antenna port
> ![](media/image649.wmf){width="0.20833333333333334in"
> height="0.2604166666666667in"} and the second PUCCH resource
> ![](media/image650.wmf){width="0.8020833333333334in"
> height="0.28125in"}for antenna port
> ![](media/image110.wmf){width="0.19791666666666666in"
> height="0.20833333333333334in"}, otherwise, the PUCCH resource value
> maps to a single PUCCH resource
> ![](media/image648.wmf){width="0.8020833333333334in"
> height="0.28125in"} for antenna port
> ![](media/image108.wmf){width="0.19791666666666666in"
> height="0.20833333333333334in"}.

###  10.1.5 Scheduling Request (SR) procedure

> A non-BL/CE UE is configured by higher layers to transmit the SR on
> one antenna port or two antenna ports.\
> For a non-BL/CE UE, the scheduling request shall be transmitted on the
> PUCCH resource(s) ![](media/image651.wmf){width="1.2291666666666667in"
> height="0.28125in"}for ![](media/image199.wmf){width="0.15625in"
> height="0.20833333333333334in"} mapped to antenna port *p* as defined
> in \[3\], where ![](media/image652.wmf){width="0.6354166666666666in"
> height="0.28125in"} is configured by higher layers unless the SR
> coincides in time with the transmission of HARQ-ACK using PUCCH Format
> 3/4/5 in which case the SR is multiplexed with HARQ-ACK according to
> Clause 5.2.3.1 of \[4\]. The subframe-SR configuration for SR
> transmission periodicity ![](media/image653.wmf){width="0.8125in"
> height="0.20833333333333334in"}and SR subframe offset
> ![](media/image654.wmf){width="0.6666666666666666in"
> height="0.21875in"} is defined in Table 10.1.5-1 by the parameter
> *sr-ConfigIndex* ![](media/image655.wmf){width="0.20833333333333334in"
> height="0.21875in"} given by higher layers.
>
> Subframe-SR transmission instances are the uplink subframes satisfying
> ![](media/image656.wmf){width="3.1145833333333335in"
> height="0.2916666666666667in"}.
>
> The slot-SR configuration for SR transmission periodicity
> ![](media/image653.wmf){width="0.8125in"
> height="0.20833333333333334in"} and SR slot offset
> ![](media/image654.wmf){width="0.6666666666666666in"
> height="0.21875in"} is defined in Table 10.1.5-1A by the parameter
> *sr-ConfigIndexSlot*
> ![](media/image655.wmf){width="0.20833333333333334in"
> height="0.21875in"} given by higher layers.
>
> Slot-SR transmission instances are the uplink slots satisfying
>
> .
>
> The subslot-SR configuration for SR transmission periodicity
> ![](media/image653.wmf){width="0.8125in"
> height="0.20833333333333334in"} and SR subslot offset
> ![](media/image654.wmf){width="0.6666666666666666in"
> height="0.21875in"} is defined in Table 10.1.5-1B by the parameter
> *sr-ConfigIndexSubslot*
> ![](media/image655.wmf){width="0.20833333333333334in"
> height="0.21875in"} given by higher layers.
>
> Subslot-SR transmission instances are the uplink slots satisfying
>
> , where is the subslot index within a subframe.
>
> For a BL/CE UE, the scheduling request shall be transmitted on the
> PUCCH resource(s) mapped to antenna port
> ![](media/image108.wmf){width="0.19791666666666666in"
> height="0.20833333333333334in"}as defined in \[3\], where is
> configured by higher layers. The SR configuration for SR transmission
> periodicity ![](media/image653.wmf){width="0.8125in"
> height="0.20833333333333334in"}and SR subframe offset
> ![](media/image654.wmf){width="0.6666666666666666in"
> height="0.21875in"} is defined in Table 10.1.5-1 by the parameter
> *sr-ConfigIndex* ![](media/image655.wmf){width="0.20833333333333334in"
> height="0.21875in"} given by higher layers. The SR transmission
> instances are consecutive BL/CE uplink subframes when \>1, or one
> uplink subframe (which may or may not be a BL/CE UL subframe) when =1,
> where ![](media/image664.wmf) is provided by higher layer parameter
> *NumRepetitionCE-format1*, starting from a subframe satisfying
> ![](media/image656.wmf){width="3.1145833333333335in"
> height="0.2916666666666667in"}.

Table 10.1.5-1: UE-specific SR periodicity and subframe offset
configuration for subframe-SR

  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  SR configuration Index\                                                     SR periodicity (ms)\                                                       SR subframe offset\
  ![](media/image655.wmf){width="0.20833333333333334in" height="0.21875in"}   ![](media/image653.wmf){width="0.8125in" height="0.20833333333333334in"}   ![](media/image654.wmf){width="0.6666666666666666in" height="0.21875in"}
  --------------------------------------------------------------------------- -------------------------------------------------------------------------- ---------------------------------------------------------------------------
  0 -- 4                                                                      5                                                                          ![](media/image665.wmf){width="0.20833333333333334in" height="0.21875in"}

  5 -- 14                                                                     10                                                                         ![](media/image666.wmf){width="0.4375in" height="0.21875in"}

  15 -- 34                                                                    20                                                                         ![](media/image667.wmf){width="0.5in" height="0.21875in"}

  35 -- 74                                                                    40                                                                         ![](media/image668.wmf){width="0.5104166666666666in" height="0.21875in"}

  75 -- 154                                                                   80                                                                         ![](media/image669.wmf){width="0.5104166666666666in" height="0.21875in"}

  155 -- 156                                                                  2                                                                          ![](media/image670.wmf){width="0.6041666666666666in" height="0.21875in"}

  157                                                                         1                                                                          ![](media/image671.wmf){width="0.5729166666666666in" height="0.21875in"}
  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 10.1.5-1A: UE-specific SR periodicity and slot offset
configuration for slot-SR

  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  SR configuration Index\                                                     SR periodicity (number of slots)\                                          SR slot offset\
  ![](media/image655.wmf){width="0.20833333333333334in" height="0.21875in"}   ![](media/image653.wmf){width="0.8125in" height="0.20833333333333334in"}   ![](media/image654.wmf){width="0.6666666666666666in" height="0.21875in"}
  --------------------------------------------------------------------------- -------------------------------------------------------------------------- ---------------------------------------------------------------------------
  0                                                                           1                                                                          ![](media/image665.wmf){width="0.20833333333333334in" height="0.21875in"}

  1 -- 2                                                                      2                                                                          

  3 -- 6                                                                      4                                                                          

  7 -- 16                                                                     10                                                                         

  17 -- 36                                                                    20                                                                         
  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 10.1.5-1B: UE-specific SR periodicity and subslot offset
configuration for subslot-SR

  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  SR configuration Index\                                                     SR periodicity (number of subslots)\                                       SR subslot offset\
  ![](media/image655.wmf){width="0.20833333333333334in" height="0.21875in"}   ![](media/image653.wmf){width="0.8125in" height="0.20833333333333334in"}   ![](media/image654.wmf){width="0.6666666666666666in" height="0.21875in"}
  --------------------------------------------------------------------------- -------------------------------------------------------------------------- ---------------------------------------------------------------------------
  0                                                                           1                                                                          ![](media/image665.wmf){width="0.20833333333333334in" height="0.21875in"}

  1 -- 2                                                                      2                                                                          

  3 -- 5                                                                      3                                                                          

  6 -- 9                                                                      4                                                                          

  10 -- 14                                                                    5                                                                          

  15 -- 20                                                                    6                                                                          

  21 -- 32                                                                    12                                                                         

  33 -- 62                                                                    30                                                                         

  63 -- 122                                                                   60                                                                         
  ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 10.2 Uplink HARQ-ACK timing
---------------------------

For TDD or for FDD-TDD and primary cell frame structure type 2 or for
FDD-TDD and primary cell frame structure type 1, if a UE configured with
*EIMTA-MainConfigServCell-r12* for a serving cell, \"UL/DL
configuration\" of the serving cell in Clause 10.2 refers to the UL/DL
configuration given by the parameter *eimta-HARQ-ReferenceConfig-r12*
for the serving cell unless specified otherwise.

For TDD serving cell not configured for PUSCH/PUCCH transmission,
\"UL/DL configuration\" of the serving cell in Clause 10.2 refers to the
UL/DL configuration given by the parameter *harq-ReferenceConfig-r14*
for the serving cell unless specified otherwise

For a non-BL/CE UE, for FDD or for FDD-TDD and primary cell frame
structure type 1, the UE shall upon detection of a PDSCH transmission in
subframe *n-4* intended for the UE and for which an HARQ-ACK shall be
provided, transmit the HARQ-ACK response in subframe *n*. If HARQ-ACK
repetition is enabled, upon detection of a PDSCH transmission in
subframe *n-4* intended for the UE and for which HARQ-ACK response shall
be provided, and if the UE is not repeating the transmission of any
HARQ-ACK in subframe
![](media/image684.wmf){width="0.10416666666666667in" height="0.125in"}
corresponding to a PDSCH transmission in subframes
![](media/image685.wmf){width="0.8020833333333334in"
height="0.21875in"}, ... , ![](media/image686.wmf){width="0.3125in"
height="0.16666666666666666in"}, the UE:

\- shall transmit only the HARQ-ACK response (corresponding to the
detected PDSCH transmission in subframe
![](media/image687.wmf){width="0.3125in"
height="0.16666666666666666in"}) on PUCCH in subframes
![](media/image684.wmf){width="0.10416666666666667in"
height="0.11458333333333333in"},
![](media/image688.wmf){width="0.23958333333333334in"
height="0.13541666666666666in"}, ...,
![](media/image689.wmf){width="0.7708333333333334in"
height="0.21875in"};

\- shall not transmit any other signal/channel in subframes
![](media/image684.wmf){width="0.10416666666666667in"
height="0.11458333333333333in"},
![](media/image688.wmf){width="0.23958333333333334in"
height="0.13541666666666666in"}, ...,
![](media/image689.wmf){width="0.7708333333333334in"
height="0.21875in"}; and

\- shall not transmit any HARQ-ACK response repetitions corresponding to
any detected PDSCH transmission in subframes
![](media/image690.wmf){width="0.2916666666666667in"
height="0.15625in"}, ...,
![](media/image691.wmf){width="0.8020833333333334in"
height="0.21875in"}.

For TDDÂ and a UE configured with *EIMTA-MainConfigServCell-r12* for at
least oneÂ serving cell,Â if the UE is configured with one serving cellÂ or
if the UE is configured with more than one serving cell and the TDD
UL/DL configuration of all the configured serving cells is the same,Â the
DL-reference UL/DL configuration forÂ aÂ servingÂ cell is the UL/DL
configuration ofÂ the serving cell.

For FDD-TDD and primary cell frame structure type 1,Â if a serving cell
is a secondary serving cell with frame structure type 2,Â the
DL-reference UL/DL configuration forÂ theÂ servingÂ cell is the UL/DL
configuration ofÂ the serving cell.

For TDD, if the UE is configured with more than one serving cell and if
at least two serving cells have different UL/DL configurations and if a
serving cell is a primary cell, then the primary cell UL/DL
configuration is the DL-reference UL/DL configuration for the serving
cell.

For FDD-TDD and primary cell frame structure type 2, if a serving cell
is a primary cell or if a serving cell is a secondary cell with frame
structure type 1, then the primary cell UL/DL configuration is the
DL-reference UL/DL configuration for the serving cell.

For TDD and if the UE is configured with more than one serving cell and
if at least two serving cells have different UL/DL configurations and if
the UE is not configured with *harqTimingTDD = TRUE* and if a serving
cell is a secondary cell, or for FDD-TDD and primary cell frame
structure type 2 and if the UE is not configured with *harqTimingTDD =
TRUE* and if a serving cell is a secondary cell with frame structure
type 2

\- if the pair formed by (primary cell UL/DL configuration, serving cell
UL/DL configuration ) belongs to Set 1 in Table 10.2-1 or

\- if the UE is not configured to monitor PDCCH/EPDCCH in another
serving cell for scheduling the serving cell, and if the pair formed by
(primary cell UL/DL configuration, serving cell UL/DL configuration )
belongs to Set 2 or Set 3 in Table 10.2-1 or

\- if the UE is configured to monitor PDCCH/EPDCCH in another serving
cell for scheduling the serving cell, and if the pair formed by (primary
cell UL/DL configuration, serving cell UL/DL configuration) belongs to
Set 4 or Set 5 in Table 10.2-1

then the DL-reference UL/DL configuration for the serving cell is
defined in the corresponding Set in Table 10.2-1.

For TDD and if the UE is configured with more than one serving cell and
if at least two serving cells have different UL/DL configurations and if
the UE is configured with *harqTimingTDD = TRUE* and if a serving cell
is a secondary cell, or for FDD-TDD and primary cell frame structure
type 2 and if the UE is configured with *harqTimingTDD = TRUE* and if a
serving cell is a secondary cell with frame structure type 2

\- if the UE is configured to monitor PDCCH/EPDCCH in another serving
cell for scheduling the serving cell, and if the pair formed by (primary
cell UL/DL configuration, serving cell UL/DL configuration) belongs to
Set 1 or Set 4 or Set 5 in Table 10.2-1, then the DL-reference UL/DL
configuration for the serving cell is defined in the corresponding Set
in Table 10.2-1;

\- if the UE is not configured to monitor PDCCH/EPDCCH in another
serving cell for scheduling the serving cell, and then the primary cell
UL/DL configuration is the DL-reference UL/DL configuration for the
serving cell.

For a UE not configured with PUCCH format 4 or PUCCH format 5, for TDD
and if a UE is configured with more than one serving cell and if at
least two serving cells have different UL/DL configurations or for
FDD-TDD and primary cell frame structure type 2, if the DL-reference
UL/DL configuration for at least one serving cell is TDD UL/DL
Configuration 5, then the UE is not expected to be configured with more
than two serving cells.

For TDD and a non-BL/CE UE not configured with
*EIMTA-MainConfigServCell-r12* for anyÂ serving cell, if the UE is
configured with one serving cell, or the UE is configured with more than
one serving cell and the UL/DL configurations of all serving cells is
same, then the UE shall upon detection of a PDSCH transmission within
subframe(s) ![](media/image233.wmf){width="0.3125in" height="0.1875in"},
where ![](media/image28.wmf){width="0.375in" height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 intended for the UE
and for which HARQ-ACK response shall be provided, transmit the HARQ-ACK
response in UL subframe *n*.

For a UE not configured with *harqTimingTDD = TRUE*, for TDD and if a UE
is configured with more than one serving cell and if at least two
serving cells have different UL/DL configurations, or if a UE is
configured withÂ *EIMTA-MainConfigServCell-r12* for at least oneÂ serving
cell, or for FDD-TDD and primary cell frame structure type 2 and if a
serving cell *c* is frame structure type 2, then the UE shall upon
detection of a PDSCH transmission within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"} for serving
cell ![](media/image692.wmf){width="0.125in" height="0.125in"}, where
![](media/image693.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} intended for the UE and for which
HARQ-ACK response shall be provided, transmit the HARQ-ACK response in
UL subframe *n*, wherein set
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"}contains values of
![](media/image694.wmf){width="0.4270833333333333in"
height="0.19791666666666666in"}such that subframe *n-k* corresponds to a
DL subframe or a special subframe for serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"}, where DL
subframe or special subframe of serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"} is according
to the higher layer parameter *eimta-HARQ-ReferenceConfig-r12* if the UE
is configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12* for serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"} and according
to *harq-ReferenceConfig-r14* if configured*;*
![](media/image695.wmf){width="0.16666666666666666in"
height="0.15625in"} defined in Table 10.1.3.1-1 (where \"UL/DL
configuration\" in Table 10.1.3.1-1 refers to the \"DL-reference UL/DL
configuration\") is associated with subframe *n.*

For a UE configured with *harqTimingTDD = TRUE*, for TDD and if a UE is
configured with more than one serving cell and if at least two serving
cells have different UL/DL configurations, or for FDD-TDD and primary
cell frame structure type 2 and if a serving cell *c* is frame structure
type 2,

\- if the UE is configured to monitor PDCCH/EPDCCH in another serving
cell for scheduling the serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"}, then the UE
shall upon detection of a PDSCH transmission within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"} for serving
cell ![](media/image692.wmf){width="0.125in" height="0.125in"}, where
![](media/image693.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} intended for the UE and for which
HARQ-ACK response shall be provided, transmit the HARQ-ACK response in
UL subframe *n*, wherein set
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"}contains values of
![](media/image694.wmf){width="0.4270833333333333in"
height="0.19791666666666666in"}such that subframe *n-k* corresponds to a
DL subframe or a special subframe for serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"}, where
![](media/image695.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 (where \"UL/DL
configuration\" in Table 10.1.3.1-1 refers to the \"DL-reference UL/DL
configuration\") is associated with subframe *n.*

\- if the UE is not configured to monitor PDCCH/EPDCCH in another
serving cell for scheduling the serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"}, then the UE
shall upon detection of a PDSCH transmission within subframe(s)
![](media/image233.wmf){width="0.3125in" height="0.1875in"} for serving
cell ![](media/image692.wmf){width="0.125in" height="0.125in"}, where
![](media/image693.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"} intended for the UE and for which
HARQ-ACK response shall be provided, transmit the HARQ-ACK response in
UL subframe *n*, wherein set
![](media/image419.wmf){width="0.22916666666666666in"
height="0.2604166666666667in"}contains values of
![](media/image694.wmf){width="0.4270833333333333in"
height="0.19791666666666666in"}such that subframe *n-k* corresponds to a
DL subframe or a special subframe for serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"}, where
![](media/image695.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3A-1 (where \"UL/DL
configuration\" in Table 10.1.3A-1 refers to the \"DL-reference UL/DL
configuration\") is associated with subframe *n.*

For a non-BL/CE UE, and for FDD-TDD and primary cell frame structure
type 2, if a serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"} is frame structure type 1 and a UE is not configured
to monitor PDCCH/EPDCCH in another serving cell for scheduling the
serving cell ![](media/image692.wmf){width="0.125in" height="0.125in"},
then the UE shall upon detection of a PDSCH transmission within
subframe(s) ![](media/image233.wmf){width="0.3125in" height="0.1875in"}
for serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"}, where
![](media/image693.wmf){width="0.4895833333333333in"
height="0.2604166666666667in"},
![](media/image696.wmf){width="0.5416666666666666in"
height="0.2604166666666667in"}and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}is defined in Table 10.1.3A-1 intended for the UE and
for which HARQ-ACK response shall be provided, transmit the HARQ-ACK
response in subframe *n*.

For FDD-TDD and primary cell frame structure type 2, if a serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"} is frame
structure type 1 and a UE is configured to monitor PDCCH/EPDCCH in
another serving cell for scheduling serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"}, then the UE
shall upon detection of a PDSCH transmission within subframe(s)
![](media/image697.wmf){width="0.3229166666666667in" height="0.1875in"}
for serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"}, where
![](media/image698.wmf){width="0.4791666666666667in" height="0.25in"},
![](media/image699.wmf){width="0.5416666666666666in" height="0.25in"}and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"}is defined in Table 10.1.3.1-1, intended for the UE
and for which HARQ-ACK response shall be provided, transmit the HARQ-ACK
response in subframe *n*, where \"UL/DL configuration\" in Table
10.1.3.1-1 refers to the \"DL-reference UL/DL configuration\" of serving
cell ![](media/image692.wmf){width="0.125in" height="0.125in"}.

For TDD, if HARQ-ACK repetition is enabled, upon detection of a PDSCH
transmission within subframe(s) ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, where ![](media/image28.wmf){width="0.375in"
height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 intended for the UE
and for which HARQ-ACK response shall be provided, and if the UE is not
repeating the transmission of any HARQ-ACK in subframe
![](media/image684.wmf){width="0.10416666666666667in" height="0.125in"}
corresponding to a PDSCH transmission in a downlink or special subframe
earlier than subframe ![](media/image233.wmf){width="0.3125in"
height="0.1875in"}, the UE:

\- shall transmit only the HARQ-ACK response (corresponding to the
detected PDSCH transmission in
subframe![](media/image233.wmf){width="0.3125in" height="0.1875in"}) on
PUCCH in UL
subframe![](media/image700.wmf){width="0.13541666666666666in"
height="0.15625in"} and the next ![](media/image701.wmf){width="0.625in"
height="0.22916666666666666in"}UL subframes denoted as
![](media/image702.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"},
...,![](media/image703.wmf){width="0.5416666666666666in"
height="0.28125in"};

\- shall not transmit any other signal/channel in UL subframe
![](media/image700.wmf){width="0.13541666666666666in"
height="0.15625in"},
![](media/image702.wmf){width="0.16666666666666666in"
height="0.22916666666666666in"},
...,![](media/image703.wmf){width="0.5416666666666666in"
height="0.28125in"}; and

\- shall not transmit any HARQ-ACK response repetitions corresponding to
any detected PDSCH transmission in subframes
![](media/image704.wmf){width="0.4166666666666667in"
height="0.2604166666666667in"}, where
![](media/image705.wmf){width="0.4270833333333333in"
height="0.22916666666666666in"},
![](media/image706.wmf){width="0.20833333333333334in"
height="0.2604166666666667in"}is the set defined in Table 10.1.3.1-1
corresponding to UL subframe
![](media/image707.wmf){width="0.16666666666666666in"
height="0.2604166666666667in"}, and
![](media/image708.wmf){width="1.1354166666666667in"
height="0.2708333333333333in"}.

For TDD, HARQ-ACK bundling, if the UE detects that at least one downlink
assignment has been missed as described in Clause 7.3, the UE shall not
transmit HARQ-ACK on PUCCH if HARQ-ACK is the only UCI present in a
given subframe.

For FDD, a BL/CE UE shall upon detection of a PDSCH intended for the UE
and for which an HARQ-ACK shall be provided, transmit the HARQ-ACK
response using the same derived according to Clause 10.1.2.1 in
subframe(s) *n+k~i~* with *i =0,1, ..., N-1*, where

\- subframe *n-k* is the last subframe in which the PDSCH is
transmitted*, where*

if the UE is in half-duplex FDD operation and is configured with CEModeA
and higher layer parameter *ce-HARQ-AckBundling* and the \'HARQ-ACK
bundling flag\' in the corresponding DCI is set to 1, or if the UE is
configured with higher layer parameter *ce-SchedulingEnhancement*

\- $k$ is given by the \'HARQ-ACK delay\' field in the corresponding
DCI, and the HARQ-ACK delay value $k$ is determined based on the higher
layer parameters according to Table 7.3.1-2;

otherwise

\- $k = 4$

*- 0â¤k~0~\<k~1~\<...,k~N-1~* and the value of and is provided by higher
layer parameter *pucch-NumRepetitionCE-format1,* if configured,
otherwise it is provided by higher layer parameter
*pucch-NumRepetitionCE*-*Msg4-Level0-r13,
pucch-NumRepetitionCE-Msg4-Level1-r13,
pucch-NumRepetitionCE-Msg4-Level2-r13* or
*pucch-NumRepetitionCE-Msg4-Level3-r13* depending on whether the most
recent PRACH coverage enhancement level for the UE is 0, 1, 2 or 3,
respectively; and

if *N\>1*

\- subframe(s) *n+k~i~* with *i=0,1,...,N-1* are *N* consecutive BL/CE
UL subframe(s) immediately after subframe *n-1*, and the set of BL/CE UL
subframes are configured by higher layers;

otherwise

\- k~0~ =0

except if the UE is configured with higher layer parameter
***ce-PDSCH-MultiTB-Config*** and *multiple TB are scheduled* in the
corresponding DCI.

For FDD, if a BL/CE UE is configured with CEModeA, and if the UE is not
configured with higher layer parameter ***harq-AckBundling** in
ce-PDSCH-MultiTB-Config* and *multiple TB are scheduled* in the
corresponding DCI, the BL/CE UE shall upon detection of a PDSCH intended
for the UE and for which an HARQ-ACK shall be provided, transmit the
HARQ-ACK response using the same derived according to Clause 10.1.2.1 in
subframe(s) $s_{b} + k_{i}$ with $b = 0,1,\cdots N_{\text{TB}} - 1$, *i
=0,1, ..., N-1*, where

\- is the number of scheduled TB determined in the corresponding DCI;

\- if the UE is not configured with higher layer parameter
*interleaving* in *ce-PDSCH-MultiTB-Config* and the UE is not in
half-duplex FDD operation

\- $s_{0} = n_{0} + 4$,
$s_{b} = \max{\ \{ n_{b} + 4,\ \ s_{b - 1} + N_{b - 1}\}},\ b \neq 0$

\- otherwise

\-
$s_{0} = \text{max\ }\left\{ n_{0} + 4,\ \ \left( n_{L} + 2 \right) \right\}$***,***
$s_{b} = \max{\ \{ n_{b} + 4,\ \ s_{b - 1} + N_{b - 1}\}},\ b \neq 0$

\- $n_{b}$ is the last subframe in which the PDSCH containing *TB* $b$
is transmitted;

\- subframe $n_{L}$ is the last subframe in which the PDSCH is
transmitted;

\- $N_{b}$ **denotes the number of** consecutive subframes including
non-BL/CE subframes **where the PUCCH with HARQ ACK for TB** $b$ **with
repetition number of *N* is transmitted**;

and

*- 0â¤k~0~\<k~1~\<...,k~N-1~* and the value of and is provided by higher
layer parameter *pucch-NumRepetitionCE-format1,* if configured,
otherwise it is provided by higher layer parameter
*pucch-NumRepetitionCE*-*Msg4-Level0-r13,
pucch-NumRepetitionCE-Msg4-Level1-r13,
pucch-NumRepetitionCE-Msg4-Level2-r13* or
*pucch-NumRepetitionCE-Msg4-Level3-r13* depending on whether the most
recent PRACH coverage enhancement level for the UE is 0, 1, 2 or 3,
respectively; and

if *N\>1*

\- subframe(s) $s_{b} + k_{i}$ with *i=0,1,...,N-1* for **TB** $b$ are
*N* consecutive BL/CE UL subframe(s) immediately after subframe
$s_{b} - 1$, and the set of BL/CE UL subframes are configured by higher
layers;

otherwise

\- k~0~ =0

For FDD, if a BL/CE UE is configured with CEModeA, and if the UE is
configured with higher layer parameter ***harq-AckBundling** in
ce-PDSCH-MultiTB-Config* and *multiple TB are scheduled* in the
corresponding DCI, the BL/CE UE shall upon detection of a PDSCH intended
for the UE and for which an HARQ-ACK shall be provided, transmit the
HARQ-ACK response using the same derived according to Clause 10.1.2.1 in
subframe(s) $s_{b} + k_{i}$ with $b = 0,1,\cdots M - 1$, *i =0,1, ...,
N-1*, where

\- is the number of TB bundles, and is determined according to clause
7.3;

\- if the UE is not configured with higher layer parameter
*interleaving* in *ce-PDSCH-MultiTB-Config* and the UE is not in
half-duplex FDD operation

\- $s_{0} = n_{0} + 4$,
$s_{b} = \max{\ \{ n_{b} + 4,\ \ s_{b - 1} + N_{b - 1}\}},\ b \neq 0$

\- otherwise

\- subframe
$s_{0} = \text{max\ }\left\{ n_{0} + 4,\ \ \left( n_{L} + 2 \right) \right\}$***,***
$s_{b} = \max{\ \{ n_{b} + 4,\ \ s_{b - 1} + N_{b - 1}\}},\ b \neq 0$

\- subframe $n_{b}$ is the last subframe in which the PDSCH containing
*TB* **bundle** $b$ is transmitted;

\- subframe $n_{L}$ is the last subframe in which the PDSCH is
transmitted;

\- $N_{b}$ **denotes the number of** consecutive subframes including
non-BL/CE subframes **where the PUCCH with HARQ ACK for TB bundle** $b$
**with repetition number of *N* is transmitted**;

and

*- 0â¤k~0~\<k~1~\<...,k~N-1~* and the value of and is provided by higher
layer parameter *pucch-NumRepetitionCE-format1,* if configured,
otherwise it is provided by higher layer parameter
*pucch-NumRepetitionCE*-*Msg4-Level0-r13,
pucch-NumRepetitionCE-Msg4-Level1-r13,
pucch-NumRepetitionCE-Msg4-Level2-r13* or
*pucch-NumRepetitionCE-Msg4-Level3-r13* depending on whether the most
recent PRACH coverage enhancement level for the UE is 0, 1, 2 or 3,
respectively; and

if *N\>1*

\- subframe(s) $s_{b} + k_{i}$ with *i=0,1,...,N-1* for **TB bundle**
$b$ are *N* consecutive BL/CE UL subframe(s) immediately after
subframe$\ s_{b} - 1$, and the set of BL/CE UL subframes are configured
by higher layers;

otherwise

\- k~0~ =0

For TDD, a BL/CE UE shall upon detection of a PDSCH within subframe(s)
![](media/image244.wmf){width="0.3125in" height="0.1875in"}, where
![](media/image28.wmf){width="0.375in" height="0.1875in"} and
![](media/image234.wmf){width="0.16666666666666666in"
height="0.15625in"} is defined in Table 10.1.3.1-1 intended for the UE
and for which HARQ-ACK response shall be provided, transmit the HARQ-ACK
response using the same derived according to Clause 10.1.3.1 in
subframe(s) *n+k~i~* with *i =0,1, ..., N-1*, where

\- subframe *n-k* is the last subframe in which the PDSCH is
transmitted; and

*- 0â¤k~0~\<k~1~\<...,k~N-1~* and the value of and is provided by higher
layers parameter *pucch-NumRepetitionCE-format1,* if configured,
otherwise it is provided by higher layer parameter
*pucch-NumRepetitionCE*-*Msg4-Level0-r13,
pucch-NumRepetitionCE-Msg4-Level1-r13,
pucch-NumRepetitionCE-Msg4-Level2-r13* or
*pucch-NumRepetitionCE-Msg4-Level3-r13* depending on whether the most
recent PRACH coverage enhancement level for the UE is 0, 1, 2 or 3,
respectively; and

if *N\>1*

\- subframe(s) *n+k~i~* with *i=0,1,...,N-1* are *N* consecutive BL/CE
UL subframe(s) immediately after subframe *n-1*, and the set of BL/CE UL
subframes are configured by higher layers;

otherwise

\- k~0~ =0

except if the UE is configured with higher layer parameter
***ce-PDSCH-MultiTB-Config*** and *multiple TB are scheduled* in the
corresponding DCI.

For TDD, if a BL/CE UE is configured with higher layer parameter
***ce-PDSCH-MultiTB-Config*** and multiple TBs are scheduled in the
corresponding DCI, the BL/CE UE shall upon detection of a PDSCH intended
for the UE and for which HARQ-ACK response shall be provided, transmit
the HARQ-ACK response using the same derived according to Clause
10.1.3.1 in subframe(s) $s_{b}$*+k~i~* with $b = 0,1,\ldots,B - 1$, *i
=0,1, ..., N-1*, where

\- $\text{B\ }$is the number of TB bundles

\- if the UE is not configured with higher layer parameter
***harq-AckBundling** in ce-PDSCH-MultiTB-Config,* $B = N_{\text{TB}}$
*with bundle* $b$ *consisting of only* $\text{TB}$ $b$*.*

\- Else, the value of $B$ and the corresponding TBs in each bundle is
determined according to clause 7.3

\- is the number of scheduled TB determined in the corresponding DCI;

\- $s_{0} = n_{0} + 4$,
$s_{b} = \max{\ \{ n_{b} + 4,\ \ s_{b - 1} + N_{b - 1}\}},\ b \neq 0$

\- $n_{b}$ is the last subframe in which the PDSCH containing *TB
bundle* $b$ is transmitted;

\- $N_{b}$ denotes the number of consecutive subframes including
subframes that are not BL/CE UL subframes where the PUCCH with HARQ ACK
for TB bundle $b$ with repetition number of *N* is transmitted;

> and

*- 0â¤k~0~\<k~1~\<...,k~N-1~* and the value of and is provided by higher
layers parameter *pucch-NumRepetitionCE-format1,* if configured,
otherwise it is provided by higher layer parameter
*pucch-NumRepetitionCE*-*Msg4-Level0-r13,
pucch-NumRepetitionCE-Msg4-Level1-r13,
pucch-NumRepetitionCE-Msg4-Level2-r13* or
*pucch-NumRepetitionCE-Msg4-Level3-r13* depending on whether the most
recent PRACH coverage enhancement level for the UE is 0, 1, 2 or 3,
respectively; and

\- subframe(s) $s_{b} + k_{i}$ with *i=0,1,...,N-1* for **TB bundle**
$b$ are *N* consecutive BL/CE UL subframe(s) immediately after subframe
$s_{b} - 1$, and the set of BL/CE UL subframes are configured by higher
layers.

The uplink timing for the ACK corresponding to a detected PDCCH/EPDCCH
indicating downlink SPS release shall be the same as the uplink timing
for the HARQ-ACK corresponding to a detected PDSCH, as defined above.

For a BL/CE UE, the uplink timing for the ACK corresponding to a
detected MPDCCH indicating downlink SPS release shall be the same as the
uplink timing for the HARQ-ACK corresponding to a detected PDSCH, as
defined above.

For a BL/CE UE, if a first HARQ-ACK transmission associated to a first
set of PDSCH partially collides with a second HARQ-ACK transmission
associated to a second set of PDSCH transmissions, the last PDSCH of the
first set of PDSCH transmissions being detected before the last PDSCH of
the second set of PDSCH transmissions, the UE shall drop the second
HARQ-ACK transmission.

Table 10.2-1: DL-reference UL/DL configuration for serving cell based on
pair formed by (primary cell UL/DL configuration, secondary cell UL/DL
configuration)

  --------------------------------------------------------------------------
  Set \#   (Primary cell UL/DL configuration,\         DL-reference\
           Secondary cell UL/DL configuration)         UL/DL configuration
  -------- ------------------------------------------- ---------------------
  Set 1    (0,0)                                       0

           (1,0),(1,1),(1,6)                           1

           (2,0),(2,2),(2,1),(2,6)                     2

           (3,0),(3,3),(3,6)                           3

           (4,0),(4,1),(4,3),(4,4),(4,6)               4

           (5,0),(5,1),(5,2),(5,3),(5,4),(5,5),(5,6)   5

           (6,0),(6,6)                                 6

  Set 2    (0,1),(6,1)                                 1

           (0,2),(1,2),(6,2)                           2

           (0,3),(6,3)                                 3

           (0,4),(1,4),(3,4),(6,4)                     4

           (0,5),(1,5),(2,5),(3,5),(4,5),(6,5)         5

           (0,6)                                       6

  Set 3    (3,1),(1,3)                                 4

           (3,2),(4,2),(2,3),(2,4)                     5

  Set 4    (0,1),(0,2),(0,3),(0,4),(0,5),(0,6)         0

           (1,2),(1,4),(1,5)                           1

           (2,5)                                       2

           (3,4),(3,5)                                 3

           (4,5)                                       4

           (6,1),(6,2),(6,3),(6,4),(6,5)               6

  Set 5    (1,3)                                       1

           (2,3),(2,4)                                 2

           (3,1),(3,2)                                 3

           (4,2)                                       4
  --------------------------------------------------------------------------

 11 Physical Multicast Channel (PMCH) related procedures
=======================================================

11.1 UE procedure for receiving the PMCH
----------------------------------------

A UE is not expected to receive PMCH with (defined in \[3\]) other than
in an MBSFN subframe with non-zero-size non-MBSFN region.

A UE is not expected to receive PMCH with in an MBSFN subframe with
zero-size non-MBSFN region.

The UE shall decode the PMCH when configured by higher layers. The UE
may assume that an eNB transmission on the PMCH is performed according
to Clause 6.5 of \[3\].

The![](media/image714.wmf){width="0.3020833333333333in"
height="0.22916666666666666in"} for the PMCH is configured by higher
layers. To determine the modulation order
(![](media/image715.wmf){width="0.21875in"
height="0.20833333333333334in"}) and TBS index
(![](media/image716.wmf){width="0.28125in"
height="0.22916666666666666in"}) used in the PMCH the UE shall

\- if the UE is configured by higher layers to decode the PMCH based on
QPSK, 16QAM, 64QAM, and 256QAM

\- if the PMCH is with and the UE is configured with higher layer
parameter *timeSeperation* with value \'4\'

\- use ![](media/image714.wmf){width="0.3020833333333333in"
height="0.22916666666666666in"}and Table 11.1-2 for determining the
modulation order (![](media/image715.wmf){width="0.21875in"
height="0.20833333333333334in"}) and TBS index
(![](media/image716.wmf){width="0.28125in"
height="0.22916666666666666in"})

\- otherwise,

\- use![](media/image714.wmf){width="0.3020833333333333in"
height="0.22916666666666666in"}and Table 7.1.7.1-1A for determining the
modulation order (![](media/image715.wmf){width="0.21875in"
height="0.20833333333333334in"}) and TBS index
(![](media/image716.wmf){width="0.28125in"
height="0.22916666666666666in"})

\- otherwise,

\- if the PMCH is with and the UE is configured with higher layer
parameter *timeSeperation* with value \'4\'

\- use ![](media/image714.wmf){width="0.3020833333333333in"
height="0.22916666666666666in"}and Table 11.1-1 for determining the
modulation order (![](media/image715.wmf){width="0.21875in"
height="0.20833333333333334in"}) and TBS index
(![](media/image716.wmf){width="0.28125in"
height="0.22916666666666666in"})

\- otherwise,

\- use![](media/image714.wmf){width="0.3020833333333333in"
height="0.22916666666666666in"} and Table 7.1.7.1-1 for determining the
modulation order (![](media/image715.wmf){width="0.21875in"
height="0.20833333333333334in"}) and TBS index
(![](media/image716.wmf){width="0.28125in"
height="0.22916666666666666in"}).

The UE shall then follow the procedure in Clause 7.1.7.2.1 to determine
the transport block size, assuming
![](media/image718.wmf){width="0.3333333333333333in"
height="0.22916666666666666in"}is equal
to![](media/image719.wmf){width="0.3020833333333333in"
height="0.22916666666666666in"}. For *PMCH with* the UE shall scale the
derived transport block size by , then round to the closest valid
transport block size in the union of Table 7.1.7.2.1-1 and Table
7.1.7.2.4-1 by including, in the rounding procedure, only the TBS
entries in Table 7.1.7.2.1-1 with $I_{\text{TBS}} \leq 33B$ and the
entries in 7.1.7.2.4-1 for which the TBS\_L1 is present in Table
7.1.7.2.1-1 with $I_{\text{TBS}} \leq 33B$ if the UE is configured by
higher layers to decode the PMCH based on QPSK, 16QAM, 64QAM, and
256QAM; and only the TBS entries in Table 7.1.7.2.1-1 with
$I_{\text{TBS}} \leq 26A$ and the entries in 7.1.7.2.4-1 for which the
TBS\_L1 is present in Table 7.1.7.2.1-1 with $I_{\text{TBS}} \leq 26A$
otherwise. In case the scaled TBS has the same distance to two valid
transport block sizes, it is rounded to the larger transport block size.
The UE shall set the redundancy version to 0 for the PMCH.

A UE may optionally report parameters *mbms-MaxBW* ($T$)*,
mbms-ScalingFactor1dot25* ($A^{(1.25})$ , *mbms-ScalingFactor7dot5*
($A^{(7.5}$), *mbms-ScalingFactor2dot5* ($A^{(2.5}$), and
*mbms-ScalingFactor0dot37* ($A^{(0.37}$) to indicate a limitation on
baseband capability provided by the following inequality

$T \geq \sum_{c = 1}^{C}{({{R_{c}B}_{c}I}_{c}^{(15\text{kHz}\ } + {{A^{(7.5}B}_{c}I}_{c}^{(7.5\text{kHz}\ } + {{A^{(2.5}\ B}_{c}I}_{c}^{(2.5\text{kHz}\ } + {{A^{(1.25}\ B}_{c}I}_{c}^{(1.25\text{kHz}\ } + {{A^{(0.37}\ B}_{c}I}_{c}^{(0.37\text{kHz}\ })}$

where

\- *T* is the maximum bandwidth capability of the UE, indicated by
*mbms-MaxBW*:

\- if mbms-MaxBW is set to implicitValue, then

$T = \text{round}\left( \frac{\text{Maximum\ number\ of\ DL-SCH\ transport\ block\ bits\ received\ within\ a\ TTI}}{Maximum\ TBS\ for\ 2\ layers\ for\ the\ maximum\ supported\ modulation\ scheme} \right) \times \ 20\text{MHz}\ $

where the numerator and the denominator correspond to the corresponding
columns of the maximum indicated *ue-CategoryDL* in \[12\].

\- if mbms-MaxBW is set to explicitValue, then
$T = \text{explicitValue} \times \ 40MHz$

\- *C* is the number of serving cells the UE is configured with, or
receiving PMCH from.

\- $R_{c}$ *is the number of spatial layers the UE can receive in the
c-th serving cell according to MIMO-CapabilityDL.*

\- $B_{c}$ *is the bandwidth (in MHz) of the c-th serving cell.*

\- If the UE is receiving PMCH with 1.25kHz numerology in serving cell
*c*, then

\-
$I_{c}^{(0.37\text{kHz}\ } = 0,I_{c}^{(1.25\text{kHz}\ } = 1,\ {I_{c}^{(2.5\text{kHz}\ } = 0,I}_{c}^{(7.5\text{kHz}\ } = 0,I_{c}^{(15\text{kHz}\ } = 0$

\- else, if the UE is receiving PMCH with 7.5kHz numerology in serving
cell *c*, then

\-
$I_{c}^{(0.37\text{kHz}\ } = 0,I_{c}^{(1.25\text{kHz}\ } = 0,\ {I_{c}^{(2.5\text{kHz}\ } = 0,I}_{c}^{(7.5\text{kHz}\ } = 1,I_{c}^{(15\text{kHz}\ } = 0$

\- else, if the UE is receiving PMCH with 2.5kHz numerology in serving
cell *c*, then

\-
$I_{c}^{(0.37\text{kHz}\ } = 0,I_{c}^{(1.25\text{kHz}\ } = 0,\ {I_{c}^{(2.5\text{kHz}\ } = 1,I}_{c}^{(7.5\text{kHz}\ } = 0,I_{c}^{(15\text{kHz}\ } = 0$

\- else, if the UE is receiving PMCH with 0.37kHz numerology in serving
cell *c*, then

\-
$I_{c}^{(0.37\text{kHz}\ } = 1,I_{c}^{(1.25\text{kHz}\ } = 0,\ {I_{c}^{(2.5\text{kHz}\ } = 0,I}_{c}^{(7.5\text{kHz}\ } = 0,I_{c}^{(15\text{kHz}\ } = 0$

\- else,

\-
$I_{c}^{(0.37\text{kHz}\ } = 0,I_{c}^{(1.25\text{kHz}\ } = 0,\ {I_{c}^{(2.5\text{kHz}\ } = 0,I}_{c}^{(7.5\text{kHz}\ } = 0,I_{c}^{(15\text{kHz}\ } = 1$

Table 11.1-1: Modulation and TBS index table for PMCH

  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  **MCS Index\                                                                              **Modulation Order\                                                                       **TBS Index\
  **![](media/image714.wmf){width="0.30069444444444443in" height="0.22083333333333333in"}   **![](media/image715.wmf){width="0.22083333333333333in" height="0.20833333333333334in"}   **![](media/image716.wmf){width="0.28194444444444444in" height="0.22083333333333333in"}
  ----------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------- -----------------------------------------------------------------------------------------
  **0**                                                                                     2                                                                                         0

  **1**                                                                                     2                                                                                         1

  **2**                                                                                     2                                                                                         2

  **3**                                                                                     2                                                                                         3

  **4**                                                                                     2                                                                                         4

  **5**                                                                                     2                                                                                         5

  **6**                                                                                     2                                                                                         6

  **7**                                                                                     2                                                                                         7

  **8**                                                                                     2                                                                                         8

  **9**                                                                                     2                                                                                         9

  **10**                                                                                    2                                                                                         10

  **11**                                                                                    4                                                                                         10

  **12**                                                                                    4                                                                                         11

  **13**                                                                                    4                                                                                         12

  **14**                                                                                    4                                                                                         13

  **15**                                                                                    4                                                                                         14

  **16**                                                                                    4                                                                                         15

  **17**                                                                                    4                                                                                         16

  **18**                                                                                    4                                                                                         17

  **19**                                                                                    4                                                                                         18

  **20**                                                                                    4                                                                                         19

  **21**                                                                                    6                                                                                         19

  **22**                                                                                    6                                                                                         20

  **23**                                                                                    6                                                                                         21

  **24**                                                                                    6                                                                                         22

  **25**                                                                                    6                                                                                         23

  **26**                                                                                    6                                                                                         24

  **27**                                                                                    6                                                                                         25

  **28**                                                                                    6                                                                                         26/26A

  **29**                                                                                    2                                                                                         reserved

  **30**                                                                                    4                                                                                         

  **31**                                                                                    6                                                                                         
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Table 11.1-2: Modulation and TBS index table 2 for PMCH

  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  **MCS Index\                                                                              **Modulation Order\                                                                       **TBS Index\
  **![](media/image714.wmf){width="0.30069444444444443in" height="0.22083333333333333in"}   **![](media/image715.wmf){width="0.22083333333333333in" height="0.20833333333333334in"}   **![](media/image716.wmf){width="0.28194444444444444in" height="0.22083333333333333in"}
  ----------------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------- -----------------------------------------------------------------------------------------
  **0**                                                                                     2                                                                                         0

  **1**                                                                                     2                                                                                         2

  **2**                                                                                     2                                                                                         4

  **3**                                                                                     2                                                                                         6

  **4**                                                                                     2                                                                                         8

  **5**                                                                                     2                                                                                         10

  **6**                                                                                     4                                                                                         11

  **7**                                                                                     4                                                                                         12

  **8**                                                                                     4                                                                                         13

  **9**                                                                                     4                                                                                         14

  **10**                                                                                    4                                                                                         15

  **11**                                                                                    4                                                                                         16

  **12**                                                                                    4                                                                                         17

  **13**                                                                                    4                                                                                         18

  **14**                                                                                    4                                                                                         19

  **15**                                                                                    6                                                                                         20

  **16**                                                                                    6                                                                                         21

  **17**                                                                                    6                                                                                         22

  **18**                                                                                    6                                                                                         23

  **19**                                                                                    6                                                                                         24

  **20**                                                                                    6                                                                                         25

  **21**                                                                                    8                                                                                         27

  **22**                                                                                    8                                                                                         28

  **23**                                                                                    8                                                                                         29

  **24**                                                                                    8                                                                                         30

  **25**                                                                                    8                                                                                         31

  **26**                                                                                    8                                                                                         32

  **27**                                                                                    8                                                                                         33/33A/33B

  **28**                                                                                    2                                                                                         reserved

  **29**                                                                                    4                                                                                         

  **30**                                                                                    6                                                                                         

  **31**                                                                                    8                                                                                         
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

11.2 UE procedure for receiving MCCH and system information change notification
-------------------------------------------------------------------------------

If a UE is configured by higher layers to decode PDCCHs with the CRC
scrambled by the M-RNTI, the UE shall decode the PDCCH according to the
combination defined in Table 11.2-1.

Table 11.2-1: PDCCH configured by M-RNTI

  DCI format      Search Space
  --------------- --------------
  DCI format 1C   Common

The 8-bit information for MCCH change notification \[11\], as signalled
on the PDCCH, shall be delivered to higher layers.

The 2-bit information for System information change notification \[11\],
as signalled on the PDCCH, shall be delivered to higher layers.

12 Assumptions independent of physical channel 
==============================================

A UE shall not assume that two antenna ports are quasi co-located unless
specified otherwise.

A UE may assume the antenna ports 0 -- 3 of a serving cell are quasi
co-located (as defined in \[3\]) with respect to delay spread, Doppler
spread, Doppler shift, average gain, and average delay.

For the purpose of discovery-signal-based measurements, a UE shall not
assume any other signals or physical channels are present other than the
discovery signal.

If a UE supports *discoverySignalsInDeactSCell-r12*, and if the UE is
configured with discovery-signal-based RRM measurements on a carrier
frequency applicable for a secondary cell on the same carrier frequency,
and if the secondary cell is deactivated, and if the UE is not
configured by higher layers to receive MBMS on the secondary cell, the
UE shall, except for discovery-signal transmissions, assume that PSS,
SSS, PBCH, CRS, PCFICH, PDSCH, PDCCH, EPDCCH, PHICH, DMRS and CSI-RS may
be not transmitted by the secondary cell until the subframe where an
activation command is received for the secondary cell.

For BL/CE UE, if CEModeA or CEModeB is not configured, UE shall assume
the following configuration:

\- For a BL/CE UE with the PRACH coverage enhancement level 0/1, UE
shall assume CEModeA.

\- For a BL/CE UE with the PRACH coverage enhancement level 2/3, UE
shall assume CEModeB.

If a UE is configured by higher layers to operate in an MBMS-dedicated
serving cell, or if a UE is configured by higher layers to operate in an
FeMBMS/Unicast-mixed serving cell and is configured with a carrier
indicator field in the FeMBMS/Unicast-mixed serving cell,

\- the UE shall assume that physical signals or physical channels may
not be transmitted by the serving cell in a non-zero-size non-MBSFN
region of an MBSFN subframe not assumed to be used for PMCH, regardless
of whether there is any physical signal or physical channel being
transmitted in the MBSFN region of such an MBSFN subframe.

If a UE is not configured with a carrier indicator field on a serving
cell, the UE can assume that physical signals and physical channels are
present in a non-zero-size non-MBSFN region of an MBSFN subframe on the
serving cell.

13 Uplink/Downlink configuration determination procedure for Frame Structure Type 2 
===================================================================================

If the UE is configured with a SCG, the UE shall apply the procedures
described in this clause for both MCG and SCG

\- When the procedures are applied for MCG, the terms \'secondary
cell\', \'secondary cells\' , \'serving cell\', \'serving cells\' in
this clause refer to secondary cell, secondary cells, serving cell,
serving cells belonging to the MCG respectively.

\- When the procedures are applied for SCG, the terms \'secondary
cell\', \'secondary cells\', \'serving cell\', \'serving cells\' in this
clause refer to secondary cell, secondary cells (not including PSCell),
serving cell, serving cells belonging to the SCG respectively. The term
\'primary cell\' in this clause refers to the PSCell of the SCG.

For each serving cell

If the UE is not configured with the higher layer parameter
*EIMTA-MainConfigServCell-r12*,

\- the UE shall set the UL/DL configuration equal to the UL/DL
configuration (i.e., the parameter *subframeAssignment*) indicated by
higher layers.

If the UE is configured by higher layers with the parameter
*EIMTA-MainConfigServCell-r12*, then for each radio frame,

\- the UE shall determine eIMTA-UL/DL-configuration as described in
Clause 13.1.

\- the UE shall set the UL/DL configuration for each radio frame equal
to the eIMTA-UL/DL-configuration of that radio frame.

\- For a serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"}, a UE is not expected to be configured with parameter
*harq-ReferenceConfig-r14* if a subframe indicated as an uplink subframe
by *harq-ReferenceConfig-r14* is not indicated as an uplink subframe by
the UL-reference UL/DL configuration *if it is configured, otherwise,
indicated as uplink subframe by UL/DL configuration.*

13.1 UE procedure for determining eIMTA-uplink/downlink configuration
---------------------------------------------------------------------

If a UE is configured by higher layers to decode PDCCHs with the CRC
scrambled by the eIMTA-RNTI, the UE shall decode the PDCCH according to
the combination defined in Table 13.1-1.

Table 13.1-1: PDCCH configured by eIMTA-RNTI

  **DCI format**   **Search Space**
  ---------------- ------------------
  DCI format 1C    Common

The subframes in which the UE monitors PDCCH with CRC scrambled by
eIMTA-RNTI are configured by higher layers.

For each serving cell,

\- if *T*= 10,

\- if the UE detects PDCCH with CRC scrambled by eIMTA-RNTI in subframe
0 of a radio frame *m* or if the UE detects PDCCH with CRC scrambled by
eIMTA-RNTI in a subframe other than subframe 0 of a radio frame *m*-1,

\- the eIMTA-UL/DL-configuration for radio frame *m* is given by the
UL/DL configuration indication signalled on the PDCCH as described in
\[4\],

\- the UE may assume that the same UL/DL configuration indication is
indicated by PDCCH with CRC scrambled by eIMTA-RNTI in subframe 0 of
radio frame *m* and in all the subframes other than subframe 0 of radio
frame *m*-1 in which PDCCH with CRC scrambled by eIMTA-RNTI is
monitored,

\- otherwise

\- the eIMTA-UL/DL-configuration for radio frame *m* is same as the
UL/DL configuration (i.e., the parameter *subframeAssignment*) indicated
by higher layers;

\- if *T* is a value other than 10,

\- if the UE detects PDCCH with CRC scrambled by eIMTA-RNTI in a
subframe in radio frame *mT*/10,

\- the eIMTA-UL/DL-configuration for radio frames {*mT*/10+1 ,
*mT*/10+2,.... (*m* + 1)*T*/10} is given by the UL/DL configuration
indication signalled on the PDCCH as described \[4\],

\- the UE may assume that the same UL/DL configuration indication is
indicated by PDCCH with CRC scrambled by eIMTA-RNTI in all the subframes
of radio frame *mT*/10 in which PDCCH with CRC scrambled by eIMTA-RNTI
is monitored,

\- otherwise

\- the eIMTA-UL/DL-configuration for radio frames {*mT*/10+1 ,
*mT*/10+2,.... (*m* +1) *T*/10} is same as the UL/DL configuration
(i.e., the parameter *subframeAssignment*) indicated by higher layers.

where *T* denotes the value of parameter *eimta-CommandPeriodicity-r12*.

For a serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"}, if subframe *i* is indicated as uplink subframe or a
special subframe by higher layer parameter
*eimta-HARQ-ReferenceConfig-r12*, the UE is not expected to receive a
PDCCH with CRC scrambled by eIMTA-RNTI containing an UL/DL configuration
for serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"} that would indicate subframe *i* as a downlink
subframe.

For a serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"}, if subframe *i* is indicated as downlink subframe or
a special subframe by higher layer parameter *subframeAssignment*, the
UE is not expected to receive a PDCCH with CRC scrambled by eIMTA-RNTI
containing an UL/DL configuration for serving cell
![](media/image692.wmf){width="0.125in" height="0.125in"} that would
indicate subframe *i* as an uplink subframe.

For a serving cell ![](media/image692.wmf){width="0.125in"
height="0.125in"}, a UE is not expected to be configured with parameter
*eimta-HARQ-ReferenceConfig-r12* if a subframe indicated as an uplink
subframe by *eimta-HARQ-ReferenceConfig-r12* is not indicated as an
uplink subframe by the UL-reference UL/DL configuration.Â 

If UE is not configured with the parameter
*EIMTA-MainConfigServCell-r12* for any activated serving cell, the UE is
not expected to monitor PDCCH with CRC scrambled by eIMTA-RNTI.

If the UE is configured with the parameter
*EIMTA-MainConfigServCell-r12* for at least one serving cell, the UE is
not expected to monitor PDCCH with CRC scrambled by eIMTA-RNTI outside
of the Active Time defined in \[8\] in order to determine the configured
CSI-RS or CSI-IM REs in subframe 6 for CSI reporting purposes. If the UE
doesn\'t detect an UL/DL configuration indication for radio frame *m,*
the UE determines the configured CSI-RS and CSI-IM REs in subframe 6
according to the UL/DL configuration indicated by higher layer parameter
*subframeAssignment* for the serving cell.

13A Subframe configuration for Frame Structure Type 3
=====================================================

If a UE detects PDCCH with DCI CRC scrambled by CC-RNTI in subframe n-1
or subframe n of a LAA Scell, the UE may assume the configuration of
occupied OFDM symbols in subframe n of the LAA Scell according to the
\'Subframe configuration for LAA\' field in the detected DCI in subframe
n-1 or subframe n.

The \'Subframe configuration for LAA\' field indicates the configuration
of occupied OFDM symbols (i.e., OFDM symbols used for transmission of
downlink physical channels and/or physical signals) in current and/or
next subframe according to Table 13A-1.

If the configuration of occupied OFDM symbols for subframe n is
indicated by the Subframe configuration for LAA field in both subframe
n-1 and subframe n, the UE may assume that the same configuration of
occupied OFDM symbols is indicated in both subframe n-1 and subframe n.

If a UE detects PDCCH with DCI CRC scrambled by CC-RNTI in subframe n,
and the UE does not detect PDCCH with DCI CRC scrambled by CC-RNTI in
subframe n-1, and if the number of occupied OFDM symbols for subframe n
indicated by the Subframe configuration for LAA field in subframe n is
less than 14, the UE is not required to receive any other physical
channels in subframe n except for PDCCH with DCI format 0A/0B/4A/4B if
configured.

If a UE does not detect PDCCH with DCI CRC scrambled by CC-RNTI
containing \'Subframe Configuration for LAA\' field set to other than
\'1110\' and \'1111\' in subframe n and the UE does not detect PDCCH
with DCI CRC scrambled by CC-RNTI containing \'Subframe Configuration
for LAA\' field set to other than \'1110\' and \'1111\' in subframe n-1,
the UE is not required to use subframe n for updating CSI measurement.

The UE may detect PDCCH with DCI CRC scrambled by CC-RNTI by monitoring
the following PDCCH candidates according to DCI Format 1C.

\- one PDCCH candidate at aggregation level L=4 with the CCEs
corresponding to the PDCCH candidate given by CCEs numbered 0,1,2,3

\- one PDCCH candidate at aggregation level L=8 with the CCEs
corresponding to the PDCCH candidate given by CCEs numbered
0,1,2,3,4,5,6,7

If a serving cell is a LAA Scell, and if the higher layer parameter
*subframeStartPosition* for the Scell indicates \'s07\', and if the UE
detects PDCCH/EPDCCH intended for the UE starting in the second slot of
a subframe, the UE may assume that OFDM symbols in the first slot of the
subframe are not occupied, and all OFDM symbols in the second slot of
the subframe are occupied,

If subframe n is a subframe in which OFDM symbols in the first slot are
not occupied, the UE may assume that all the OFDM symbols are occupied
in subframe n+1.

Table 13A-1: Subframe configuration for LAA in current and next subframe

+----------------------------------+----------------------------------+
| Value of\                        | Configuration of occupied OFDM   |
| \'Subframe configuration for     | symbols                          |
| LAA\' field in current subframe  |                                  |
|                                  | (current subframe, next          |
|                                  | subframe)                        |
+==================================+==================================+
| 0000                             | (-,14)                           |
+----------------------------------+----------------------------------+
| 0001                             | (-,12)                           |
+----------------------------------+----------------------------------+
| 0010                             | (-,11)                           |
+----------------------------------+----------------------------------+
| 0011                             | (-,10)                           |
+----------------------------------+----------------------------------+
| 0100                             | (-,9)                            |
+----------------------------------+----------------------------------+
| 0101                             | (-,6)                            |
+----------------------------------+----------------------------------+
| 0110                             | (-,3)                            |
+----------------------------------+----------------------------------+
| 0111                             | (14,\*)                          |
+----------------------------------+----------------------------------+
| 1000                             | (12,-)                           |
+----------------------------------+----------------------------------+
| 1001                             | (11,-)                           |
+----------------------------------+----------------------------------+
| 1010                             | (10,-)                           |
+----------------------------------+----------------------------------+
| 1011                             | (9,-)                            |
+----------------------------------+----------------------------------+
| 1100                             | (6,-)                            |
+----------------------------------+----------------------------------+
| 1101                             | (3,-)                            |
+----------------------------------+----------------------------------+
| 1110                             | reserved                         |
+----------------------------------+----------------------------------+
| 1111                             | reserved                         |
+----------------------------------+----------------------------------+
| NOTE:                            |                                  |
|                                  |                                  |
| \- (-, Y) means UE may assume    |                                  |
| the first Y symbols are occupied |                                  |
| in next subframe and other       |                                  |
| symbols in the next subframe are |                                  |
| not occupied.                    |                                  |
|                                  |                                  |
| \- (X, -) means UE may assume    |                                  |
| the first X symbols are occupied |                                  |
| in current subframe and other    |                                  |
| symbols in the current subframe  |                                  |
| are not occupied.                |                                  |
|                                  |                                  |
| \- (X, \*) means UE may assume   |                                  |
| the first X symbols are occupied |                                  |
| in current subframe, and at      |                                  |
| least the first OFDM symbol of   |                                  |
| the next subframe is not         |                                  |
| occupied.                        |                                  |
+----------------------------------+----------------------------------+

If a UE is configured with a LAA SCell for UL transmissions, and the UE
detects PDCCH with DCI CRC scrambled by CC-RNTI in subframe *n*, the UE
may be configured with a \'UL duration\' and \'UL offset\' for subframe
*n* according to the \'UL duration and offset\' field in the detected
DCI. The \'UL duration and offset\' field indicates the \'UL duration\'
and \'UL offset\' according to Table 13A-2.

If the \'UL duration and offset\' field configures an \'UL offset\' and
an \'UL duration\' for subframe *n*, the UE is not required to receive
any downlink physical channels and/or physical signals in subframe(s)
*n+l+ i* with *i =* 0, 1, ..., *d*-1.

Table 13A-2: UL duration and offset.

+-------------------------+----------------+-------------------------+
| Value of\               | UL offset,     | UL duration, (in        |
| \'UL duration and       |                | subframes)              |
| offset\' field          | (in subframes) |                         |
+=========================+================+=========================+
| 00000                   | Not configured | Not configured          |
+-------------------------+----------------+-------------------------+
| 00001                   | 1              | 1                       |
+-------------------------+----------------+-------------------------+
| 00010                   | 1              | 2                       |
+-------------------------+----------------+-------------------------+
| 00011                   | 1              | 3                       |
+-------------------------+----------------+-------------------------+
| 00100                   | 1              | 4                       |
+-------------------------+----------------+-------------------------+
| 00101                   | 1              | 5                       |
+-------------------------+----------------+-------------------------+
| 00110                   | 1              | 6                       |
+-------------------------+----------------+-------------------------+
| 00111                   | 2              | 1                       |
+-------------------------+----------------+-------------------------+
| 01000                   | 2              | 2                       |
+-------------------------+----------------+-------------------------+
| 01001                   | 2              | 3                       |
+-------------------------+----------------+-------------------------+
| 01010                   | 2              | 4                       |
+-------------------------+----------------+-------------------------+
| 01011                   | 2              | 5                       |
+-------------------------+----------------+-------------------------+
| 01100                   | 2              | 6                       |
+-------------------------+----------------+-------------------------+
| 01101                   | 3              | 1                       |
+-------------------------+----------------+-------------------------+
| 01110                   | 3              | 2                       |
+-------------------------+----------------+-------------------------+
| 01111                   | 3              | 3                       |
+-------------------------+----------------+-------------------------+
| 10000                   | 3              | 4                       |
+-------------------------+----------------+-------------------------+
| 10001                   | 3              | 5                       |
+-------------------------+----------------+-------------------------+
| 10010                   | 3              | 6                       |
+-------------------------+----------------+-------------------------+
| 10011                   | 4              | 1                       |
+-------------------------+----------------+-------------------------+
| 10100                   | 4              | 2                       |
+-------------------------+----------------+-------------------------+
| 10101                   | 4              | 3                       |
+-------------------------+----------------+-------------------------+
| 10110                   | 4              | 4                       |
+-------------------------+----------------+-------------------------+
| 10111                   | 4              | 5                       |
+-------------------------+----------------+-------------------------+
| 11000                   | 4              | 6                       |
+-------------------------+----------------+-------------------------+
| 11001                   | 6              | 1                       |
+-------------------------+----------------+-------------------------+
| 11010                   | 6              | 2                       |
+-------------------------+----------------+-------------------------+
| 11011                   | 6              | 3                       |
+-------------------------+----------------+-------------------------+
| 11100                   | 6              | 4                       |
+-------------------------+----------------+-------------------------+
| 11101                   | 6              | 5                       |
+-------------------------+----------------+-------------------------+
| 11110                   | 6              | 6                       |
+-------------------------+----------------+-------------------------+
| 11111                   | reserved       | reserved                |
+-------------------------+----------------+-------------------------+
