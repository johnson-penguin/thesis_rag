![](media/image1.jpeg){width="7.0875in" height="1.0979166666666667in"}

Contents {#contents .TT}
========

[7](#foreword)

[8](#scope)

[8](#references)

[8](#definitions-symbols-and-abbreviations)

[8](#definitions)

[8](#symbols)

[9](#abbreviations)

[9](#specification-notations)

[10](#general-aspects)

[10](#common-transport-channel-data-streams-user-plane-protocol-services)

[10](#rach-data-streams-user-plane-protocol-services)

[11](#fach-data-streams-user-plane-protocol-services)

[11](#uschdsch-data-streams-user-plane-protocol-services-tdd)

[11](#hs-dsch-data-streams-user-plane-protocol-services)

[11](#e-dch-for-cell_fach-and-idle-data-streams-user-plane-protocol-services-fdd-and-1.28mcps-tdd)

[11](#services-expected-from-the-data-transport-network-layer)

[11](#protocol-version)

[11](#common-transport-channel-data-streams-user-plane-procedures)

[12](#data-transfer)

[12](#rach-data-transfer)

[12](#fach-data-transfer)

[13](#usch-data-transfer-tdd)

[13](#dsch-data-transfer-tdd)

[14](#hs-dsch-data-transfer)

[15](#e-dch-for-cell_fach-and-idle-data-transfer-fdd-and-1.28mcps-tdd)

[15](#indication-of-ue-state-transition-1.28mcps-tdd)

[15](#hs-dsch-ul-synchronization-establishment-failure-1.28mcps-tdd)

[16](#flow-control)

[16](#fach-flow-control)

[16](#dsch-capacity-request-tdd)

[17](#dsch-capacity-allocation-tdd)

[17](#fach-capacity-request)

[18](#hs-dsch-capacity-request)

[18](#hs-dsch-capacity-allocation)

[19](#a-node-synchronisation)

[19](#general)

[19](#dsch-usch-transport-bearer-replacement-tdd)

[20](#hs-dsch-transport-bearer-replacement)

[20](#hs-dsch-pdu-drop-indication)

[21](#frame-structure-and-coding)

[21](#general-1)

[22](#data-frame-structure)

[22](#rach-channels)

[23](#fach-channels)

[24](#usch-channels-tdd)

[24](#dsch-channels-tdd)

[24](#a-hs-dsch-channels)

[27](#b-e-dch-for-cell_fach-and-idle-channels-fdd-and-1.28mcps-tdd)

[29](#coding-of-information-elements-in-data-frames)

[29](#header-crc)

[29](#frame-type-ft)

[29](#drnti)

[29](#s-rnti)

[29](#ue-id-type-indicator-ue-id-type)

[29](#s-ccpch-indicator-s-ci)

[30](#common-transport-channel-priority-indicator-cmch-pi)

[30](#mac-csh-sdu-length)

[30](#numofsdu)

[30](#propagation-delay-fdd)

[30](#a-ext-propagation-delay-fdd)

[30](#rx-timing-deviation-3.84mcps-tdd)

[31](#a-received-sync-ul-timing-deviation-1.28mcps-tdd)

[31](#b-rx-timing-deviation-7.68mcps-tdd)

[31](#user-buffer-size)

[31](#mac-csh-sdu)

[31](#payload-crc)

[31](#spare-extension)

[32](#mac-d-pdu-length)

[32](#numofpdu)

[32](#mac-d-pdu)

[32](#cell-portion-id-fdd)

[32](#new-ie-flags)

[32](#flush)

[32](#drt-delay-reference-time)

[33](#frame-sequence-number)

[33](#logical-channel-id-in-block-n)

[33](#total-number-of-pdu-blocks)

[33](#mac-d-pdu-length-in-block-n)

[33](#number-of-mac-d-pdus-in-block-n-pdus-in-block-n)

[33](#drt-indicator)

[34](#fach-indicator-fi-fdd-and-1.28mcps-tdd)

[34](#s-rnti-fdd-and-1.28mcps-tdd)

[34](#ue-id-type-indicator-ue-id-type-1)

[34](#fsndrt-reset)

[34](#mac-d-type-2-pdu)

[34](#pch-indicator-pi-fdd)

[34](#drx-cycle-length-coefficient-fdd)

[35](#number-of-subframes-fdd-and-1.28mcps-tdd)

[35](#number-of-mac-is-sdu-in-frame-fdd-and-1.28mcps-tdd)

[35](#number-of-mac-is-pdus-fdd-and-1.28mcps-tdd)

[35](#subframe-number-fdd-and-1.28mcps-tdd)

[35](#e-dch-user-buffer-size-fdd-and-1.28mcps-tdd)

[36](#mac-is-pdu-descriptor-fdd-and-1.28mcps-tdd)

[36](#edrx-indication-fdd)

[36](#cell-portion-lcr-id-1.28mcps-tdd)

[36](#ts0-indication-1.28mcps-tdd)

[36](#mu-mimo-indicationmi-1.28mcps-tdd)

[36](#cpc-recovery-cpc-recov-fdd)

[36](#fedrx-indication-fdd)

[36](#nodeb-triggered-hs-dpcch-transmissionntht-fdd)

[37](#tti-length-fdd)

[37](#sn-frame-number)

[37](#sd-storediscard-indicator)

[37](#connection-frame-number-cfn)

[37](#cr-ind-cell-reselection-indication)

[37](#crr-rec-cell-reselection-request-received)

[37](#extended-s-rnti)

[38](#operation-preference-of-common-e-dch-resource-indication-opce-ind-fdd)

[38](#control-frame-structure)

[38](#introduction)

[38](#header-structure-of-the-control-frames)

[38](#control-frame-crc)

[38](#frame-type-ft-1)

[38](#control-frame-type)

[39](#payload-structure-and-information-elements)

[39](#fach-flow-control-1)

[39](#s-rnti-1)

[39](#common-transport-channel-priority-indicator-cmch-pi-1)

[39](#credits)

[40](#spare-extension-1)

[40](#extended-s-rnti-1)

[40](#dsch-capacity-request-tdd-1)

[40](#common-transport-channel-priority-indicator-cmch-pi-2)

[40](#user-buffer-size-1)

[40](#spare-extension-2)

[40](#dsch-capacity-allocation-tdd-1)

[41](#common-transport-channel-priority-indicator-cmch-pi-3)

[41](#maximum-mac-csh-sdu-length)

[41](#credits-1)

[41](#interval)

[41](#repetition-period)

[41](#spare-extension-3)

[41](#fach-capacity-request-1)

[42](#d-rnti)

[42](#common-transport-channel-priority-indicator-cmch-pi-4)

[42](#user-buffer-size-2)

[42](#spare-extension-4)

[42](#hs-dsch-capacity-request-1)

[42](#common-transport-channel-priority-indicator-cmch-pi-5)

[42](#user-buffer-size-3)

[42](#spare-extension-5)

[43](#drnti-fdd)

[43](#hs-dsch-capacity-allocation-1)

[44](#common-transport-channel-priority-indicator-cmch-pi-6)

[44](#maximum-mac-d-pdu-length)

[44](#hs-dsch-credits)

[44](#hs-dsch-interval)

[44](#hs-dsch-repetition-period)

[45](#spare-extension-6)

[45](#congestion-status)

[45](#srnti-indicator-fdd-and-1.28mcps-tdd)

[45](#s-rnti-fdd-and-1.28mcps-tdd-1)

[45](#maximum-mac-d-pdu-length-type-2)

[45](#extended-s-rnti-fdd)

[45](#dl-node-synchronisation)

[45](#payload-structure)

[46](#t1)

[46](#spare-extension-7)

[46](#ul-node-synchronisation)

[46](#payload-structure-1)

[46](#t1-1)

[46](#t2)

[47](#t3)

[47](#spare-extension-8)

[47](#hs-dsch-ul-synchronization-establishment-failure-1.28mcps-tdd-1)

[47](#payload-structure-2)

[47](#s-rnti-2)

[47](#hs-dsch-pdu-drop-indication-1)

[47](#payload-structure-3)

[47](#drop-reason)

[48](#pdu-index)

[48](#handling-of-unknown-unforeseen-and-erroneous-protocol-data)

[48](#general-2)

[49](#annex-a-informative-change-history)Foreword 1 Scope 2 References 3
Definitions, symbols and abbreviations 3.1 Definitions 3.2 Symbols 3.3
Abbreviations 3.4 Specification Notations 4 General Aspects 4.1 Common
Transport Channel Data Streams User Plane Protocol Services 4.1.1 RACH
Data Streams User Plane Protocol Services 4.1.2 FACH Data Streams User
Plane Protocol Services 4.1.3 USCH/DSCH Data Streams User Plane Protocol
Services \[TDD\] 4.1.4 HS-DSCH Data Streams User Plane Protocol Services
4.1.5 E-DCH for CELL\_FACH and Idle Data Streams User Plane Protocol
Services \[FDD and 1.28Mcps TDD\] 4.2 Services expected from the Data
Transport Network layer 4.3 Protocol Version 5 Common Transport Channel
Data Streams User Plane Procedures 5.1 Data Transfer 5.1.1 RACH Data
Transfer 5.1.2 FACH Data Transfer 5.1.3 USCH Data Transfer \[TDD\] 5.1.4
DSCH Data Transfer \[TDD\] 5.1.5 HS-DSCH Data Transfer 5.1.6 E-DCH for
CELL\_FACH and Idle Data Transfer \[FDD and 1.28Mcps TDD\] 5.1.7
Indication of UE State Transition \[1.28Mcps TDD\] 5.1.8 HS-DSCH UL
Synchronization Establishment Failure \[1.28Mcps TDD\] 5.2 Flow Control
5.2.1 FACH Flow Control 5.2.2 DSCH Capacity Request \[TDD\] 5.2.3 DSCH
Capacity Allocation \[TDD\] 5.2.4 FACH Capacity Request 5.2.5 HS-DSCH
Capacity Request 5.2.6 HS-DSCH Capacity Allocation 5.2A Node
Synchronisation 5.3 General 5.3.1 DSCH / USCH transport bearer
replacement \[TDD\] 5.3.2 HS-DSCH Transport Bearer Replacement 5.4
HS-DSCH PDU DROP INDICATION 6 Frame Structure and Coding 6.1 General 6.2
Data Frame structure 6.2.1 RACH Channels 6.2.2 FACH Channels 6.2.3 USCH
Channels \[TDD\] 6.2.4 DSCH Channels \[TDD\] 6.2.4A HS-DSCH Channels
6.2.4B E-DCH for CELL\_FACH and Idle Channels \[FDD and 1.28Mcps TDD\]
6.2.5 Coding of Information Elements in DATA FRAMEs 6.2.5.1 Header CRC
6.2.5.2 Frame Type (FT) 6.2.5.3 DRNTI 6.2.5.4 S-RNTI 6.2.5.5 UE-ID Type
Indicator (UE-ID Type) 6.2.5.6 S-CCPCH Indicator (S-CI) 6.2.5.7 Common
Transport Channel Priority Indicator (CmCH-PI) 6.2.5.8 MAC-c/sh SDU
Length 6.2.5.9 NumOfSDU 6.2.5.10 Propagation delay \[FDD\] 6.2.5.10A Ext
Propagation Delay \[FDD\] 6.2.5.11 Rx Timing Deviation \[3.84Mcps TDD\]
6.2.5.11A Received SYNC UL Timing Deviation \[1.28Mcps TDD\] 6.2.5.11B
Rx Timing Deviation \[7.68Mcps TDD\] 6.2.5.12 User Buffer Size 6.2.5.13
MAC-c/sh SDU 6.2.5.14 Payload CRC 6.2.5.15 Spare Extension 6.2.5.16
MAC-d PDU Length 6.2.5.17 NumOfPDU 6.2.5.18 MAC-d PDU 6.2.5.19 Cell
Portion ID \[FDD\] 6.2.5.20 New IE Flags 6.2.5.21 Flush 6.2.5.22 DRT
(Delay Reference Time) 6.2.5.23 Frame Sequence Number 6.2.5.24 Logical
Channel ID in block n 6.2.5.25 Total Number of PDU blocks 6.2.5.26 MAC-d
PDU length in block n 6.2.5.27 Number of MAC-d PDUs in block n (\#PDUs
in block n) 6.2.5.28 DRT Indicator 6.2.5.29 FACH Indicator (FI) \[FDD
and 1.28Mcps TDD\] 6.2.5.30 S-RNTI \[FDD and 1.28Mcps TDD\] 6.2.5.31
UE-ID Type Indicator (UE-ID Type) 6.2.5.32 FSN/DRT Reset 6.2.5.33 MAC-d
Type 2 PDU 6.2.5.34 PCH Indicator (PI) \[FDD\] 6.2.5.35 DRX Cycle Length
Coefficient \[FDD\] 6.2.5.36 Number of Subframes \[FDD and 1.28Mcps
TDD\] 6.2.5.37 Number of MAC-is SDU in frame \[FDD and 1.28Mcps TDD\]
6.2.5.38 Number of MAC-is PDUs \[FDD and 1.28Mcps TDD\] 6.2.5.39
Subframe Number \[FDD and 1.28Mcps TDD\] 6.2.5.40 E-DCH User Buffer Size
\[FDD and 1.28Mcps TDD\] 6.2.5.41 MAC-is PDU descriptor \[FDD and
1.28Mcps TDD\] 6.2.5.42 eDRX Indication \[FDD\] 6.2.5.43 Cell Portion
LCR ID \[1.28Mcps TDD\] 6.2.5.44 TS0 Indication \[1.28Mcps TDD\]
6.2.5.45 MU-MIMO Indication(MI) \[1.28Mcps TDD\] 6.2.5.46 CPC Recovery
(CPC Recov) \[FDD\] 6.2.5.47 FeDRX Indication \[FDD\] 6.2.5.48 NodeB
Triggered HS-DPCCH Transmission(NTHT) \[FDD\] 6.2.5.49 TTI length
\[FDD\] 6.2.5.50 SN, Frame Number 6.2.5.51 S/D, Store/Discard indicator
6.2.5.52 Connection Frame Number (CFN) 6.2.5.53 CR Ind (Cell Reselection
Indication) 6.2.5.54 CRR Rec (Cell Reselection Request Received)
6.2.5.55 Extended S-RNTI 6.2.5.56 Operation Preference of Common E-DCH
resource Indication (OPCE Ind) \[FDD\] 6.3 Control Frame structure 6.3.1
Introduction 6.3.2 Header structure of the control frames 6.3.2.1
Control frame CRC 6.3.2.2 Frame type (FT) 6.3.2.3 Control Frame Type
6.3.3 Payload structure and information elements 6.3.3.1 FACH FLOW
CONTROL 6.3.3.1.1 S-RNTI 6.3.3.1.2 Common Transport Channel Priority
Indicator (CmCH-PI) 6.3.3.1.3 Credits 6.3.3.1.4 Spare Extension
6.3.3.1.5 Extended S-RNTI 6.3.3.2 DSCH CAPACITY REQUEST \[TDD\]
6.3.3.2.1 Common Transport Channel Priority Indicator (CmCH-PI)
6.3.3.2.2 User Buffer Size 6.3.3.2.3 Spare Extension 6.3.3.3 DSCH
CAPACITY ALLOCATION \[TDD\] 6.3.3.3.1 Common Transport Channel Priority
Indicator (CmCH-PI) 6.3.3.3.2 Maximum MAC-c/sh SDU Length 6.3.3.3.3
Credits 6.3.3.3.4 Interval 6.3.3.3.5 Repetition Period 6.3.3.3.6 Spare
Extension 6.3.3.4 FACH CAPACITY REQUEST 6.3.3.4.1 D-RNTI 6.3.3.4.2
Common Transport Channel Priority Indicator (CmCH-PI) 6.3.3.4.3 User
Buffer Size 6.3.3.4.4 Spare extension 6.3.3.5 HS-DSCH CAPACITY REQUEST
6.3.3.5.1 Common Transport Channel Priority Indicator (CmCH-PI)
6.3.3.5.2 User Buffer Size 6.3.3.5.3 Spare Extension 6.3.3.5.4 DRNTI
\[FDD\] 6.3.3.6 HS-DSCH CAPACITY ALLOCATION 6.3.3.6.1 Common Transport
Channel Priority Indicator (CmCH-PI) 6.3.3.6.2 Maximum MAC-d PDU Length
6.3.3.6.3 HS-DSCH Credits 6.3.3.6.4 HS-DSCH Interval 6.3.3.6.5 HS-DSCH
Repetition Period 6.3.3.6.8 Spare Extension 6.3.3.6.9 Congestion Status
6.3.3.6.10 SRNTI Indicator \[FDD and 1.28Mcps TDD\] 6.3.3.6.11 S-RNTI
\[FDD and 1.28Mcps TDD\] 6.3.3.6.12 Maximum MAC-d PDU Length Type 2
6.3.3.6.13 Extended S-RNTI \[FDD\] 6.3.3.7 DL NODE SYNCHRONISATION
6.3.3.7.1 Payload structure 6.3.3.7.2 T1 6.3.3.7.3 Spare Extension
6.3.3.8 UL NODE SYNCHRONISATION 6.3.3.8.1 Payload structure 6.3.3.8.2 T1
6.3.3.8.3 T2 6.3.3.8.4 T3 6.3.3.8.5 Spare Extension 6.3.3.9 HS-DSCH UL
SYNCHRONIZATION ESTABLISHMENT FAILURE \[1.28Mcps TDD\] 6.3.3.9.1 Payload
structure 6.3.3.9.2 S-RNTI 6.3.3.10 HS-DSCH PDU DROP INDICATION
6.3.3.10.1 Payload structure 6.3.3.10.2 Drop Reason 6.3.3.10.3 PDU Index
7 Handling of Unknown, Unforeseen and Erroneous Protocol Data 7.1
General Annex A (informative): Change History

Foreword
========

This Technical Specification (TS) has been produced by the 3^rd^
Generation Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

1 Scope
=======

The present document shall provide a description of the UTRAN RNS-RNS
(Iur) interface user plane protocols for Common Transport Channel data
streams as agreed within the TSG-RAN working group 3.

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] Void

\[2\] Void

\[3\] Void

\[4\] Void

\[5\] 3GPP TS 25.401: \"UTRAN overall description\".

\[6\] Void

\[7\] 3GPP TS 25.321: \"Medium Access Control (MAC) protocol
specification\".

\[8\] 3GPP TS 25.423: \"UTRAN Iur Interface RNSAP Signalling\".

\[9\] 3GPP TS 25.321: \"Medium Access Control (MAC) protocol
specification\".

\[10\] 3GPP TS 25.224: \"Physical layer procedures (TDD)\".

3 Definitions, symbols and abbreviations
========================================

3.1 Definitions
---------------

For the purposes of the present document, the terms and definitions in
TS 25.401 \[5\] and the following apply:

**Common Transport Channel:** it is defined as a transport channel that
is shared by several users i.e. DSCH \[TDD\], USCH \[TDD\], RACH, FACH
\[FDD and 1.28Mcps TDD -, E-DCH for CELL\_FACH and Idle\] and HS-DSCH.

**Transport Connection:** service provided by the transport layer and
used by Frame Protocol for the delivery of FP PDU

3.2 Symbols
-----------

No special symbols are defined in the present document.

3.3 Abbreviations
-----------------

For the purposes of the present document, the following abbreviations
apply:

CFN Connection Frame Number

CmCH Common Transport Channel

C-RNC Controlling Radio Network Controller

CRC Cyclic Redundancy Checksum

DCH Dedicated Transport Channel

DL Downlink

D-RNTI Drift RNTI

DRT Delay Reference Time

DSCH Downlink Shared Channel

E-DCH Enhanced Dedicated Transport Channel

Extended S-RNTI Extended Serving RNTI

FACH Forward Access Channel

FP Frame Protocol

FT Frame Type

FSN Frame Sequence Number

HSDPA High Speed Downlink Packet Access

HS-DSCH High Speed Downlink Shared Channel

RACH Random Access Channel

RNC Radio Network Controller

RNTI Radio Network Temporary Identity

SRNC Serving Radio Network Controller

S-RNTI Serving RNTI

SSCS Service Specific Convergence Sublayer

TB Transport Block

TBS Transport Block Set

TFI Transport Format Indicator

TNL Transport Network Layer

ToA Time of Arrival

TTI Transmission Time Interval

UE User Equipment

UL Uplink

U-RNTI UTRAN RNTI

USCH Uplink Shared Channel

3.4 Specification Notations
---------------------------

For the purposes of the present document, the following notations apply:

> \[FDD\] This tagging of a word indicates that the word preceding the
> tag \"\[FDD\]\" applies only to FDD. This tagging of a heading
> indicates that the heading preceding the tag \"\[FDD\]\" and the
> section following the heading applies only to FDD.
>
> \[TDD\] This tagging of a word indicates that the word preceding the
> tag \"\[TDD\]\" applies only to TDD, including 7.68Mcps TDD, 3.84Mcps
> TDD and 1.28Mcps TDD. This tagging of a heading indicates that the
> heading preceding the tag \"\[TDD\]\" and the section following the
> heading applies only to TDD, including 7.68Mcps TDD, 3.84Mcps TDD and
> 1.28Mcps TDD.
>
> \[7.68Mcps TDD\] This tagging of a word indicates that the word
> preceding the tag "\[7.68Mcps TDD\]" applies only to 7.68Mcps TDD.
> This tagging of a heading indicates that the heading preceding the tag
> "\[7.68Mcps TDD\]" and the section following the heading applies only
> to 7.68Mcps TDD.
>
> \[3.84Mcps TDD\] This tagging of a word indicates that the word
> preceding the tag "\[3.84Mcps TDD\]" applies only to 3.84Mcps TDD.
> This tagging of a heading indicates that the heading preceding the tag
> "\[3.84Mcps TDD\]" and the section following the heading applies only
> to 3.84Mcps TDD.
>
> \[1.28Mcps TDD\] This tagging of a word indicates that the word
> preceding the tag \"\[1.28Mcps TDD\]\" applies only to 1.28Mcps TDD.
> This tagging of a heading indicates that the heading preceding the tag
> \"\[1.28Mcps TDD\]\" and the section following the heading applies
> only to 1.28Mcps TDD.
>
> \[FDD - ...\] This tagging indicates that the enclosed text following
> the \"\[FDD - \" applies only to FDD. Multiple sequential paragraphs
> applying only to FDD are enclosed separately to enable insertion of
> TDD specific (or common) paragraphs between the FDD specific
> paragraphs.
>
> \[TDD - ...\] This tagging indicates that the enclosed text following
> the \"\[TDD - \" applies only to TDD including 7.68Mcps TDD, 3.84Mcps
> TDD and 1.28Mcps TDD. Multiple sequential paragraphs applying only to
> TDD are enclosed separately to enable insertion of FDD specific (or
> common) paragraphs between the TDD specific paragraphs.
>
> \[7.68Mcps TDD - ...\] This tagging indicates that the enclosed text
> following the \"\[7.68Mcps TDD - \" applies only to 7.68Mcps TDD.
> Multiple sequential paragraphs applying only to 7.68Mcps TDD are
> enclosed separately to enable insertion of FDD and TDD specific (or
> common) paragraphs between the 7.68Mcps TDD specific paragraphs.
>
> \[3.84Mcps TDD - ...\] This tagging indicates that the enclosed text
> following the \"\[3.84Mcps TDD - \" applies only to 3.84Mcps TDD.
> Multiple sequential paragraphs applying only to 3.84Mcps TDD are
> enclosed separately to enable insertion of FDD and TDD specific (or
> common) paragraphs between the 3.84Mcps TDD specific paragraphs.
>
> \[1.28Mcps TDD - ...\] This tagging indicates that the enclosed text
> following the \"\[1.28Mcps TDD -- \" applies only to 1.28Mcps TDD.
> Multiple sequential paragraphs applying only to 1.28Mcps TDD are
> enclosed separately to enable insertion of FDD and TDD specific (or
> common) paragraphs between the 1.28Mcps TDD specific paragraphs.
>
> Procedure When referring to a procedure in the specification, the
> Procedure Name is written with the first letters in each word in upper
> case characters followed by the word \"procedure\", e.g. FACH Data
> Transfer procedure.
>
> Frame When referring to a control or data frame in the specification,
> the CONTROL/DATA FRAME NAME is written with all letters in upper case
> characters followed by the words \"control/data frame\", e.g. FACH
> FLOW CONTROL control frame.
>
> IE When referring to an information element (IE) in the specification,
> the *Information Element Name* is written with the first letters in
> each word in upper case characters and all letters in Italic font
> followed by the abbreviation \"IE\", e.g. *Credits* IE.
>
> Value of an IE When referring to the value of an information element
> (IE) in the specification, the \"Value\" is written as it is specified
> in subclause 6.2.5 or 6.3.3 enclosed by quotation marks, e.g. \"0\" or
> \"255\".

4 General Aspects
=================

4.1 Common Transport Channel Data Streams User Plane Protocol Services
----------------------------------------------------------------------

This subclause describes the services that the User Plane Protocols
provide such as data transfer, flow control.

### 4.1.1 RACH Data Streams User Plane Protocol Services

RACH frame protocol provides the following services:

\- Transport of MAC-c/sh SDUs from the DRNC to the SRNC for RACH common
transport channels.

### 4.1.2 FACH Data Streams User Plane Protocol Services

FACH frame protocol provides the following services:

\- Transport of MAC-c/sh SDUs from the SRNC to the DRNC for FACH common
transport channel.

\- Flow Control between MAC-d and MAC-c/sh.

### 4.1.3 USCH/DSCH Data Streams User Plane Protocol Services \[TDD\]

\[TDD USCH\]/DSCH frame protocol provides the following services:

\- Transport of MAC-c/sh SDUs between the SRNC and the DRNC for \[TDD
USCH\] and DSCH common transport channels.

\- Flow Control between MAC-d and MAC-c/sh.

### 4.1.4 HS-DSCH Data Streams User Plane Protocol Services

HS-DSCH frame protocol provides the following services:

\- Transport of MAC-d flows between the SRNC and the DRNC for HS-DSCH
common transport channels.

\- Flow Control between MAC-d and CRNC HS-DSCH Flow Control.

### 4.1.5 E-DCH for CELL\_FACH and Idle Data Streams User Plane Protocol Services \[FDD and 1.28Mcps TDD\]

E-DCH for CELL\_FACH and Idle frame protocol provides the following
services:

\- Transport of MAC-is PDUs in Cell\_FACH state between the DRNC and the
SRNC for E-DCH common transport channels.

4.2 Services expected from the Data Transport Network layer
-----------------------------------------------------------

The following services are expected from the transport layer:

\- Delivery of Frame Protocol PDUs.

In sequence delivery is not required. However, frequent out-of-sequence
delivery may impact the performance and should be avoided.

4.3 Protocol Version
--------------------

This revision of the specification specifies version 1 of the protocols.

5 Common Transport Channel Data Streams User Plane Procedures
=============================================================

This clause specifies the user plane procedures for Common Transport
Channels data streams. Typical related scenarios at Iur interface should
be described.

For the user plane of the radio network layer there are five Common
Transport Channel frame handling protocols:

1\. Random Access Channel/Common Packet Channel \[FDD\] Frame Protocol
(RACH FP) for transport of Iur data streams carried on RACH on the
Uu-interface.

2\. Forward Access Channel Frame Protocol (FACH FP) for transport of Iur
data streams carried on FACH on the Uu-interface.

3\. Downlink Shared Channel Frame Protocol (\[TDD - DSCH FP\]) for
transport of Iur data streams carried on DSCH on the Uu-interface.

4\. Uplink Shared Channel Frame Protocol (\[TDD - USCH\] FP) for
transport of Iur data streams carried on USCH on the Uu-interface.

5\. High Speed Downlink Shared Channel Frame Protocol (HS-DSCH FP) for
transport of Iur data streams carried on HS-DSCH on the Uu-interface.

6\. \[FDD and 1.28Mcps TDD - E-DCH for CELL\_FACH and Idle Frame
Protocol (E-DCH for CELL\_FACH and Idle FP) for transport of Iur data
streams carried on E-DCH in Cell\_FACH and Idle on Uu-Interface.\]

5.1 Data Transfer
-----------------

### 5.1.1 RACH Data Transfer

Figure 1: RACH Data Transfer procedure

Data received on the RACH transport channel is transmitted from the DRNC
to the SRNC using RACH DATA FRAMEs. The data is protected by a mandatory
payload CRC. Multiple MAC-c/sh SDUs of same length may be transmitted in
the same RACH DATA FRAME.

### 5.1.2 FACH Data Transfer

Figure 2: FACH Data Transfer procedure

Data to be transmitted on the FACH transport channel is transmitted from
the SRNC to the DRNC using FACH DATA FRAMEs. Multiple MAC-c/sh SDUs of
same length and same priority level (CmCH-PI) may be transmitted in the
same FACH DATA FRAME. Within one priority and size the MAC-c/sh SDUs
shall be transmitted by the DRNS on the Uu interface in the same order
as they were received from the SRNC.

The *UE-ID Type Indicator* IE indicates which UE-ID type MAC-c/sh shall
include in the MAC header.

### 5.1.3 USCH Data Transfer \[TDD\]

Figure 3: USCH Data Transfer procedure

Whenever there is USCH data in the DRNC, transfer is done immediately to
the SRNC via the USCH Data Port using USCH DATA FRAMEs.

Data received on the USCH transport channel is transmitted from the DRNC
to the SRNC using USCH DATA FRAMEs. The data is protected by a mandatory
payload CRC. Multiple MAC-c/sh SDUs of same length may be transmitted in
the same USCH DATA FRAME.

### 5.1.4 DSCH Data Transfer \[TDD\]

Figure 4: DSCH Data Transfer procedure

When the SRNC has been granted capacity by the DRNC via the DSCH
CAPACITY ALLOCATION Control Frame or via the DSCH initial capacity
allocation as described in TS 25.423 \[8\] and the SRNC has data waiting
to be sent, then the DSCH DATA FRAME is used to transfer the data. If
the SRNC has been granted capacity by the DRNC via the DSCH initial
capacity allocation as described in TS 25.423 \[8\], this capacity is
valid for only the first DSCH DATA FRAME transmission. When data is
waiting to be transferred, and a CAPACITY ALLOCATION is received, a DATA
FRAME will be transmitted immediately according to allocation received.

Multiple MAC-c/sh SDUs of same length and same priority level (CmCH-PI)
may be transmitted in the same DSCH DATA FRAME.

The DSCH DATA FRAME includes a *User Buffer Size* IE to indicate the
amount of data pending for the respective UE for the indicated priority
level. Within one priority level and size the MAC-c/sh SDUs shall be
transmitted by the DRNS on the Uu interface in the same order as they
were received from the SRNC.

### 5.1.5 HS-DSCH Data Transfer

Figure 4AA: HS-DSCH Data Transfer procedure

The HS-DSCH Data Transfer procedure is used to transfer a HS-DSCH DATA
FRAME (TYPE 1 or TYPE 2) from the SRNC to a DRNC. Two types of HS-DSCH
Frame Protocols exist for HS-DSCH data transfer procedure, i.e., HS-DSCH
Frame Protocol TYPE 1 (including HS-DSCH DATA FRAME TYPE 1 and HS-DSCH
CAPACITY ALLOCATION TYPE 1 Control Frame) and HS-DSCH Frame Protocol
TYPE 2 (including HS-DSCH DATA FRAME TYPE 2 and HS-DSCH CAPACITY
ALLOCATION TYPE 2 Control Frame).

HS-DSCH DATA FRAME TYPE 2 is selected if the IE *HS-DSCH MAC-d PDU Size
Format* in RNSAP (TS 25.423 \[8\]) is present and set to 'Flexible MAC-d
PDU Size' \[FDD and 1.28Mcps TDD - or if the IE *Enhanced FACH Support
Indicator* in RNSAP (TS 25.423 \[8\]) is present\]. HS-DSCH DATA FRAME
TYPE 1 is selected in any other case.

HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame shall be associated
only with HS-DSCH DATA FRAME TYPE 1 while HS-DSCH CAPACITY ALLOCATION
TYPE 2 Control Frame shall be associated only with HS-DSCH DATA FRAME
TYPE 2. HS-DSCH CAPACITY REQUEST Control Frame shall be used for both of
HS-DSCH Frame Protocols. HS-DSCH Frame Protocol TYPE 2 is used for
Flexible MAC-d PDU Size \[FDD and 1.28Mcps TDD - and Enhanced FACH\] as
described in RNSAP (TS 25.423 \[8\]).

When the SRNC has been granted capacity by the DRNC via the HS-DSCH
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame or via the HS-DSCH
initial capacity allocation as described in TS 25.423 \[8\] and the SRNC
has data waiting to be sent, then the HS-DSCH DATA FRAME (TYPE 1 or TYPE
2) is used to transfer the data. If the SRNC has been granted capacity
by the DRNC via the HS-DSCH initial capacity allocation as described in
TS 25.423 \[8\], this capacity is valid for only the first HS-DSCH DATA
FRAME (TYPE 1 or TYPE 2) transmission. If the HS-DSCH Frame Protocol
TYPE 2 has been selected by the DRNC, the granted capacity shall be
interpreted as the total number of octets which is retrieved by
multiplying the maximum MAC-d PDU length (indicated by the *Maximum
MAC-d PDU Length Type 2* IE) with the number of MAC-d PDUs (indicated by
the *HS-DSCH Credits* IE). When data is waiting to be transferred, and a
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) is received, a DATA FRAME (TYPE 1
or TYPE 2) will be transmitted immediately according to allocation
received. If the allocation received is \>0 but less than the data
waiting to be transferred, then the RNC may send one HS-DSCH DATA FRAME
TYPE 2 containing one MAC-d PDU with a length up to the RNSAP *Maximum
MAC-d PDU Size Extended* IE value. In such a case, the amount of data
exceeding the allocated capacity for the first HS-DSCH Interval shall be
credited from the following HS-DSCH Intervals, if available.

In case of HS-DSCH Frame Protocol TYPE 1, multiple MAC-d PDUs of same
length and same priority level (CmCH-PI) may be transmitted in one MAC-d
flow in the same HS-DSCH DATA FRAME TYPE 1.

In case of HS-DSCH Frame Protocol TYPE 2, MAC-d PDUs with the same
logical channel ID shall be associated to one unique priority level
(CmCH-PI).

The HS-DSCH DATA FRAME (TYPE 1 and TYPE 2) includes a *User Buffer Size*
IE to indicate the amount of data pending for the respective MAC-d flow
for the indicated priority level. Within one priority level (CmCH-PI)
and size the MAC-d PDUs shall be transmitted by the DRNS on the Uu
interface in the same order as they were received from the SRNC.

If the *Flush* IE in the HS-DSCH DATA FRAME (TYPE 1 and TYPE 2) is set
to \"flush\" the DRNS should remove all MAC-d PDUs from the
corresponding MAC-hs Priority Queue that have been received prior to
this data frame on the same transport bearer.

For the purpose of TNL Congestion Control on HSDPA, the *Frame Sequence
Number* and the *DRT* IEs may be included by the SRNC depending on
higher layer configuration.

### 5.1.6 E-DCH for CELL\_FACH and Idle Data Transfer \[FDD and 1.28Mcps TDD\]

Figure 4AB: E-DCH for CELL\_FACH and Idle Data Transfer procedure

The E-DCH for CELL\_FACH and Idle Data Transfer procedure is used to
transfer an E-DCH DATA FRAME from the DRNC to the SRNC.

### 5.1.7 Indication of UE State Transition \[1.28Mcps TDD\]

In 1.28Mcps TDD, for UE in CELL\_PCH or URA\_PCH states with stored
H-RNTI, the network use the stored dedicated H-RNTI to inform the UE to
establish the uplink synchronization via HS-SCCH before transmitting
DCCH and DTCH to the UE. And when UE receives dedicated H-RNTI on
HS-SCCH, the UE shall initiate the uplink synchronization procedure and
transit to CELL\_FACH state. The serving DRNC shall send the UE State
Transition Indication to SRNC to inform that the UE's state has been
transited from CELL\_PCH/URA\_PCH to CELL\_FACH.

The UE State Transition Indication is indicated in a user data frame
with values set as follows:

\- The *CFN* and *Subframe Number* IE values shall reflect the time when
the state transition was detected

\- The *Number of MAC-is PDUs* IE shall be set to zero. As a consequence
there are no *MAC-is PDU descriptor* IE and there are no *MAC-is PDUs*
IEs in the payload part of the data frame related to UE state transition
indication.

### 5.1.8 HS-DSCH UL Synchronization Establishment Failure \[1.28Mcps TDD\]

Figure 4AC: HS-DSCH UL Synchronization Establishment Failure procedure

In 1.28Mcps TDD, when the DRNC was notified by the Node B that the
HS-DSCH data transimssion to the UE in CELL\_FACH state is failed
because of the uplink synchronization failure TS 25.224 \[10\], the DRNC
could use HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE control frame
to notify the SRNC to terminate the HS-DSCH data transimssion.

5.2 Flow Control
----------------

### 5.2.1 FACH Flow Control

Figure 4A: FACH Flow Control procedure

The FACH Flow Control procedure is used by the DRNC to control the user
data flow. It may be generated in response to a FACH Capacity Request
procedure or at any other time. The *Credits* IE indicates the number of
MAC-c/sh SDUs the SRNC is allowed to transmit for the UE identified by
the *SRNTI* IE and the associated priority level indicated by the
*Common Transport Channel Priority Indicator* IE.

The *Credits* IE indicates the total amount of credits granted. Any
credits previously granted are withdrawn.

If *Credits* IE = 0 (e.g. due to congestion in the DRNC), the SRNC shall
immediately stop transmission of MAC-c/sh SDUs.

*Credits* IE = \'unlimited\' indicates that the SRNC may transmit an
unlimited number of MAC-c/sh SDUs.

### 5.2.2 DSCH Capacity Request \[TDD\]

Figure 5: DSCH Capacity Request procedure

The DSCH Capacity Request procedure provides means for the SRNC to
request DSCH capacity by indicating the user buffer size in the SRNC for
a given priority level.

The SRNC is allowed to reissue the DSCH Capacity Request if no CAPACITY
ALLOCATION has been received within an appropriate time threshold.

### 5.2.3 DSCH Capacity Allocation \[TDD\]

![](media/image12.wmf){width="4.100694444444445in"
height="1.7673611111111112in"}

Figure 6: DSCH Capacity Allocation procedure

DSCH Capacity Allocation procedure is generated within the DRNC. It may
be generated either in response to a DSCH Capacity Request or at any
other time.

The DRNC may use this message to modify the capacity at any time,
irrespective of the reported user buffer status.

The DSCH CAPACITY ALLOCATION frame is used by the DRNC to control the
user data flow. *Credits* IE indicates the number of MAC-c/sh SDUs that
the SRNC is allowed to transmit for the UE and the associated priority
level indicated by the *Common Transport Channel Priority Indicator* IE.

The *Maximum*. *MAC- c/sh SDU length*, *Credits*, *Interval* and
*Repetition Period* IEs indicates the total amount of capacity granted.
Any capacity previously granted is replaced.

If *Credits* IE = 0 (e.g. due to congestion in the DRNC), the SRNC shall
immediately stop transmission of MAC-c/sh SDUs. If *Credits* IE = 255,
the SRNC can transmit MAC-c/sh SDUs with unlimited capacity.

The IEs used in the DSCH CAPACITY ALLOCATION Control Frame are the
*Common Transport Channel Priority Indicator*, *Credits*, *Maximum*
*MAC- c/sh SDU Length*, *Interval* and the *Repetition Period*.

*If the Repetition Period* IE *=* *\'unlimited repetition period\'* it
indicates that the SRNC may transmit the specified number of MAC-c/sh
SDUs for an unlimited period according to the bounds of *Maximum
MAC-c/sh SDU Length*, *Credits* and *Interval* IEs.

### 5.2.4 FACH Capacity Request

Figure 6A: FACH Capacity Request procedure

The FACH Capacity Request procedure provides the means for the SRNC to
notify the DRNC about the user buffer size for a given priority level.
It may be sent if no FACH FLOW CONTROL frame has been received within an
appropriate time threshold, or to signal an event such as data arrival
or user buffer discard.

### 5.2.5 HS-DSCH Capacity Request

Figure 6B: HS-DSCH Capacity Request procedure

The HS-DSCH Capacity Request procedure provides means for the SRNC to
request HS-DSCH capacity by indicating the user buffer size in the SRNC
for a given priority level.

The SRNC is allowed to reissue the HS-DSCH Capacity Request if no
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) has been received within an
appropriate time threshold.

### 5.2.6 HS-DSCH Capacity Allocation

![](media/image12.wmf){width="4.100694444444445in"
height="1.7673611111111112in"}

Figure 6C: HS-DSCH Capacity Allocation procedure

HS-DSCH Capacity Allocation procedure is generated within the DRNC. It
may be generated either in response to a HS-DSCH Capacity Request or at
any other time.

The DRNC may use this message to modify the capacity at any time,
irrespective of the reported user buffer status.

The HS-DSCH CAPACITY ALLOCATION (TYPE 1 and TYPE 2) Control Frame are
used by the DRNC to control the user data flow. In case of HS-DSCH Frame
Protocol TYPE 1, *HS-DSCH Credits* IE indicates the number of MAC-d PDUs
that the SRNC is allowed to transmit for the MAC-d flow and the
associated priority level indicated by the *Common Transport Channel
Priority Indicator* IE. In case of HS-DSCH Frame Protocol TYPE 2, the
*HS-DSCH Credits* IE multiplied by the *Maximum MAC-d PDU Length Type 2*
IE indicates the number of MAC-d PDU octets that the SRNC is allowed to
transmit for the MAC-d flow and the associated priority level indicated
by the *Common Transport Channel Priority Indicator* IE.

The *Maximum* *MAC- d PDU length* *(in case of* HS-DSCH Frame Protocol
TYPE 1) *or Maximum* *MAC- d PDU Length Type 2* *(in case of* HS-DSCH
Frame Protocol TYPE 2), *HS-DSCH Credits*, *HS-DSCH Interval* and
*HS-DSCH Repetition Period* IEs indicates the total amount of capacity
granted. Any capacity previously granted is replaced.

If *HS-DSCH Credits* IE = 0 (e.g. due to congestion in the DRNC), the
SRNC shall immediately stop transmission of MAC-d PDUs. If *HS-DSCH
Credits* IE = 2047 in case of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control
Frame or 65535 in case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control
Frame, the SRNC can transmit MAC-d PDUs with unlimited capacity.

The IEs used in the HS-DSCH CAPACITY ALLOCATION (TYPE 1 and TYPE 2)
Control Frame are the *Common Transport Channel Priority Indicator*,
*HS-DSCH Credits*, *Maximum* *MAC- d PDU Length (in case of* HS-DSCH
Frame Protocol TYPE 1) *or Maximum* *MAC- d PDU Length* *Type 2* *(in
case of* HS-DSCH Frame Protocol TYPE 2), *HS-DSCH Interval* and the
*HS-DSCH Repetition Period*.

*If the HS-DSCH Repetition Period* IE *=* *\"unlimited repetition
period\"* it indicates that the SRNC may transmit the amount of granted
capacity for an unlimited period according to the bounds of *Maximum
MAC-d PDU Length IE (TYPE 1) or Maximum* *MAC- d PDU length Type 2 IE
(TYPE 2)*, *HS-DSCH Credits* IE and *HS-DSCH Interval* IE.

5.2A Node Synchronisation
-------------------------

The Node Synchronisation procedure is used by the SRNC to acquire
information on the Node B timing.

The procedure is initiated by the SRNC by sending a DL NODE
SYNCHRONISATION control frame containing the parameter T1 to the DRNS.

Upon reception of a DL NODE SYNCHRONISATION control frame, the DRNS
shall respond with UL NODE SYNCHRONISATION control frame, including the
parameters T2 and T3, as well as the T1 which was indicated in the
initiating DL NODE SYNCHRONISATION control frame.

The T1, T2, T3 parameters are defined as:

\- T1: RNC specific frame number (RFN) that indicates the time when RNC
sends the DL NODE SYNCHRONISATION control frame through the SAP to the
transport layer.

\- T2: Node B specific frame number (BFN) that indicates the time when
Node B receives the correspondent DL NODE SYNCHRONISZATION control frame
through the SAP from the transport layer.

\- T3: Node B specific frame number (BFN) that indicates the time when
Node B sends the UL NODE SYNCHRONISATION control frame through the SAP
to the transport layer.

The general overview on the Node Synchronisation procedure is reported
in TS 25.401 \[5\].

Figure 6D: Node Synchronisation procedure

5.3 General
-----------

### 5.3.1 DSCH / USCH transport bearer replacement \[TDD\]

As described in RNSAP (TS 25.423 \[8\]), transport bearer replacement
can be achieved for a DSCH or USCH by using the Synchronised Radio Link
Reconfiguration Preparation procedure in combination with the
Synchronised Radio Link Reconfiguration Commit procedure. In both cases
the following steps can be discerned:

1\) The new transport bearer is established after which 2 transport
bearers exist in parallel.

2\) The transport channel(s) is/are switched to the new transport
bearer.

3\) The old transport bearer is released.

In step 1), communication on the old transport bearer continues as
normal.

In step 2), the moment of switching is determined as follows:

\- The DSCH DATA FRAMEs or USCH DATA FRAMEs shall be transported on the
new transport bearer from the CFN indicated in the RADIO LINK
RECONFIGURATION COMMIT message.

Starting from this CFN the RNCs shall support all the applicable Common
Transport Channels frame protocol procedures on the new transport bearer
and no requirements exist regarding support of Common Transport Channels
frame protocol procedures on the old transport bearer.

Finally in step 3), the old transport bearer is released.

### 5.3.2 HS-DSCH Transport Bearer Replacement

As described in RNSAP (TS 25.423 \[8\]), transport bearer replacement
can be achieved for a HS-DSCH MAC-d Flow by using the Synchronised Radio
Link Reconfiguration Preparation procedure in combination with the
Synchronised Radio Link Reconfiguration Commit procedure, or by using
the Unsynchronised Radio Link Reconfiguration procedure. In both cases
the following steps can be discerned:

1\) The new transport bearer is established after which 2 transport
bearers exist in parallel.

2\) The HS-DSCH MAC-d Flow is switched to the new transport bearer.

3\) The old transport bearer is released.

**HS-DSCH Transport Bearer Replacement, step 1:**

Communication on the old transport bearer continues as normal. In
addition, the DRNS shall support HS-DSCH DATA FRAMEs (TYPE 1 or TYPE 2),
the HS-DSCH CAPACITY REQUEST Control Frame (see sub-clause 5.2.5) and
may support the HS-DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control
Frame (see sub-clause 5.2.6) on the new transport bearer. HS-DSCH DATA
FRAMEs (TYPE 1 or TYPE 2) transported on the new transport bearer shall
be transmitted on the Uu Interface in the same way as those received on
the old transport bearer (see sub-clause 5.1.5).

The DRNS may use the old or the new transport bearer for the HS-DSCH
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame. The HS-DSCH
CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame indicates the total
amount of capacity granted for the MAC-d flow and the indicated priority
level, irrespective of the transport bearer used. Any capacity
previously granted is replaced.

The SRNC may use the old or the new transport bearer for the HS-DSCH
CAPACITY REQUEST Control Frame. The rules for reissuing a HS-DSCH
CAPACITY REQUEST Control Frame as outlined in sub-clause 5.2.5 still
apply.

**HS-DSCH Transport Bearer Replacement, step 2:**

Regarding step 2), the moment of switching is determined as follows:

Starting from the CFN indicated in the RADIO LINK RECONFIGURATION COMMIT
message -- or directly when using the unsynchronised Radio Link
Reconfiguration procedure, the DRNS shall support all applicable Common
Transport Channels frame protocol procedures on the new transport bearer
and no requirements exist regarding support of Common Transport Channels
frame protocol procedures on the old transport bearer.

**HS-DSCH Transport Bearer Replacement, step 3:**

Finally in step 3), the old transport bearer is released.

5.4 HS-DSCH PDU DROP INDICATION
-------------------------------

Figure 6E: HS-DSCH PDU DROP INDICATION procedure

The HS-DSCH PDU DROP INDICATION Control Frame is used by the DRNS to
report to SRNC the PDU drop events. It is used when DRNS drops the PDUs.
The content of the dropped PDU or Data Frame is available in the DRNS so
in this case direct identification of the PDUs is possible.

6 Frame Structure and Coding
============================

6.1 General
-----------

The general structure of a Common Transport Channel frame consists of a
header and a payload. This structure is depicted in the figure 7.

  -------- --------------------------------------
  Header   Payload: Data or Control Information
  -------- --------------------------------------

Figure 7: General Frame Structure

The header shall contain the frame type field and information related to
the frame type.

There are two types of frames (indicated by the Frame Type field).

1\. Data frame.

2\. Control frame.

In the present document the structure of frames will be specified by
using pictures similar to the following figure 8.

  ----------------- --------- -------- -------- --- --- --- --- ----------- --
  7                 6         5        4        3   2   1   0   Condition   
  Field 1           Field 2            Byte 1                               
  Field 3                     Byte 2                                        
  Field 3 (cont)    Field 4            Byte 3                               
  Spare Extension                                                           
  ----------------- --------- -------- -------- --- --- --- --- ----------- --

Figure 8: Example frame structure

Unless otherwise indicated, fields which consist of multiple bits within
a byte will have the more significant bit located at the higher bit
position (indicated above frame in figure 8). In addition, if a field
spans several bytes, more significant bits will be located in lower
numbered bytes (right of frame in figure 8).

On the Iur interface, the frame will be transmitted starting from the
lowest numbered byte. Within each byte, the bits are sent according
decreasing bit position (bit position 7 first).

The Spare Extension indicates the location where new IEs can in the
future be added in a backward compatible way.

The Spare Extension shall not be used by the transmitter and shall be
ignored by the receiver.

Spare bits shall be set to 0 by the transmitter and shall be ignored by
the receiver.

The parameters are specified giving the value range and the step (if not
1). The coding is done as follows (unless otherwise specified):

\- Lowest value (in the range) coded as a sequence of 0\'s;

\- Highest value in the range coded as a sequence of 1\'s.

6.2 Data Frame structure
------------------------

### 6.2.1 RACH Channels

RACH Iur data stream corresponds to the data stream of one specific UE.
The used transport bearer for the transport of FACH/RACH or FACH is
bi-directional.

The RACH/FACH FP does not facilitate multiplexing of data streams from
different UEs onto the same data frame, but does allow multiple UEs to
share the same transport bearer.

The RACH DATA FRAME structure is defined as common for FDD and TDD with
conditional fields.

<table>
<tbody>
<tr class="odd">
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Header CRC</td>
<td>FT</td>
<td></td>
<td>Header</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SRNTI</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SRNTI (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SRNTI (cont)</td>
<td>Spare bits 3-0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Propagation Delay</td>
<td>Conditional FDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Rx Timing Deviation</td>
<td>Conditional 3.84 Mcps and 7.68Mcps TDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Received Synch Uplink Timing Deviation</td>
<td>Conditional 1.28Mcps TDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>MAC –c/sh SDU Length</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC –c/sh SDU Length (cont)</td>
<td>Spare bits 2-0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>NoOfSDUs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits 7-4</td>
<td>MAC-c SDU-1</td>
<td></td>
<td>Payload</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC –c/sh SDU 1 (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits 7-4</td>
<td>MAC-c SDU-n</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC –c/sh SDU n (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>New IE fl 7(E)</td>
<td>New IE fl 6</td>
<td>New IE fl 5</td>
<td>New IE fl 4</td>
<td>New IE fl 3</td>
<td>New IE fl 2</td>
<td>New IE fl 1</td>
<td>New IE fl 0</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits7-6</td>
<td>Cell Portion ID</td>
<td>Conditional FDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Spare bits 7-1 for 3.84Mcps</p>
<p>Spare bits 7-2 for 7.68Mcps</p></td>
<td>Rx Timing Deviation cont</td>
<td>Conditional 3.84 Mcps and 7.68Mcps TDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits 7-2</td>
<td>Ext Propagation Delay</td>
<td>Conditional FDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Ext Propagation Delay</td>
<td>Conditional FDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Cell Portion LCR ID</td>
<td>Conditional 1.28Mcps TDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Extended S-RNTI</td>
<td>Conditional FDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Extended S-RNTI (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Extended S-RNTI (cont)</td>
<td>Spare bits 1-0</td>
<td></td>
<td>Payload Tail</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare Extension</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Payload CRC</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Payload CRC (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Figure 9: RACH DATA FRAME structure

Propagation delay is a conditional Information Element which is only
present when the Cell supporting the RACH Transport Channel is a FDD
Cell.

Rx Timing Deviation is a conditional Information Element which is only
present when the Cell supporting the RACH Transport Channel is a 3.84
Mcps or 7.68 Mcps TDD Cell.

Received SYNC UL Timing Deviation is a conditional Information Element
which is only present when the Cell supporting the RACH Transport
Channel is a 1.28 Mcps TDD Cell.

With respect to new IEs, for which the presence is indicated by the *New
IE Flags* IE, the Figure 9 is an example of how a frame is structured
when all such new IEs are present. Note that non-presence of such a new
IE changes the position of all subsequent IEs on octet level.

\[FDD- Bit 0 of New IE Flags in RACH DATA FRAME indicates if a Cell
Portion ID is present (1) or not present (0) in the byte (bits 0-5)
following the *New IE Flags* IE.\]

\[FDD- Bit 1 of New IE Flags in RACH DATA FRAME indicates if the *Ext
Propagation Delay* IE is present (1) or not present (0).\]

\[FDD - Bit 2 of New IE Flags in RACH DATA FRAME indicates if the
*Extended S-RNTI* IE is present (1) or not present (0). If the *Extended
S-RNTI* IE is included, the *S-RNTI* IE shall be igored by the
receiver.\]

\[FDD - Bits 3 through 6 of New IE Flags in RACH DATA FRAME shall be set
to 0.\]

\[FDD - Field length of *Spare Extension* IE in RACH DATA FRAME is 0-25
octets.\]

\[3.84 Mcps and 7.68 Mcps TDD - Bit 0 of New IE Flags in RACH DATA FRAME
indicates if the extended bits of the Rx Timing Deviation are present
(1) or not present (0) in the byte (bit 0 for 3.84 Mcps TDD, bits 0 and
1 for 7.68 Mcps TDD) following the *New IE Flags* IE. Bits 1 through 6
of New IE Flags in RACH DATA FRAME shall be set to 0. Field length of
*Spare Extension* IE in RACH DATA FRAME is 0-30 octets.\]

\[1.28Mcps TDD - Bit 0 of New IE Flags in RACH DATA FRAME indicates if
*Cell Portion LCR* IE is present (1) or not present (0)

\[1.28Mcps TDD -- Bits 1 through 6 of New IE Flags in RACH DATA FRAME
shall be set to 0.\]

\[1.28Mcps TDD -- Field length of Spare Extension IE in RACH DATA FRAME
is 0-30 octets.\]

### 6.2.2 FACH Channels

<table>
<tbody>
<tr class="odd">
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Header CRC</td>
<td>FT</td>
<td></td>
<td>Header</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>DRNTI</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>DRNTI (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>DRNTI (cont)</td>
<td>Cm CH-PI</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><p>Spare</p>
<p>bits 7-6</p></td>
<td>UE-ID Type</td>
<td>MAC –c/sh SDU Length</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>MAC –c/sh SDU Length (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Num Of SDUs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>User Buffer Size</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>User Buffer Size (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Spare bits 7-4</td>
<td>MAC-c/sh SDU-1</td>
<td></td>
<td>Payload</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>MAC –c/sh SDU 1 (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits 7-4</td>
<td>MAC-c/sh SDU-n</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC –c/sh SDU n (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Spare Extension</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Payload CRC</td>
<td></td>
<td>Payload Tail</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Payload CRC (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Figure 10: FACH DATA FRAME structure

### 6.2.3 USCH Channels \[TDD\]

  ------------------------------ ---------------- -------------- --------- --- --- --- --- -- --
  7                              6                5              4         3   2   1   0      
  Header CRC                     FT                              Header                       
  MAC --c/sh SDU Length                                                                       
  MAC --c/sh SDU Length (cont)   Spare bits 2-0                                               
  Num Of SDUs                                                                                 
  Spare bits 7-4                 MAC-c/sh SDU-1                  Payload                      
                                                                                              
  MAC --c/sh SDU 1 (cont)                                                                     
                                                                                              
                                                                                              
  Spare bits 7-4                 MAC-c/sh SDU-n                                               
                                                                                              
  MAC --c/sh SDU n (cont)                                                                     
                                                                                              
  Spare Extension                                                                             
  Payload CRC                                     Payload Tail                                
  Payload CRC (cont)                                                                          
  ------------------------------ ---------------- -------------- --------- --- --- --- --- -- --

Figure 11: USCH DATA FRAME structure

### 6.2.4 DSCH Channels \[TDD\]

  ------------------------------ ---------------- -------------- --------- --- --- --- --- -- --
  7                              6                5              4         3   2   1   0      
  Header CRC                     FT                              Header                       
  Spare bits 7-4                 CmCH-PI                                                      
  MAC --c/sh SDU Length                                                                       
  MAC --c/sh SDU Length (cont)   Spare bits 2-0                                               
  Num Of SDUs                                                                                 
  User Buffer Size                                                                            
  User Buffer Size (cont)                                                                     
  Spare bits 7-4                 MAC-c/sh SDU-1                  Payload                      
                                                                                              
  MAC --c/sh SDU 1 (cont)                                                                     
                                                                                              
                                                                                              
  Spare bits 7-4                 MAC-c SDU-n                                                  
                                                                                              
  MAC --c/sh SDU n (cont)                                                                     
                                                                                              
  Spare Extension                                                                             
  Payload CRC                                     Payload Tail                                
  Payload CRC (cont)                                                                          
  ------------------------------ ---------------- -------------- --------- --- --- --- --- -- --

Figure 12: DSCH DATA FRAME structure

### 6.2.4A HS-DSCH Channels

Two types of HS-DSCH DATA FRAME exist for the HS-DSCH data transfer,
i.e. HS-DSCH DATA FRAME TYPE 1 and HS-DSCH DATA FRAME TYPE 2.

  ------------------------------ ------------- --------------- ------------- ------------- ------------- ------------- ------------- -- --
  7                              6             5               4             3             2             1             0                
  Header CRC                     FT                            Header                                                                   
  FSN                            CmCH-PI                                                                                                
  MAC --d PDU Length                                                                                                                    
  MAC --c/sh SDU Length (cont)   Flush         FSN/DRT Reset   CPC Recov                                                                
  Num Of PDUs                                                                                                                           
  User Buffer Size                                                                                                                      
  User Buffer Size (cont)                                                                                                               
  Spare bits 7-4                 MAC-d PDU-1                   Payload                                                                  
                                                                                                                                        
  MAC --d PDU 1 (cont)           Pad                                                                                                    
                                                                                                                                        
                                                                                                                                        
  Spare bits 7-4                 MAC-d PDU-n                                                                                            
                                                                                                                                        
  MAC --d PDU n (cont)           Pad                                                                                                    
  New IE fl 7(E)                 New IE fl 6   New IE fl 5     New IE fl 4   New IE fl 3   New IE fl 2   New IE fl 1   New IE fl 0      
  DRT                                                                                                                                   
  DRT (cont)                                                                                                                            
  SN                                                                                                                                    
  SN(cont)                       S/D                                                                                                    
  SN                                                                                                                                    
  SN(cont)                       S/D                                                                                                    
  Spare Extension                                                                                                                       
  Payload CRC                                  Payload Tail                                                                             
  Payload CRC (cont)                                                                                                                    
  ------------------------------ ------------- --------------- ------------- ------------- ------------- ------------- ------------- -- --

Figure 12A: HS-DSCH DATA TYPE 1 FRAME structure

Bit 0 of New IE Flags in HS-DSCH DATA FRAME TYPE 1 indicates if a DRT is
present (1) or not (0) in the 2 octets following the *New IE Flags* IE.
Bit 1 of New IE Flags in HS-DSCH DATA FRAME TYPE1 indicates if SN is
present (1) or not (0) in the third and the forth octets following the
*New IE Flags* IE. Bit 0 in the forth octet is allocated for IE S/D. Bit
2 of New IE Flags in HS-DSCH DATA FRAME TYPE1 indicates if SN is present
(1) or not (0) in the fifth and the sixth octets following the *New IE
Flags* IE. Bit 0 in the sixth octet is allocated for IE S/D. Bits 3
through 6 of New IE Flags in HS-DSCH DATA FRAME TYPE 1 shall be set to
0.

Field length of *Spare Extension* IE in HS-DSCH DATA FRAME TYPE 1 is
0-25 octets.

  ------------------------------- ---------------------------------------- ------------------------------ --------------- ------------- ------------- ----------------- ------------- -- --
  7                               6                                        5                              4               3             2             1                 0                
  Header CRC                      FT                                                                      Header                                                                         
  Frame Seq Nr                    CmCH-PI                                                                                                                                                
  Total Num of PDU blocks         Flush                                    FSN/DRT Reset                  DRT Indicator                                                                  
  FI                              PI                                       eDRX Indicator                 TS0 Indicator   MI            CPC Recov     FeDRX Indicator   NTHT             
  User Buffer Size                                                                                                                                                                       
  User Buffer Size (cont)                                                                                                                                                                
  MAC-d PDU length in block 1                                                                                                                                                            
  M len 1 (cont)                  Spare                                    \#PDUs in block 1                                                                                             
  Logical CH ID block1            MAC-d PDU length in block 2                                                                                                                            
  M len 2 (cont)                  Spare                                                                                                                                                  
  \#PDUs in block2                Logical Ch ID in block2                                                                                                                                
                                                                                                                                                                                         
  MAC --d PDU length in block n                                                                                                                                                          
  M len n (cont)                  Spare                                    \#PDUs in block n                                                                                             
  Logical CH ID block n           Padding if n is odd                                                                                                                                    
  DRT                                                                      Payload                                                                                                       
  DRT (cont)                                                                                                                                                                             
  D-RNTI                                                                                                                                                                                 
  D-RNTI (cont)                                                                                                                                                                          
  D-RNTI (cont)                   UE-ID Type                               DRX Cycle Length Coefficient                                                                                  
  MAC-d Type 2 PDU 1              First block of PDUs with the same size                                                                                                                 
                                                                                                                                                                                         
  MAC-d Type 2 PDU 1 (cont)                                                                                                                                                              
                                                                                                                                                                                         
                                                                                                                                                                                         
  MAC-d Type 2 PDU m1                                                                                                                                                                    
                                                                                                                                                                                         
  MAC-d Type 2 PDU m1 (cont)                                                                                                                                                             
                                                                                                                                                                                         
                                                                                                                                                                                         
  MAC-d Type 2 PDU 1              Nth block of PDUs with the same size                                                                                                                   
                                                                                                                                                                                         
  MAC-d Type 2 PDU mn (cont)                                                                                                                                                             
  New IE fl 7(E)                  New IE fl 6                              New IE fl 5                    New IE fl 4     New IE fl 3   New IE fl 2   New IE fl 1       New IE fl 0      
  SN                                                                                                                                                                                     
  SN (cont)                       S/D                                                                                                                                                    
  SN                                                                                                                                                                                     
  SN (cont)                       S/D                                                                                                                                                    
  CFN                                                                                                                                                                                    
  Spare bits 7-2                  OPCE Ind                                 CR Ind                                                                                                        
  Spare Extension                                                                                                                                                                        
  Payload CRC                                                              Payload Tail                                                                                                  
  Payload CRC (cont)                                                                                                                                                                     
  ------------------------------- ---------------------------------------- ------------------------------ --------------- ------------- ------------- ----------------- ------------- -- --

Figure 12B: HS-DSCH DATA FRAME TYPE 2 structure

Bit 0 of New IE Flags in HS-DSCH DATA FRAME TYPE 2 indicates if SN is
present (1) or not (0) in the following 2 octets following the *New IE
Flags* IE. Bit 0 in the 2nd octet is allocated for IE S/D. Bit 1 of New
IE Flags in HS-DSCH DATA FRAME TYPE2 indicates if SN is present (1) or
not (0) in the 3rd and the 4th octets following the *New IE Flags* IE.
Bit 0 in the 4th octet is allocated for IE S/D.

Bit 2 of New IE Flags in HS-DSCH DATA FRAME TYPE 2 indicates if a CFN is
present (1) or not (0) in the fifth octet following the *New IE Flags*
IE.

Bit 3 of New IE Flags in HS-DSCH DATA FRAME TYPE 2 indicates if a *Cell
Reselection Indication (CR Ind)* IE is present (1) or not (0) in the
sixth octet following the *New IE Flags* IE.

Bit4 of New IE Flags in HS-DSCH DATA FRAME TYPE 2 indicates if the
Operation Preference of Common E-DCH resource Indication (OPCE Ind) is
present (1) or not (0). Bits 5 through 6 of New IE Flags in HS-DSCH DATA
FRAME TYPE 2 shall be set to 0.

Field length of Spare Extension IE in HS-DSCH DATA FRAME TYPE 2 is 0-26
octets.

### 6.2.4B E-DCH for CELL\_FACH and Idle Channels \[FDD and 1.28Mcps TDD\]

The structure of the E-DCH DATA FRAME is shown in Figure 12C. This frame
structure is used for carrying MAC-is PDUs in Cell\_FACH and Idle state
(TS 25.321 \[9\]) for one UE.

<table>
<tbody>
<tr class="odd">
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Header CRC</td>
<td>FT</td>
<td></td>
<td>Frame Header</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Header CRC (cont)</td>
<td>FSN</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits 7-4</td>
<td>Number of subframes</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>CFN</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>E-DCH User Buffer Size (eUB Size)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>E-DCH User Buffer Size (eUB Size)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>eUB Size</td>
<td><p>Spare</p>
<p>bits 5-4</p></td>
<td>Nr of MAC-is SDU in frame</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Nr of MAC-is SDU in frame(cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare bits 7-4</td>
<td>SRNTI</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SRNTI (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SRNTI (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Spare</td>
<td>1<sup>st</sup> Subframe number</td>
<td>N of MAC-is PDUs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare</td>
<td>2<sup>nd</sup> Subframe number</td>
<td>N of MAC-is PDUs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Spare</td>
<td>Last Subframe number</td>
<td>N of MAC-is PDUs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>MAC-is PDU descriptor of 1st MAC-is PDU of 1st subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC-is PDU descriptor of 2nd MAC-is PDU of 1st subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC-is PDU descriptor of last MAC-is PDU of 1st subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC-is PDU descriptor of 1st MAC-is PDU of last subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MAC-is PDU descriptor of last MAC-is PDU of last subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>First MAC-is PDU of first subframe</td>
<td></td>
<td>Frame Payload</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Last MAC-is PDU of first subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>First MAC-is PDU of last subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Last MAC-is PDU of last subframe</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>New IE fl 7(E)</td>
<td>New IE fl 6</td>
<td>New IE fl 5</td>
<td>New IE fl 4</td>
<td>New IE fl 3</td>
<td>New IE fl 2</td>
<td>New IE fl 1</td>
<td>New IE fl 0</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Spare bits 7-2</td>
<td>CRR Rec</td>
<td>TTI Length</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Extended S-RNTI</td>
<td>Conditional FDD</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Extended S-RNTI(cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Extended S-RNTI (cont)</td>
<td>Spare bits 1-0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Spare Extension</td>
<td></td>
<td>Optional</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Payload CRC</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Payload CRC (cont)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

Figure 12C: E-DCH DATA FRAME structure

For the description of the fields see subclause 6.2.5.

Bit 0 of New IE Flags in E-DCH DATA FRAME indicates if a TTI length is
present (1) or not (0).

Bit 1 of New IE Flags in E-DCH DATA FRAME indicates if *Cell Reselection
Request Received (CRR Rec)* IE is present (1) or not (0).

Bit 2 of New IE Flags in E-DCH DATA FRAME indicates if *Extended S-RNTI*
IE is present (1) or not (0). If the *Extended S-RNTI* IE is included,
the *S-RNTI* IE shall be igored by the receiver. Bits 3 through 6 of New
IE Flags in E-DCH DATA FRAME shall be set to 0.

The *Payload CRC* IE is optional in frames that contain a Payload, i.e.
the whole 2 bytes field may or may not be present in the frame structure
(this is defined at the setup of the transport bearer). The *Payload
CRC* IE may only be present if the E-DCH data frame contains payload.

### 6.2.5 Coding of Information Elements in DATA FRAMEs

#### 6.2.5.1 Header CRC

**Description:** Cyclic Redundancy Checksum calculated on the header of
a data frame with polynomial X\^7+X\^6+X\^2+1 for the 7 bit header CRC
\[FDD and 1.28Mcps TDD - and X\^11+X\^9+X\^8+ X\^2+X+1 for the 11 bit
header CRC\]. The CRC calculation shall cover all bits in the header,
starting from bit 0 in the first byte (FT field) up to the end of the
header.

**Value range:** {0-127} \[FDD and 1.28Mcps TDD -- , {0..2047} for E-DCH
DATA FRAME\].

**Field length:** 7 bits \[FDD and 1.28Mcps TDD - , 11 bits for E-DCH
DATA FRAME\].

#### 6.2.5.2 Frame Type (FT)

**Description:** Describes if it is a control frame or a data frame.

**Value range:** {0=data, 1=control}.

**Field Length:** 1 bit.

#### 6.2.5.3 DRNTI

**Description:** Identifies the UE in the DRNC.

**Value range:** {0-1048575}.

**Field length:** 20 bits.

#### 6.2.5.4 S-RNTI

**Description:** S-RNTI is defined in TS 25.401 \[5\]. S-RNTI is used in
UL control frames \[FDD and 1.28Mcps TDD - and E-DCH data frames\] to
identify the UE context in the SRNC.

**Value range:** {0-1048575}.

**Field length:** 20 bits.

#### 6.2.5.5 UE-ID Type Indicator (UE-ID Type)

**Description:** Indicates the UE Identifier Type to be included by
MAC-c/sh in the MAC header.

**Value range:** {0=U-RNTI, 1=C-RNTI}.

**Field Length:** 1 bit.

#### 6.2.5.6 S-CCPCH Indicator (S-CI)

Void.

#### 6.2.5.7 Common Transport Channel Priority Indicator (CmCH-PI)

**Description:** CmCH-PI is the relative priority of the data frame and
the SDUs included.

**Value range:** {0-15, where 0=lowest priority, 15=highest priority}.

**Field length:** 4 bits.

#### 6.2.5.8 MAC-c/sh SDU Length

**Description:** The value of that field indicates the length of every
MAC-c/sh SDU in the payload of the \[TDD - DSCH, USCH and\] FACH DATA
FRAME in number of bits.

**Value range:** {0-5000}.

**Field Length:** 13 bits.

#### 6.2.5.9 NumOfSDU

**Description:** Indicates the number of MAC-c/sh SDUs in the payload.

**Value range:** {1-255}.

**Field Length:** 8 bits.

#### 6.2.5.10 Propagation delay \[FDD\]

**Description:** One-way radio interface delay as measured during RACH
access. If the measured value exceeds the range of this information
element, the information element shall be set to its maximum value, and
the *Ext Propagation Delay* IE shall be used to represent the measured
value, see subclause 6.2.5.10A.

**Value range:** {0 - 765 chips}.

**Granularity:** 3 chips.

**Field length:** 8 bits.

#### 6.2.5.10A Ext Propagation Delay \[FDD\]

**Description:** One-way radio interface delay as measured during RACH
access, extended value part. This IE shall be present only if the range
of the *Propagation Delay* IE is insufficient to represent the measured
value.

**Value range: {0** - 3069 chips}.

**Granularity:** 3 chips.

**Field length:** 10 bits.

#### 6.2.5.11 Rx Timing Deviation \[3.84Mcps TDD\]

**Description:** Measured Rx Timing Deviation as a basis for timing
advance.

**Value range:** {-1024, \..., +1023} chips

{N\*4 - 256} chips ≤ RxTiming Deviation \< {(N+1)\*4 - 256} chips

> With N = 0, 1, \...,127

{(N-128)\*4 - 1024} chips ≤ Rx Timing Deviation \< {(N-127)\*4 - 1024}
chips

> With N = 128, 129, \...,319

{N\*4 - 1024} chips ≤ Rx Timing Deviation \< {(N+1)\*4 - 1024} chips

> With N = 320, 321, \...,511

**Granularity:** 4 chips.

**Field length:** 9 bits. The least significant 8 bits are contained in
the RX timing deviation field and the most significant bit is contained
in the RX timing deviation (continuation) field.

#### 6.2.5.11A Received SYNC UL Timing Deviation \[1.28Mcps TDD\]

**Description:** Measured Received SYNC UL Timing Deviation as a basis
for propagation delay.

**Value range:** {0, \..., +255} chips

**Granularity:** 1 chip.

**Field length:** 8 bits.

#### 6.2.5.11B Rx Timing Deviation \[7.68Mcps TDD\]

**Description:** Measured Rx Timing Deviation as a basis for timing
advance.

**Value range:** {-2056, \..., +2055} chips

{N\*4 - 2056 } chips ≤ RxTiming Deviation \< {(N+1)\*4 - 2056 } chips

With N = 0, 1, \..., 1027

**Granularity:** 4 chips.

**Field length:** 10 bits. The least significant 8 bits are contained in
the RX timing deviation field and the most significant 2 bits are
contained in the RX timing deviation (continuation) field.

#### 6.2.5.12 User Buffer Size

**Description:** Indicates the users\' buffer size (i.e. the amount of
data in the buffer) in octets for a given Common Transport Channel
Priority Indicator level.

**Value range:** {0-65535}.

**Field length:** 16 bits.

#### 6.2.5.13 MAC-c/sh SDU

**Description:** A MAC-c/sh SDU contains the *C/T* IE field (TS 25.321
\[7\]) of the MAC header followed by one RLC PDU.Field length: See the
value of the *MAC-c/sh SDU Length* IE.

#### 6.2.5.14 Payload CRC

**Description:** Cyclic Redundancy Checksum calculated on the payload of
a data frame with polynomial X\^16+X\^15+X\^2+1. The CRC calculation
shall cover all bits in the data frame payload, starting from bit 7 in
the first byte up to bit 0 in the byte before the payload CRC.

**Field length:** 16 bits.

#### 6.2.5.15 Spare Extension

**Description**: Indicates the location where new IEs can in the future
be added in a backward compatible way.

**Field length**: 0-32 octets.

#### 6.2.5.16 MAC-d PDU Length

**Description:** The value of that field indicates the length of every
MAC-d PDU in the payload of the HS-DSCH DATA FRAME in number of bits.

**Value range:** {0-5000}.

**Field Length:** 13 bits.

#### 6.2.5.17 NumOfPDU

**Description:** Indicates the number of MAC-d PDUs in the payload.

**Value range:** {1-255}.

**Field Length:** 8 bits.

#### 6.2.5.18 MAC-d PDU

**Description:** A MAC-d PDU contains the MAC-d PDU as defined in TS
25.321 \[9\].

**Field length:** See the value of the *MAC-d PDU Length* IE.

#### 6.2.5.19 Cell Portion ID \[FDD\]

**Description:** Cell Portion ID indicates the cell portion with highest
SIR during RACH access. Cell Portion ID is configured by O&M.

**Value range:** {0-63}.

**Field Length:** 6 bits.

#### 6.2.5.20 New IE Flags

**Description:** The *New IE Flags* IE is only present if at least one
new IE is present. The *New IE Flags* IE contains flags indicating which
new IEs that are present following the *New IE Flags* IE. The last bit
position of the *New IE Flags* IE is used as the Extension Flag to allow
the extension of the *New IE Flags* IE in the future. Extension octets
of the *New IE Flags* IE shall follow directly after the first octet of
the *New IE Flags* IE. When an extension octet of the *New IE Flags* IE
is present, then all previous extension octets of the *New IE Flags* IE
and the *New IE Flags* IE shall also be present, even if they have all
their flag bits indicating no presence of their respective new IEs.

**Value range:**

Bit 0-6 of each octet: Indicates if a new IE is present (1) or not
present (0) in the bytes following the *New IE Flags* IE. The meaning of
each bit is explained in the corresponding DATA FRAME subclause;

Bit 7 of each octet: Indicates if an extension octet of the *New IE
Flags* IE follows (1) or not (0).

**Field length:** 1 -- 31 octets.

#### 6.2.5.21 Flush

**Description:** Indicates whether the DRNS should remove (1) or not (0)
all the MAC-d PDUs from the corresponding MAC-hs Priority Queue that
have been received prior to this HS-DSCH DATA FRAME on the same
transport bearer.

**Value range:** {0 = no flush, 1 = flush}.

**Field Length:** 1 bit.

#### 6.2.5.22 DRT (Delay Reference Time)

**Description:** *DRT* is a 16-bit *Delay Reference Time. DRT* can be
used for dynamic delay measurements. The *DRT* counter bridges the same
time span as RFN and BFN. *DRT* is locked to RFN in SRNC and is a 40960
counter with 1 ms resolution.

**Value range**: {0..40959~DEC~ ms (0..9FFF~HEX~ ms)}.

**Granularity:** 1 ms.

**Field length:** 16 bits.

#### 6.2.5.23 Frame Sequence Number

**Description:** The 4-bit *Frame Sequence Number* (FSN) is incremented
for each transmitted HS‑DSCH data frame belonging to one MAC-d flow
\[FDD and 1.28Mcps TDD -- or E-DCH DATA FRAME belonging to one E-DCH for
CELL\_FACH and Idle data stream\]. At wraparound of the Frame Sequence
Number, the value \"0\" shall not be used. Each flow generates its own
Frame Sequence Number.

**Value range:**

0 is a special value and indicates that the *Frame Sequence Number* IE
shall be treated as spare.

1 -- 15 indicates the Frame Sequence Number.

**Granularity:** 1.

**Field length:** 4 bits.

#### 6.2.5.24 Logical Channel ID in block n

**Description:** This field provides identification of the logical
channel instance associated with the PDUs of the n-th *block of PDUs
with the same size* in the HS-DSCH DATA FRAME TYPE 2. Multiple logical
channels may be carried on the same Transport Network flow.

**Value range:** {0-15}, where 0-14 identifies logical channels 1-15, 15
identifies BCCH or PCCH logical channel mapped on HS-DSCH.

**Field length:** 4 bits.

#### 6.2.5.25 Total Number of PDU blocks

**Description:** The field indicates the number of blocks of *block of
PDUs with the same size* in this HS-DSCH DATA FRAME.

**Value range:** {0-31}, 0 -- not used.

**Field length:** 5 bits.

#### 6.2.5.26 MAC-d PDU length in block n

**Description:** The value of this field indicates the length of every
MAC-d PDU in the n-th *block of PDUs with the same size* in number of
octets.

**Value range:** {0-1505}, 0 -- not used.

**Field length:** 11 bits.

#### 6.2.5.27 Number of MAC-d PDUs in block n (\#PDUs in block n)

**Description:** Indicates the number of MAC-d PDUs in the n-th *block
of PDUs with the same size*.

**Value range:** {0-15}, 0 -- not used.

**Field length:** 4 bits.

#### 6.2.5.28 DRT Indicator

**Description:** Indicates whether a DRT is present.

**Value range:** {0 = DRT not present, 1= DRT present}.

**Field length:** 1 bit.

#### 6.2.5.29 FACH Indicator (FI) \[FDD and 1.28Mcps TDD\]

**Description:** Indicates whether D-RNTI and UE-ID Type Indicator are
present (i.e. whether UE in CELL\_FACH).

**Value range:** {0 = D-RNTI and UE-ID Type Indicator not present, 1=
D-RNTI and UE-ID Type Indicator present}.

**Field length:** 1 bit.

NOTE: In case FI is set to 1, PI shall be set to 0

#### 6.2.5.30 S-RNTI \[FDD and 1.28Mcps TDD\]

Void.

#### 6.2.5.31 UE-ID Type Indicator (UE-ID Type)

Void.

#### 6.2.5.32 FSN/DRT Reset

**Description:** When the Node B receives a HS-DSCH DATA FRAME where the
1-bit *FSN/DRT Reset* IE is set to 1, the Node B should reset any state
of congestion estimation based on previously received FSN and DRT
values. Node B may instead decide to start a new estimation of
congestion detection initiated with the FSN and DRT values included in
this HS-DSCH data frame. *FSN/DRT Reset* IE set to 1 may indicate a
discontinuity in the sequence of the transmitted DRT and FSN values in
the transmitted HS‑DSCH data frames belonging to the associated MAC-d
flow.

If the 1-bit *FSN/DRT Reset* IE is set to 0, Node B may use the included
DRT and FSN values for congestion detection.

**Value range:**

0 Node B may use the included DRT and FSN values for congestion
detection.

1 Node B should not use previously received FSN and DRT values for
congestion detection.

**Field length:** 1 bit.

#### 6.2.5.33 MAC-d Type 2 PDU

**Description:** A MAC-d Type 2 PDU contains the MAC-ehs SDU \[FDD and
1.28Mcps TDD -- or MAC-c SDU\] as defined in TS 25.321 \[9\].

**Field length:** For length of MAC-d Type 2 PDU of block n, see the
value of the *MAC-d PDU length in block n* IE.

#### 6.2.5.34 PCH Indicator (PI) \[FDD\]

**Description:** Indicates whether the D-RNTI and DRX Cycle Length
Coefficient are present(i.e. whether UE in CELL/URA\_PCH).

**Value range:** {0 = D-RNTI and DRX Cycle Length Coefficient not
present, 1= D-RNTI and DRX Cycle Length Coefficient present}.

**Field length:** 1 bit.

NOTE: In case PI is set to 1, FI shall be set to 0.

#### 6.2.5.35 DRX Cycle Length Coefficient \[FDD\]

**Description:** The DRX Cycle Length Coefficient is used as input for
the formula to establish the paging occasions to be used in DRX.

DRX Cycle Length Coefficient is given in the unit
DRX\_CYCLE\_LENGTH\_COEFFICIENT where:

DRX\_CYCLE\_LENGTH\_COEFFICIENT = 0 Reserved

DRX\_CYCLE\_LENGTH\_COEFFICIENT = 1 DRX Cycle Length Coefficient = 3

DRX\_CYCLE\_LENGTH\_COEFFICIENT = 2 DRX Cycle Length Coefficient = 4

\...

DRX\_CYCLE\_LENGTH\_COEFFICIENT = 6 DRX Cycle Length Coefficient = 8

DRX\_CYCLE\_LENGTH\_COEFFICIENT = 7 DRX Cycle Length Coefficient = 9

**Value range:** {3...9}.

**Field length:** 3 bits.

#### 6.2.5.36 Number of Subframes \[FDD and 1.28Mcps TDD\]

**Description:** The *Number of Subframes* field indicates how many
subframes that follows in the frame.

NOTE: A subframe has both a header portion and a payload portion in the
frame.

**Value range:** {1-16}

The binary coding is derived from the value minus 1. E.g. value 1 is
coded as binary "0000" and value 16 is coded as binary "1111".

Values {11, 12, 13, 14, 15, 16}: Reserved in this user plane revision.
Shall be ignored by the receiver.

**Field length:** 4 bits.

#### 6.2.5.37 Number of MAC-is SDU in frame \[FDD and 1.28Mcps TDD\]

**Description:** Total number of MAC-is SDUs in all MAC-is PDUs in the
E-DCH DATA FRAME.

**Value range:** {0-4095}.

**Field length:** 12 bits.

#### 6.2.5.38 Number of MAC-is PDUs \[FDD and 1.28Mcps TDD\]

**Description:** Indicates the number of MAC-is PDUs in the user data
frame in the payload part for the corresponding subframe number.

**Value range:** {0-15}

**Field length:** 4 bits.

#### 6.2.5.39 Subframe Number \[FDD and 1.28Mcps TDD\]

**Description:** Indicates the subframe number in which the payload was
received.

**Value range:** {0-4}

**Field length:** 3 bits.

#### 6.2.5.40 E-DCH User Buffer Size \[FDD and 1.28Mcps TDD\]

**Description:** Indicates the total size of the E-DCH DATA FRAME in
octets

**Value range: {0-262 140}**

**Field length:** 18 bits.

#### 6.2.5.41 MAC-is PDU descriptor \[FDD and 1.28Mcps TDD\]

**Description:** The *MAC-is PDU descriptor* contains the Length (L),
Logical channel identifier (LCH-ID) and Flag (F) fields mapped directly
from the \"MAC-i Header n\" field (n\>0) received over the Uu (TS 25.321
\[9\]).

**Field length:** variable; length of *MAC-is PDU descriptor* in octets
= 2 \* number of MAC-is SDU contained in the corresponding MAC-is PDU as
described in TS 25.321 \[9\].

#### 6.2.5.42 eDRX Indication \[FDD\]

**Description:** Indicates whether the UE in Cell\_FACH state supports
Enhanced UE DRX or not.

**Value range:** {0 = Enhanced UE DRX not supported, 1= Enhanced UE DRX
supported}.

**Field length:** 1 bit.

#### 6.2.5.43 Cell Portion LCR ID \[1.28Mcps TDD\]

**Description:** Cell Portion LCR ID indicates the cell portion with
best received quality during RACH access. Cell Portion LCR ID is
configured by O&M.

**Value range:** {0-255}.

**Field Length:** 8 bits.

#### 6.2.5.44 TS0 Indication \[1.28Mcps TDD\]

**Description:** Indicates whether the UE supports TS0 enhancement or
not.

**Value range:** {0 = Enhanced TS0 not supported, 1= Enhanced TS0
supported}.

**Field length**: 1 bit.

#### 6.2.5.45 MU-MIMO Indication(MI) \[1.28Mcps TDD\]

**Description:** Indicates whether the UE in Cell\_FACH state supports
MU-MIMO or not.

**Value range:** {0 = MU-MIMO not supported, 1= MU-MIMO supported}.

**Field length:** 1 bit.

#### 6.2.5.46 CPC Recovery (CPC Recov) \[FDD\]

**Description**: Describes if UE is CPC non-uniform related to HS-SCCH
order and CPC recovery is needed in the serving DRNS. It indicates that
the dynamic DTX/DRX (de)activation using HS-SCCH order is needed.

**Value range**: {0=no Recovery, 1=Recovery}.

**Field Length**: 1 bit.

Note: This is not applicable when HS-SCCH order is not used.

#### 6.2.5.47 FeDRX Indication \[FDD\]

**Description**: Indicates whether the UE in Cell\_FACH state supports
Further Enhanced UE DRX or not.

**Value range**: {0 = Further Enhanced UE DRX not supported, 1= Further
Enhanced UE DRX supported}.

**Field length**: 1 bit.

#### 6.2.5.48 NodeB Triggered HS-DPCCH Transmission(NTHT) \[FDD\]

**Description**: Indicates whether the UE in Cell\_FACH and CELL\_PCH
state supports NodeB Triggered HS-DPCCH Transmission or not.

**Value range**: {0 = NodeB Triggered HS-DPCCH Transmission not
supported, 1= NodeB Triggered HS-DPCCH Transmission supported}.

**Field length**: 1 bit.

#### 6.2.5.49 TTI length \[FDD\]

**Description**: Indicates which type of TTI length UE in Cell\_FACH and
Idle state is in use for 2ms/10ms concurrent deployment.

**Value range**: {0 = 2ms, 1= 10ms}.

**Field length**: 1 bit.

#### 6.2.5.50 SN, Frame Number

**Description**: SN is a sequence number assigned to each HS-DSCH data
frame by RNC and can be used by Node B to identify the set of MAC-d
PDU's sent in the frame. This is also used by RNC to indicate the
HS-DSCH data frame that the Node B can discard.

**Value range**: {0...32767}.

**Field length**: 15 bits.

#### 6.2.5.51 S/D, Store/Discard indicator

**Description**: The S/D indicator indicates if Node B can store or
discard data frame associated with SN.

**Value range**: {0 = Discard data associated with SN, 1 = Store and
associate MAC-d PDUs in the frame with SN}.

**Field length**: 1 bit

#### 6.2.5.52 Connection Frame Number (CFN)

**Description**: The CFN corresponding to the SFN of the frame in which
the payload was received on Uplink. If the payload was received in
several frames, the CFN corresponding to the last Uu frame in which the
information was received shall be indicated.

**Value range**: (other): {0..255}.

**Field length**: (other): 8 bits.

#### 6.2.5.53 CR Ind (Cell Reselection Indication)

**Description**: Indicates that the Node B may release the common E-DCH
resource due to a cell reselection indication.

**Value range**: {0 = Release common E-DCH resource not permitted due to
a cell reselection indication, 1 = Release common E-DCH resource
permitted due to a cell reselection indication}.

**Field length**: 1 bit.

#### 6.2.5.54 CRR Rec (Cell Reselection Request Received)

**Description**: Indicates that the Node B has received Cell Reselection
Request from UE or not.

**Value range**: {0 = Cell Reselection Request from UE not received, 1 =
Cell Reselection Request from UE received}.

**Field length**: 1 bit.

#### 6.2.5.55 Extended S-RNTI

**Description:** Extended S-RNTI is defined in TS 25.401 \[5\]. Extended
S-RNTI is used in UL control frames \[FDD and E-DCH data frames\] to
identify the UE context in the SRNC.

**Value range:** {0-4194303}.

**Field length:** 22 bits.

#### 6.2.5.56 Operation Preference of Common E-DCH resource Indication (OPCE Ind) \[FDD\]

**Description**: The OPCE Ind indicates there is a preference for the
DRNC's Node B to trigger acquisition of the common E-DCH resource or to
release the allocated common E-DCH resource for the particular UE. In
case of NTHT is not set or set to zero, the OPCE Ind bit is not used.

**Value range**: {0 = Preference to release the allocated common E-DCH
resource, 1 = Preference to trigger acquisition of the common E-DCH
resource}.

**Field length**: 1 bit.

6.3 Control Frame structure
---------------------------

### 6.3.1 Introduction

Control Frames are used to transport control information between SRNC
and DRNC.

Figure 13 defines the Control Frame structure for common transport
channels.

  ---------------------------- ---- --------- -------- --- --- --- --- -- --
  7                            6    5         4        3   2   1   0      
  Control Frame CRC            FT             Header                      
  Control Frame Type                                                      
  Control Information               Payload                               
                                                                          
  Control Information (cont)                                              
  ---------------------------- ---- --------- -------- --- --- --- --- -- --

Figure 13: Iur Common Transport Channel Control Frame Format

The *Control Frame Type* IE defines the type of the control frames.

The length of the payload is variable accordingly to the control frame
type.

The structure of the header and the payload of the control frames is
defined in the following subclauses.

### 6.3.2 Header structure of the control frames

#### 6.3.2.1 Control frame CRC

**Description:** Cyclic Redundancy Checksum calculated on a control
frame with polynomial X\^7+X\^6+X\^2+1. The CRC calculation shall cover
all bits in the control frame, starting from bit 0 in the first byte (FT
field) up to the end of the control frame.

**Value range:** {0-127}.

**Field length:** 7 bits.

#### 6.3.2.2 Frame type (FT)

Refer to subclause 6.2.5.2.

#### 6.3.2.3 Control Frame Type

**Description:** Indicates the type of the control information
(information elements and length) contained in the payload (=type of
control frame).

**Value:** values of the *Control Frame Type* IE parameter are defined
in the table 1.

Table 1: Control Frame Type

  ---------------------------------------------------------------------- -----------
  Type of control frame                                                  Value
  FACH Flow Control                                                      0000 0010
  FACH Capacity Request                                                  0000 0011
  DSCH Capacity Request                                                  0000 0100
  DSCH Capacity Allocation                                               0000 0101
  DL NODE SYNCHRONISATION                                                0000 0110
  UL NODE SYNCHRONISATION                                                0000 0111
  HS-DSCH Capacity Request                                               0000 1010
  HS-DSCH Capacity Allocation TYPE 1                                     0000 1011
  HS-DSCH Capacity Allocation TYPE 2                                     0000 1100
  HS-DSCH UL Synchronization Establishment Failure (1.28Mcps TDD only)   0000 1101
  HS-DSCH PDU Drop Indication                                            0000 1110
  ---------------------------------------------------------------------- -----------

### 6.3.3 Payload structure and information elements

#### 6.3.3.1 FACH FLOW CONTROL

Figure 14 shows the payload structure when the control frame is used for
the above mentioned purpose. This control information is sent in the UL
only.

+-------------------+----------------+---+---+---+---+---+---+
| 7                 | 6              | 5 | 4 | 3 | 2 | 1 | 0 |
+-------------------+----------------+---+---+---+---+---+---+
| SRNTI             |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| SRNTI (cont)      |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| SRNTI (cont)      | CmCH-PI        |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| Credits           |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
|   ------------    |                |   |   |   |   |   |   |
| ---- ------------ |                |   |   |   |   |   |   |
| - ------------- - |                |   |   |   |   |   |   |
| ------------ ---- |                |   |   |   |   |   |   |
| --------- ------- |                |   |   |   |   |   |   |
| ------ ---------- |                |   |   |   |   |   |   |
| --- ------------- |                |   |   |   |   |   |   |
|   New IE fl       |                |   |   |   |   |   |   |
| 7(E)   New IE fl  |                |   |   |   |   |   |   |
| 6   New IE fl 5   |                |   |   |   |   |   |   |
|  New IE fl 4   Ne |                |   |   |   |   |   |   |
| w IE fl 3   New I |                |   |   |   |   |   |   |
| E fl 2   New IE f |                |   |   |   |   |   |   |
| l 1   New IE fl 0 |                |   |   |   |   |   |   |
|   ------------    |                |   |   |   |   |   |   |
| ---- ------------ |                |   |   |   |   |   |   |
| - ------------- - |                |   |   |   |   |   |   |
| ------------ ---- |                |   |   |   |   |   |   |
| --------- ------- |                |   |   |   |   |   |   |
| ------ ---------- |                |   |   |   |   |   |   |
| --- ------------- |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| Extended S-RNTI   |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| Extended S-RNTI   |                |   |   |   |   |   |   |
| (cont)            |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| Extended S-RNTI   | Spare bits 1-0 |   |   |   |   |   |   |
| (cont)            |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+
| Spare Extension   |                |   |   |   |   |   |   |
+-------------------+----------------+---+---+---+---+---+---+

Figure 14: FACH FLOW CONTROL payload structure

Bit 0 of New IE Flags in FACH FLOW CONTROL FRAME indicates if the
Extended S-RNTI is present (1) or not (0). If the Extended S-RNTI is
included, the S-RNTI shall be igored by the receiver.

Bits 1 through 6 of New IE Flags in FACH FLOW CONTROL FRAME shall be set
to 0.

\[FDD - Field length of *Spare Extension* IE in FACH FLOW CONTROL FRAME
is 0-28 octets.\]

##### 6.3.3.1.1 S-RNTI

Refer to subclause 6.2.5.4.

##### 6.3.3.1.2 Common Transport Channel Priority Indicator (CmCH-PI)

Refer to subclause 6.2.5.7.

##### 6.3.3.1.3 Credits

**Description:** The *Credits* IE indicates the number of MAC-c/sh SDUs
that a user may transmit.

**Value range:** {0-255, where 0=stop transmission, 255=unlimited}.

**Field length:** 8 bits.

##### 6.3.3.1.4 Spare Extension

**Description**: Indicates the location where new IEs can in the future
be added in a backward compatible way.

**Field length**: 0-32 octets.

##### 6.3.3.1.5 Extended S-RNTI

Refer to subclause 6.2.5.55.

#### 6.3.3.2 DSCH CAPACITY REQUEST \[TDD\]

  ------------------------- ---------- --- --- --- --- --- ---
  7                         6          5   4   3   2   1   0
  Spare bits 7-4            Cm CH-PI                       
  User Buffer Size                                         
  User Buffer Size (cont)                                  
  Spare Extension                                          
  ------------------------- ---------- --- --- --- --- --- ---

Figure 15: CAPACITY REQUEST payload structure

DSCH Capacity Request is sent for each priority group to indicate the
user buffer size. The control frame is sent by the DSCH CAPACITY REQUEST
is sent for each priority group to indicate the user buffer size. The
control frame is sent by the SRNC when the SRNC considers the user
buffer status needs an increased buffer reporting frequency. This may be
sent to signal an event, such as, data arrival or user-buffer discard.
This control frame is used to improve user-buffer reporting above the
level produced by the user-buffer reporting associated with the DSCH
DATA FRAMEs.

##### 6.3.3.2.1 Common Transport Channel Priority Indicator (CmCH-PI)

Refer to subclause 6.2.5.7.

##### 6.3.3.2.2 User Buffer Size

Refer to subclause 6.2.5.12.

##### 6.3.3.2.3 Spare Extension

Refer to subclause 6.3.3.1.4.

#### 6.3.3.3 DSCH CAPACITY ALLOCATION \[TDD\]

  ---------------------------------- ---------------- --- --- --- --- --- ---
  7                                  6                5   4   3   2   1   0
  Spare bits 7-4                     Cm CH-PI                             
  Max MAC --c/sh SDU Length (cont)                                        
  Max MAC --c/sh SDU Length          Spare bits 2-0                       
  Credits                                                                 
  Interval                                                                
  Repetition Period                                                       
  Spare Extension                                                         
  ---------------------------------- ---------------- --- --- --- --- --- ---

Figure 16: CAPACITY ALLOCATION payload structure

The CAPACITY ALLOCATION Control Frame describes an allocation that the
SRNC may use. When the *Credits* IE has a value of 0 it signifies that
there is no resources allocated for transmission and to thus stop
transmission. When the *Credits* IE has a value of 255, it signifies
unlimited capacity for transmission of SDUs. When the *Repetition
Period* IE has a value of 0, it signifies that the allocation (*Maximum
MAC-c/sh SDU Length, Credits* and *Interval* IEs) can be repeated
without limit.

##### 6.3.3.3.1 Common Transport Channel Priority Indicator (CmCH-PI)

Refer to subclause 6.2.5.7.

##### 6.3.3.3.2 Maximum MAC-c/sh SDU Length

**Description:** The values indicated the maximum allowable SDU size.
MAC-c/sh SDU contains the C/T field of the MAC header followed by one
RLC PDU.

**Field length:** See the value of the *MAC-c/sh SDU Length* IE.

##### 6.3.3.3.3 Credits

**Description:** The *Credits* IE indicates the number of MAC-c/sh SDUs
that a SRNC may transmit *during one Interval* granted in the DSCH
CAPACITY ALLOCATION Control Frame.

**Value range:** Refer to subclause 6.3.3.1.3.

**Field Length:** Refer to subclause 6.3.3.1.3.

##### 6.3.3.3.4 Interval

**Description:** The value of this field indicates the time interval
during which the *Credits* granted in the DSCH CAPACITY ALLOCATION
Control Frame may be used. The first interval starts immediately after
reception of the DSCH CAPACITY ALLOCATION control frame, subsequent
intervals start immediately after the previous interval has elapsed.
This value is only applied to the DSCH transport channel.

**Value range:** {0-2550 ms}. Value 0 shall be interpreted that none of
the credits shall be used.

**Granularity:** 10ms.

**Field Length:** 8 bits.

##### 6.3.3.3.5 Repetition Period

**Description:** The value of this field indicates the number of
subsequent intervals that the *Credits* IE granted in the DSCH CAPACITY
ALLOCATION Control Frame may be used. These values represent an integer
number of Intervals (see subclause 6.3.3.3.4). This field is only
applied to the DSCH transport channel.

**Value range:** {0-255, where 0= unlimited repetition period}.

**Field Length:** 8 bits.

##### 6.3.3.3.6 Spare Extension

Refer to subclause 6.3.3.1.4.

#### 6.3.3.4 FACH CAPACITY REQUEST

Figure 17 shows the payload structure when the control frame is used for
the above mentioned purpose. This control information is sent in the DL
only.

  ------------------------- ---------- --- --- --- --- --- ---
  7                         6          5   4   3   2   1   0
  DRNTI                                                    
  DRNTI (cont)                                             
  DRNTI (cont)              CmCH -PI                       
  User Buffer Size                                         
  User Buffer Size (cont)                                  
  Spare Extension                                          
  ------------------------- ---------- --- --- --- --- --- ---

Figure 17: FACH CAPACITY REQUEST payload structure

##### 6.3.3.4.1 D-RNTI

Refer to subclause 6.2.5.3.

##### 6.3.3.4.2 Common Transport Channel Priority Indicator (CmCH-PI)

Refer to subclause 6.2.5.7.

##### 6.3.3.4.3 User Buffer Size

Refer to subclause 6.2.5.12.

##### 6.3.3.4.4 Spare extension

Refer to subclause 6.3.3.1.4.

#### 6.3.3.5 HS-DSCH CAPACITY REQUEST

  ------------------------- ---------------- ------------- ------------- ------------- ------------- ------------- -------------
  7                         6                5             4             3             2             1             0
  Spare bits 7-4            Cm CH-PI                                                                               
  User Buffer Size                                                                                                 
  User Buffer Size (cont)                                                                                          
  New IE fl 7(E)            New IE fl 6      New IE fl 5   New IE fl 4   New IE fl 3   New IE fl 2   New IE fl 1   New IE fl 0
  DRNTI                                                                                                            
  DRNTI (cont)                                                                                                     
  DRNTI (cont)              Spare bits 3-0                                                                         
  Spare Extension                                                                                                  
  ------------------------- ---------------- ------------- ------------- ------------- ------------- ------------- -------------

Figure 18: CAPACITY REQUEST payload structure

The HS-DSCH CAPACITY REQUEST control frame is sent for each priority
group to indicate the user buffer size. The control frame is sent by the
SRNC when the SRNC considers the user buffer status needs an increased
buffer reporting frequency. This may be sent to signal an event, such
as, data arrival or user-buffer discard. This control frame is used to
improve user-buffer reporting above the level produced by the
user-buffer reporting associated with the HS-DSCH DATA FRAMEs (TYPE 1 or
TYPE 2).

\[FDD and 1.28Mcps TDD - Bit 0 of New IE Flags in HS-DSCH CAPACITY
REQUEST indicates if a DRNTI is present (1) or not (0) in the 3 octets
following the *New IE Flags* IE. Bits 1 through 6 of New IE Flags in
HS-DSCH CAPACITY REQUEST shall be set to 0. Field length of *Spare
Extension* IE in HS-DSCH CAPACITY REQUEST is 0-28 octets.\]

##### 6.3.3.5.1 Common Transport Channel Priority Indicator (CmCH-PI)

**Description:** CmCH-PI, configured via the Scheduling Priority
Indicator in RNSAP (TS 25.423 \[8\]), is the relative priority of the
data frame and the SDUs included.

**Value range:** {0-15, where 0=lowest priority, 15=highest priority}.

**Field length:** 4 bits.

##### 6.3.3.5.2 User Buffer Size

Refer to subclause 6.2.5.12.

##### 6.3.3.5.3 Spare Extension

Refer to subclause 6.3.3.1.4.

##### 6.3.3.5.4 DRNTI \[FDD\]

Refer to subclause 6.2.5.3.

#### 6.3.3.6 HS-DSCH CAPACITY ALLOCATION

Two types of HS-DSCH CAPACITY ALLOCATION Control Frames exist for the
HS-DSCH capacity allocation, i.e. HS-DSCH CAPACITY ALLOCATION TYPE 1
Control Frame and HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame.

+------------------------------+-------------------+----------+---+---+---+---+---+
| 7                            | 6                 | 5        | 4 | 3 | 2 | 1 | 0 |
+------------------------------+-------------------+----------+---+---+---+---+---+
| Spare                        | Congestion Status | Cm CH-PI |   |   |   |   |   |
|                              |                   |          |   |   |   |   |   |
| bits 7-6                     |                   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+
| Max MAC --d PDU Length       |                   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+
| Max MAC --d PDU Length(cont) | HS-DSCH Credits   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+
| HS-DSCH Credits (cont)       |                   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+
| HS-DSCH Interval             |                   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+
| HS-DSCH Repetition Period    |                   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+
| Spare Extension              |                   |          |   |   |   |   |   |
+------------------------------+-------------------+----------+---+---+---+---+---+

Figure 19: CAPACITY ALLOCATION TYPE 1 payload structure

The CAPACITY ALLOCATION TYPE 1 Control Frame describes an allocation
that the SRNC may use. When the *HS-DSCH Credits* IE has a value of 0 it
signifies that there is no resources allocated for transmission and to
thus stop transmission. When the *HS-DSCH Credits* IE has a value of
2047, it signifies unlimited capacity for transmission of PDUs. When the
*HS-DSCH Repetition Period* IE has a value of 0, it signifies that the
allocation (*Maximum MAC-d PDU Length, HS-DSCH Credits* and *HS-DSCH
Interval* IEs) can be repeated without limit. In addition to this the
CAPACITY ALLOCATION TYPE 1 Control Frame may inform the SRNC about the
detection of congestion in the DL transport network layer with the
*Congestion Status* Bits.

+-------------+-------------+-------------+---+---+---+---+---+
| 7           | 6           | 5           | 4 | 3 | 2 | 1 | 0 |
+-------------+-------------+-------------+---+---+---+---+---+
| Spare       | Congestion  | Cm CH-PI    |   |   |   |   |   |
|             | Status      |             |   |   |   |   |   |
| bits 7-6    |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| Spare bits  | SRNTI       | Max MAC --d |   |   |   |   |   |
| 7-4         | Indicator   | PDU         |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| Max MAC --d |             |             |   |   |   |   |   |
| PDU Length  |             |             |   |   |   |   |   |
| Type        |             |             |   |   |   |   |   |
| 2(cont)     |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| HS-DSCH     |             |             |   |   |   |   |   |
| Credits     |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| HS-DSCH     |             |             |   |   |   |   |   |
| Credits     |             |             |   |   |   |   |   |
| (cont)      |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| HS-DSCH     |             |             |   |   |   |   |   |
| Interval    |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| HS-DSCH     |             |             |   |   |   |   |   |
| Repetition  |             |             |   |   |   |   |   |
| Period      |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| S-RNTI      |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| S-RNTI      |             |             |   |   |   |   |   |
| (cont)      |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| S-RNTI      | Spare bits  |             |   |   |   |   |   |
| (cont)      | 3-0         |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
|   ----      |             |             |   |   |   |   |   |
| ----------- |             |             |   |   |   |   |   |
| - --------- |             |             |   |   |   |   |   |
| ---- ------ |             |             |   |   |   |   |   |
| ------- --- |             |             |   |   |   |   |   |
| ----------  |             |             |   |   |   |   |   |
| ----------- |             |             |   |   |   |   |   |
| -- -------- |             |             |   |   |   |   |   |
| ----- ----- |             |             |   |   |   |   |   |
| -------- -- |             |             |   |   |   |   |   |
| ----------- |             |             |   |   |   |   |   |
|   Ne        |             |             |   |   |   |   |   |
| w IE fl 7(E |             |             |   |   |   |   |   |
| )   New IE  |             |             |   |   |   |   |   |
| fl 6   New  |             |             |   |   |   |   |   |
| IE fl 5   N |             |             |   |   |   |   |   |
| ew IE fl 4  |             |             |   |   |   |   |   |
|   New IE fl |             |             |   |   |   |   |   |
|  3   New IE |             |             |   |   |   |   |   |
|  fl 2   New |             |             |   |   |   |   |   |
|  IE fl 1    |             |             |   |   |   |   |   |
| New IE fl 0 |             |             |   |   |   |   |   |
|   ----      |             |             |   |   |   |   |   |
| ----------- |             |             |   |   |   |   |   |
| - --------- |             |             |   |   |   |   |   |
| ---- ------ |             |             |   |   |   |   |   |
| ------- --- |             |             |   |   |   |   |   |
| ----------  |             |             |   |   |   |   |   |
| ----------- |             |             |   |   |   |   |   |
| -- -------- |             |             |   |   |   |   |   |
| ----- ----- |             |             |   |   |   |   |   |
| -------- -- |             |             |   |   |   |   |   |
| ----------- |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| Extended    |             |             |   |   |   |   |   |
| S-RNTI      |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| Extended    |             |             |   |   |   |   |   |
| S           |             |             |   |   |   |   |   |
| -RNTI(cont) |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| Extended    | Spare bits  |             |   |   |   |   |   |
| S           | 1-0         |             |   |   |   |   |   |
| -RNTI(cont) |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+
| Spare       |             |             |   |   |   |   |   |
| Extension   |             |             |   |   |   |   |   |
+-------------+-------------+-------------+---+---+---+---+---+

Figure 20: CAPACITY ALLOCATION TYPE 2 payload structure

The CAPACITY ALLOCATION TYPE 2 Control Frame describes an allocation
that the SRNC may use. When the *HS-DSCH Credits* IE has a value of 0 it
signifies that there is no resources allocated for transmission and to
thus stop transmission. When the *HS-DSCH Credits* IE has a value of
65535, it signifies unlimited capacity for transmission of PDUs. When
the *HS-DSCH Repetition Period* IE has a value of 0, it signifies that
the allocation (*Maximum MAC-d PDU Length Type 2, HS-DSCH Credits* and
*HS-DSCH Interval* IEs) can be repeated without limit. In addition to
this the CAPACITY ALLOCATION TYPE 2 Control Frame may inform the SRNC
about the detection of congestion in the DL transport network layer with
the *Congestion Status* Bits.

Bit 0 of New IE Flags in CAPACITY ALLOCATION TYPE 2 FRAME indicates if
the *Extended S-RNTI* IE is present (1) or not (0). If the *Extended
S-RNTI* IE is included, the *S-RNTI* IE shall be igored by the receiver.

Bits 1 through 6 of New IE Flags in CAPACITY ALLOCATION TYPE 2 FRAME
shall be set to 0.

\[FDD - Field length of *Spare Extension* IE in CAPACITY ALLOCATION TYPE
2 FRAME is 0-28 octets.\]

##### 6.3.3.6.1 Common Transport Channel Priority Indicator (CmCH-PI)

Refer to subclause 6.2.5.7.

##### 6.3.3.6.2 Maximum MAC-d PDU Length

**Description:** The *Maximum MAC-d PDU Length* IE is used in HS-DSCH
CAPACITY ALLOCATION TYPE 1 Control Frame. The value indicates the
maximum allowable PDU size among the MAC-d PDU sizes configured via
RNSAP (TS 25.423 \[8\]).

**Value range:** Refer to subclause 6.2.5.16.

**Field length:** Refer to subclause 6.2.5.16.

##### 6.3.3.6.3 HS-DSCH Credits

**Description:** The *HS-DSCH Credits* IE is used in HS-DSCH CAPACITY
ALLOCATION (TYPE 1 and TYPE 2) Control Frame. It is used to indicate the
granted amount of MAC-d PDU data that a SRNC may transmit during one
HS-DSCH Interval.

In case of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame, it
indicates the number of MAC-d PDU that a SRNC may transmit *during one
HS-DSCH Interval* granted in the HS-DSCH CAPACITY ALLOCATION TYPE 1
Control Frame.

In case of HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame, the granted
amount of MAC-d PDU data in octets is obtained by multiplying the
maximum MAC-d PDU length (indicated by the *Maximum* *MAC-d PDU Length
Type 2* IE) with the number of MAC-d PDUs (indicated by the *HS-DSCH
Credits* IE).

**Value range:** {0-2047, where 0=stop transmission, 2047=unlimited} in
case of HS-DSCH CAPACITY ALLOCATION TYPE 1 Control Frame, {0-65535,
where 0=stop transmission, 65535=unlimited} in case of HS-DSCH CAPACITY
ALLOCATION TYPE 2 Control Frame.

**Field length:** 11 bits in case of HS-DSCH CAPACITY ALLOCATION TYPE 1
Control Frame, 16 bits in case of HS-DSCH CAPACITY ALLOCATION TYPE 2
Control Frame.

##### 6.3.3.6.4 HS-DSCH Interval

**Description:** The value of this field indicates the time interval
during which the *HS-DSCH Credits* IE granted in the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) Control Frame may be used. The first
interval starts immediately after reception of the HS-DSCH CAPACITY
ALLOCATION (TYPE 1 or TYPE 2) control frame, subsequent intervals start
immediately after the previous interval has elapsed. This value is only
applied to the HS-DSCH transport channel.

**Value range:** {0-2550 ms}. Value 0 shall be interpreted that none of
the credits shall be used.

**Granularity:** 10ms.

**Field Length:** 8 bits.

##### 6.3.3.6.5 HS-DSCH Repetition Period

**Description:** The value of this field indicates the number of
subsequent intervals that the *HS-DSCH Credits* IE granted in the
HS-DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame may be
used. These values represent an integer number of Intervals (see
subclause 6.3.3.6.4). This field is only applied to the HS-DSCH
transport channel.

**Value range:** {0-255, where 0= unlimited repetition period}.

**Field Length:** 8 bits.

##### 6.3.3.6.8 Spare Extension

Refer to subclause 6.3.3.1.4.

##### 6.3.3.6.9 Congestion Status

**Description:** The *Congestion Status* Bits are used by the DRNC to
indicate a congestion status received. The DRNC provides the congestion
status in HS-DSCH CAPACITY ALLOCATION (TYPE 1 or TYPE 2) Control Frame
when it has been received towards the SRNC.

**Value range:**

0 No TNL Congestion

1 Reserved for future use

2 TNL Congestion -- detected by delay build-up

3 TNL Congestion -- detected by frame loss

**Field Length:** 2 bits.

##### 6.3.3.6.10 SRNTI Indicator \[FDD and 1.28Mcps TDD\]

**Description:** Indicates whether S-RNTI is present.

**Value range:** {0 = S-RNTI not present, 1= S-RNTI present or Extended
S-RNTI present}.

**Field length:** 1 bit.

##### 6.3.3.6.11 S-RNTI \[FDD and 1.28Mcps TDD\]

Refer to subclause 6.2.5.4.

##### 6.3.3.6.12 Maximum MAC-d PDU Length Type 2

**Description:** The *Maximum MAC-d PDU Length Type 2* IE is used in
HS-DSCH CAPACITY ALLOCATION TYPE 2 Control Frame. The value is a factor
in the granted amount of MAC-d PDU data that a SRNC may transmit during
one HS-DSCH Interval. The amount of MAC-d PDU data in octets is obtained
by multiplying the MACd PDU length (indicated by the *Maximum MAC-d PDU
Length Type 2* IE) with the number of MAC-d PDUs (indcated by the
HS-DSCH Credits IE).

**Value range:** {0-1505}, 0 -- not used.

**Field length:** 11 bits.

##### 6.3.3.6.13 Extended S-RNTI \[FDD\]

Refer to subclause 6.2.5.55.

#### 6.3.3.7 DL NODE SYNCHRONISATION

##### 6.3.3.7.1 Payload structure

Figure 21 shows the structure of the payload for the DL NODE
SYNCHRONISATION control frame.

  ----------------- --- --- --- --- --- --- ---
  7                 6   5   4   3   2   1   0
  T1                                        
  T1 (cont)                                 
  T1 (cont)                                 
  Spare Extension                           
  ----------------- --- --- --- --- --- --- ---

Figure 21: Structure of the payload for the DL NODE SYNCHRONISATION
control frame

##### 6.3.3.7.2 T1

**Description:** RNC specific frame number (RFN) that indicates the time
when RNC sends the frame through the SAP to the transport layer.

**Value range:** {0-40959.875 ms}.

**Field length:** 24 bits.

##### 6.3.3.7.3 Spare Extension

The *Spare Extension* IE is described in subclause 6.3.3.1.4.

#### 6.3.3.8 UL NODE SYNCHRONISATION

##### 6.3.3.8.1 Payload structure

The payload of the UL NODE SYNCHRONISATION control frames is shown in
figure 22.

  ----------------- --- --- --- --- --- --- ---
  7                 6   5   4   3   2   1   0
  T1                                        
  T1 (cont)                                 
  T1 (cont)                                 
  T2                                        
  T2 (cont)                                 
  T2 (cont)                                 
  T3                                        
  T3 (cont)                                 
  T3 (cont)                                 
  Spare Extension                           
  ----------------- --- --- --- --- --- --- ---

Figure 22: Structure of the payload for UL NODE SYNCHRONISATION control
frame

##### 6.3.3.8.2 T1

**Description:** T1 timer is extracted from the correspondent DL NODE
SYNCHRONISATION control frame.

**Value range:** {0-40959.875 ms}.

**Granularity:** 0.125 ms.

**Field length:** 24 bits.

##### 6.3.3.8.3 T2

**Description:** Node B specific frame number (BFN) that indicates the
time when Node B received the correspondent DL NODE SYNCHRONISATION
control frame through the SAP from the transport layer.

**Value range:** {0-40959.875 ms}.

**Granularity:** 0.125 ms.

**Field length:** 24 bits.

##### 6.3.3.8.4 T3

**Description:** Node B specific frame number (BFN) that indicates the
time when Node B sends the frame through the SAP to the transport layer.

**Value range:** {0-40959.875 ms}.

**Granularity:** 0.125 ms.

**Field length:** 24 bits.

##### 6.3.3.8.5 Spare Extension

The *Spare Extension* IE is described in subclause 6.3.3.1.4.

#### 6.3.3.9 HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE \[1.28Mcps TDD\]

##### 6.3.3.9.1 Payload structure

The payload of the HS-DSCH UL Synchronization Establishment Failure
control frames is shown in figure 23.

  ----------------- ---------------- --- --- --- --- --- ---
  7                 6                5   4   3   2   1   0
  S-RNTI                                                 
  S-RNTI (cont)                                          
  S-RNTI (cont)     Spare bits 3-0                       
  Spare Extension                                        
  ----------------- ---------------- --- --- --- --- --- ---

Figure 23: HS-DSCH UL SYNCHRONIZATION ESTABLISHMENT FAILURE payload
structure

##### 6.3.3.9.2 S-RNTI

Refer to subclause 6.2.5.4.

#### 6.3.3.10 HS-DSCH PDU DROP INDICATION

##### 6.3.3.10.1 Payload structure

The payload of the HS-DSCH PDU Drop Indication control frame is shown in
figure 24.

  ------------------------ ------------- --- --- --- --- --- ---
  7                        6             5   4   3   2   1   0
  Spare bits 7-3           Drop Reason                       
  Number of PDUs Dropped                                     
  SN 1                                                       
  SN 1 (cont)              Spare                             
  PDU 1 index                                                
                                                             
  SN N                                                       
  SN N(cont)               Spare                             
  PDU N Index                                                
  Spare Extension                                            
  ------------------------ ------------- --- --- --- --- --- ---

Figure 24: HS-DSCH PDU DROP INDICATION payload structure

##### 6.3.3.10.2 Drop Reason

**Description:** The *Drop Reason* IE is used in HS-DSCH PDU DROP
INDICATION Control Frame. It indicates the reason of drop of HS-DSCH
PDUs in DRNS.

**Value range:**

0 too long delay in MAC-hs/ehs buffer

1 unsuccessful HARQ due to T1 timer expiry

2 TNL Congestion -- detected by frame loss

3 to 7 are reserved

**Field length:** 3 bits

##### 6.3.3.10.3 PDU Index

**Description:** The *PDU Index* IE identifies the PDU Index in the
HS-DSCH DATA FRAME.

**Value range:** {0-255}

**Field length:** 8 bits

7 Handling of Unknown, Unforeseen and Erroneous Protocol Data
=============================================================

7.1 General
-----------

A Frame Protocol frame with an unknown IE or an illegal IE value shall
be ignored.

######## Annex A (informative): Change History

  ------------ -------------- -------- --------- --------------------------------------------------------------------------------------------------------------------- ---------
  **TSG \#**   **TSG Doc.**   **CR**   **Rev**   **Subject/Comment**                                                                                                   **New**
  09/2008      \-             \-       \-        Creation of Rel-8 version based on v 7.8.0                                                                            8.0.0
  41           RP-080587      0129     1         Introduction of frame formats supporting E-DCH for CELL\_FACH and Idle over Iur                                       8.0.0
  41           RP-080588      0131               Introduction of Enhanced UE DRX                                                                                       8.0.0
  42           RP-080850      0133     1         Introduction of the Enhanced CELL\_FACH, CELL\_PCH, URA\_PCH state for 1.28Mcps TDD                                   8.1.0
  42           RP-080837      0136               Correction of CR127, adding codepoints for the new control frames                                                     8.1.0
  42           RP-080858      0137               Corrections to IE definitions for E-DCH DATA FRAME and \"Definitions\" chapter                                        8.1.0
  43           RP-090073      0139     1         Correction of handling of Capacity Allocation and HS-DSCH Credits                                                     8.2.0
  44           RP-090630      0141               Correction of the value range of MAC PDU Size Extended IE in CCH FP Iur                                               8.3.0
  46           RP-091181      0145               Correction on value range for Number of MAC-is SDU in frame                                                           8.4.0
  46           RP-091180      0146     1         Correction to the NodeB procedure when receiving uplink synchronization failure from physical layer for 1.28Mcp TDD   8.4.0
  12/2009      \-             \-       \-        Creation of Rel-9 version based on v. 8.4.0                                                                           9.0.0
  46           RP-091188      0143               Introduction of Cell Portion for 1.28 Mcps TDD                                                                        9.0.0
  47           RP-100229      0147     \-        Corrections to the TS0 enhancement for the UE in CELL\_FACH state for 1.28Mcps TDD                                    9.1.0
  47           RP-100217      0149     \-        Clarification of eDRX Indication for 1.28Mcp TDD                                                                      9.1.0
  12/2010                                        Creation of Rel-10 version based on v. 9.1.0                                                                          10.0.0
  50           RP-101277      0150               Introduction of MU-MIMO to CTCH of Iur user plane                                                                     10.0.0
  SP-49        SP-100629                         Clarification on the use of References (TS 21.801 CR\#0030)                                                           10.0.1
  52           RP-110684      0155               Correction of references                                                                                              10.1.0
  52           RP-110681      0157               Correction of Logical Channel ID range used in Enhanced Cell-FACH                                                     10.1.0
  52           RP-110688      0158               Correction to mapping of MAC-is SDU to MAC-d PDU                                                                      10.1.0
  54           RP-111645      0162               Indicator for DTXDRX HS-SCCH order                                                                                    10.2.0
  09/2012                                        Update to Rel-11 version (MCC)                                                                                        11.0.0
  58           RP-121725      0165               Introduction of Further Enhancements to CELL\_FACH feature                                                            11.1.0
  58           RP-121727      0166     2         Supporting Multiflow Operation                                                                                        11.1.0
  58           RP-121725      0167     1         2nd DRX cycle and fallback to PRACH R99                                                                               11.1.0
  59           RP-130206      0169     1         Clean-up for Multiflow                                                                                                11.2.0
  60           RP-130643      0171               Correction of Spare bit allocation                                                                                    11.3.0
  06/2014                                        Update to Rel-12 version (MCC)                                                                                        12.0.0
  64           RP-140875      0180     3         Introduction of Cell Reselection indications                                                                          12.0.0
  65           RP-141608      0181     2         Rapporteur Review -- change figures to table style                                                                    12.1.0
  66           RP-142083      0186     1         Correction: add Extended S-RNTI in the Iur user plane                                                                 12.2.0
  70           RP-152090      0187     2         Introduction of IDLE to CONNECTED mode transition optimization                                                        13.0.0
  ------------ -------------- -------- --------- --------------------------------------------------------------------------------------------------------------------- ---------

  -------------------- ------------- ---------- -------- --------- --------- -------------------------------------------------- -----------------
  **Change history**                                                                                                            
  **Date**             **Meeting**   **TDoc**   **CR**   **Rev**   **Cat**   **Subject/Comment**                                **New version**
  2017-03              SA\#75                                                Promotion to Release 14 without technical change   14.0.0
  2018-07              SA\#80        \-         \-       \-        \-        Promotion to Release 15 without technical change   15.0.0
  2020-07              \-            \-         \-       \-        \-        Update to Rel-16 version (MCC)                     **16.0.0**
  -------------------- ------------- ---------- -------- --------- --------- -------------------------------------------------- -----------------
