![](media/image1.jpeg){width="1.6979166666666667in"
height="0.8645833333333334in"}

Contents {#contents .TT}
========

[5](#foreword)

[6](#scope)

[6](#references)

[6](#symbols-abbreviations-and-definitions)

[6](#symbols)

[6](#abbreviations)

[7](#definitions)

[8](#uplink-spreading-and-modulation)

[8](#overview)

[8](#spreading)

[8](#dedicated-physical-channels)

[10](#dpcchdpdch)

[12](#hs-dpcch)

[13](#e-dpdche-dpcch)

[21](#s-dpcch)

[21](#s-dpcch-gain-factor-setting-while-not-transmitting-rank-2)

[22](#s-dpcch-gain-factor-setting-while-transmitting-rank-2)

[22](#s-e-dpcch)

[23](#s-e-dpdch)

[24](#dpcch2)

[25](#prach)

[25](#prach-preamble-part)

[25](#prach-message-part)

[25](#void)

[25](#channel-combining-for-ul-cltd-and-ul-mimo)

[26](#code-generation-and-allocation)

[26](#channelisation-codes)

[26](#code-definition)

[27](#code-allocation-for-dedicated-physical-channels)

[27](#code-allocation-for-dpcch-s-dpcchdpdchdpcch2)

[28](#code-allocation-for-hs-dpcch-when-the-ue-is-not-configured-in-mimo-mode-with-four-transmit-antennas-in-any-cell)

[29](#a-code-allocation-for-hs-dpcch-when-the-ue-is-configured-in-mimo-mode-with-four-transmit-antennas-in-at-least-one-cell)

[30](#code-allocation-for-e-dpcche-dpdch)

[31](#code-allocation-for-s-e-dpcchs-e-dpdch)

[31](#code-allocation-for-prach-message-part)

[31](#void-1)

[31](#void-2)

[31](#scrambling-codes)

[31](#general)

[32](#long-scrambling-sequence)

[33](#short-scrambling-sequence)

[34](#dedicated-physical-channels-scrambling-code)

[34](#prach-message-part-scrambling-code)

[35](#void-3)

[35](#void-4)

[35](#prach-preamble-codes)

[35](#preamble-code-construction)

[35](#preamble-scrambling-code)

[35](#preamble-signature)

[36](#void-5)

[36](#modulation)

[36](#modulating-chip-rate)

[36](#modulation-1)

[37](#downlink-spreading-and-modulation)

[37](#spreading-1)

[37](#modulation-mapper)

[37](#qpsk)

[38](#qam)

[38](#qam-1)

[39](#channelisation)

[39](#iq-combining)

[39](#scrambling)

[39](#channel-combining)

[40](#code-generation-and-allocation-1)

[40](#channelisation-codes-1)

[41](#scrambling-code)

[43](#synchronisation-codes)

[43](#code-generation)

[43](#code-allocation-of-ssc)

[45](#modulation-2)

[45](#modulating-chip-rate-1)

[45](#modulation-3)

[46](#annex-a-informative-generalised-hierarchical-golay-sequences)

[46](#a.1-alternative-generation)

[47](#annex-b-informative-uplink-modulation-for-operation-on-adjacent-frequencies)

[48](#annex-b1-informative-uplink-modulation-for-ul-cltd)

[49](#annex-b2-informative-uplink-modulation-for-operation-on-dual-band-frequencies)

[50](#annex-c-informative-change-history)Foreword 1 Scope 2 References 3
Symbols, abbreviations and definitions 3.1 Symbols 3.2 Abbreviations 3.3
Definitions 4 Uplink spreading and modulation 4.1 Overview 4.2 Spreading
4.2.1 Dedicated physical channels 4.2.1.1 DPCCH/DPDCH 4.2.1.2 HS-DPCCH
4.2.1.3 E-DPDCH/E-DPCCH 4.2.1.4 S-DPCCH 4.2.1.4.1 S-DPCCH gain factor
setting while not transmitting rank-2 4.2.1.4.2 S-DPCCH gain factor
setting while transmitting rank-2 4.2.1.5 S-E-DPCCH 4.2.1.6 S-E-DPDCH
4.2.1.7 DPCCH2 4.2.2 PRACH 4.2.2.1 PRACH preamble part 4.2.2.2 PRACH
message part 4.2.3 Void 4.2.4 Channel combining for UL CLTD and UL MIMO
4.3 Code generation and allocation 4.3.1 Channelisation codes 4.3.1.1
Code definition 4.3.1.2 Code allocation for dedicated physical channels
4.3.1.2.1 Code allocation for DPCCH/ S-DPCCH/DPDCH/DPCCH2 4.3.1.2.2 Code
allocation for HS-DPCCH when the UE is not configured in MIMO mode with
four transmit antennas in any cell 4.3.1.2.2A Code allocation for
HS-DPCCH when the UE is configured in MIMO mode with four transmit
antennas in at least one cell 4.3.1.2.3 Code allocation for
E-DPCCH/E-DPDCH 4.3.1.2.4 Code allocation for S-E-DPCCH/S-E-DPDCH
4.3.1.3 Code allocation for PRACH message part 4.3.1.4 Void 4.3.1.5 Void
4.3.2 Scrambling codes 4.3.2.1 General 4.3.2.2 Long scrambling sequence
4.3.2.3 Short scrambling sequence 4.3.2.4 Dedicated physical channels
scrambling code 4.3.2.5 PRACH message part scrambling code 4.3.2.6 Void
4.3.2.7 Void 4.3.3 PRACH preamble codes 4.3.3.1 Preamble code
construction 4.3.3.2 Preamble scrambling code 4.3.3.3 Preamble signature
4.3.4 Void 4.4 Modulation 4.4.1 Modulating chip rate 4.4.2 Modulation 5
Downlink spreading and modulation 5.1 Spreading 5.1.1 Modulation mapper
5.1.1.1 QPSK 5.1.1.2 16QAM 5.1.1.3 64QAM 5.1.2 Channelisation 5.1.3 IQ
combining 5.1.4 Scrambling 5.1.5 Channel combining 5.2 Code generation
and allocation 5.2.1 Channelisation codes 5.2.2 Scrambling code 5.2.3
Synchronisation codes 5.2.3.1 Code generation 5.2.3.2 Code allocation of
SSC 5.3 Modulation 5.3.1 Modulating chip rate 5.3.2 Modulation Annex A
(informative): Generalised Hierarchical Golay Sequences A.1 Alternative
generation Annex B (informative): Uplink modulation for operation on
adjacent frequencies Annex B1 (informative): Uplink modulation for UL
CLTD Annex B2 (informative): Uplink modulation for operation on dual
band frequencies Annex C (informative): Change history

Foreword
========

This Technical Specification (TS) has been produced by the 3^rd^
Generation Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

1 Scope
=======

The present document describes spreading and modulation for UTRA
Physical Layer FDD mode.

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] 3GPP TS 25.201: \"Physical layer - general description\".

\[2\] 3GPP TS 25.211: \"Physical channels and mapping of transport
channels onto physical channels (FDD).\"

\[3\] 3GPP TS 25.101: \"UE Radio transmission and Reception (FDD)\".

\[4\] 3GPP TS 25.104: \"UTRA (BS) FDD; Radio transmission and
Reception\".

\[5\] 3GPP TS 25.308: \"UTRA High Speed Downlink Packet Access (HSDPA);
Overall description\".

\[6\] 3GPP TS 25.214: \"Physical layer procedures (FDD)\".

\[7\] 3GPP TS 25.212: \"Multiplexing and channel coding (FDD)\".

3 Symbols, abbreviations and definitions
========================================

3.1 Symbols
-----------

For the purposes of the present document, the following symbols apply:

C~ch,SF,n~: n:th channelisation code with spreading factor SF

C~pre,n,s~: PRACH preamble code for *n*:th preamble scrambling code and
signature *s*

C~sig,s~: PRACH signature code for signature *s*

S~dpch,n~: *n*:th DPCCH/DPDCH uplink scrambling code

S~r-pre,n~: *n*:th PRACH preamble scrambling code

S~r-msg,n~: *n*:th PRACH message scrambling code

S~dl,n~: DL scrambling code

C~psc~: PSC code

C~ssc,n~: n:th SSC code

3.2 Abbreviations
-----------------

For the purposes of the present document, the following abbreviations
apply:

16QAM 16 Quadrature Amplitude Modulation

4PAM 4 Pulse Amplitude Modulation

64QAM 64 Quadrature Amplitude Modulation

8PAM 8 Pulse Amplitude Modulation

AICH Acquisition Indicator Channel

BCH Broadcast Channel

CCPCH Common Control Physical Channel

CLTD Closed Loop Transmit Diversity

CPICH Common Pilot Channel

DCH Dedicated Channel

DPCH Dedicated Physical Channel

DPCCH Dedicated Physical Control Channel

DPCCH2 Dedicated Physical Control Channel 2

DPDCH Dedicated Physical Data Channel

E-AGCH E-DCH Absolute Grant Channel

E-DPCCH E-DCH Dedicated Physical Control Channel

E-DPDCH E-DCH Dedicated Physical Data Channel

E-HICH E-DCH Hybrid ARQ Indicator Channel

E-RGCH E-DCH Relative Grant Channel

E-ROCH E-DCH Rank and Offset Channel

FDD Frequency Division Duplex

F-DPCH Fractional Dedicated Physical Channel

F-TPICH Fractional Transmitted Precoding Indicator Channel

HS-DPCCH Dedicated Physical Control Channel (uplink) for HS-DSCH

HS-DPCCH~2~ Secondary Dedicated Physical Control Channel (uplink) for
HS-DSCH, when Secondary\_Cell\_Enabled is greater than 3

HS-DSCH High Speed Downlink Shared Channel

HS-PDSCH High Speed Physical Downlink Shared Channel

HS-SCCH Shared Control Physical Channel for HS-DSCH

MBSFN MBMS over a Single Frequency Network

Mcps Mega Chip Per Second

MICH MBMS Indication Channel

OVSF Orthogonal Variable Spreading Factor (codes)

TPI Transmitted Precoding Indicator

PICH Page Indication Channel

PRACH Physical Random Access Channel

PSC Primary Synchronisation Code

RACH Random Access Channel

SCH Synchronisation Channel

S-DPCCH Secondary Dedicated Physical Control Channel

S-E-DPCCH Secondary Dedicated Physical Control Channel for E-DCH

S-E-DPDCH Secondary Dedicated Physical Data Channel for E-DCH

SSC Secondary Synchronisation Code

SF Spreading Factor

UE User Equipment

3.3 Definitions
---------------

**Activated uplink frequency:** For a specific UE, an uplink frequency
is said to be activated if the UE is allowed to transmit on that
frequency. The primary uplink frequency is always activated when
configured while a secondary uplink frequency has to be activated by
means of an HS-SCCH order in order to become activated. Similarly, for a
specific UE, an uplink frequency is said to be deactivated if it is
configured but disallowed by the NodeB to transmit on that frequency.

**Configured uplink frequency**: For a specific UE, an uplink frequency
is said to be configured if the UE has received all relevant information
from higher layers in order to perform transmission on that frequency.

**Primary uplink frequency:** If a single uplink frequency is configured
for the UE, then it is the *primary uplink frequency*. In case more than
one uplink frequency is configured for the UE, then the primary uplink
frequency is the frequency on which the E-DCH corresponding to the
serving E-DCH cell associated with the serving HS-DSCH cell is
transmitted. The association between a pair of uplink and downlink
frequencies is indicated by higher layers.

**Secondary uplink frequency:** A *secondary uplink frequency* is a
frequency on which an E-DCH corresponding to a serving E-DCH cell
associated with a secondary serving HS-DSCH cell is transmitted. The
association between a pair of uplink and downlink frequencies is
indicated by higher layers.

4 Uplink spreading and modulation
=================================

4.1 Overview
------------

Spreading is applied to the physical channels. It consists of two
operations. The first is the channelisation operation, which transforms
every data symbol into a number of chips, thus increasing the bandwidth
of the signal. The number of chips per data symbol is called the
Spreading Factor (SF). The second operation is the scrambling operation,
where a scrambling code is applied to the spread signal.

With the channelisation, data symbols on so-called I- and Q-branches are
independently multiplied with an OVSF code. With the scrambling
operation, the resultant signals on the I- and Q-branches are further
multiplied by complex-valued scrambling code, where I and Q denote real
and imaginary parts, respectively.

4.2 Spreading
-------------

### 4.2.1 Dedicated physical channels

The possible combinations of the maximum number of respective dedicated
physical channels which may be configured simultaneously for a UE in
addition to the DPCCH are specified in table 0. The actual UE capability
may be lower than the values specified in table 0; the actual dedicated
physical channel configuration is indicated by higher layer signalling.
The actual number of configured DPDCHs, denoted N~max‑dpdch~, is equal
to the largest number of DPDCHs from all the TFCs in the TFCS.
N~max‑dpdch~ is not changed by frame-by-frame TFCI change or temporary
TFC restrictions.

Table 0: Maximum number of simultaneously-configured uplink dedicated
channels

  -------- ----------------------------------- ------------------------------------------------------------------------ ------------------------------------------------------------------------ ------------------------ --------------- ---------------
           **DPDCH**                           **HS-DPCCH**                                                             **E-DPDCH**                                                              **E-DPCCH**              **S-E-DPDCH**   **S-E-DPCCH**
  Case 1   6                                   1                                                                        \-                                                                       \-                       \-              \-
  Case 2   1                                   1                                                                        2                                                                        1                        \-              \-
  Case 3   \-                                  1 on the primary uplink frequency, 0 on any secondary uplink frequency   4 per uplink frequency                                                   1 per uplink frequency   \-              \-
  Case 4   1                                   2                                                                        2                                                                        1                        \-              \-
  Case 5   \-                                  2 on the primary uplink frequency, 0 on any secondary uplink frequency   4 per uplink frequency                                                   1 per uplink frequency   \-              \-
  Case 6   \-                                  2                                                                        4                                                                        1                        4               1
  Case X   1 on the primary uplink frequency   2 on the primary uplink frequency, 0 on any secondary uplink frequency   2 on the primary uplink frequency, 4 on the secondary uplink frequency   1 per uplink frequency   \-              \-
  -------- ----------------------------------- ------------------------------------------------------------------------ ------------------------------------------------------------------------ ------------------------ --------------- ---------------

Figure 1 illustrates the principle of the spreading of uplink dedicated
physical channels (DPCCH, DPDCHs, HS-DPCCH, DPCCH2, E-DPCCH, E-DPDCHs,
S-E-DPCCH). Figure 1.1 illustrates the principle of the spreading of
uplink S-DPCCH and S-E-DPDCHs.

In case of BPSK modulation , the binary input sequences of all physical
channels are converted to real valued sequences, i.e. the binary value
\"0\" is mapped to the real value +1, the binary value \"1\" is mapped
to the real value --1, and the value \"DTX\" (HS-DPCCH only) is mapped
to the real value 0.

In case of 4PAM modulation, the binary input sequences of all E-DPDCH
and S-E-DPDCH physical channels are converted to real valued sequences,
i.e. a set of two consecutive binary symbols *n~k~*, *n~k+1~* (with *k*
mod 2 = 0) in each binary sequence is converted to a real valued
sequence following the mapping described in Table 0A.

In case of 8PAM modulation, the binary input sequences of all E-DPDCH
and S-E-DPDCH physical channels are converted to real valued sequences,
i.e. a set of three consecutive binary symbols *n~k~*, *n~k+1~*,
*n~k+2~* (with *k* mod 3 = 0) in each binary sequence is converted to a
real valued sequence following the mapping described in Table 0B.

Table 0A: Mapping of E-DPDCH and S-E-DPDCH\
with 4PAM modulation

  ---------------------- -----------------------
  ***n~k~*, *n~k+1~***   **Mapped real value**
  00                     0.4472
  01                     1.3416
  10                     -0.4472
  11                     -1.3416
  ---------------------- -----------------------

Table 0B: Mapping of E-DPDCH and S-E-DPDCH\
with 8PAM modulation

  -------------------------------- -----------------------
  ***n~k~*, *n~k+1~*, *n~k+2~***   **Mapped real value**
  000                              0.6547
  001                              0.2182
  010                              1.0911
  011                              1.5275
  100                              -0.6547
  101                              -0.2182
  110                              -1.0911
  111                              -1.5275
  -------------------------------- -----------------------

Figure 1: Spreading for uplink dedicated channels

Figure 1.1: Spreading for uplink S-DPCCH and S-E-DPDCHs

The spreading operation is specified in subclauses 4.2.1.1 to 4.2.1.4
for each of the dedicated physical channels; it includes a spreading
stage, a weighting stage, and an IQ mapping stage. In the process, the
streams of real-valued chips on the I and Q branches are summed; this
results in a complex-valued stream of chips for each set of channels.

As described in figure 1, the resulting complex-valued streams S~dpch~,
S~dpcch2~, S~hs-dpcch~, S~e-dpch~ and S~s-e-dpcch~ are summed into a
single complex-valued stream which is then scrambled by the
complex-valued scrambling code S~dpch,n~ resulting in the complex-valued
signal S. As described in Figure 1.1, the resulting complex-valued
streams S~s-dpcch~ and S~s-e-dpdch~ are summed into a single
complex-valued stream which is scrambled by the same complex-valued
scrambling code S~dpch,n~ resulting in the complex-valued signal S\'.
The scrambling code shall be applied aligned with the radio frames, i.e.
the first scrambling chip corresponds to the beginning of a radio frame.

NOTE: Although subclause 4.2.1 has been reorganized in this release, the
spreading operation for the DPCCH, DPDCH remains unchanged as compared
to the previous release.

#### 4.2.1.1 DPCCH/DPDCH

Figure 1a illustrates the spreading operation for the uplink DPCCH and
DPDCHs.

Figure 1A: Spreading for uplink DPCCH/DPDCHs

The DPCCH is spread to the chip rate by the channelisation code c~c~.
The *n*:th DPDCH called DPDCH~n~ is spread to the chip rate by the
channelisation code c~d,n~.

After channelisation, the real-valued spread signals are weighted by
gain factors, β~c~ for DPCCH,  β~d~ for all DPDCHs.

The β~c~ and β~d~ values are signalled by higher layers or derived as
described in \[6\] 5.1.2.5 and 5.1.2.5C. At every instant in time, at
least one of the values β~c~ and β~d~ has the amplitude 1.0. The β~c~
and β~d~ values are quantized into 4 bit words. The quantization steps
are given in table 1.

Table 1: The quantization of the gain parameters

+----------------------+----------------------------+
| Signalled values for | Quantized amplitude ratios |
|                      |                            |
| β~c~ and β~d~        | β~c~ and β~d~              |
+----------------------+----------------------------+
| 15                   | 1.0                        |
+----------------------+----------------------------+
| 14                   | 14/15                      |
+----------------------+----------------------------+
| 13                   | 13/15                      |
+----------------------+----------------------------+
| 12                   | 12/15                      |
+----------------------+----------------------------+
| 11                   | 11/15                      |
+----------------------+----------------------------+
| 10                   | 10/15                      |
+----------------------+----------------------------+
| 9                    | 9/15                       |
+----------------------+----------------------------+
| 8                    | 8/15                       |
+----------------------+----------------------------+
| 7                    | 7/15                       |
+----------------------+----------------------------+
| 6                    | 6/15                       |
+----------------------+----------------------------+
| 5                    | 5/15                       |
+----------------------+----------------------------+
| 4                    | 4/15                       |
+----------------------+----------------------------+
| 3                    | 3/15                       |
+----------------------+----------------------------+
| 2                    | 2/15                       |
+----------------------+----------------------------+
| 1                    | 1/15                       |
+----------------------+----------------------------+
| 0                    | Switch off                 |
+----------------------+----------------------------+

#### 4.2.1.2 HS-DPCCH

Figure 1B illustrates the spreading operation for the HS-DPCCH when
Secondary\_Cell\_Enabled is less than 4 in case the UE is not configured
in MIMO mode with four transmit antennas in any cell, or less than 2 in
case the UE is configured in MIMO mode with four transmit antennas in at
least one cell. Figure 1B.1 illustrates the spreading operation for the
HS-DPCCHs when Secondary\_Cell\_Enabled is greater than 3 in case the UE
is not configured in MIMO mode with four transmit antennas in any cell,
or greater than 1 in case the UE is configured in MIMO mode with four
transmit antennas in at least one cell..

Figure 1B: Spreading for uplink HS-DPCCH when Secondary\_Cell\_Enabled
is less than 4 in case the UE is not configured in MIMO mode with four
transmit antennas in any cell, or less than 2 in case the UE is
configured in MIMO mode with four transmit antennas in at least one cell

Figure 1B.1: Spreading for uplink HS-DPCCHs when
Secondary\_Cell\_Enabled is greater than 3 in case the UE is not
configured in MIMO mode with four transmit antennas in any cell, or
greater than 1 in case the UE is configured in MIMO mode with four
transmit antennas in at least one cell

Each HS-DPCCH shall be spread to the chip rate by the channelisation
code c~hs~.

After channelisation, the real-valued spread signals are weighted by
gain factor β~hs~

The β~hs~ values are derived from the quantized amplitude ratios A~hs~
which are translated from ∆~ACK~ , ∆~ΝACK~ and ∆~CQI~ signalled by
higher layers as described in \[6\] 5.1.2.5A.

The translation of ∆ ~ACK~, ∆~ΝACK~ and ∆~CQI~ into quantized amplitude
ratios A~hs~ = β~hs~/β~c~ in the case that DPCCH2 is not configured, and
A~hs~ = β~hs~/β~c2~ in the case that DPCCH2 is configured is shown in
Table 1A.

Table 1A: The quantization of the power offset

+----------------------------------+----------------------------------+
| Signalled values for ∆ ~ACK~,    | Quantized amplitude ratios       |
| ∆~ΝACK~ and ∆~CQI~               |                                  |
|                                  | A~hs~ = β~hs~/β~c~ or            |
|                                  | β~hs~/β~c2~                      |
+----------------------------------+----------------------------------+
| 12                               | 76/15                            |
+----------------------------------+----------------------------------+
| 11                               | 60/15                            |
+----------------------------------+----------------------------------+
| 10                               | 48/15                            |
+----------------------------------+----------------------------------+
| 9                                | 38/15                            |
+----------------------------------+----------------------------------+
| 8                                | 30/15                            |
+----------------------------------+----------------------------------+
| 7                                | 24/15                            |
+----------------------------------+----------------------------------+
| 6                                | 19/15                            |
+----------------------------------+----------------------------------+
| 5                                | 15/15                            |
+----------------------------------+----------------------------------+
| 4                                | 12/15                            |
+----------------------------------+----------------------------------+
| 3                                | 9/15                             |
+----------------------------------+----------------------------------+
| 2                                | 8/15                             |
+----------------------------------+----------------------------------+
| 1                                | 6/15                             |
+----------------------------------+----------------------------------+
| 0                                | 5/15                             |
+----------------------------------+----------------------------------+

If Secondary\_Cell\_Enabled is less than 4 in case the UE is not
configured in MIMO mode with four transmit antennas in any cell, or less
than 2 in case the UE is configured in MIMO mode with four transmit
antennas in at least one cell, HS-DPCCH shall be mapped to the I branch
in case N~max-dpdch~ is 2, 4 or 6, and to the Q branch otherwise
(N~max-dpdch~ = 0, 1, 3 or 5). If Secondary\_Cell\_Enabled is greater
than 3 in case the UE is not configured in MIMO mode with four transmit
antennas in any cell, or greater than 1 in case the UE is configured in
MIMO mode with four transmit antennas in at least one cell, HS-DPCCH
shall be mapped to the Q branch and HS-DPCCH~2~ shall be mapped to the I
branch.

#### 4.2.1.3 E-DPDCH/E-DPCCH

Figure 1C illustrates the spreading operation for the E-DPDCHs and the
E-DPCCH.

Figure 1C: Spreading for E-DPDCH/E-DPCCH

The E-DPCCH shall be spread to the chip rate by the channelisation code
c~ec~. The *k*:th E-DPDCH, denominated E‑DPDCH~k~, shall be spread to
the chip rate using channelisation code c~ed,k~.

After channelisation, the real-valued spread E-DPCCH and E-DPDCH~k~
signals shall respectively be weighted by gain factor β~ec~ and β~ed,k~.

*E-TFCI~ec,boost\ ~*may be signalled by higher layers. If
*E-TFCI~ec,boost\ ~*is not signalled by higher layers a default value
127 shall be used. When UL\_MIMO\_Enabled is TRUE the UE shall assume
*E-TFCI~ec,boost~* = -1 for rank-2 transmissions.

When E-TFCI ≤ *E-TFCI~ec,boost~* the value of β~ec~ shall be derived as
specified in \[6\] based on the quantized amplitude ratio A~ec~ which is
translated from ∆~E-DPCCH~ signalled by higher layers. The translation
of ∆~E-DPCCH~ into quantized amplitude ratios A~ec~ = β~ec~/β~c~ is
specified in Table 1B.

Table 1B: Quantization for ∆~E-DPCCH~ for E-TFCI ≤ *E-TFCI~ec,boost~*

+----------------------+----------------------------+
| Signalled values for | Quantized amplitude ratios |
|                      |                            |
| ∆ ~E-DPCCH~          | A~ec~ = β~ec~/β~c~         |
+----------------------+----------------------------+
| 15                   | 151/15                     |
+----------------------+----------------------------+
| 14                   | 120/15                     |
+----------------------+----------------------------+
| 13                   | 95/15                      |
+----------------------+----------------------------+
| 12                   | 76/15                      |
+----------------------+----------------------------+
| 11                   | 60/15                      |
+----------------------+----------------------------+
| 10                   | 48/15                      |
+----------------------+----------------------------+
| 9                    | 38/15                      |
+----------------------+----------------------------+
| 8                    | 30/15                      |
+----------------------+----------------------------+
| 7                    | 24/15                      |
+----------------------+----------------------------+
| 6                    | 19/15                      |
+----------------------+----------------------------+
| 5                    | 15/15                      |
+----------------------+----------------------------+
| 4                    | 12/15                      |
+----------------------+----------------------------+
| 3                    | 9/15                       |
+----------------------+----------------------------+
| 2                    | 8/15                       |
+----------------------+----------------------------+
| 1                    | 6/15                       |
+----------------------+----------------------------+
| 0                    | 5/15                       |
+----------------------+----------------------------+

When E-TFCI \> *E-TFCI~ec,boost~* , in order to provide an enhanced
phase reference, the value of β~ec~ shall be derived as specified in
\[6\] based on a traffic to total pilot power offset ∆~T2TP~, configured
by higher layers as specified in Table 1B.0 and the quantization of the
ratio β~ec~/β~c~ as specified in Table 1B.0A.

Table 1B.0: ∆~T2TP~

  ----------------------- ----------------------
  Signalled values for\   Power offset values\
  ∆ ~T2TP~                ∆ ~T2TP~ \[dB\]

  6                       16

  5                       15

  4                       14

  3                       13

  2                       12

  1                       11

  0                       10
  ----------------------- ----------------------

Table 1B.0A: Quantization for *β~ec~*/*β~c\ ~*for E-TFCI \>
*E-TFCI~ec,boost~*

+----------------------------+----------------------------------------+
| Quantized amplitude ratios | E-DPDCH modulation schemes which may   |
|                            | be used in the same subframe           |
| *β~ec~*/*β~c~*             |                                        |
+----------------------------+----------------------------------------+
| 239/15                     | 4PAM, 8PAM                             |
+----------------------------+----------------------------------------+
| 190/15                     | 4PAM, 8PAM                             |
+----------------------------+----------------------------------------+
| 151/15                     | 4PAM, 8PAM                             |
+----------------------------+----------------------------------------+
| 120/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 95/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 76/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 60/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 48/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 38/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 30/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 24/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 19/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 15/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 12/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 9/15                       | BPSK                                   |
+----------------------------+----------------------------------------+
| 8/15                       | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 6/15                       | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 5/15                       | BPSK                                   |
+----------------------------+----------------------------------------+

The value of β~ed,k~ shall be computed as specified in \[6\] subclause
5.1.2.5B.2, based on the reference gain factors, the spreading factor
for E-DPDCH~k~, the HARQ offsets, and the quantization of the ratio
β~ed,k~/β~c~ into amplitude ratios specified in Table 1B.2 for the case
when E-TFCI ≤ *E-TFCI~ec,boost~* and Table 1.B.2B, for the case when
E-TFCI \> *E-TFCI~ec,boost~*.

The reference gain factors are derived from the quantised amplitude
ratios A~ed~ which is translated from ∆~E-DPDCH~ signalled by higher
layers. The translation of ∆~E-DPDCH~ into quantized amplitude ratios
A~ed~ = β~ed~/β~c~ is specified in Table 1B.1 for the case when E-TFCI ≤
*E-TFCI~ec,boost~* and Table 1.B.2A for the case when E-TFCI \>
*E-TFCI~ec,boost~.*

When the UE is configured in MIMO mode and transmitting two transport
blocks, one with a set of E-DPDCHs and another with a set of S-E-DPDCHs,
the amplitude ratios A~ed~ for the primary stream are modified to take
the inter-stream interference into account. Note that the amplitude
ratios for the secondary stream are not modified. The amplitude ratios
A~ed~ for the primary stream are then given by

A~ed~ = A~ed,\ ISI­~ x A~ISI~

A~ed,ISI,~ is translated from ∆~E-DPDCH~ signalled by higher layers. The
translation of ∆~E-DPDCH~ into quantized amplitude ratios A~ed,ISI~ is
specified in Table 1B.2A. A~ISI~ is an inter-stream interference
compensation factor that is translated from ∆~ISI~ signalled by higher
layers according to Table 1B.0B. Note that this procedure does not
affect the power used for the transmission of the primary stream E-TFC,
but rather lowers the size of the primary stream transport block in
order to compensate for the inter-stream interference.

Table 1B.0B: Quantization of Δ~ISI~

+--------------------------+--------------------------------+
| **Signalled values for** | **Quantized amplitude ratios** |
|                          |                                |
| **∆~ISI~ **              | **Α~ISI~**                     |
+--------------------------+--------------------------------+
| 15                       | 30/15                          |
+--------------------------+--------------------------------+
| 14                       | 29/15                          |
+--------------------------+--------------------------------+
| 13                       | 28/15                          |
+--------------------------+--------------------------------+
| 12                       | 27/15                          |
+--------------------------+--------------------------------+
| 11                       | 26/15                          |
+--------------------------+--------------------------------+
| 10                       | 25/15                          |
+--------------------------+--------------------------------+
| 9                        | 24/15                          |
+--------------------------+--------------------------------+
| 8                        | 23/15                          |
+--------------------------+--------------------------------+
| 7                        | 22/15                          |
+--------------------------+--------------------------------+
| 6                        | 21/15                          |
+--------------------------+--------------------------------+
| 5                        | 20/15                          |
+--------------------------+--------------------------------+
| 4                        | 19/15                          |
+--------------------------+--------------------------------+
| 3                        | 18/15                          |
+--------------------------+--------------------------------+
| 2                        | 17/15                          |
+--------------------------+--------------------------------+
| 1                        | 16/15                          |
+--------------------------+--------------------------------+
| 0                        | 15/15                          |
+--------------------------+--------------------------------+

Table 1B.1: Quantization for ∆~E-DPDCH~ for E-TFCI ≤ *E-TFCI~ec,boost~*

+----------------------+----------------------+----------------------+
| Signalled values for | Quantized amplitude  | E-DPDCH modulation   |
| ∆ ~E-DPDCH~          | ratios               | schemes which may be |
|                      |                      | used in the same     |
|                      | A~ed~ = β~ed~/β~c~   | subframe             |
+----------------------+----------------------+----------------------+
| 29                   | 168/15               | BPSK                 |
+----------------------+----------------------+----------------------+
| 28                   | 150/15               | BPSK                 |
+----------------------+----------------------+----------------------+
| 27                   | 134/15               | BPSK                 |
+----------------------+----------------------+----------------------+
| 26                   | 119/15               | BPSK                 |
+----------------------+----------------------+----------------------+
| 25                   | 106/15               | BPSK                 |
+----------------------+----------------------+----------------------+
| 24                   | 95/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 23                   | 84/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 22                   | 75/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 21                   | 67/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 20                   | 60/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 19                   | 53/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 18                   | 47/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 17                   | 42/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 16                   | 38/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 15                   | 34/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 14                   | 30/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 13                   | 27/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 12                   | 24/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 11                   | 21/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 10                   | 19/15                | BPSK, 4PAM           |
+----------------------+----------------------+----------------------+
| 9                    | 17/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 8                    | 15/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 7                    | 13/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 6                    | 12/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 5                    | 11/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 4                    | 9/15                 | BPSK                 |
+----------------------+----------------------+----------------------+
| 3                    | 8/15                 | BPSK                 |
+----------------------+----------------------+----------------------+
| 2                    | 7/15                 | BPSK                 |
+----------------------+----------------------+----------------------+
| 1                    | 6/15                 | BPSK                 |
+----------------------+----------------------+----------------------+
| 0                    | 5/15                 | BPSK                 |
+----------------------+----------------------+----------------------+

Table 1B.2: Quantization for *β~ed,k~*/*β~c~ for* E-TFCI ≤
*E-TFCI~ec,boost~*

+----------------------------+----------------------------------------+
| Quantized amplitude ratios | E-DPDCH modulation schemes which may   |
|                            | be used in the same subframe           |
| *β~ed,k~*/*β~c~*           |                                        |
+----------------------------+----------------------------------------+
| 168/15                     | BPSK                                   |
+----------------------------+----------------------------------------+
| 150/15                     | BPSK                                   |
+----------------------------+----------------------------------------+
| 134/15                     | BPSK                                   |
+----------------------------+----------------------------------------+
| 119/15                     | BPSK                                   |
+----------------------------+----------------------------------------+
| 106/15                     | BPSK                                   |
+----------------------------+----------------------------------------+
| 95/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 84/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 75/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 67/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 60/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 53/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 47/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 42/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 38/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 34/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 30/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 27/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 24/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 21/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 19/15                      | BPSK, 4PAM                             |
+----------------------------+----------------------------------------+
| 17/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 15/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 13/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 12/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 11/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 9/15                       | BPSK                                   |
+----------------------------+----------------------------------------+
| 8/15                       | BPSK                                   |
+----------------------------+----------------------------------------+
| 7/15                       | BPSK                                   |
+----------------------------+----------------------------------------+
| 6/15                       | BPSK                                   |
+----------------------------+----------------------------------------+
| 5/15                       | BPSK                                   |
+----------------------------+----------------------------------------+

Table 1B.2A: Quantization for ∆~E-DPDCH~ for E-TFCI \>
*E-TFCI~ec,boost~*

+----------------------+----------------------+----------------------+
| Signalled values for | Quantized amplitude  | E-DPDCH modulation   |
| ∆ ~E-DPDCH~          | ratios               | schemes which may be |
|                      |                      | used in the same     |
|                      | A~ed~ = β~ed~/β~c~   | subframe             |
+----------------------+----------------------+----------------------+
| 31                   | 377/15               | 4PAM, 8PAM           |
|                      |                      | (applicable only for |
|                      |                      | SF2 code in a        |
|                      |                      | 2xSF2+2xSF4          |
|                      |                      | configuration)       |
+----------------------+----------------------+----------------------+
| 30                   | 336/15               | 4PAM, 8PAM           |
|                      |                      | (applicable only for |
|                      |                      | SF2 code in a        |
|                      |                      | 2xSF2+2xSF4          |
|                      |                      | configuration)       |
+----------------------+----------------------+----------------------+
| 29                   | 299/15               | 4PAM, 8PAM           |
+----------------------+----------------------+----------------------+
| 28                   | 267/15               | BPSK (applicable     |
|                      |                      | only for SF2 code in |
|                      |                      | a 2xSF2+2xSF4        |
|                      |                      | configuration),      |
|                      |                      | 4PAM, 8PAM           |
+----------------------+----------------------+----------------------+
| 27                   | 237/15               | BPSK (applicable     |
|                      |                      | only for SF2 code in |
|                      |                      | a 2xSF2+2xSF4        |
|                      |                      | configuration),      |
|                      |                      | 4PAM, 8PAM           |
+----------------------+----------------------+----------------------+
| 26                   | 212/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 25                   | 189/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 24                   | 168/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 23                   | 150/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 22                   | 134/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 21                   | 119/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 20                   | 106/15               | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 19                   | 95/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 18                   | 84/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 17                   | 75/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 16                   | 67/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 15                   | 60/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 14                   | 53/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 13                   | 47/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 12                   | 42/15                | BPSK, 4PAM, 8PAM     |
+----------------------+----------------------+----------------------+
| 11                   | 38/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 10                   | 34/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 9                    | 30/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 8                    | 27/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 7                    | 24/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 6                    | 21/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 5                    | 19/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 4                    | 17/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 3                    | 15/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 2                    | 13/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 1                    | 11/15                | BPSK                 |
+----------------------+----------------------+----------------------+
| 0                    | 8/15                 | BPSK                 |
+----------------------+----------------------+----------------------+

Table 1B.2B: Quantization for *β~ed,k~*/*β~c~* for E-TFCI \>
*E-TFCI~ec,boost~*

+----------------------------+----------------------------------------+
| Quantized amplitude ratios | E-DPDCH modulation schemes which may   |
|                            | be used in the same subframe           |
| *β~ed,k~*/*β~c~*           |                                        |
+----------------------------+----------------------------------------+
| 377/15                     | 4PAM, 8PAM (applicable only for SF2    |
|                            | code in a 2xSF2+2xSF4 configuration)   |
+----------------------------+----------------------------------------+
| 336/15                     | 4PAM, 8PAM (applicable only for SF2    |
|                            | code in a 2xSF2+2xSF4 configuration)   |
+----------------------------+----------------------------------------+
| 299/15                     | 4PAM, 8PAM                             |
+----------------------------+----------------------------------------+
| 267/15                     | BPSK (applicable only for SF2 code in  |
|                            | a 2xSF2+2xSF4 configuration), 4PAM,    |
|                            | 8PAM                                   |
+----------------------------+----------------------------------------+
| 237/15                     | BPSK (applicable only for SF2 code in  |
|                            | a 2xSF2+2xSF4 configuration), 4PAM,    |
|                            | 8PAM                                   |
+----------------------------+----------------------------------------+
| 212/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 189/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 168/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 150/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 134/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 119/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 106/15                     | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 95/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 84/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 75/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 67/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 60/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 53/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 47/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 42/15                      | BPSK, 4PAM, 8PAM                       |
+----------------------------+----------------------------------------+
| 38/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 34/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 30/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 27/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 24/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 21/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 19/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 17/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 15/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 13/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 11/15                      | BPSK                                   |
+----------------------------+----------------------------------------+
| 8/15                       | BPSK                                   |
+----------------------------+----------------------------------------+

The HARQ offsets ∆~harq~ to be used for support of different HARQ
profile are configured by higher layers as specified in Table 1B.3.

~Table\ 1B.3:\ HARQ\ offset\ ∆~harq

  ------------------------------ ------------------------------------
  Signalled values for ∆~harq~   Power offset values ∆~harq~ \[dB\]
  6                              6
  5                              5
  4                              4
  3                              3
  2                              2
  1                              1
  0                              0
  ------------------------------ ------------------------------------

After weighting, the real-valued spread signals shall be mapped to the I
branch or the Q branch according to the iq~ec~ value for the E-DPCCH and
to iq~ed,k~ for E-DPDCH~k~ and summed together.

The E-DPCCH shall always be mapped to the I branch, i.e. iq~ec~ = 1.

The IQ branch mapping for the E-DPDCHs depends on N~max-dpdch~ and on
whether an HS-DSCH is configured for the UE; the IQ branch mapping shall
be as specified in table 1C.

Table 1C: IQ branch mapping for E-DPDCH

  -------------- ------------------------ ---------------- ----------------
  N~max-dpdch~   **HS-DSCH configured**   **E-DPDCH~k~**   **iq~ed~,~k~**
  0              No/Yes                   E-DPDCH~1~       1
                                          E-DPDCH~2~       j
                                          E-DPDCH~3~       1
                                          E-DPDCH~4~       j
  1              No                       E-DPDCH~1~       j
                                          E-DPDCH~2~       1
  1              Yes                      E-DPDCH~1~       1
                                          E-DPDCH~2~       j
  -------------- ------------------------ ---------------- ----------------

NOTE: In case the UE transmits more than 2 E-DPDCHs, the UE then always
transmits E‑DPDCH~3~ and E‑DPDCH~4~ simultaneously.

#### 4.2.1.4 S-DPCCH

Figure 1D illustrates the spreading operation for the uplink S-DPCCH.

Figure 1D: Spreading for uplink S-DPCCH

The S-DPCCH is spread to the chip rate by the channelisation code c~sc~.

After channelisation, the real-valued spread signal is weighted by the
gain factor β~sc~ for S-DPCCH.

##### 4.2.1.4.1 S-DPCCH gain factor setting while not transmitting rank-2

When no transmission on E-DCH is taking place, or when E-DCH
transmission is taking place and E-TFCI ≤ *E-TFCI~ec,boost~* the β~sc~
shall be derived based on the quantized amplitude ratios A~sc~ which is
translated from ∆~S-DPCCH~ signalled by higher layers as described in
\[6\] subclause 5.1.2.5D. The translation of ∆~S-DPCCH~ into quantized
amplitude ratios A~sc~ = β~sc~/β~c~ is specified in Table 1C.1.

Table 1C.1: The quantization for ∆~S-DPCCH~ when no transmission on
E-DCH is taking place, and when E-DCH transmission is taking place and
E-TFCI ≤ *E-TFCI~ec,boost~*

+----------------------+----------------------------+
| Signalled values for | Quantized amplitude ratios |
|                      |                            |
| ∆~S-DPCCH~           | Α~sc~                      |
+----------------------+----------------------------+
| 6                    | 1.0                        |
+----------------------+----------------------------+
| 5                    | 12/15                      |
+----------------------+----------------------------+
| 4                    | 11/15                      |
+----------------------+----------------------------+
| 3                    | 10/15                      |
+----------------------+----------------------------+
| 2                    | 9/15                       |
+----------------------+----------------------------+
| 1                    | 8/15                       |
+----------------------+----------------------------+
| 0                    | Switch off                 |
+----------------------+----------------------------+

When E-TFCI \> *E-TFCI~ec,boost~* , in order to provide an enhanced
phase reference,  the value of β~sc~ shall be derived as specified in
\[6\] based on the traffic to secondary pilot power offset ∆~T2SP~,
configured by higher layers, and following the definition of ∆~T2TP~ as
specified in Table 1B.0 and the quantization of the ratio β~sc~/β~c~
following the quantization of β~ec~/β~c~ as specified in Table 1B.0A.

##### 4.2.1.4.2 S-DPCCH gain factor setting while transmitting rank-2

When a set of S-E-DPDCHs are present in a TTI, the S-DPCCH gain factor
*β~sc~* is set equal to *β~ec~* for that TTI as defined in sub-clause
4.2.1.3.

#### 4.2.1.5 S-E-DPCCH

Figure 1E illustrates the spreading operation for the S-E-DPCCH.

Figure 1E: Spreading for S-E-DPCCH

The S-E-DPCCH shall be spread to the chip rate by the channelisation
code c~sec~.

After channelisation, the real-valued spread S-E-DPCCH shall be weighted
by gain factor *β~sec~*.

The ∆~S-E-DPCCH~ value is signalled by higher layers and the gain factor
*β~sec~* shall be derived based on the quantized amplitude ratios. The
translation of ∆~S-E-DPCCH~ into quantized amplitude ratios
*β~sec~*/*β~c~* is specified in Table 1C.2.

The S-E-DPCCH shall always be mapped to the Q branch.

Table 1C.2: Quantization gain factors for S-E-DPCCH

  ---------------------------------- --------------------------------------------
  Signaled values for ∆~S-E-DPCCH~   Quantized amplitude ratios *β~sec~*/*β~c~*
  17                                 239/15
  16                                 190/15
  15                                 151/15
  14                                 120/15
  13                                 95/15
  12                                 76/15
  11                                 60/15
  10                                 48/15
  9                                  38/15
  8                                  30/15
  7                                  24/15
  6                                  19/15
  5                                  15/15
  4                                  12/15
  3                                  9/15
  2                                  8/15
  1                                  6/15
  0                                  5/15
  ---------------------------------- --------------------------------------------

#### 4.2.1.6 S-E-DPDCH

Figure 1F illustrates the spreading operation for the S-E-DPDCHs.

Figure 1F: Spreading for S-E-DPDCH

The *k*:th S-E-DPDCH, denominated S-E‑DPDCH~k~, shall be spread to the
chip rate using channelisation code c~sed,k~.

After channelisation, the real-valued spread S-E-DPDCH~k~ signals shall
respectively be weighted by gain factor *β~sed,k~*. The value of
*β~sed,k~* for S-E-DPDCH~k~ shall follow that of the corresponding
*β~ed,k~* for E-DPDCH~k~ transmitted in the same TTI as defined in table
1C.3.

Table 1C.3: Gain factor setting for S-E-DPDCHs

+------------------+--------------------------------------+
| **S-E-DPDCH~k~** | Quantized amplitude ratios           |
|                  |                                      |
|                  | *β~sed,k~*/*β~c~*                    |
+------------------+--------------------------------------+
| S-E-DPDCH~1~     | *β~sed,1~*/*β~c~* = *β~ed,1~*/*β~c~* |
+------------------+--------------------------------------+
| S-E-DPDCH~2~     | *β~sed,2~*/*β~c~* = *β~ed,2~*/*β~c~* |
+------------------+--------------------------------------+
| S-E-DPDCH~3~     | *β~sed,3~*/*β~c~* = *β~ed,3~*/*β~c~* |
+------------------+--------------------------------------+
| S-E-DPDCH~4~     | *β~sed,4~*/*β~c~* = *β~ed,4~*/*β~c~* |
+------------------+--------------------------------------+

NOTE: Either no S-E-DPDCHs are transmitted, or all four S-E-DPDCHs are
transmitted together and simultaneously with four E-DPDCHs.

After weighting, the real-valued spread signals shall be mapped to the I
branch or the Q branch according to the iq~sed,k~ for S-E-DPDCH~k~ and
summed together. The IQ branch mapping for the S-E-DPDCHs shall be as
specified in table 1C.4.

Table 1C.4: IQ branch mapping for S-E-DPDCHs

  ------------------ -----------------
  **S-E-DPDCH~k~**   **iq~sed~,~k~**
  S-E-DPDCH~1~       1
  S-E-DPDCH~2~       j
  S-E-DPDCH~3~       1
  S-E-DPDCH~4~       j
  ------------------ -----------------

#### 4.2.1.7 DPCCH2

Figure 1G illustrates the spreading operation for the uplink DPCCH2.

Figure 1G: Spreading for uplink DPCCH2

The DPCCH2 is spread to the chip rate by the channelisation code c~c2~.

After channelisation, the real-valued spread signal is weighted by the
gain factor β~c2~ for DPCCH2.

At every instant in time, the value of β~c2~ is set to 1.0.

### 4.2.2 PRACH

#### 4.2.2.1 PRACH preamble part

The PRACH preamble part consists of a complex-valued code, described in
subclause 4.3.3.

#### 4.2.2.2 PRACH message part

Figure 2 illustrates the principle of the spreading and scrambling of
the PRACH message part, consisting of data and control parts. The binary
control and data parts to be spread are represented by real-valued
sequences, i.e. the binary value \"0\" is mapped to the real value +1,
while the binary value \"1\" is mapped to the real value --1. The
control part is spread to the chip rate by the channelisation code c~c~,
while the data part is spread to the chip rate by the channelisation
code c~d~.

Figure 2: Spreading of PRACH message part

After channelisation, the real-valued spread signals are weighted by
gain factors, β~c~ for the control part and β~d~ for the data part. At
every instant in time, at least one of the values β~c~ and β~d~ has the
amplitude 1.0. The β-values are quantized into 4 bit words. The
quantization steps are given in subclause 4.2.1.

After the weighting, the stream of real-valued chips on the I- and
Q-branches are treated as a complex-valued stream of chips. This
complex-valued signal is then scrambled by the complex-valued scrambling
code S~r-msg,n~. The 10 ms scrambling code is applied aligned with the
10 ms message part radio frames, i.e. the first scrambling chip
corresponds to the beginning of a message part radio frame.

### 4.2.3 Void

### 4.2.4 Channel combining for UL CLTD and UL MIMO

Figure 3, 3A, and 3B illustrate how different uplink channels are
combined if UL\_CLTD\_Enabled is TRUE.

\- For the case that UL\_CLTD\_Active is 1,

> \- Each complex-valued spread channel, corresponding to point S in
> Figure 1, and point S\' in Figure 1.1 , shall be separately pre-coded
> by a precoding vector {w~1~,w~2~} and {w~3~,w~4~} as described in
> \[6\]. After precoding, the complex-valued signals T and T\' are
> obtained; see Figure 3.

\- For the case that UL\_CLTD\_Active is 2,

> \- Complex-valued spread channel, corresponding to point S in Figure
> 1, shall be mapped to T, as shown in Figure 3A.

\- For the case that UL\_CLTD\_Active is 3,

> \- Complex-valued spread channel, corresponding to point S in Figure
> 1, shall be mapped to T\', as shown in Figure 3B.

Figure 3: Combining of uplink physical channels when UL\_CLTD\_Enabled
is TRUE and UL\_CLTD\_Active is 1

Figure 3A: Combining of uplink physical channels when UL\_CLTD\_Enabled
is TRUE and UL\_CLTD\_Active is 2

Figure 3B: Combining of uplink physical channels when UL\_CLTD\_Enabled
is TRUE and UL\_CLTD\_Active is 3

4.3 Code generation and allocation
----------------------------------

### 4.3.1 Channelisation codes

#### 4.3.1.1 Code definition

The channelisation codes of figure 1 are Orthogonal Variable Spreading
Factor (OVSF) codes that preserve the orthogonality between a user\'s
different physical channels. The OVSF codes can be defined using the
code tree of figure 4.

Figure 4: Code-tree for generation of Orthogonal Variable Spreading
Factor (OVSF) codes

In figure 4, the channelisation codes are uniquely described as
C~ch,SF,k~, where SF is the spreading factor of the code and *k* is the
code number, 0 ≤ *k* ≤ SF-1.

Each level in the code tree defines channelisation codes of length SF,
corresponding to a spreading factor of SF in figure 4.

The generation method for the channelisation code is defined as:

$C_{\text{ch,1,0}} = 1$,

$\begin{matrix}
\left\lbrack C_{\text{ch},2,0} \middle| \right\rbrack \\
 \\
\end{matrix}$

$\begin{bmatrix}
C_{{}^{\left( n + 1 \right)_{,0}}} \\
C_{{}^{\left( n + 1 \right)_{,1}}} \\
C_{{}^{\left( n + 1 \right)_{,2}}} \\
C_{{}^{\left( n + 1 \right)_{,3}}} \\
: \\
C_{{}^{\left( n + 1 \right)\left( n + 1 \right)_{- 2}}} \\
C_{{}^{\left( n + 1 \right)\left( n + 1 \right)_{- 1}}} \\
\end{bmatrix} = \begin{bmatrix}
C_{{}^{\text{ch},2^{n},0}} & C_{{}^{\text{ch},2^{n},0}} \\
C_{{}^{\text{ch},2^{n},0}} & - C_{{}^{\text{ch},2^{n},0}} \\
C_{{}^{\text{ch},2^{n},1}} & C_{{}^{\text{ch},2^{n},1}} \\
C_{{}^{\text{ch},2^{n},1}} & - C_{{}^{\text{ch},2^{n},1}} \\
: & : \\
C_{{}^{\text{ch},2^{n},2^{n} - 1}} & C_{{}^{\text{ch},2^{n},2^{n} - 1}} \\
C_{{}^{\text{ch},2^{n},2^{n} - 1}} & - C_{{}^{\text{ch},2^{n},2^{n} - 1}} \\
\end{bmatrix}$

The leftmost value in each channelisation code word corresponds to the
chip transmitted first in time.

#### 4.3.1.2 Code allocation for dedicated physical channels

NOTE: Although subclause 4.3.1.2 has been reorganized in this release,
the spreading operation for DPCCH and DPDCH remains unchanged as
compared to the previous release.

##### 4.3.1.2.1 Code allocation for DPCCH/ S-DPCCH/DPDCH/DPCCH2

For the DPCCH, S-DPCCH and DPDCHs the following applies:

\- The DPCCH shall always be spread by code c~c~ = C~ch,256,0.~

\- The S-DPCCH shall always be spread by code c~sc~ = C~ch,256,31.~

~-~ The DPCCH2 shall be spread with code c~c2~ as specified in table
1C.5.

\- When only one DPDCH is to be transmitted, DPDCH~1~ shall be spread by
code c~d,1~ = C~ch,SF,k~ where SF is the spreading factor of DPDCH~1~
and k= SF / 4.

\- When more than one DPDCH is to be transmitted, all DPDCHs have
spreading factors equal to 4. DPDCH~n~ shall be spread by the the code
c~d,n~ = C~ch,4,k~ , where *k* = 1 if *n* ∈ {1, 2}, *k* = 3 if *n* ∈ {3,
4}, and *k* = 2 if *n* ∈ {5, 6}.

Table 1C.5: Channelisation code of DPCCH2

+---------------------------------+-------------------------------+
| Nmax-dpdch                      | **Channelisation code c~c2~** |
|                                 |                               |
| (as defined in subclause 4.2.1) |                               |
+---------------------------------+-------------------------------+
| 0                               | C~ch,256,34~                  |
+---------------------------------+-------------------------------+
| ≥1                              | C~ch,256,3~                   |
+---------------------------------+-------------------------------+

If a power control preamble is used to initialise a DCH, the
channelisation code for the DPCCH during the power control preamble
shall be the same as that to be used afterwards.

##### 4.3.1.2.2 Code allocation for HS-DPCCH when the UE is not configured in MIMO mode with four transmit antennas in any cell

The HS-DPCCH shall be spread with code c~hs~ as specified in table 1D.
If Secondary\_Cell\_Enabled is greater than 3 HS-DPCCH~2~ shall be
spread with code c~hs~ as specified in table 1D.1.

If Secondary\_Cell\_Enabled as defined in \[6\] is 0 or 1 or if
Secondary\_Cell\_Enabled is 2 and MIMO is not configured in any cell,
HS-DPCCH slot format \#0 as defined in \[2\] is used.

If Secondary\_Cell\_Enabled is 2 and MIMO is configured in at least one
cell or if Secondary\_Cell\_Enabled is 3, HS-DPCCH slot format \#1 as
defined in \[2\] is used.

If Secondary\_Cell\_Enabled is greater than 3, HS-DPCCH slot format \#1
as defined in \[2\] is used.

Table 1D: channelisation code of HS-DPCCH

+----------------+----------------+----------------+----------------+
| N~max-dpdch~   | Channelisation |                |                |
|                | code c~hs~     |                |                |
| (as defined in |                |                |                |
| subclause      |                |                |                |
| 4.2.1)         |                |                |                |
+----------------+----------------+----------------+----------------+
|                | Secondary\     | Secondary\     |                |
|                | _Cell\_Enabled | _Cell\_Enabled |                |
|                | is 0, 1, 2 or  | is greater     |                |
|                | 3              | than 3         |                |
+----------------+----------------+----------------+----------------+
|                | HS-DPCCH slot  | HS-DPCCH slot  | HS-DPCCH slot  |
|                | format \#0     | format \#1     | format \#1     |
|                | \[2\]          | \[2\]          | \[2\]          |
+----------------+----------------+----------------+----------------+
| 0              | C ~ch,256,33~  | C ~ch,128,16~  | C ~ch,128,16~  |
+----------------+----------------+----------------+----------------+
| 1              | C~ch,256,64~   | C ~ch,128,32~  | C ~ch,128,16~  |
+----------------+----------------+----------------+----------------+
| 2,4,6          | C~ch,256,1~    | N/A            | N/A            |
+----------------+----------------+----------------+----------------+
| 3,5            | C~ch,256,32~   | N/A            | N/A            |
+----------------+----------------+----------------+----------------+

Table 1D.1: channelisation code of HS-DPCCH~2~ if
Secondary\_Cell\_Enabled is greater than 3.

+---------------------------------+-----------------------------------+
| N~max-dpdch~                    | Channelisation code c~hs~         |
|                                 |                                   |
| (as defined in subclause 4.2.1) |                                   |
+---------------------------------+-----------------------------------+
|                                 | Secondary\_Cell\_Enabled is       |
|                                 | greater than 3                    |
+---------------------------------+-----------------------------------+
|                                 | HS-DPCCH slot format \#1 \[2\]    |
+---------------------------------+-----------------------------------+
| 0                               | C ~ch,128,16~                     |
+---------------------------------+-----------------------------------+
| 1                               | C ~ch,128,16~                     |
+---------------------------------+-----------------------------------+

##### 4.3.1.2.2A Code allocation for HS-DPCCH when the UE is configured in MIMO mode with four transmit antennas in at least one cell

If Secondary\_Cell\_Enabled as defined in \[6\] is 0 or 1, HS-DPCCH slot
format \#1 as defined in \[2\] is used. HS-DPCCH shall be spread with
code c~hs~ as specified in table 1D.2.

If Secondary\_Cell\_Enabled is 2:

> \- If the UE is configured in MIMO mode with four transmit antennas in
> all cells, HS-DPCCH slot format \#1 as defined in \[2\] is used for
> both HS-DPCCH and HS-DPCCH~2~. HS-DPCCH shall be spread with code
> c~hs~ as specified in table 1D.2 and HS-DPCCH~2~ spread with code
> c~hs~ as specified in table 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with
> four transmit antennas either in the primary or in the 1^st^ secondary
> serving cell or both, then HS-DPCCH slot format \#1 as defined in
> \[2\] is used for HS-DPCCH. HS-DPCCH shall be spread with code c~hs~
> as specified in table 1D.2.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode
> with four transmit antennas in the primary and the 1^st^ secondary
> serving cell then HS-DPCCH slot format \#0 as defined in \[2\] is used
> for HS-DPCCH. HS-DPCCH shall be spread with code c~hs~ as specified in
> table 1D.4.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with
> four transmit antennas in the 2^nd^ secondary serving cell then
> HS-DPCCH slot format \#1 as defined in \[2\] is used for HS-DPCCH~2~.
> HS-DPCCH~2~ spread with code c~hs~ as specified in table 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode
> with four transmit antennas in the 2^nd^ secondary serving cell then
> HS-DPCCH slot format \#0 as defined in \[2\] is used for HS-DPCCH~2~.
> HS-DPCCH~2~ spread with code c~hs~ as specified in table 1D.5.

If Secondary\_Cell\_Enabled is 3:

> \- If the UE is configured in MIMO mode with four transmit antennas in
> more than 2 cells HS-DPCCH slot format \#1 as defined in \[2\] is used
> for both HS-DPCCH and HS-DPCCH~2~. HS-DPCCH shall be spread with code
> c~hs~ as specified in table 1D.2 and HS-DPCCH~2~ spread with code
> c~hs~ as specified in table 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with
> four transmit antennas either in the primary or in the 1^st^ secondary
> serving cell or both, then HS-DPCCH slot format \#1 as defined in
> \[2\] is used for HS-DPCCH. HS-DPCCH shall be spread with code c~hs~
> as specified in table 1D.2.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode
> with four transmit antennas in the primary and the 1^st^ secondary
> serving cell then HS-DPCCH slot format \#0 as defined in \[2\] is used
> for HS-DPCCH. HS-DPCCH shall be spread with code c~hs~ as specified in
> table 1D.4.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is configured in MIMO mode with
> four transmit antennas in the 2^nd^ serving or in the 3^rd^ serving
> secondary cell or both then HS-DPCCH slot format \#1 as defined in
> \[2\] is used for HS-DPCCH~2~. HS-DPCCH~2~ spread with code c~hs~ as
> specified in table 1D.3.
>
> \- If the number of cells configured in MIMO mode with four transmit
> antennas is less than 3 and if the UE is not configured in MIMO mode
> with four transmit antennas in the 2^nd^ and the 3^rd^ secondary
> serving cell then HS-DPCCH slot format \#0 as defined in \[2\] is used
> for HS-DPCCH~2~. HS-DPCCH~2~ spread with code c~hs~ as specified in
> table 1D.5.

Table 1D.2: channelisation code of HS-DPCCH if Secondary\_Cell\_Enabled
is 0 or 1 or 2 or 3 and the UE is configured in MIMO mode with four
transmit antennas in any cell

+----------------------+----------------------+----------------------+
| N~max-dpdch~         | Channelisation code  | Channelisation code  |
|                      | c~hs~,               | c~hs~,               |
| (as defined in       | Seco                 | Seco                 |
| subclause 4.2.1)     | ndary\_Cell\_Enabled | ndary\_Cell\_Enabled |
|                      | is 0, 1              | is 2, 3              |
+----------------------+----------------------+----------------------+
|                      | HS-DPCCH slot format | HS-DPCCH slot format |
|                      | \#1 \[2\]            | \#1 \[2\]            |
+----------------------+----------------------+----------------------+
| 0                    | C~ch,128,16~         | C~ch,128,16~         |
+----------------------+----------------------+----------------------+
| 1                    | C~ch,128,32~         | C~ch,128,16~         |
+----------------------+----------------------+----------------------+

Table 1D.3: channelisation code of HS-DPCCH~2~ if
Secondary\_Cell\_Enabled is 2 or 3 and the UE is configured in MIMO mode
with four transmit antennas in any cell

+----------------------+----------------------+----------------------+
| N~max-dpdch~         | Channelisation code  | Channelisation code  |
|                      | c~hs~                | c~hs~                |
| (as defined in       |                      |                      |
| subclause 4.2.1)     |                      |                      |
+----------------------+----------------------+----------------------+
|                      | HS-DPCCH slot format | HS-DPCCH slot format |
|                      | \#0 \[2\]            | \#1 \[2\]            |
+----------------------+----------------------+----------------------+
| 0                    | C~ch,256,32~         | C~ch,128,16~         |
+----------------------+----------------------+----------------------+
| 1                    | C~ch,256,32~         | C~ch,128,16~         |
+----------------------+----------------------+----------------------+

Table 1D.4: channelisation code of HS-DPCCH if Secondary\_Cell\_Enabled
is greater than 1 and the UE is not configured in MIMO mode with four
transmit antennas in the primary and the 1^st^ secondary serving cell.

+---------------------------------+-----------------------------------+
| N~max-dpdch~                    | Channelisation code c~hs~         |
|                                 |                                   |
| (as defined in subclause 4.2.1) |                                   |
+---------------------------------+-----------------------------------+
|                                 | Secondary\_Cell\_Enabled is       |
|                                 | greater than 1                    |
+---------------------------------+-----------------------------------+
|                                 | HS-DPCCH slot format \#0 \[2\]    |
+---------------------------------+-----------------------------------+
| 0                               | C ~ch,256,33~                     |
+---------------------------------+-----------------------------------+
| 1                               | C ~ch,256,64~                     |
+---------------------------------+-----------------------------------+

Table 1D.5: channelisation code of HS-DPCCH~2~ if
Secondary\_Cell\_Enabled is equal to 3 and the UE is not configured in
MIMO mode with four transmit antennas in the 2^nd^ and the 3^rd^
secondary serving cell or if Secondary\_Cell\_Enabled is equal to 2 and
the UE is not configured in MIMO mode with four transmit antennas in the
2^nd^ secondary serving cell.

+---------------------------------+-----------------------------------+
| N~max-dpdch~                    | Channelisation code c~hs~         |
|                                 |                                   |
| (as defined in subclause 4.2.1) |                                   |
+---------------------------------+-----------------------------------+
|                                 | Secondary\_Cell\_Enabled is       |
|                                 | greater than 1                    |
+---------------------------------+-----------------------------------+
|                                 | HS-DPCCH slot format \#0 \[2\]    |
+---------------------------------+-----------------------------------+
| 0                               | C ~ch,256,33~                     |
+---------------------------------+-----------------------------------+
| 1                               | C ~ch,256,64~                     |
+---------------------------------+-----------------------------------+

##### 4.3.1.2.3 Code allocation for E-DPCCH/E-DPDCH

The E-DPCCH shall be spread with channelisation code
c~ec~ = C~ch,256,1~.

E-DPDCH~k~ shall be spread with channelisation code c~ed,k~. The
sequence c~ed,k~ depends on N~max-dpdch~ and the spreading factor
selected for the corresponding frame or sub-frame as specified in \[7\];
it shall be selected according to table 1E.

Table 1E: Channelisation code for E-DPDCH

+--------------+----------------+-----------------------------+
| N~max-dpdch~ | **E-DPDCH~k~** | Channelisation code C~ed,k~ |
+--------------+----------------+-----------------------------+
| 0            | E-DPDCH~1~     | C~ch,SF,SF/4~ if SF ≥ 4     |
|              |                |                             |
|              |                | C~ch,2,1~ if SF = 2         |
+--------------+----------------+-----------------------------+
|              | E-DPDCH~2~     | C~ch,4,1~ if SF = 4         |
|              |                |                             |
|              |                | C~ch,2,1~ if SF = 2         |
+--------------+----------------+-----------------------------+
|              | E-DPDCH~3~     | C~ch,4,1~                   |
|              |                |                             |
|              | E-DPDCH~4~     |                             |
+--------------+----------------+-----------------------------+
| 1            | E-DPDCH~1~     | C~ch,SF,SF/2~               |
+--------------+----------------+-----------------------------+
|              | E-DPDCH~2~     | C~ch,4,2~ if SF = 4         |
|              |                |                             |
|              |                | C~ch,2,1~ if SF = 2         |
+--------------+----------------+-----------------------------+

NOTE: When more than one E-DPDCH is transmitted, the respective
channelisation codes used for E-DPDCH~1~ and E-DPDCH~2~ are always the
same.

##### 4.3.1.2.4 Code allocation for S-E-DPCCH/S-E-DPDCH

The S-E-DPCCH shall be spread with channelisation code
c~sec~ = C~ch,256,1~.

S-E-DPDCH~k~ shall be spread with channelisation code c~sed,k~. The
sequence c~sed,k~ shall be selected according to table 1F.

Table 1F: Channelisation code for S-E-DPDCH

+--------------+------------------+------------------------------+
| N~max-dpdch~ | **S-E-DPDCH~k~** | Channelisation code C~sed,k~ |
+--------------+------------------+------------------------------+
| 0            | S-E-DPDCH~1~     | C~ch,2,1~                    |
|              |                  |                              |
|              | S-E-DPDCH~2~     |                              |
+--------------+------------------+------------------------------+
|              | S-E-DPDCH~3~     | C~ch,4,1~                    |
|              |                  |                              |
|              | S-E-DPDCH~4~     |                              |
+--------------+------------------+------------------------------+

NOTE: Either none or all four S-E-DPDCHs are transmitted.

#### 4.3.1.3 Code allocation for PRACH message part

The preamble signature *s*, 0 ≤ *s* ≤ 15, points to one of the 16 nodes
in the code-tree that corresponds to channelisation codes of length 16.
The sub-tree below the specified node is used for spreading of the
message part. The control part is spread with the channelisation code
c~c~ (as shown in subclause 4.2.2.2) of spreading factor 256 in the
lowest branch of the sub-tree, i.e. c~c~ = C~ch,256,m~ where m = 16×s +
15. The data part uses any of the channelisation codes from spreading
factor 32 to 256 in the upper-most branch of the sub-tree. To be exact,
the data part is spread by channelisation code c~d~ =  C~ch,SF,m~ and SF
is the spreading factor used for the data part and m = SF×s/16.

#### 4.3.1.4 Void

#### 4.3.1.5 Void

### 4.3.2 Scrambling codes

#### 4.3.2.1 General

All uplink physical channels on an activated uplink frequency shall be
scrambled with a complex-valued scrambling code. The dedicated physical
channels may be scrambled by either a long or a short scrambling code,
defined in subclause 4.3.2.4. The PRACH message part shall be scrambled
with a long scrambling code, defined in subclause 4.3.2.5. There are
2^24^ long and 2^24^ short uplink scrambling codes. Uplink scrambling
codes are assigned by higher layers.

The long scrambling code is built from constituent long sequences
defined in subclause 4.3.2.2, while the constituent short sequences used
to build the short scrambling code are defined in subclause 4.3.2.3.

#### 4.3.2.2 Long scrambling sequence

The long scrambling sequences c~long,1,n~ and c~long,2,n~ are
constructed from position wise modulo 2 sum of 38400 chip segments of
two binary *m*-sequences generated by means of two generator polynomials
of degree 25. Let *x*, and *y* be the two *m*-sequences respectively.
The *x* sequence is constructed using the primitive (over GF(2))
polynomial *X^25^+X^3^+1.* The *y* sequence is constructed using the
polynomial *X^25^+X^3^+X^2^+X+1.* The resulting sequences thus
constitute segments of a set of Gold sequences.

The sequence c~long,2,n~ is a 16777232 chip shifted version of the
sequence c~long,1,n~.

Let *n~23~ ... n~0\ ~*be the 24 bit binary representation of the
scrambling sequence number *n* with *n~0\ ~*being the least significant
bit. The *x* sequence depends on the chosen scrambling sequence number
*n* and is denoted *x~n~*, in the sequel. Furthermore, let *x~n~(i)* and
*y(i)* denote the *i:*th symbol of the sequence *x~n~* and *y,*
respectively.

The *m*-sequences *x~n~* and *y* are constructed as:

Initial conditions:

\- x~n~(0)=n~0~ , x~n~(1)= n~1~ , ... =x~n~(22)= n~22~ ,x~n~(23)= n~23~,
x~n~(24)=1.

\- y(0)=y(1)= ... =y(23)= y(24)=1.

Recursive definition of subsequent symbols:

\- x~n~(i+25) =x~n~(i+3) + x~n~(i) modulo 2, i=0,..., 2^25^-27.

\- y(i+25) = y(i+3)+y(i+2) +y(i+1) +y(i) modulo 2, i=0,..., 2^25^-27.

Define the binary Gold sequence *z~n~* by:

*- z~n~*(*i*) *= x~n~*(*i*) *+ y*(*i*) modulo 2*, i* = 0, 1, 2, ...,
2^25^-2.

The real valued Gold sequence *Z~n~* is defined by:

$Z_{n}(i) = \left\{ \begin{matrix}
 + 1 & \text{if}\ z_{n}(i) = 0 \\
 - 1 & \text{if}\ z_{n}(i) = 1 \\
\end{matrix} \right.\ \ \text{for}\ i = 0,1,\ldots,2^{\text{25}} - 2\text{.}$

Now, the real-valued long scrambling sequences c~long,1,n~ and
c~long,2,n~ are defined as follows:

c~long,1,n~(*i*) *= Z~n~*(*i*), *i =* 0, 1, 2, ..., 2^25^ -- 2 and

c~long,2,n~(*i*) *= Z~n~*((*i +* 16777232) modulo (2^25^ -- 1)), *i =*
0, 1, 2, ..., 2^25^ -- 2.

Finally, the complex-valued long scrambling sequence C~long,\ n~, is
defined as:

$C_{\text{long},n}(i) = c_{\text{long},1,n}(i)\left( 1 + j\left( - 1 \right)^{i}c_{\text{long},2,n}\left( 2\left\lfloor \frac{i}{2} \right\rfloor \right) \right)$

where *i* = 0, 1, ..., 2^25^ -- 2 and  denotes rounding to nearest
lower integer.

Figure 5: Configuration of uplink scrambling sequence generator

#### 4.3.2.3 Short scrambling sequence

The short scrambling sequences *c*~short,1,*n*~(*i*) and
*c*~short,2,*n*~(*i*) are defined from a sequence from the family of
periodically extended S(2) codes.

Let *n*~23~*n*~22~...*n*~0~ be the 24 bit binary representation of the
code number *n*.

The *n*:th quaternary S(2) sequence *z~n~*(*i*), 0 ≤ *n* ≤ 16777215, is
obtained by modulo 4 addition of three sequences, a quaternary sequence
*a*(*i*) and two binary sequences *b*(*i*) and *d*(*i*), where the
initial loading of the three sequences is determined from the code
number *n*. The sequence *z~n~*(*i*) of length 255 is generated
according to the following relation:

*- z~n~*(*i*) = *a*(*i*) + 2*b*(*i*) + 2*d*(*i*) modulo 4, *i* = 0, 1,
..., 254;

where the quaternary sequence *a*(*i*) is generated recursively by the
polynomial *g*~0~(*x*)= *x^8^+3x^5^+x^3^+3x^2^+2x+3* as:

*- a*(*0*) = 2*n~0~* + 1 modulo 4;

*- a*(*i*) = 2*n~i~* modulo 4, *i* = 1, 2, ..., 7;

*- a*(*i)* = 3*a*(*i*-3) + *a*(*i*-5) + 3*a*(*i*-6) + 2*a*(*i*-7) +
3*a*(*i*-8) modulo 4, *i* = 8, 9, ..., 254;

and the binary sequence *b*(*i*) is generated recursively by the
polynomial *g*~1~(*x*)= *x^8^+x^7^+x^5^+x+1* as

*b*(*i*) = *n*~8+*i*~ modulo 2, *i* = 0, 1, ..., 7,

*b*(*i*) = *b*(*i-1*) *+ b*(*i-3*) + *b*(*i-7*) + *b*(*i-8*) modulo 2,
*i* = 8, 9, ..., 254,

and the binary sequence *d*(*i*) is generated recursively by the
polynomial *g*~2~(*x*)= *x^8^+x^7^+x^5^+x^4^+1* as:

*d*(*i*) = *n*~16+*i*~ modulo 2, *i* = 0, 1, ..., 7;

*d*(*i*) = *d*(*i-1*) + *d*(*i-3*) + *d*(*i-4*) + *d*(*i-8*) modulo 2,
*i* = 8, 9, ..., 254.

The sequence *z~n~*(*i*) is extended to length 256 chips by setting
*z~n~*(255) = *z~n~*(0).

The mapping from *z~n~*(*i*) to the real-valued binary sequences
*c*~short,1,*n*~(*i*) and *c*~short,2,*n*~(*i*), , *i* = 0, 1, ..., 255
is defined in Table 2.

Table 2: Mapping from *z~n~*(*i*) to *c~short,1,n~*(*i*) and
*c~short,2,n~*(*i*), *i* = 0, 1, ..., 255

  ------------- --------------------- ---------------------
  *z~n~*(*i*)   *c~short,1,n~*(*i*)   *c~short,2,n~*(*i*)
  0             +1                    +1
  1             -1                    +1
  2             -1                    -1
  3             +1                    -1
  ------------- --------------------- ---------------------

Finally, the complex-valued short scrambling sequence C~short,\ n~, is
defined as:

$C_{\text{short},n}(i) = c_{\text{short},1,n}(i\text{mod}\text{256})\left( 1 + j\left( - 1 \right)^{i}c_{\text{short},2,n}\left( 2\left\lfloor \frac{\left( i\text{mod}\text{256} \right)}{2} \right\rfloor \right) \right)$

where *i* = 0, 1, 2, ... and  denotes rounding to nearest lower
integer.

An implementation of the short scrambling sequence generator for the 255
chip sequence to be extended by one chip is shown in Figure 6.

Figure 6: Uplink short scrambling sequence generator for 255 chip
sequence

#### 4.3.2.4 Dedicated physical channels scrambling code

The code used for scrambling of the uplink dedicated physical channels
may be of either long or short type. The *n*:th uplink scrambling code,
denoted S~dpch,\ n~, is defined as:

S~dpch,n~(*i*) = C~long,n~(*i*), *i* = 0, 1, ..., 38399, when using long
scrambling codes;

where the lowest index corresponds to the chip transmitted first in time
and C~long,n~ is defined in subclause 4.3.2.2.

The *n*:th uplink scrambling code, denoted S~dpch,\ n~, is defined as:

S~dpch,n~(*i*) = C~short,n~(*i*), *i* = 0, 1, ..., 38399, when using
short scrambling codes;

where the lowest index corresponds to the chip transmitted first in time
and C~short,n~ is defined in subclause 4.3.2.3.

#### 4.3.2.5 PRACH message part scrambling code

The scrambling code used for the PRACH message part is 10 ms long, and
there are 8192 different PRACH scrambling codes defined.

The *n*:th PRACH message part scrambling code, denoted S~r-msg,n~, where
*n =* 0, 1, ..., 8191, is based on the long scrambling sequence and is
defined as:

S~r-msg,n~(*i*) = C~long,n~(*i* + 4096), *i* = 0, 1, ..., 38399

where the lowest index corresponds to the chip transmitted first in time
and C~long,n~ is defined in subclause 4.3.2.2.

The message part scrambling code has a one-to-one correspondence to the
scrambling code used for the preamble part. For one PRACH, the same code
number is used for both scrambling codes, i.e. if the PRACH preamble
scrambling code used is S~r-pre,m~ then the PRACH message part
scrambling code is S~r-msg,m~, where the number *m* is the same for both
codes.

#### 4.3.2.6 Void

#### 4.3.2.7 Void

### 4.3.3 PRACH preamble codes

#### 4.3.3.1 Preamble code construction

The random access preamble code C~pre,n,~ is a complex valued sequence.
It is built from a preamble scrambling code S~r‑pre,n~ and a preamble
signature C~sig,s~ as follows:

\- C~pre,n,s~(k) = S~r-pre,n~(k) × C~sig,s~(k) ×
$e^{j\ (\frac{\pi}{4}\  + \ \frac{\pi}{2}\ k)}$, k = 0, 1, 2, 3, ...,
4095;

where k=0 corresponds to the chip transmitted first in time and
S~r-pre,n~ and C~sig,s~ are defined in 4.3.3.2 and 4.3.3.3 below
respectively.

#### 4.3.3.2 Preamble scrambling code

The scrambling code for the PRACH preamble part is constructed from the
long scrambling sequences. There are 8192 PRACH preamble scrambling
codes in total.

The *n*:th preamble scrambling code, *n =* 0, 1, ..., 8191*,* is defined
as:

S~r-pre,n~(*i*) = c~long,1,n~(*i*), *i* = 0, 1, ..., 4095;

where the sequence c~long,1,n~ is defined in subclause 4.3.2.2.

The 8192 PRACH preamble scrambling codes are divided into 512 groups
with 16 codes in each group. There is a one-to-one correspondence
between the group of PRACH preamble scrambling codes in a cell and the
primary scrambling code used in the downlink of the cell. The *k*:th
PRACH preamble scrambling code within the cell with downlink primary
scrambling code *m*, *k* = 0, 1, 2, ..., 15 and *m* = 0, 1, 2, ..., 511,
is S~r-pre,n~(*i*) as defined above with *n* = 16×*m* + *k*.

#### 4.3.3.3 Preamble signature

The preamble signature corresponding to a signature s consists of 256
repetitions of a length 16 signature P~s~(n), n=0...15. This is defined
as follows:

\- C~sig,*s*~(*i*) = *P~s~(i* modulo 16*), i* = 0, 1, ..., 4095.

The signature P~s~(n) is from the set of 16 Hadamard codes of length 16.
These are listed in table 3.

Table 3: Preamble signatures

  ----------- -------------- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----
  Preamble\   Value of *n*                                                                         
  signature                                                                                        

              0              1    2    3    4    5    6    7    8    9    10   11   12   13   14   15

  P~0~(n)     1              1    1    1    1    1    1    1    1    1    1    1    1    1    1    1

  P~1~(n)     1              -1   1    -1   1    -1   1    -1   1    -1   1    -1   1    -1   1    -1

  P~2~(n)     1              1    -1   -1   1    1    -1   -1   1    1    -1   -1   1    1    -1   -1

  P~3~(n)     1              -1   -1   1    1    -1   -1   1    1    -1   -1   1    1    -1   -1   1

  P~4~(n)     1              1    1    1    -1   -1   -1   -1   1    1    1    1    -1   -1   -1   -1

  P~5~(n)     1              -1   1    -1   -1   1    -1   1    1    -1   1    -1   -1   1    -1   1

  P~6~(n)     1              1    -1   -1   -1   -1   1    1    1    1    -1   -1   -1   -1   1    1

  P~7~(n)     1              -1   -1   1    -1   1    1    -1   1    -1   -1   1    -1   1    1    -1

  P~8~(n)     1              1    1    1    1    1    1    1    -1   -1   -1   -1   -1   -1   -1   -1

  P~9~(n)     1              -1   1    -1   1    -1   1    -1   -1   1    -1   1    -1   1    -1   1

  P~10~(n)    1              1    -1   -1   1    1    -1   -1   -1   -1   1    1    -1   -1   1    1

  P~11~(n)    1              -1   -1   1    1    -1   -1   1    -1   1    1    -1   -1   1    1    -1

  P~12~(n)    1              1    1    1    -1   -1   -1   -1   -1   -1   -1   -1   1    1    1    1

  P~13~(n)    1              -1   1    -1   -1   1    -1   1    -1   1    -1   1    1    -1   1    -1

  P~14~(n)    1              1    -1   -1   -1   -1   1    1    -1   -1   1    1    1    1    -1   -1

  P~15~(n)    1              -1   -1   1    -1   1    1    -1   -1   1    1    -1   1    -1   -1   1
  ----------- -------------- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----

### 4.3.4 Void

4.4 Modulation
--------------

### 4.4.1 Modulating chip rate

The modulating chip rate is 3.84 Mcps.

### 4.4.2 Modulation

Modulation of the complex-valued chip sequence generated by the
spreading process is shown below in Figure 7 for a UE with a single
configured uplink frequency when UL\_CLTD\_Enabled is FALSE:

Figure 7: Uplink modulation when a single uplink frequency is configured
and UL\_CLTD\_Enabled is FALSE

An example of uplink modulation for a UE with adjacent primary and
secondary uplink frequencies is given in Annex B. An example of uplink
modulation for a UE with primary and secondary uplink frequencies in two
different bands is given in Annex B2. The pulse-shaping characteristics
are described in \[3\].

An example of uplink modulation for a UE when a single uplink frequency
is configured and UL\_CLTD\_Enabled is TRUE is given in Annex B1. The
pulse-shaping characteristics are described in \[3\].

5 Downlink spreading and modulation
===================================

5.1 Spreading
-------------

Figure 8 illustrates the spreading operation for all physical channel
except SCH. The spreading operation includes a modulation mapper stage
successively followed by a channelisation stage, an IQ combining stage
and a scrambling stage. All the downlink physical channels are then
combined as specified in sub subclause 5.1.5.

The non-spread downlink physical channels, except SCH, AICH, E-HICH and
E-RGCH consist of a sequence of 3-valued digits taking the values 0, 1
and \"DTX\". Note that \"DTX\" is only applicable to those downlink
physical channels that support DTX transmission.

Figure 8: Spreading for all downlink physical channels except SCH

NOTE: Although subclause 5.1 has been reorganized in this release, the
spreading operation as specified for the DL channels in the previous
release remains unchanged.

### 5.1.1 Modulation mapper

Table 3A defines which of the IQ mapping specified in subclauses 5.1.1.1
and 5.1.1.2 may be used for the physical channel being processed.

Table 3A: IQ mapping

+------------------------+----------------------+
| Physical channel       | IQ mapping           |
+------------------------+----------------------+
| HS-PDSCH               | QPSK, 16QAM or 64QAM |
+------------------------+----------------------+
| S-CCPCH used for MBSFN | QPSK or 16QAM        |
+------------------------+----------------------+
| All other channels     | QPSK                 |
|                        |                      |
| (except the SCH)       |                      |
+------------------------+----------------------+

#### 5.1.1.1 QPSK

For all channels, except AICH, E-HICH and E‑RGCH, the input digits shall
be mapped to real-valued symbols as follows: the binary value \"0\" is
mapped to the real value +1, the binary value \"1\" is mapped to the
real value --1 and \"DTX\" is mapped to the real value 0.

For the indicator channels using signatures (AICH), the real-valued
input symbols depend on the exact combination of the indicators to be
transmitted as specified in \[2\] subclauses 5.3.3.7, 5.3.3.8 and
5.3.3.9.For the E-HICH and the E‑RGCH the input is a real valued symbol
sequence as specified in \[2\]

Each pair of two consecutive real-valued symbols is first converted from
serial to parallel and mapped to an I and Q branch. The definition of
the modulation mapper is such that even and odd numbered symbols are
mapped to the I and Q branch respectively. For all QPSK channels except
the indicator channels using signatures, symbol number zero is defined
as the first symbol in each frame or sub-frame. For the indicator
channels using signatures, symbol number zero is defined as the first
symbol in each access slot.

#### 5.1.1.2 16QAM

In case of 16QAM, a set of four consecutive binary symbols *n~k~*,
*n~k+1~*, *n~k+2~*, *n~k+3~* (with *k* mod 4 = 0) is serial-to-parallel
converted to two consecutive binary symbols (*i~1~*= *n~k~*, *i~2~*=
*n~k+2~*) on the I branch and two consecutive binary symbols (*q~1~*=
*n~k+1~*, *q~2~*= *n~k+3~*) on the Q branch and then mapped to 16QAM by
the modulation mapper as defined in table 3B.

The I and Q branches are then both spread to the chip rate by the same
real-valued channelisation code C~ch,16,m~. The channelisation code
sequence shall be aligned in time with the symbol boundary. The
sequences of real-valued chips on the I and Q branch are then treated as
a single complex-valued sequence of chips. This sequence of chips from
all multi-codes is summed and then scrambled (complex chip-wise
multiplication) by a complex-valued scrambling code S~dl,n~. The
scrambling code is applied aligned with the scrambling code applied to
the P-CCPCH.

Table 3B: 16QAM modulation mapping

  ---------------------- -------------- --------------
  **i~1~q~1~i~2~q~2~**   **I branch**   **Q branch**
  0000                   0.4472         0.4472
  0001                   0.4472         1.3416
  0010                   1.3416         0.4472
  0011                   1.3416         1.3416
  0100                   0.4472         -0.4472
  0101                   0.4472         -1.3416
  0110                   1.3416         -0.4472
  0111                   1.3416         -1.3416
  1000                   -0.4472        0.4472
  1001                   -0.4472        1.3416
  1010                   -1.3416        0.4472
  1011                   -1.3416        1.3416
  1100                   -0.4472        -0.4472
  1101                   -0.4472        -1.3416
  1110                   -1.3416        -0.4472
  1111                   -1.3416        -1.3416
  ---------------------- -------------- --------------

In the case of 16-QAM on S-CCPCH, a sequence of four consecutive symbols
*n~k~*, *n~k+1~*, *n~k+2~*, *n~k+3~* (with *k* mod 4 = 0) at the input
to the modulation mapper may contain values from the set 0, 1, and
\"DTX\". In the event that all 4 bits of the quadruple are DTX bits, the
output from the modulation mapping on both the I and Q branches is equal
to the real value 0.

For all other cases, all DTX bits in the quadruple are replaced with
other non-DTX bits from the quadruple according to the following:

The quadruple consists of two bit pairs, {n~k~,n~k+2~} on the I branch,
and {n~k+1~,n~k+3~} on the Q branch. For any bit pair, if a non-DTX bit
is available in the same pair, the DTX bit shall be replaced with the
non-DTX bit value. If a non-DTX bit is not available in the same pair,
the two DTX bits in that pair shall be replaced by the non-DTX bits in
the other pair (using the same bit ordering when the other pair contains
two non-DTX bits).

The bit positions and values of non-DTX bits in the quadruple are not
affected.

#### 5.1.1.3 64QAM

In case of 64QAM, a set of six consecutive binary symbols *n~k~*,
*n~k+1~*, *n~k+2~*, *n~k+3~*, *n~k+4~*, *n~k+5~* (with *k* mod 6 = 0) is
serial-to-parallel converted to three consecutive binary symbols
(*i~1~*= *n~k~*, *i~2~*= *n~k+2~*, *i~3~*= *n~k+4~*) on the I branch and
three consecutive binary symbols (*q~1~*= *n~k+1~*, *q~2~*= *n~k+3~*,
*q~3~*= *n~k+5~*) on the Q branch and then mapped to 64QAM by the
modulation mapper as defined in table 3C.

The I and Q branches are then both spread to the chip rate by the same
real-valued channelisation code C~ch,16,m~. The channelisation code
sequence shall be aligned in time with the symbol boundary. The
sequences of real-valued chips on the I and Q branch are then treated as
a single complex-valued sequence of chips. This sequence of chips from
all multi-codes is summed and then scrambled (complex chip-wise
multiplication) by a complex-valued scrambling code S~dl,n~. The
scrambling code is applied aligned with the scrambling code applied to
the P-CCPCH.

Table 3C: 64QAM modulation mapping

  ------------------------------- -------------- -------------- -- ------------------------------- -------------- --------------
  **i~1~q~1~i~2~q~2~ i~3~q~3~**   **I branch**   **Q branch**      **i~1~q~1~i~2~q~2~ i~3~q~3~**   **I branch**   **Q branch**
  000000                          0.6547         0.6547            100000                          -0.6547        0.6547
  000001                          0.6547         0.2182            100001                          -0.6547        0.2182
  000010                          0.2182         0.6547            100010                          -0.2182        0.6547
  000011                          0.2182         0.2182            100011                          -0.2182        0.2182
  000100                          0.6547         1.0911            100100                          -0.6547        1.0911
  000101                          0.6547         1.5275            100101                          -0.6547        1.5275
  000110                          0.2182         1.0911            100110                          -0.2182        1.0911
  000111                          0.2182         1.5275            100111                          -0.2182        1.5275
  001000                          1.0911         0.6547            101000                          -1.0911        0.6547
  001001                          1.0911         0.2182            101001                          -1.0911        0.2182
  001010                          1.5275         0.6547            101010                          -1.5275        0.6547
  001011                          1.5275         0.2182            101011                          -1.5275        0.2182
  001100                          1.0911         1.0911            101100                          -1.0911        1.0911
  001101                          1.0911         1.5275            101101                          -1.0911        1.5275
  001110                          1.5275         1.0911            101110                          -1.5275        1.0911
  001111                          1.5275         1.5275            101111                          -1.5275        1.5275
  010000                          0.6547         -0.6547           110000                          -0.6547        -0.6547
  010001                          0.6547         -0.2182           110001                          -0.6547        -0.2182
  010010                          0.2182         -0.6547           110010                          -0.2182        -0.6547
  010011                          0.2182         -0.2182           110011                          -0.2182        -0.2182
  010100                          0.6547         -1.0911           110100                          -0.6547        -1.0911
  010101                          0.6547         -1.5275           110101                          -0.6547        -1.5275
  010110                          0.2182         -1.0911           110110                          -0.2182        -1.0911
  010111                          0.2182         -1.5275           110111                          -0.2182        -1.5275
  011000                          1.0911         -0.6547           111000                          -1.0911        -0.6547
  011001                          1.0911         -0.2182           111001                          -1.0911        -0.2182
  011010                          1.5275         -0.6547           111010                          -1.5275        -0.6547
  011011                          1.5275         -0.2182           111011                          -1.5275        -0.2182
  011100                          1.0911         -1.0911           111100                          -1.0911        -1.0911
  011101                          1.0911         -1.5275           111101                          -1.0911        -1.5275
  011110                          1.5275         -1.0911           111110                          -1.5275        -1.0911
  011111                          1.5275         -1.5275           111111                          -1.5275        -1.5275
  ------------------------------- -------------- -------------- -- ------------------------------- -------------- --------------

### 5.1.2 Channelisation

For all physical channels (except SCH) the I and Q branches shall be
spread to the chip rate by the same real-valued channelisation code
C~ch,SF,m~, i.e. the output for each input symbol on the I and the Q
branches shall be a sequence of SF chips corresponding to the
channelisation code chip sequence multiplied by the real-valued symbol.
The channelisation code sequence shall be aligned in time with the
symbol boundary.

### 5.1.3 IQ combining

The real valued chip sequence on the Q branch shall be complex
multiplied with j and summed with the corresponding real valued chip
sequence on the I branch, thus resulting in a single complex valued chip
sequence.

### 5.1.4 Scrambling

The sequence of complex valued chips shall be scrambled (complex
chip-wise multiplication) by a complex-valued scrambling code S~dl,n~.
In case of P-CCPCH, the scrambling code shall be applied aligned with
the P-CCPCH frame boundary, i.e. the first complex chip of the spread
P-CCPCH frame is multiplied with chip number zero of the scrambling
code. In case of other downlink channels, the scrambling code shall be
applied aligned with the scrambling code applied to the P‑CCPCH. In this
case, the scrambling code is thus not necessarily applied aligned with
the frame boundary of the physical channel to be scrambled.

### 5.1.5 Channel combining

Figure 9 illustrates how different downlink channels are combined. Each
complex-valued spread channel, corresponding to point S in Figure 8, may
be separately weighted by a weight factor G~i~. The complex-valued P-SCH
and S-SCH, as described in \[2\], subclause 5.3.3.5, may be separately
weighted by weight factors G~p~ and G~s~. All downlink physical channels
shall then be combined using complex addition.

Figure 9: Combining of downlink physical channels

5.2 Code generation and allocation
----------------------------------

### 5.2.1 Channelisation codes

The channelisation codes of figure 8 are the same codes as used in the
uplink, namely Orthogonal Variable Spreading Factor (OVSF) codes that
preserve the orthogonality between downlink channels of different rates
and spreading factors. The OVSF codes are defined in figure 4 in
subclause 4.3.1.

The channelisation code for the Primary CPICH is fixed to C~ch,256,0~
and the channelisation code for the Primary CCPCH is fixed to
C~ch,256,1~.The channelisation codes for all other physical channels are
assigned by UTRAN.

With the spreading factor 512 a specific restriction is applied. When
the code word C~ch,512,n~, with n=0,2,4....510, is used in soft
handover, then the code word C~ch,512,n+1~ is not allocated in the cells
where timing adjustment is to be used. Respectively if C~ch,512,n~, with
n=1,3,5....511 is used, then the code word C~ch,512,n-1~ is not
allocated in the cells where timing adjustment is to be used. This
restriction shall not apply in cases where timing adjustments in soft
handover are not used with spreading factor 512.

When compressed mode is implemented by reducing the spreading factor by
2, the OVSF code used for compressed frames is:

\- C~ch,SF/2,n/2~ if ordinary scrambling code is used.

\- C~ch,SF/2,n\ mod\ SF/2~ if alternative scrambling code is used (see
subclause 5.2.2);

where C~ch,SF,n~ is the channelisation code used for non-compressed
frames.

For F-DPCH, the spreading factor is always 256.

For HS-PDSCH, the spreading factor is always 16.

For HS-SCCH, the spreading factor is always 128.

Channelisation-code-set information over HS-SCCH is mapped in following
manner: the OVSF codes shall be allocated in such a way that they are
positioned in sequence in the code tree. That is, for P multicodes at
offset O the following codes are allocated:

C~ch,16,O~ ... C~ch,16,\ O+P-1~

The number of multicodes and the corresponding offset for HS-PDSCHs
mapped from a given HS-DSCH is signalled by HS-SCCH.

For E-HICH and for E-RGCH, the spreading factor shall always be 128. In
each cell, the E‑RGCH and E-HICH assigned to a UE shall be configured
with the same channelisation code.

For E-AGCH, the spreading factor shall always be 256.

For F-TPICH, the spreading factor shall always be 256.

For E-ROCH, the spreading factor shall always be 256.

### 5.2.2 Scrambling code

A total of 2^18^-1 = 262,143 scrambling codes, numbered 0...262,142 can
be generated. However not all the scrambling codes are used. The
scrambling codes are divided into 512 sets each of a primary scrambling
code and 15 secondary scrambling codes.

The primary scrambling codes consist of scrambling codes n=16\*i where
i=0...511. The i:th set of secondary scrambling codes consists of
scrambling codes 16\*i+k, where k=1...15.

There is a one-to-one mapping between each primary scrambling code and
15 secondary scrambling codes in a set such that i:th primary scrambling
code corresponds to i:th set of secondary scrambling codes.

Hence, according to the above, scrambling codes k = 0, 1, ..., 8191 are
used. Each of these codes are associated with a left alternative
scrambling code and a right alternative scrambling code, that may be
used for compressed frames. The left alternative scrambling code
corresponding to scrambling code k is scrambling code number k + 8192,
while the right alternative scrambling code corresponding to scrambling
code k is scrambling code number k + 16384. The alternative scrambling
codes can be used for compressed frames. In this case, the left
alternative scrambling code is used if n\<SF/2 and the right alternative
scrambling code is used if n≥SF/2, where c~ch,SF,n~ is the
channelisation code used for non-compressed frames. The usage of
alternative scrambling code for compressed frames is signalled by higher
layers for each physical channel respectively.

In case F-DPCH is configured in the downlink, the same scrambling code
and OVSF code shall be used in F-DPCH compressed frames and normal
frames.

In the case that F-TPICH is configured in the downlink, the same
scrambling code and OVSF code shall be used in F-TPICH compressed frames
and normal frames.

The set of primary scrambling codes is further divided into 64
scrambling code groups, each consisting of 8 primary scrambling codes.
The j:th scrambling code group consists of primary scrambling codes
16\*8\*j+16\*k, where j=0..63 and k=0..7.

Each cell is allocated one and only one primary scrambling code. The
primary CCPCH, primary CPICH, PICH, MICH, AICH and S-CCPCH carrying PCH
or BCH shall always be transmitted using the primary scrambling code.
The other downlink physical channels may be transmitted with either the
primary scrambling code or a secondary scrambling code from the set
associated with the primary scrambling code of the cell.

In MBSFN operations, the S-CCPCH carries FACH only and shall always be
transmitted using the primary scrambling code. The same primary CCPCH,
primary CPICH, MICH and S-CCPCH may be transmitted from multiple cells
using the same primary scrambling code when part of MBSFN operations.

The mixture of primary scrambling code and no more than one secondary
scrambling code for one CCTrCH is allowable. In compressed mode during
compressed frames, these can be changed to the associated left or right
scrambling codes as described above, i.e. in these frames, the total
number of different scrambling codes may exceed two.

In the case of CCTrCH of type of HS-DSCH then all the HS-PDSCH
channelisation codes and HS-SCCH that a single UE may receive from a
single cell shall be under a single scrambling code (either the primary
or a secondary scrambling code).

In each cell, the F-DPCH, E‑RGCH, E-HICH, E-AGCH, E-ROCH and F-TPICH
assigned to a UE shall be configured with same scrambling code as the
assigned phase reference (primary or secondary CPICH).

In each cell the UE may be configured simultaneously with at most two
scrambling codes.

The scrambling code sequences are constructed by combining two real
sequences into a complex sequence. Each of the two real sequences are
constructed as the position wise modulo 2 sum of 38400 chip segments of
two binary *m*-sequences generated by means of two generator polynomials
of degree 18. The resulting sequences thus constitute segments of a set
of Gold sequences. The scrambling codes are repeated for every 10 ms
radio frame. Let *x* and *y* be the two sequences respectively. The *x*
sequence is constructed using the primitive (over GF(2)) polynomial
*1+X^7^+X^18^ .* The y sequence is constructed using the polynomial
*1+X^5^+X^7^+ X^10^+X^18^ .*

The sequence depending on the chosen scrambling code number *n* is
denoted *z~n~*, in the sequel. Furthermore, let *x(i)*, *y(i)* and
*z~n~(i)* denote the *i:*th symbol of the sequence *x*, *y,* and *z~n~*,
respectively.

The *m*-sequences *x*and *y* are constructed as:

Initial conditions:

\- x is constructed with x (0)=1, x(1)= x(2)=\...= x (16)= x (17)=0.

\- y(0)=y(1)= ... =y(16)= y(17)=1.

Recursive definition of subsequent symbols:

\- x(i+18) =x(i+7) + x(i) modulo 2, i=0,...,2^18^-20.

\- y(i+18) = y(i+10)+y(i+7)+y(i+5)+y(i) modulo 2, i=0,..., 2^18^-20.

The n:th Gold code sequence *z~n~, n=0,1,2,...,2^18^-2,* is then defined
as:

\- z~n~(i) = x((i+n) modulo (2^18^ - 1)) + y(i) modulo 2, i=0,...,
2^18^-2.

These binary sequences are converted to real valued sequences Z~n~ by
the following transformation:

$Z_{n}(i) = \left\{ \begin{matrix}
 + 1 & \text{if}\ z_{n}(i) = 0 \\
 - 1 & \text{if}\ z_{n}(i) = 1 \\
\end{matrix} \right.\ \ \text{for}\ i = 0,1,\ldots,2^{\text{18}} - 2\text{.}$

Finally, the n:th complex scrambling code sequence *S~dl,n~* is defined
as:

\- S~dl,n~(i) = Z~n~(i) + j Z~n~((i+131072) modulo (2^18^-1)),
i=0,1,...,38399.

Note that the pattern from phase 0 up to the phase of 38399 is repeated.

Figure 10: Configuration of downlink scrambling code generator

### 5.2.3 Synchronisation codes

#### 5.2.3.1 Code generation

The primary synchronisation code (PSC), C~psc~ is constructed as a
so-called generalised hierarchical Golay sequence. The PSC is
furthermore chosen to have good aperiodic auto correlation properties.

Define:

\- a = \<x~1~, x~2~, x~3~, ..., x~16~\> = \<1, 1, 1, 1, 1, 1, -1, -1, 1,
-1, 1, -1, 1, -1, -1, 1\>

The PSC is generated by repeating the sequence *a* modulated by a Golay
complementary sequence, and creating a complex-valued sequence with
identical real and imaginary components. The PSC C~psc~ is defined as:

\- C~psc~ = (1 + j) × \<a, a, a, -a, -a, a, -a, -a, a, a, a, -a, a, -a,
a, a\>;

where the leftmost chip in the sequence corresponds to the chip
transmitted first in time.

The 16 secondary synchronization codes (SSCs), {C~ssc,1~,...,C
~ssc,16~}, are complex-valued with identical real and imaginary
components, and are constructed from position wise multiplicationof a
Hadamard sequence and a sequence *z*, defined as:

\- z = \<b, b, b, -b, b, b, -b, -b, b, -b, b, -b, -b, -b, -b, -b\>,
where

*- b* = \<*x*~1~, *x*~2~, *x*~3~, *x*~4~, *x*~5~, *x*~6~, *x*~7~,
*x*~8~, *-x*~9~, -*x*~10~, *-x*~11~, -*x*~12~, *-x*~13~, -*x*~14~,
-*x*~15,~ -*x*~16~\> and *x*~1,~ *x*~2~ , ..., *x*~15,~ *x*~16,~ are
same as in the definition of the sequence *a* above.

The Hadamard sequences are obtained as the rows in a matrix *H*~8~
constructed recursively by:

$\begin{matrix}
H_{0} = (1) \\
H_{k} = \begin{pmatrix}
H_{k - 1} & H_{k - 1} \\
H_{k - 1} & - H_{k - 1} \\
\end{pmatrix},\ k \geq 1 \\
\end{matrix}$

The rows are numbered from the top starting with row *0* (the all ones
sequence).

Denote the *n*:th Hadamard sequence as a row of *H~8~* numbered from the
top, n = 0, 1, 2, ..., 255, in the sequel.

Furthermore, let *h~n~(i)* and *z(i)* denote the *i:*th symbol of the
sequence *h~n~* and *z,* respectively where *i* = 0, 1, 2, ..., 255 and
*i* = 0 corresponds to the leftmost symbol.

The *k*:th SSC, C~ssc,k~, *k* = 1, 2, 3, ..., 16 is then defined as:

\- C~ssc,k~ = (1 + *j*) × \<*h~m~*(0) × *z*(0), *h~m~*(1) × *z*(1),
*h~m~*(2) × *z*(2), ..., *h~m~*(255) × *z*(255)\>;

where *m* = 16×(*k* -- 1) and the leftmost chip in the sequence
corresponds to the chip transmitted first in time.

#### 5.2.3.2 Code allocation of SSC

The 64 secondary SCH sequences are constructed such that their
cyclic-shifts are unique, i.e., a non-zero cyclic shift less than 15 of
any of the 64 sequences is not equivalent to some cyclic shift of any
other of the 64 sequences. Also, a non-zero cyclic shift less than 15 of
any of the sequences is not equivalent to itself with any other cyclic
shift less than 15. Table 4 describes the sequences of SSCs used to
encode the 64 different scrambling code groups. The entries in table 4
denote what SSC to use in the different slots for the different
scrambling code groups, e.g. the entry \"7\" means that SSC C~ssc,7~
shall be used for the corresponding scrambling code group and slot.

Table 4: Allocation of SSCs for secondary SCH

<table>
<tbody>
<tr class="odd">
<td><p>Scrambling</p>
<p>Code Group</p></td>
<td>slot number</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>#0</td>
<td>#1</td>
<td>#2</td>
<td>#3</td>
<td>#4</td>
<td>#5</td>
<td>#6</td>
<td>#7</td>
<td>#8</td>
<td>#9</td>
<td>#10</td>
<td>#11</td>
<td>#12</td>
<td>#13</td>
<td>#14</td>
</tr>
<tr class="odd">
<td>Group 0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>15</td>
<td>8</td>
<td>10</td>
<td>16</td>
<td>2</td>
<td>7</td>
<td>15</td>
<td>7</td>
<td>16</td>
</tr>
<tr class="even">
<td>Group 1</td>
<td>1</td>
<td>1</td>
<td>5</td>
<td>16</td>
<td>7</td>
<td>3</td>
<td>14</td>
<td>16</td>
<td>3</td>
<td>10</td>
<td>5</td>
<td>12</td>
<td>14</td>
<td>12</td>
<td>10</td>
</tr>
<tr class="odd">
<td>Group 2</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>15</td>
<td>5</td>
<td>5</td>
<td>12</td>
<td>16</td>
<td>6</td>
<td>11</td>
<td>2</td>
<td>16</td>
<td>11</td>
<td>15</td>
<td>12</td>
</tr>
<tr class="even">
<td>Group 3</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>8</td>
<td>6</td>
<td>5</td>
<td>2</td>
<td>5</td>
<td>8</td>
<td>4</td>
<td>4</td>
<td>6</td>
<td>3</td>
<td>7</td>
</tr>
<tr class="odd">
<td>Group 4</td>
<td>1</td>
<td>2</td>
<td>16</td>
<td>6</td>
<td>6</td>
<td>11</td>
<td>15</td>
<td>5</td>
<td>12</td>
<td>1</td>
<td>15</td>
<td>12</td>
<td>16</td>
<td>11</td>
<td>2</td>
</tr>
<tr class="even">
<td>Group 5</td>
<td>1</td>
<td>3</td>
<td>4</td>
<td>7</td>
<td>4</td>
<td>1</td>
<td>5</td>
<td>5</td>
<td>3</td>
<td>6</td>
<td>2</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>8</td>
</tr>
<tr class="odd">
<td>Group 6</td>
<td>1</td>
<td>4</td>
<td>11</td>
<td>3</td>
<td>4</td>
<td>10</td>
<td>9</td>
<td>2</td>
<td>11</td>
<td>2</td>
<td>10</td>
<td>12</td>
<td>12</td>
<td>9</td>
<td>3</td>
</tr>
<tr class="even">
<td>Group 7</td>
<td>1</td>
<td>5</td>
<td>6</td>
<td>6</td>
<td>14</td>
<td>9</td>
<td>10</td>
<td>2</td>
<td>13</td>
<td>9</td>
<td>2</td>
<td>5</td>
<td>14</td>
<td>1</td>
<td>13</td>
</tr>
<tr class="odd">
<td>Group 8</td>
<td>1</td>
<td>6</td>
<td>10</td>
<td>10</td>
<td>4</td>
<td>11</td>
<td>7</td>
<td>13</td>
<td>16</td>
<td>11</td>
<td>13</td>
<td>6</td>
<td>4</td>
<td>1</td>
<td>16</td>
</tr>
<tr class="even">
<td>Group 9</td>
<td>1</td>
<td>6</td>
<td>13</td>
<td>2</td>
<td>14</td>
<td>2</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>13</td>
<td>10</td>
<td>9</td>
<td>1</td>
<td>14</td>
<td>10</td>
</tr>
<tr class="odd">
<td>Group 10</td>
<td>1</td>
<td>7</td>
<td>8</td>
<td>5</td>
<td>7</td>
<td>2</td>
<td>4</td>
<td>3</td>
<td>8</td>
<td>3</td>
<td>2</td>
<td>6</td>
<td>6</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td>Group 11</td>
<td>1</td>
<td>7</td>
<td>10</td>
<td>9</td>
<td>16</td>
<td>7</td>
<td>9</td>
<td>15</td>
<td>1</td>
<td>8</td>
<td>16</td>
<td>8</td>
<td>15</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Group 12</td>
<td>1</td>
<td>8</td>
<td>12</td>
<td>9</td>
<td>9</td>
<td>4</td>
<td>13</td>
<td>16</td>
<td>5</td>
<td>1</td>
<td>13</td>
<td>5</td>
<td>12</td>
<td>4</td>
<td>8</td>
</tr>
<tr class="even">
<td>Group 13</td>
<td>1</td>
<td>8</td>
<td>14</td>
<td>10</td>
<td>14</td>
<td>1</td>
<td>15</td>
<td>15</td>
<td>8</td>
<td>5</td>
<td>11</td>
<td>4</td>
<td>10</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Group 14</td>
<td>1</td>
<td>9</td>
<td>2</td>
<td>15</td>
<td>15</td>
<td>16</td>
<td>10</td>
<td>7</td>
<td>8</td>
<td>1</td>
<td>10</td>
<td>8</td>
<td>2</td>
<td>16</td>
<td>9</td>
</tr>
<tr class="even">
<td>Group 15</td>
<td>1</td>
<td>9</td>
<td>15</td>
<td>6</td>
<td>16</td>
<td>2</td>
<td>13</td>
<td>14</td>
<td>10</td>
<td>11</td>
<td>7</td>
<td>4</td>
<td>5</td>
<td>12</td>
<td>3</td>
</tr>
<tr class="odd">
<td>Group 16</td>
<td>1</td>
<td>10</td>
<td>9</td>
<td>11</td>
<td>15</td>
<td>7</td>
<td>6</td>
<td>4</td>
<td>16</td>
<td>5</td>
<td>2</td>
<td>12</td>
<td>13</td>
<td>3</td>
<td>14</td>
</tr>
<tr class="even">
<td>Group 17</td>
<td>1</td>
<td>11</td>
<td>14</td>
<td>4</td>
<td>13</td>
<td>2</td>
<td>9</td>
<td>10</td>
<td>12</td>
<td>16</td>
<td>8</td>
<td>5</td>
<td>3</td>
<td>15</td>
<td>6</td>
</tr>
<tr class="odd">
<td>Group 18</td>
<td>1</td>
<td>12</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>7</td>
<td>2</td>
<td>8</td>
<td>14</td>
<td>2</td>
<td>1</td>
<td>13</td>
<td>11</td>
<td>8</td>
<td>11</td>
</tr>
<tr class="even">
<td>Group 19</td>
<td>1</td>
<td>12</td>
<td>15</td>
<td>5</td>
<td>4</td>
<td>14</td>
<td>3</td>
<td>16</td>
<td>7</td>
<td>8</td>
<td>6</td>
<td>2</td>
<td>10</td>
<td>11</td>
<td>13</td>
</tr>
<tr class="odd">
<td>Group 20</td>
<td>1</td>
<td>15</td>
<td>4</td>
<td>3</td>
<td>7</td>
<td>6</td>
<td>10</td>
<td>13</td>
<td>12</td>
<td>5</td>
<td>14</td>
<td>16</td>
<td>8</td>
<td>2</td>
<td>11</td>
</tr>
<tr class="even">
<td>Group 21</td>
<td>1</td>
<td>16</td>
<td>3</td>
<td>12</td>
<td>11</td>
<td>9</td>
<td>13</td>
<td>5</td>
<td>8</td>
<td>2</td>
<td>14</td>
<td>7</td>
<td>4</td>
<td>10</td>
<td>15</td>
</tr>
<tr class="odd">
<td>Group 22</td>
<td>2</td>
<td>2</td>
<td>5</td>
<td>10</td>
<td>16</td>
<td>11</td>
<td>3</td>
<td>10</td>
<td>11</td>
<td>8</td>
<td>5</td>
<td>13</td>
<td>3</td>
<td>13</td>
<td>8</td>
</tr>
<tr class="even">
<td>Group 23</td>
<td>2</td>
<td>2</td>
<td>12</td>
<td>3</td>
<td>15</td>
<td>5</td>
<td>8</td>
<td>3</td>
<td>5</td>
<td>14</td>
<td>12</td>
<td>9</td>
<td>8</td>
<td>9</td>
<td>14</td>
</tr>
<tr class="odd">
<td>Group 24</td>
<td>2</td>
<td>3</td>
<td>6</td>
<td>16</td>
<td>12</td>
<td>16</td>
<td>3</td>
<td>13</td>
<td>13</td>
<td>6</td>
<td>7</td>
<td>9</td>
<td>2</td>
<td>12</td>
<td>7</td>
</tr>
<tr class="even">
<td>Group 25</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>2</td>
<td>9</td>
<td>15</td>
<td>14</td>
<td>3</td>
<td>14</td>
<td>9</td>
<td>5</td>
<td>5</td>
<td>15</td>
<td>8</td>
<td>12</td>
</tr>
<tr class="odd">
<td>Group 26</td>
<td>2</td>
<td>4</td>
<td>7</td>
<td>9</td>
<td>5</td>
<td>4</td>
<td>9</td>
<td>11</td>
<td>2</td>
<td>14</td>
<td>5</td>
<td>14</td>
<td>11</td>
<td>16</td>
<td>16</td>
</tr>
<tr class="even">
<td>Group 27</td>
<td>2</td>
<td>4</td>
<td>13</td>
<td>12</td>
<td>12</td>
<td>7</td>
<td>15</td>
<td>10</td>
<td>5</td>
<td>2</td>
<td>15</td>
<td>5</td>
<td>13</td>
<td>7</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Group 28</td>
<td>2</td>
<td>5</td>
<td>9</td>
<td>9</td>
<td>3</td>
<td>12</td>
<td>8</td>
<td>14</td>
<td>15</td>
<td>12</td>
<td>14</td>
<td>5</td>
<td>3</td>
<td>2</td>
<td>15</td>
</tr>
<tr class="even">
<td>Group 29</td>
<td>2</td>
<td>5</td>
<td>11</td>
<td>7</td>
<td>2</td>
<td>11</td>
<td>9</td>
<td>4</td>
<td>16</td>
<td>7</td>
<td>16</td>
<td>9</td>
<td>14</td>
<td>14</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Group 30</td>
<td>2</td>
<td>6</td>
<td>2</td>
<td>13</td>
<td>3</td>
<td>3</td>
<td>12</td>
<td>9</td>
<td>7</td>
<td>16</td>
<td>6</td>
<td>9</td>
<td>16</td>
<td>13</td>
<td>12</td>
</tr>
<tr class="even">
<td>Group 31</td>
<td>2</td>
<td>6</td>
<td>9</td>
<td>7</td>
<td>7</td>
<td>16</td>
<td>13</td>
<td>3</td>
<td>12</td>
<td>2</td>
<td>13</td>
<td>12</td>
<td>9</td>
<td>16</td>
<td>6</td>
</tr>
<tr class="odd">
<td>Group 32</td>
<td>2</td>
<td>7</td>
<td>12</td>
<td>15</td>
<td>2</td>
<td>12</td>
<td>4</td>
<td>10</td>
<td>13</td>
<td>15</td>
<td>13</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>10</td>
</tr>
<tr class="even">
<td>Group 33</td>
<td>2</td>
<td>7</td>
<td>14</td>
<td>16</td>
<td>5</td>
<td>9</td>
<td>2</td>
<td>9</td>
<td>16</td>
<td>11</td>
<td>11</td>
<td>5</td>
<td>7</td>
<td>4</td>
<td>14</td>
</tr>
<tr class="odd">
<td>Group 34</td>
<td>2</td>
<td>8</td>
<td>5</td>
<td>12</td>
<td>5</td>
<td>2</td>
<td>14</td>
<td>14</td>
<td>8</td>
<td>15</td>
<td>3</td>
<td>9</td>
<td>12</td>
<td>15</td>
<td>9</td>
</tr>
<tr class="even">
<td>Group 35</td>
<td>2</td>
<td>9</td>
<td>13</td>
<td>4</td>
<td>2</td>
<td>13</td>
<td>8</td>
<td>11</td>
<td>6</td>
<td>4</td>
<td>6</td>
<td>8</td>
<td>15</td>
<td>15</td>
<td>11</td>
</tr>
<tr class="odd">
<td>Group 36</td>
<td>2</td>
<td>10</td>
<td>3</td>
<td>2</td>
<td>13</td>
<td>16</td>
<td>8</td>
<td>10</td>
<td>8</td>
<td>13</td>
<td>11</td>
<td>11</td>
<td>16</td>
<td>3</td>
<td>5</td>
</tr>
<tr class="even">
<td>Group 37</td>
<td>2</td>
<td>11</td>
<td>15</td>
<td>3</td>
<td>11</td>
<td>6</td>
<td>14</td>
<td>10</td>
<td>15</td>
<td>10</td>
<td>6</td>
<td>7</td>
<td>7</td>
<td>14</td>
<td>3</td>
</tr>
<tr class="odd">
<td>Group 38</td>
<td>2</td>
<td>16</td>
<td>4</td>
<td>5</td>
<td>16</td>
<td>14</td>
<td>7</td>
<td>11</td>
<td>4</td>
<td>11</td>
<td>14</td>
<td>9</td>
<td>9</td>
<td>7</td>
<td>5</td>
</tr>
<tr class="even">
<td>Group 39</td>
<td>3</td>
<td>3</td>
<td>4</td>
<td>6</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>6</td>
<td>12</td>
<td>14</td>
<td>4</td>
<td>5</td>
<td>13</td>
<td>5</td>
<td>14</td>
</tr>
<tr class="odd">
<td>Group 40</td>
<td>3</td>
<td>3</td>
<td>6</td>
<td>5</td>
<td>16</td>
<td>9</td>
<td>15</td>
<td>5</td>
<td>9</td>
<td>10</td>
<td>6</td>
<td>4</td>
<td>15</td>
<td>4</td>
<td>10</td>
</tr>
<tr class="even">
<td>Group 41</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>14</td>
<td>4</td>
<td>6</td>
<td>12</td>
<td>13</td>
<td>5</td>
<td>13</td>
<td>6</td>
<td>11</td>
<td>11</td>
<td>12</td>
<td>14</td>
</tr>
<tr class="odd">
<td>Group 42</td>
<td>3</td>
<td>4</td>
<td>9</td>
<td>16</td>
<td>10</td>
<td>4</td>
<td>16</td>
<td>15</td>
<td>3</td>
<td>5</td>
<td>10</td>
<td>5</td>
<td>15</td>
<td>6</td>
<td>6</td>
</tr>
<tr class="even">
<td>Group 43</td>
<td>3</td>
<td>4</td>
<td>16</td>
<td>10</td>
<td>5</td>
<td>10</td>
<td>4</td>
<td>9</td>
<td>9</td>
<td>16</td>
<td>15</td>
<td>6</td>
<td>3</td>
<td>5</td>
<td>15</td>
</tr>
<tr class="odd">
<td>Group 44</td>
<td>3</td>
<td>5</td>
<td>12</td>
<td>11</td>
<td>14</td>
<td>5</td>
<td>11</td>
<td>13</td>
<td>3</td>
<td>6</td>
<td>14</td>
<td>6</td>
<td>13</td>
<td>4</td>
<td>4</td>
</tr>
<tr class="even">
<td>Group 45</td>
<td>3</td>
<td>6</td>
<td>4</td>
<td>10</td>
<td>6</td>
<td>5</td>
<td>9</td>
<td>15</td>
<td>4</td>
<td>15</td>
<td>5</td>
<td>16</td>
<td>16</td>
<td>9</td>
<td>10</td>
</tr>
<tr class="odd">
<td>Group 46</td>
<td>3</td>
<td>7</td>
<td>8</td>
<td>8</td>
<td>16</td>
<td>11</td>
<td>12</td>
<td>4</td>
<td>15</td>
<td>11</td>
<td>4</td>
<td>7</td>
<td>16</td>
<td>3</td>
<td>15</td>
</tr>
<tr class="even">
<td>Group 47</td>
<td>3</td>
<td>7</td>
<td>16</td>
<td>11</td>
<td>4</td>
<td>15</td>
<td>3</td>
<td>15</td>
<td>11</td>
<td>12</td>
<td>12</td>
<td>4</td>
<td>7</td>
<td>8</td>
<td>16</td>
</tr>
<tr class="odd">
<td>Group 48</td>
<td>3</td>
<td>8</td>
<td>7</td>
<td>15</td>
<td>4</td>
<td>8</td>
<td>15</td>
<td>12</td>
<td>3</td>
<td>16</td>
<td>4</td>
<td>16</td>
<td>12</td>
<td>11</td>
<td>11</td>
</tr>
<tr class="even">
<td>Group 49</td>
<td>3</td>
<td>8</td>
<td>15</td>
<td>4</td>
<td>16</td>
<td>4</td>
<td>8</td>
<td>7</td>
<td>7</td>
<td>15</td>
<td>12</td>
<td>11</td>
<td>3</td>
<td>16</td>
<td>12</td>
</tr>
<tr class="odd">
<td>Group 50</td>
<td>3</td>
<td>10</td>
<td>10</td>
<td>15</td>
<td>16</td>
<td>5</td>
<td>4</td>
<td>6</td>
<td>16</td>
<td>4</td>
<td>3</td>
<td>15</td>
<td>9</td>
<td>6</td>
<td>9</td>
</tr>
<tr class="even">
<td>Group 51</td>
<td>3</td>
<td>13</td>
<td>11</td>
<td>5</td>
<td>4</td>
<td>12</td>
<td>4</td>
<td>11</td>
<td>6</td>
<td>6</td>
<td>5</td>
<td>3</td>
<td>14</td>
<td>13</td>
<td>12</td>
</tr>
<tr class="odd">
<td>Group 52</td>
<td>3</td>
<td>14</td>
<td>7</td>
<td>9</td>
<td>14</td>
<td>10</td>
<td>13</td>
<td>8</td>
<td>7</td>
<td>8</td>
<td>10</td>
<td>4</td>
<td>4</td>
<td>13</td>
<td>9</td>
</tr>
<tr class="even">
<td>Group 53</td>
<td>5</td>
<td>5</td>
<td>8</td>
<td>14</td>
<td>16</td>
<td>13</td>
<td>6</td>
<td>14</td>
<td>13</td>
<td>7</td>
<td>8</td>
<td>15</td>
<td>6</td>
<td>15</td>
<td>7</td>
</tr>
<tr class="odd">
<td>Group 54</td>
<td>5</td>
<td>6</td>
<td>11</td>
<td>7</td>
<td>10</td>
<td>8</td>
<td>5</td>
<td>8</td>
<td>7</td>
<td>12</td>
<td>12</td>
<td>10</td>
<td>6</td>
<td>9</td>
<td>11</td>
</tr>
<tr class="even">
<td>Group 55</td>
<td>5</td>
<td>6</td>
<td>13</td>
<td>8</td>
<td>13</td>
<td>5</td>
<td>7</td>
<td>7</td>
<td>6</td>
<td>16</td>
<td>14</td>
<td>15</td>
<td>8</td>
<td>16</td>
<td>15</td>
</tr>
<tr class="odd">
<td>Group 56</td>
<td>5</td>
<td>7</td>
<td>9</td>
<td>10</td>
<td>7</td>
<td>11</td>
<td>6</td>
<td>12</td>
<td>9</td>
<td>12</td>
<td>11</td>
<td>8</td>
<td>8</td>
<td>6</td>
<td>10</td>
</tr>
<tr class="even">
<td>Group 57</td>
<td>5</td>
<td>9</td>
<td>6</td>
<td>8</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>12</td>
<td>5</td>
<td>11</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>7</td>
<td>7</td>
</tr>
<tr class="odd">
<td>Group 58</td>
<td>5</td>
<td>10</td>
<td>10</td>
<td>12</td>
<td>8</td>
<td>11</td>
<td>9</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>5</td>
<td>12</td>
<td>6</td>
<td>7</td>
<td>6</td>
</tr>
<tr class="even">
<td>Group 59</td>
<td>5</td>
<td>10</td>
<td>12</td>
<td>6</td>
<td>5</td>
<td>12</td>
<td>8</td>
<td>9</td>
<td>7</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>11</td>
<td>11</td>
<td>9</td>
</tr>
<tr class="odd">
<td>Group 60</td>
<td>5</td>
<td>13</td>
<td>15</td>
<td>15</td>
<td>14</td>
<td>8</td>
<td>6</td>
<td>7</td>
<td>16</td>
<td>8</td>
<td>7</td>
<td>13</td>
<td>14</td>
<td>5</td>
<td>16</td>
</tr>
<tr class="even">
<td>Group 61</td>
<td>9</td>
<td>10</td>
<td>13</td>
<td>10</td>
<td>11</td>
<td>15</td>
<td>15</td>
<td>9</td>
<td>16</td>
<td>12</td>
<td>14</td>
<td>13</td>
<td>16</td>
<td>14</td>
<td>11</td>
</tr>
<tr class="odd">
<td>Group 62</td>
<td>9</td>
<td>11</td>
<td>12</td>
<td>15</td>
<td>12</td>
<td>9</td>
<td>13</td>
<td>13</td>
<td>11</td>
<td>14</td>
<td>10</td>
<td>16</td>
<td>15</td>
<td>14</td>
<td>16</td>
</tr>
<tr class="even">
<td>Group 63</td>
<td>9</td>
<td>12</td>
<td>10</td>
<td>15</td>
<td>13</td>
<td>14</td>
<td>9</td>
<td>14</td>
<td>15</td>
<td>11</td>
<td>11</td>
<td>13</td>
<td>12</td>
<td>16</td>
<td>10</td>
</tr>
</tbody>
</table>

5.3 Modulation
--------------

### 5.3.1 Modulating chip rate

The modulating chip rate is 3.84 Mcps.

### 5.3.2 Modulation

Modulation of the complex-valued chip sequence generated by the
spreading process is shown in Figure 11 below.

Figure 11: Downlink modulation

The pulse-shaping characteristics are described in \[4\].

######## Annex A (informative): Generalised Hierarchical Golay Sequences

A.1 Alternative generation
==========================

The generalised hierarchical Golay sequences for the PSC described in
5.2.3.1 may be also viewed as generated (in real valued representation)
by the following methods:

[Method 1.]{.underline}

The sequence y is constructed from two constituent sequences *x~1~* and
*x~2~* of length *n~1~* and *n~2~* respectively using the following
formula:

\- y(i) = x~2~(i mod n~2~) \* x~1~(i div n~2~), i = 0 \... (n~1~\* n~2~)
- 1.

The constituent sequences *x~1~* and *x~2\ ~*are chosen to be the
following length 16 (i.e. *n~1~* = *n~2~* =16) sequences:

\- x~1~ is defined to be the length 16 (N^(1)^=4) Golay complementary
sequence obtained by the delay matrix D^(1)^ = \[8, 4, 1,2\] and weight
matrix W^(1)^ = \[1, -1, 1,1\].

\- x~2~ is a generalised hierarchical sequence using the following
formula, selecting s=2 and using the two Golay complementary sequences
x~3~ and x~4~ as constituent sequences. The length of the sequence x~3~
and x~4~ is called n~3~ respectively n~4~.

*- x~2~(i) = x~4~(i* mod *s + s\*(i* div *sn~3~)) \* x~3~((i* div *s)*
mod *n~3~),* *i* = 0 \... (*n~3~\* n~4~*) - 1.

\- x~3~ and x~4~ are defined to be identical and the length 4 (N^(3)^=
N^(4)^=2) Golay complementary sequence obtained by the delay matrix
D^(3)^ = D^(4)^ = \[1, 2\] and weight matrix W^(3)^ = W^(4)^ = \[1, 1\].

The Golay complementary sequences x~1~,x~3~ and x~4~ are defined using
the following recursive relation:

*a*~0~(*k*) = δ(*k*) and *b*~0~(*k*) = δ(*k*);

*a~n~*(*k*) = *a~n~*~-1~(*k*) + *W^(j)^~n~*·*b~n~*~-1~(*k*-*D^(j)^~n~*);

*b~n~*(*k*) = *a~n~*~-1~(*k*) - *W^(j)^~n~*·*b~n~*~-1~(*k*-*D^(j)^~n~*);

*k* = 0, 1, 2, ..., 2\*\*N^(j)^ -1;

*n* = 1, 2, ..., N*^(j)^*.

The wanted Golay complementary sequence x~j~ is defined by a~n~ assuming
n=N^(j)^. The Kronecker delta function is described by δ, k,j and n are
integers.

[Method 2]{.underline}

The sequence y can be viewed as a pruned Golay complementary sequence
and generated using the following parameters which apply to the
generator equations for a and b above:

\(a\) Let j = 0, N^(0)^ = 8.

\(b\)
\[D~1~^0^,D~2~^0^,D~3~^0^,D~4~^0^,D~5~^0^,D~6~^0^,D~7~^0^,D~8~^0^\] =
\[128, 64, 16, 32, 8, 1, 4, 2\].

\(c\)
\[W~1~^0^,W~2~^0^,W~3~^0^,W~4~^0^,W~5~^0^,W~6~^0^,W~7~^0^,W~8~^0^\] =
\[1, -1, 1, 1, 1, 1, 1, 1\].

\(d\) For n = 4, 6, set b~4~(k) = a~4~(k), b~6~(k) = a~6~(k).

######## Annex B (informative): Uplink modulation for operation on adjacent frequencies

An example of modulation of the complex-valued chip sequence generated
by the spreading process is shown below in Figure B-1. In Figure B-1,
ω~L~ and ω~H~ are the lower and higher assigned channel frequencies.

![](media/image24.wmf){width="6.69375in" height="2.7069444444444444in"}

Figure B-1: Uplink modulation for a UE with adjacent primary and
secondary uplink frequencies

######## Annex B1 (informative): Uplink modulation for UL CLTD

In the case that UL\_CLTD\_Enabled is TRUE, modulation of the
complex-valued chip sequence T and T\', obtained from channel combining
operation for UL CLTD in section 4.2.4, is shown in Figure B1-1.

Figure B1-1: Uplink modulation when UL\_CLTD\_Enabled is TRUE

######## Annex B2 (informative): Uplink modulation for operation on dual band frequencies

An example of modulation of the complex-valued chip sequence generated
by the spreading process is shown below in Figure B2-1 for two uplink
frequencies in two distinct bands. In Figure B2-1, ω~B1~ and ω~B2~ are
the assigned primary and secondary uplink channel frequencies in two
distinct bands.

Figure B2-1: Uplink modulation for a UE with primary and secondary
uplink frequencies on two different bands

######## Annex C (informative): Change history

  -------------------- ------------ -------------- -------- --------- ----------------------------------------------------------------------------------------------- --------- ---------
  **Change history**                                                                                                                                                            
  **Date**             **TSG \#**   **TSG Doc.**   **CR**   **Rev**   **Subject/Comment**                                                                             **Old**   **New**
  14/01/00             RAN\_05      RP-99589       \-                 Approved at TSG RAN \#5 and placed under Change Control                                         \-        3.0.0
  14/01/00             RAN\_06      RP-99682       005      1         Harmonization of notations for downlink scrambling codes                                        3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       006      \-        Update of downlink spreading description                                                        3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99682       007      1         Update of TS 25.213 uplink parts                                                                3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       008      \-        Updated modulation description                                                                  3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       009      \-        Restriction for spreading factor 512 allocation in the UTRA FDD Downlink                        3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       011      1         CPCH codes in power control preamble                                                            3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       012      2         Support of short codes for CPCH                                                                 3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99682       014      1         Editorial Change                                                                                3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       016      \-        Channelization Code Allocation for USTS                                                         3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       017      1         Correction (Editorial Change)                                                                   3.0.0     3.1.0
  14/01/00             RAN\_06      RP-99683       019      \-        Correction to code allocation for compressed mode                                               3.0.0     3.1.0
  14/01/00             \-           \-             \-                 Change history was added by the editor                                                          3.1.0     3.1.1
  31/03/00             RAN\_07      RP-000063      020      1         Consistent numbering of scrambling code groups                                                  3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      021      \-        Downlink signal flow corrections                                                                3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      022      \-        Uplink signal flow corrections                                                                  3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      023      1         Number of RACH scrambling codes                                                                 3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      024      1         Editorial changes to 25.213                                                                     3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      025      3         Number of PCPCH scrambling codes per cell                                                       3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      027      \-        A typo correction for 5.2.2 and clarification for 5.2.3.1 of TS 25.213V3.1.1                    3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      028      2         Channelization code allocation method for PCPCH message part                                    3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      029      \-        Clarifications to DSCH scrambling and modulation in 25.213                                      3.1.1     3.2.0
  31/03/00             RAN\_07      RP-000063      032      \-        Clean up of USTS related specifications                                                         3.1.1     3.2.0
  26/06/00             RAN\_08      RP-000267      033      \-        Clarifications to power control preamble sections                                               3.2.0     3.3.0
  26/06/00             RAN\_08      RP-000267      034      2         Numbering of the PCPCH access preamble and collision detection preamble scrambling codes        3.2.0     3.3.0
  26/06/00             RAN\_08      RP-000267      035      \-        DPDCH/DPCCH gain factors                                                                        3.2.0     3.3.0
  16/12/00             RAN\_10      RP-000539      037      1         Proposed removal of the option of secondary scrambling code for some downlink common channels   3.3.0     3.4.0
  16/03/01             RAN\_11      \-             \-       \-        Approved as Release 4 specification (v4.0.0) at TSG RAN \#11                                    3.4.0     4.0.0
  16/03/01             RAN\_11      RP-010059      038      \-        Clarification of channelization codes when SF=512                                               3.4.0     4.0.0
  16/03/01             RAN\_11      RP-010059      039      1         Clarification of the scrambling code of a power control preamble                                3.4.0     4.0.0
  15/06/01             RAN\_12      RP-010333      041      1         Clarification of DL channelization code alignment                                               4.0.0     4.1.0
  15/06/01             RAN\_12      RP-010333      043      1         Clarification of PDSCH root channelisation code definition                                      4.0.0     4.1.0
  14/12/01             RAN\_14      RP-010738      047      \-        Correction of section number reference                                                          4.1.0     4.2.0
  08/03/02             RAN\_15      RP-020058      049      \-        The inclusion of HSDPA into 25.213                                                              4.2.0     5.0.0
  07/06/02             RAN\_16      RP-020309      053      1         Downlink bit mapping                                                                            5.0.0     5.1.0
  07/06/02             RAN\_16      RP-020316      050      \-        Consistency of Signal Point Constellation for QPSK and 16QAM                                    5.0.0     5.1.0
  07/06/02             RAN\_16      RP-020316      054      \-        Clarification of uplink DTX handling and modulation                                             5.0.0     5.1.0
  07/06/02             RAN\_16      RP-020316      055      \-        Removal of code mapping description over HS-SCCH                                                5.0.0     5.1.0
  07/06/02             RAN\_16      RP-020316      056      3         I/Q mapping of HS-DPCCH                                                                         5.0.0     5.1.0
  07/06/02             RAN\_16      RP-020316      057      \-        Definition of the amplitude gain factor for HS-DPCCH                                            5.0.0     5.1.0
  16/09/02             RAN\_17      RP-020583      058      1         Numbering corrections                                                                           5.1.0     5.2.0
  16/09/02             RAN\_17      RP-020583      059                Correction on the maximum DPDCH in Figure1                                                      5.1.0     5.2.0
  16/09/02             RAN\_17      RP-020592      060                Power offset values for HS-DPCCH                                                                5.1.0     5.2.0
  26/03/03             RAN\_19      RP-030135      061      1         Removal of the tiny text in Figure 1 and minor corrections to 4.2.1                             5.2.0     5.3.0
  21/09/03             RAN\_21      RP-030457      062      \-        Clarification of 16QAM modulation description                                                   5.3.0     5.4.0
  06/01/04             RAN\_22      RP-030648      064      1         Correction of figure in combining of downlink physical channels                                 5.4.0     5.5.0
  06/01/04             RAN\_22      RP-030648      065      1         Correction of reference to calculation of HS-DPCCH gain factor                                  5.4.0     5.5.0
  06/01/04             RAN\_22      RP-030727      067      2         Restriction of DL secondary scrambling codes per CCTrCH                                         5.4.0     5.5.0
  13/01/04             RAN\_22      \-             \-       \-        Created for M.1457 update                                                                       5.5.0     6.0.0
  13/12/04             RAN\_26      RP-040539      071      3         Introduction of E-DCH                                                                           6.0.0     6.1.0
  13/12/04             RAN\_26      RP-040450      069      \-        Introduction of MICH                                                                            6.0.0     6.1.0
  14/03/05             RAN\_27      RP-050088      070      1         Introduction of F-DPCH                                                                          6.1.0     6.2.0
  14/03/05             RAN\_27      RP-050046      072      \-        Correction on E-DPCCH power offset                                                              6.1.0     6.2.0
  14/03/05             RAN\_27      RP-050047      073      1         Defining E-DPDCH power offset                                                                   6.1.0     6.2.0
  16/06/05             RAN\_28      RP-050252      074      2         Power offset values for E-DPDCH/E-DPCCH                                                         6.2.0     6.3.0
  16/06/05             RAN\_28      RP-050252      075      3         Support of different HARQ profiles                                                              6.2.0     6.3.0
  16/06/05             RAN\_28      RP-050250      077      2         Feature Clean Up: Removal of \"CPCH\"                                                           6.2.0     6.3.0
  16/06/05             RAN\_28      RP-050248      079      \-        Feature Clean Up: Removal of DSCH (FDD mode)                                                    6.2.0     6.3.0
  16/06/05             RAN\_28      RP-050256      080      \-        Correction to short scrambling code polynomial                                                  6.2.0     6.3.0
  26/09/05             RAN\_29      RP-050450      0081     \-        Clarification on derivation of β~c~ and β~d~                                                    6.3.0     6.4.0
  26/09/05             RAN\_29      RP-050450      0082     1         DL Scrambling Code and Phase Reference Combinations                                             6.3.0     6.4.0
  26/09/05             RAN\_29      RP-050450      0083     1         Clarification on power offset quantization                                                      6.3.0     6.4.0
  20/03/06             RAN\_31      RP-060076      0084     1         Correction to number of configured DPDCHs when E-DPDCH is configured                            6.4.0     6.5.0
  20/03/06             RAN\_31      \-             \-       \-        Creation of Release 7 specification (v7.0.0) at RAN\#31                                         6.5.0     7.0.0
  07/03/07             RAN\_35      RP-070116      0085     2         Introduction of 64QAM for HSDPA                                                                 7.0.0     7.1.0
  30/05/07             RAN\_36      RP-070388      0086     4         Introduction of 16-QAM for HSUPA                                                                7.1.0     7.2.0
  30/05/07             RAN\_36      RP-070384      0087     1         Support for DL only SFN operation for MBMS FDD                                                  7.1.0     7.2.0
  30/05/07             RAN\_36      RP-070387      0089     \-        CQI and ACK/NACK power setting for MIMO                                                         7.1.0     7.2.0
  11/09/07             RAN\_37      RP-070644      0090     \-        Editorial changes in 25.213 for 16QAM specification                                             7.2.0     7.3.0
  27/11/07             RAN\_38      RP-070944      0091     1         Editorial changes in 25.213 for 16QAM specification                                             7.3.0     7.4.0
  04/03/08             RAN\_39      \-             \-       \-        Release 8 version further to RAN\_39 decision                                                   7.4.0     8.0.0
  28/05/08             RAN\_40      RP-080439      0093     1         Range of E-DCH amplitude ratios                                                                 8.0.0     8.1.0
  09/09/08             RAN\_41      RP-080709      0098     \-        Restricted Beta Factor Combinations for EUL                                                     8.1.0     8.2.0
  03/12/08             RAN\_42      RP-080989      0099     \-        Clarification to scrambling codes in dual cell HSDPA operation                                  8.2.0     8.3.0
  03/03/09             RAN\_43      RP-090238      0101     2         Correction to DTX bit insertion for MBSFN 16-QAM                                                8.3.0     8.4.0
  18/09/09             RAN\_45      \-             \-       \-        Release 9 created further to RAN\_45 decision                                                   8.4.0     9.0.0
  01/12/09             RAN\_46      RP-091170      0103     2         Introduction of DC-HSUPA                                                                        9.0.0     9.1.0
  01/12/09             RAN\_46      RP-091161      0106     \-        Clarification of the quantization of E-DPDCH power offset without E-DPCCH boosting              9.0.0     9.1.0
  14/09/10             RAN\_49      RP-100897      0107     1         Clarification of uplink frequencies                                                             9.1.0     9.2.0
  16/09/10             RAN\_49      RP-100902      0108     2         Release 10 created with the introduction of 4C HSDPA                                            9.2.0     10.0.0
  05/12/11             RAN\_54      RP-111671      0109     7         Introduction of 8C-HSDPA                                                                        10.0.0    11.0.0
  05/12/11             RAN\_54      RP-111672      0110     1         Introduction of Uplink Closed Loop Transmit Diversity for HSPA                                  10.0.0    11.0.0
  28/02/12             RAN\_55      RP-120288      0111     \-        Corrections to Uplink Closed Loop Transmit Diversity                                            11.0.0    11.1.0
  13/06/12             RAN\_56      RP-120741      0112     1         Clarification of CLTD Features                                                                  11.1.0    11.2.0
  04/09/12             RAN\_57      RP-121271      0113     2         Introduction of Multiflow                                                                       11.2.0    11.3.0
  04/09/12             RAN\_57      RP-121384      0114     1         Correction to the gain factor definition for S-DPCCH                                            11.2.0    11.3.0
  04/12/12             RAN\_58      RP-121845      0115     6         Introduction of uplink MIMO and 64QAM                                                           11.3.0    11.4.0
  04/12/12             RAN\_58      RP-121843      0116     6         Introduction of 4Tx\_HSDPA in 25.213                                                            11.3.0    11.4.0
  10/09/14             RAN\_65      RP-141482      0117     2         Introduction of Enhanced Broadcast of System Information                                        11.4.0    12.0.0
  10/09/14             RAN\_65      RP-141481      0118     1         Introduction of UMTS Heterogeneous Networks enhancements                                        11.4.0    12.0.0
  07/12/15             RAN\_70      RP-152023      0119     4         Introduction of Dual Carrier HSUPA enhancements for UTRAN CS in TS 25.213                       12.0.0    13.0.0
  07/12/15             RAN\_70      RP-152030      0121     1         Introduction of HSPA Dual-Band UL carrier aggregation                                           12.0.0    13.0.0
  -------------------- ------------ -------------- -------- --------- ----------------------------------------------------------------------------------------------- --------- ---------

  -------------------- ------------- ---------- -------- --------- --------- -------------------------------------------------------- -----------------
  **Change history**                                                                                                                  
  **Date**             **Meeting**   **TDoc**   **CR**   **Rev**   **Cat**   **Subject/Comment**                                      **New version**
  2017-03              RP-75         \-         \-       \-        \-        Promotion to Release 14 without technical change (MCC)   14.0.0
  2018-06              RP-80         \-         \-       \-        \-        Promotion to Release 15 without technical change (MCC)   15.0.0
  2020-07              RP-88e        \-         \-       \-        \-        Upgrade to Rel-16 version without technical change       **16.0.0**
  -------------------- ------------- ---------- -------- --------- --------- -------------------------------------------------------- -----------------
