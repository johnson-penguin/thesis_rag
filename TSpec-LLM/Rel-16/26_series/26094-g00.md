![](media/image1.jpeg){width="7.086111111111111in" height="1.86875in"}

  {#section .TT}

Contents {#contents .TT}
========

[4](#foreword)

[5](#scope)

[5](#__RefHeading___Toc517200556)

[5](#technical-description-of-vad-option-1)

[5](#definitions-symbols-and-abbreviations)

[5](#definitions)

[5](#symbols)

[5](#variables)

[6](#constants)

[7](#functions)

[7](#abbreviations)

[7](#general)

[7](#functional-description)

[8](#filter-bank-and-computation-of-sub-band-levels)

[10](#pitch-detection)

[10](#tone-detection)

[11](#correlated-complex-signal-analysis-and-detection)

[11](#vad-decision)

[12](#hangover-addition)

[14](#background-noise-estimation)

[16](#technical-description-of-vad-option-2)

[16](#definitions-symbols-and-abbreviations-1)

[16](#definitions-1)

[16](#symbols-1)

[16](#variables-1)

[17](#constants-1)

[17](#functions-1)

[18](#abbreviations-1)

[18](#general-1)

[18](#functional-description-1)

[19](#frequency-domain-conversion)

[19](#__RefHeading___Toc517200585)

[20](#__RefHeading___Toc517200586)

[20](#__RefHeading___Toc517200587)

[20](#frame-snr-and-long-term-peak-snr-calculation)

[21](#negative-snr-sensitivity-bias)

[21](#vad-decision-1)

[22](#__RefHeading___Toc517200591)

[22](#sinewave-detection)

[23](#background-noise-update-decision)

[23](#__RefHeading___Toc517200594)

[24](#computational-details)

[25](#annex-a-informative-change-history)Foreword 1 Scope 2 References 3
Technical Description of VAD Option 1 3.1 Definitions, symbols and
abbreviations 3.1.1 Definitions 3.1.2 Symbols 3.1.2.1 Variables 3.1.2.2
Constants 3.1.2.3 Functions 3.1.3 Abbreviations 3.2 General 3.3
Functional description 3.3.1 Filter bank and computation of sub-band
levels 3.3.2 Pitch detection 3.3.3 Tone detection 3.3.4 Correlated
Complex Signal Analysis (and detection) 3.3.5 VAD decision 3.3.5.1
Hangover addition 3.3.5.2 Background noise estimation 4 Technical
Description of VAD Option 2 4.1 Definitions, symbols and abbreviations
4.1.1 Definitions 4.1.2 Symbols 4.1.2.1 Variables 4.1.2.2 Constants
4.1.2.3 Functions 4.1.3 Abbreviations 4.2 General 4.3 Functional
description 4.3.1 Frequency Domain Conversion 4.3.2 Channel Energy
Estimator 4.3.3 Channel SNR Estimator 4.3.4 Voice Metric Calculation
4.3.5 Frame SNR and Long-Term Peak SNR Calculation 4.3.6 Negative SNR
Sensitivity Bias 4.3.7 VAD Decision 4.3.8 Spectral Deviation Estimator
4.3.9 Sinewave Detection 4.3.10 Background Noise Update Decision 4.3.10
Background Noise Estimate Update 5 Computational details Annex A
(informative) : Change history

Foreword
========

This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

1 Scope
=======

The present document specifies two alternatives for the Voice Activity
Detector (VAD) to be used in the Discontinuous Transmission (DTX) as
described in \[3\]. Implementors of mobile station and infrastructure
equipment conforming to the AMR specifications can choose which of the
two VAD options to implement. There are no interoperability factors
associated with this choice.

The requirements are mandatory on any VAD to be used either in User
Equipment (UE) or Base Station Systems (BSS)s that utilize the AMR
speech codec.

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\- References are either specific (identified by date of publication,
edition number, version number, etc.) or non‑specific.

\- For a specific reference, subsequent revisions do not apply.

\- For a non-specific reference, the latest version applies. In the case
of a reference to a 3GPP document (including a GSM document), a
non-specific reference implicitly refers to the latest version of that
document *in the same Release as the present document*.

\[1\] 3GPP TS 26.073: \"Adaptive Multi-Rate (AMR); ANSI C source code\".

\[2\] 3GPP TS 26.090: \"Transcoding functions\".

\[3\] 3 GPP TS 26.093: \"Source Controlled Rate operation\".

\[4\] ITU, The International Telecommunications Union, Blue Book, Vol.
III, Telephone Transmission Quality, IXth Plenary Assembly, Melbourne,
14-25 November, 1988, Recommendation G.711, Pulse code modulation (PCM)
of voice frequencies.

3 Technical Description of VAD Option 1
=======================================

3.1 Definitions, symbols and abbreviations
------------------------------------------

### 3.1.1 Definitions 

For the purposes of the present document, the following terms and
definitions apply:

**frame: t**ime interval of 20 ms corresponding to the time segmentation
of the speech\
transcoder

### 3.1.2 Symbols

For the purposes of the present document, the following symbols apply.

#### 3.1.2.1 Variables

**bckr\_est\[n\]** background noise estimate

**burst\_count** counts length of a speech burst, used by VAD hangover
addition

**hang\_count** hangover counter, used by VAD hangover addition

**complex\_hang\_count** hangover counter, used by CAD hangover addition

**complex\_hang\_timer** hangover initator, used fo Complex Activity
Estimation

**lagcount** pitch detection counter

**level\[n\]** signal level

**new\_speech** pointer of the speech encoder, points a buffer
containing last received samples of a speech frame \[2\]

**noise\_level** average level of the background noise estimate

**oldlagcount** lagcount of the previous frame

**pitch** flag indicating presence of a periodic signal

**complex\_warning** flag indicating the presence of a complex signal.

**best\_corr\_hp** normalized and limited value from maximum HP filtered
correlation vector

**corr\_hp** filtered best\_corr\_hp values

**pow\_sum** power of the input frame

**s(i)** samples of the input framer

**snr\_sum** measure between input frame and noise estimate

**stat\_count** stationarity counter

**stat\_rat** measure indicating stationary

**T\_op\[n\]** open-loop lags \[2\]

**t0** autocorrelation maxima calculated by the open-loop pitch analysis
\[2\]

**t1** signal power related to the autocorrelation maxima t0 \[2\]

**tone** flag indicating the presence of a tone

**vad\_thr** VAD threshold

**VAD\_flag** boolean VAD flag

**vadreg** intermediate VAD decision

**complex\_low** intermediate complex signal decisions

**complex\_high** intermediate complex signal decisions

#### 3.1.2.2 Constants

**ALPHA\_UP1** constant for updating noise estimate (see clause 3.3.5.2)

**ALPHA\_DOWN1** constant for updating noise estimate (see clause
3.3.5.2)

**ALPHA\_UP2** constant for updating noise estimate (see clause 3.3.5.2)

**ALPHA\_DOWN2** constant for updating noise estimate (see clause
3.3.5.2)

**ALPHA3** constant for updating noise estimate (see clause 3.3.5.2)

**ALPHA4** constant for updating average signal level (see clause
3.3.5.2)

**ALPHA5** constant for updating average signal level (see clause
3.3.5.2)

**BURST\_LEN\_HIGH\_NOISE** constant for controlling VAD hangover
addition (see clause 3.3.5.1)

**BURST\_LEN\_LOW\_NOISE** constant for controlling VAD hangover
addition (see clause 3.3.5.1)

**COEFF3** coefficient for the filter bank (see clause 3.3.1)

**COEFF5\_1** coefficient for the filter bank (see clause 3.3.1)

**COEFF5\_2** coefficient for the filter bank (see clause 3.3.1)

**HANG\_LEN\_HIGH\_NOISE** constant for controlling VAD hangover
addition (see clause 3.3.5.1)

**HANG\_LEN\_LOW\_NOISE** constant for controlling VAD hangover addition
(see clause 3.3.5.2)

**HANG\_NOISE\_THR** constant for controlling VAD hangover addition (see
clause 3.3.5.2)

**L\_FRAME** size of a speech frame, 160

**L\_NEXT** length for the lookahead of the speech encoder, 40

**LTHRESH** threshold for pitch detection (see clause 3.3.2)

**NOISE\_MAX** maximum value for noise estimate (see clause 3.3.5.2)

**NOISE\_MIN** minimum value for noise estimate (see clause 3.3.5.2)

**NTHRESH** threshold for pitch detection (see clause 3.3.2)

**POW\_PITCH\_THR** threshold for pitch detection (see clause 3.3.5)

**POW\_COMPLEX\_THR** threshold for complex detection (see clause 3.3.5)

**STAT\_COUNT** threshold for stationary detection (see clause 3.3.5.2)

**CAD\_MIN\_STAT\_COUNT** minimum threshold after complex warning

**STAT\_THR** threshold for stationary detection (see clause 3.3.5.2)

**STAT\_THR\_LEVEL** threshold for stationary detection (see clause
3.3.5.2)

**TONE\_THR** threshold for tone detection (see clause 3.3.3)

**VAD\_P1** constant of computation for VAD threshold (see clause
3.3.5.2)

**VAD\_POW\_LOW** constant for controlling VAD hangover addition (see
clause 3.3.5.1)

**VAD\_SLOPE** constant of computation for VAD threshold (see clause
3.3.5)

**VAD\_THR\_HIGH** constant of computation for VAD threshold (see clause
3.3.5)

**CVAD\_THRESH\_ADAPT\_HIGH** constant for updating complex\_high

**CVAD\_THRESH\_ADAPT\_LOW** constant for updating complex\_low

**CVAD\_THRESH\_HANG** constant for updating complex\_hang\_timer

**CVAD\_HANG\_LIMIT** constant for initiating complex\_hang\_count

**CVAD\_HANG\_LENGTH** constant for resetting complex\_hang\_count

#### 3.1.2.3 Functions

**+** addition

**-** subtraction

**\*** multiplication

**/** division

**\| x \|** absolute value of x

**AND** Boolean AND

**OR** Boolean OR

![](media/image4.wmf){width="2.56875in" height="0.25in"}

**MIN(x,y)** =![](media/image5.wmf){width="0.6520833333333333in"
height="0.5in"}

**MAX(x,y)** =![](media/image6.wmf){width="0.6520833333333333in"
height="0.5in"}

### 3.1.3 Abbreviations

For the purposes of the present document, the following abbreviations
apply:

**ANSI** American National Standards Institute

**DTX** Discontinuous Transmission

**VAD** Voice Activity Detector

**CAD** Complex Activity Detection

**CNG** Comfort Noise Generation

3.2 General
-----------

The function of the VAD algorithm is to indicate whether each 20 ms
frame contains signals that should be transmitted, i.e. speech, music or
information tones. The output of the VAD algorithm is a Boolean flag
(VAD\_flag) indicating presence of such signals.

3.3 Functional description
--------------------------

The block diagram of the VAD algorithm is depicted in figure 1. The VAD
algorithm uses parameters of the speech encoder to compute the Boolean
VAD flag (VAD\_flag). Samples of the Input frame (s(i)) are divided into
sub-bands and level of the signal in each band (level\[n\]) is
calculated. Input for the pitch detection function are open-loop lags
(T\_op\[n\]), which are calculated by open-loop pitch analysis of the
speech encoder. The pitch detection function computes a flag (pitch)
which indicates presence of pitch. Tone detection function calculates a
flag (tone), which indicates presence of an information tone. Tones are
detected based on pitch gain of the open-loop pitch analysis The pitch
gain is estimated using autocorrelation values (t0 and t1) received from
the pitch analysis. Complex Signal Detection function calculates a flag
(complex\_warning), which indicates presence of a correlated complex
signal such as music. Correlate complex signals are detected based on
analysis of the correlation vector available in the open-loop pitch
analysis.The VAD decision function estimates background noise levels.
Intermediate VAD decision is calculated based on the comparison of the
background noise estimate and levels of the input frame (level\[n\]).
Finally, the VAD flag is calculated by adding hangover to the
intermediate VAD decision.

![](media/image7.wmf){width="5.590277777777778in"
height="5.631944444444445in"}

Figure 3.1: Simplified block diagram of the VAD algorithm: Option 1

### 3.3.1 Filter bank and computation of sub-band levels

The input signal is divided into frequency bands using a 9-band filter
bank (figure 3.2). Cut-off frequencies for the filter bank are shown in
table 3.1.

Table 3.1. Cut-off frequencies for the filter bank

  ------------- ----------------
  Band number   Frequencies
  1             0 - 250 Hz
  2             250 - 500 Hz
  3             500 - 750 Hz
  4             750 - 1000 Hz
  5             1000 - 1500 Hz
  6             1500 - 2000 Hz
  7             2000 - 2500 Hz
  8             2500 - 3000 Hz
  9             3000 - 4000 Hz
  ------------- ----------------

Input for the filter bank is the speech frame pointed by the new\_speech
pointer of the speech encoder \[1\]. Input values for the filter bank
are scaled down by one bit. This ensures safe scaling, i.e. saturation
can not occur during calculation of the filter bank.

![](media/image8.wmf){width="4.7in" height="3.097916666666667in"}

Figure 3.2: Filter bank

The filter bank consists of 5^th^ and 3^rd^ order filter blocks. Each
filter block divides the input into high-pass and low-pass parts and
decimates the sampling frequency by 2. The 5^th^ order filter block is
calculated as follows:

![](media/image9.wmf){width="2.402083333333333in"
height="0.26319444444444445in"} (3.1a)

![](media/image10.wmf){width="2.4305555555555554in"
height="0.26319444444444445in"} (3.1b)

where

x(i) input signal for a filter block

![](media/image11.wmf){width="0.40208333333333335in"
height="0.26319444444444445in"} low-pass component

![](media/image12.wmf){width="0.41597222222222224in"
height="0.26319444444444445in"} high-pass component

The 3^rd^ order filter block is calculated as follows:

![](media/image13.wmf){width="2.1805555555555554in"
height="0.26319444444444445in"} (3.2a)

![](media/image14.wmf){width="2.1930555555555555in"
height="0.26319444444444445in"} (3.2b)

The filters ![](media/image15.wmf){width="0.3333333333333333in"
height="0.2361111111111111in"},![](media/image16.wmf){width="0.3458333333333333in"
height="0.2361111111111111in"},
and![](media/image17.wmf){width="0.3333333333333333in"
height="0.25in"}are first order direct form all-pass filters, whose
transfer function is given by:

![](media/image18.wmf){width="1.1930555555555555in"
height="0.4576388888888889in"}, (3.3)

where C is the filter coefficient.

Coefficients for the all-pass filters
![](media/image19.wmf){width="0.3333333333333333in"
height="0.2361111111111111in"},![](media/image20.wmf){width="0.3458333333333333in"
height="0.2361111111111111in"},
and![](media/image21.wmf){width="0.3333333333333333in" height="0.25in"}
are COEFF5\_1, COEFF5\_2, and COEFF3, respectively.

Signal level is calculated at the ouput of the filter bank at each
frequency band as follows:

![](media/image22.wmf){width="1.4305555555555556in"
height="0.5131944444444444in"}, (3.4)

where:

n index for the frequency band

![](media/image23.wmf){width="0.375in" height="0.25in"} sample i at the
output of the filter bank at frequency band n

![](media/image24.wmf){width="0.5833333333333334in" height="0.25in"}
=![](media/image25.wmf){width="1.0416666666666667in"
height="0.7777777777777778in"}

![](media/image26.wmf){width="0.44305555555555554in" height="0.25in"}
=![](media/image27.wmf){width="0.9430555555555555in"
height="0.7777777777777778in"}

Negative indices of ![](media/image28.wmf){width="0.375in"
height="0.25in"} refer to the previous frame.

### 3.3.2 Pitch detection

The purpose of the pitch detection function is to detect vowel sounds
and other periodic signals. The pitch detection is based on comparison
of open-loop lags (T\_op\[n\]), which are calculated by the speech
encoder \[2\]. If the difference of consecutive open-loop lags
(T\_op\[n\]) is smaller than a threshold, lagcount is incremented. If
the sum of the lagcounts of two consecutive frames is high enough, the
pitch flag is set. For 5.15 and 4.75 kbit/s rates, only one open-loop
lag is calculated, and therfore only the first lag-comparison is made
every frame. The pitch flag is calculated as follows:

Lagcount = 0;

If ( \| T\_op\[-1\] - T\_op\[0\] \| \< LTHRESH)

Lagcount = Lagcount + 1

If ( \| T\_op\[0\] - T\_op\[1\] \| \< LTHRESH)

Lagcount = Lagcount + 1

If (Lagcount + oldlagcount \>= NTHRESH)

pitch = 1

else

pitch = 0

oldlagcount = Lagcount

T\_op\[-1\] refers to the open-loop lag of the previous frame.

### 3.3.3 Tone detection

Tone detection is used to detect information tones, since the pitch
detection function can not always detect these signals. Also, other
signals which contain very strong periodic component are detected,
because it may sound annoying if these signals are replaced by comfort
noise. If the open-loop pitch gain is higher than the constant
TONE\_THR, tone is detected and tone flag is set. The pitch gain can be
tested by comparing variables t0 and t1 as follows:

if (t0 \> TONE\_THR \* t1)

tone = 1

The speech encoder calculates the pitch in three delay ranges, except
for mode 10.2 kbit/s, where only one range is used. The above comparison
is made once for each delay range and the tone flag should be set if the
condition is true at least in one range. Otherwise, the tone flag should
be set to zero.

The variables t0 and t1 are calculated by the open-loop pitch analysis
of the speech encoder \[2\]. The variable t0 is autocorrelation maxima
given by:

![](media/image29.wmf){width="1.5416666666666667in" height="0.375in"}
(3.5)

The variable t1 is the signal power related to the autocorrelation
maxima t0 at the delay value k:

![](media/image30.wmf){width="1.1520833333333333in" height="0.375in"}
(3.6)

The open-loop pitch search and correspondingly the tone flag is computed
twice in each frame, except for modes 5.15 kbit/s and 4.75 kbit/s, where
it is computed only once.

### 3.3.4 Correlated Complex Signal Analysis (and detection)

Correlated complex signal detection is used to detect correlated signals
in the highpass filtered weighted speech domain, since the pitch and
tone detection functions can not always detect these signals. Signals
which contain very strong correlation values in the high pass filtered
domain are taken care of, because it may sound really annoying if these
signals are replaced by comfort noise. If the statistics of the maximum
normalized correlation value of a high pass filtered input signal
indicates the presence of a correlated complex signal a flag
***complex\_warning*** is set. To reduce complexity the high band
correlation analysis is performed in a simplified manner by analysing
the high pass filtered fullband correlation vector which is available
from the OL-LTP analysis performed by the speech encoder at least once
in each frame.

*best\_corr\_hp~m~* is the maximum normalized value of the high pass
filtered correlation in the range 19-146 limited to be in the range
\[1.0, 0.0\]. (Note that the *best\_corr\_hp* value is delayed one
frame). The high pass filter is a simple first order filter with
coefficients \[1, -1\] The *best\_corr\_hp* value is filtered according
to :

![](media/image31.wmf){width="4.457638888888889in" height="0.25in"},

*where alpha* is varied between 0.98 and 0.8 as a function of
*corr\_hp~m~* and *best\_corr\_hp~m~*

The *corr\_hp* output value is thresholded into two to registers
*complex\_high*, *complex\_low* and one *counter complex\_hang\_timer*.

*complex\_low* is set to 1 if the *corr\_hp* value is greater than
CVAD\_THRESH\_ADAPT\_LOW.

*complex\_high* is set to 1 if the *corr\_hp* value is greater than
CVAD\_THRESH\_ADAPT\_HIGH.

*complex\_hang\_timer* is increased by 1 if the *corr\_hp* value is
greater than CVAD\_THRESH\_HANG. If the *corr\_hp* value is lower than
or equal to CVAD\_THRESH\_HANG the *complex\_hang\_timer* value is set
to 0*.*

The flag ***complex\_warning*** is set if *complex\_low have been set
for 15 consecutive frames* or *complex\_high* has been set for 8
consecutive frames*.*

The open-loop pitch search and correspondingly the tone flag is computed
twice in each frame, except for modes 5.15 kbit/s and 4.75 kbit/s, where
it is computed only once. The computation of the corr\_hp value is
however always done only once per frame using the newest correlation
vector available.

### 3.3.5 VAD decision

Power of the input frame is calculated as follows:

![](media/image32.wmf){width="2.1659722222222224in" height="0.5in"},
(3.7)

where samples s(i) of the input frame are pointed by the new\_speech
pointer of the speech encoder. If the power of the input frame
(pow\_sum) is lower than the constant POW\_PITCH\_THR, last pitch flag
is set to zero. If the power of the input frame (pow\_sum) is lower than
the constant POW\_COMPLEX\_THR, last complex\_low flag is set to zero.

The difference between the signal levels of the input frame and
background noise estimate is calculated as follows:

![](media/image33.wmf){width="2.7215277777777778in"
height="0.47152777777777777in"}, (3.8)

where:

level\[n\] signal level at band n

bckr\_est\[n\] level of background noise estimate at band n

VAD decision is made by comparing the variable snr\_sum to a threshold.
The threshold (vad\_thr) is tuned to get desired sensitivity at each
background noise level. The higher the noise level the lower is the
threshold. Specially, a low threshold at high-level background noise is
needed to detect speech reliably enough, although probability of
detecting noise as speech also increases.

Average level of background noise is calculated by adding noise
estimates at each band:

![](media/image34.wmf){width="2.0416666666666665in"
height="0.47152777777777777in"} (3.9)

Threshold is calculated using average noise level as follows:

![](media/image35.wmf){width="5.138888888888889in"
height="0.22152777777777777in"}, (3.10)

where VAD\_SLOPE, VAD\_P1, and VAD\_THR\_HIGH are constants.

The variable vadreg indicates intermediate VAD decision and it is
calculated as follows:

if (snr\_sum \> vad\_thr)

vadreg = 1

else

vadreg = 0

#### 3.3.5.1 Hangover addition

Before the final VAD flag is given, a hangover is added. The hangover
addition helps to detect low power endings of speech bursts, which are
subjectively important but difficult to detect. Also a long hangover is
added if the signal has been found to be of very complex nature for a
long time (2 seconds) since the VAD is not likely to work reliably for
such a complex signal.

VAD flag is set to \"1\" if less that hang\_len frames with \"0\"
decision have been elapsed since burst\_len consecutive \"1\" decisions
have been detected. The variables hang\_len and burst\_len are set
depending on the average noise level (noise\_level). The ***vad\_flag***
is also controlled by the ***complex\_hang\_count*** which indicates
that the signal is too complex for the VAD and should not be used with a
Comfort noise generation algorithm. The filtered correlation value
***corr\_hp*** is also used as an activity indication after the VAD has
indicated noise for a while (during 200 ms), this will aid in situations
where the VAD noise estimate has adapted to a rather stationary but
still all to complex signal to make it sound well with CNG.

The power of the input frame is compared to a threshold (VAD\_POW\_LOW).
If the power is lower, the VAD flag is set to \"0\" and no hangover is
added. The VAD\_flag is calculated as follows:

if (noise\_level \> HANG\_NOISE\_THR)

burst\_len = BURST\_LEN\_HIGH\_NOISE

hang\_len = HANG\_LEN\_HIGH\_NOISE

else

burst\_len = BURST\_LEN\_LOW\_NOISE

hang\_len = HANG\_LEN\_LOW\_NOISE

if(complex\_hang\_timer \> CVAD\_HANG\_LIMIT) {

if(complex\_hang\_count \< CVAD\_HANG\_LENGTH {

complex\_hang\_count = CVAD\_HANG\_LENGTH;

}

}

if (powsum \< VAD\_POW\_LOW){

burst\_count = 0

hang\_count = 0

complex\_hang\_count = 0;

complex\_hang\_timer = 0;

Vad\_flag=0;

Goto **Exit**;

}

VAD\_flag=0;

if(complex\_hang\_count != 0){

burst\_count = BURST\_LEN\_HIGH\_NOISE;

complex\_hang\_count = complex\_hang\_count -- 1 ;

VAD\_flag=1;

goto **Exit**

} else {

if ( (the 10 last out of 11 vadreg values all are zero) AND

(corr\_hp \> CVAD\_THRESH\_IN\_NOISE ) ) {

VAD\_flag = 1;

Goto **Exit**

}

}

if (vadreg = 1){

burst\_count = burst\_count + 1}

if (burst\_count \>= burst\_len){

hang\_count = hang\_len

}

VAD\_flag = 1

} else {

burst\_count = 0

if (hang\_count \> 0){

hang\_count = hang\_count - 1

VAD\_flag=1

}

}

Label **Exit**

#### 3.3.5.2 Background noise estimation

Background noise estimate (bckr\_est\[n\]) is updated using amplitude
levels of the previous frame. Thus, the update is delayed by one frame
to avoid undetected start of speech bursts to corrupt the noise
estimate. If the internal VAD decision is \"1\" or if pitch has been
detected, the noise estimate is not updated upwards. The update speed
for the current frame is selected as follows:

if ((vadreg for the last 4 frames has been zero) AND

(pitch for the last 4 frames has been zero) AND

(we are not in complex signal hangover))

alpha\_up = ALPHA\_UP1

alpha\_down = ALPHA\_DOWN1

else

if ((stat\_count = 0 ) AND (not in complex\_signal hangover))

alpha\_up = ALPHA\_UP2

alpha\_down = ALPHA\_DOWN2

else

alpha\_up = 0

alpha\_down = ALPHA3

The variable stat\_count indicates stationary and its propose is
explained later in this clause. The variables alpha\_up and alpha\_down
define the update speed to upwards and downwards. The update speed for
each band n is selected as follows:

if (![](media/image36.wmf){width="0.9430555555555555in" height="0.25in"}
\< ![](media/image37.wmf){width="0.7215277777777778in" height="0.25in"})

alpha = alpha\_up

else

alpha = alpha\_down

Finally, noise estimate is updated as follows:

![](media/image38.wmf){width="4.430555555555555in" height="0.25in"},
(3.11)

where:

n index of the frequency band

m index of the frame

Level of the background estimate (bckr\_est\[n\]) is limited between
constants NOISE\_MIN and NOISE\_MAX.

If level of background noise increases suddenly, vadreg will be set to
\"1\" and background noise is not updated upwards. To recover from this
situation, update of the background noise estimate is enabled if the
intermediate VAD decision (vadreg) is \"1\" for enough long time and
spectrum is stationary. Stationary (stat\_rat) is estimated using
following equation:

![](media/image39.wmf){width="5.138888888888889in"
height="0.4861111111111111in"} (3.12)

If the stationary estimate (stat\_rat) is higher than a threshold, the
stationary counter (stat\_count) is set to the initial value defined by
constant STAT\_COUNT. The stationary counter (stat\_count) is also
initialised if pitch or tone or a complex\_warning is detected. If the
signal is not stationary but speech has been detected (VAD decision is
\"1\"), stat\_count is decreased by one in each frame until it is zero.

if (***complex\_warning***){

If(stat\_count \< CAD\_MIN\_STAT\_COUNT)

stat\_count = CAD\_MIN\_STAT\_COUNT

}

if ( (8 last vadreg flags have been zero) OR (2 last pitch flags have
been one) OR (5 last tone flags have been one) )

stat\_count = STAT\_COUNT

else

if (stat\_rat \> STAT\_THR)

stat\_count = STAT\_COUNT

else

if ((vadreg) AND (stat\_count ≠ 0))

stat\_count = stat\_count - 1

The average signal levels (ave\_level\[n\]) are calculated as follows:

![](media/image40.wmf){width="4.4430555555555555in" height="0.25in"}
(3.13)

The update speed (alpha) for the previous equation is selected as
follows:

if (stat\_count = STAT\_COUNT)

alpha = 1.0

else if (vadreg = 1)

alpha=ALPHA5

else

alpha = ALPHA4

4 Technical Description of VAD Option 2
=======================================

4.1 Definitions, symbols and abbreviations
------------------------------------------

### 4.1.1 Definitions 

For the purposes of the present document, the following terms and
definitions apply:

**codec: c**ombination of an encoder and decoder in series
(encoder/decoder)

**compand:** process of compressing and expanding a signal. In this
text, the process is described in terms of PCM \[4\]

**Decoder**: generally, a device for the translation of a signal from a
digital representation into an analog format. For the present document,
a device which converts speech encoded in the format specified in the
present document to analog or an equivalent PCM representation

**DFT**: see Discrete Fourier Transform

**Discrete Fourier Transform (DFT)**: method of transforming a time
domain sequence into a corresponding frequency domain sequence

**Encoder**: generally, a device for the translation of a signal into a
digital representation. For the present document, a device which
converts speech from an analog or its equivalent PCM representation to
the digital representation described in the present document

**Fast Fourier Transform (FFT)**: efficient implementation of the
Discrete Fourier Transform

**FFT**: see Fast Fourier Transform

**Vocoder**:voice coder

**frame: t**ime interval of 20 ms corresponding to the time segmentation
of the speech transcoder

### 4.1.2 Symbols

For the purposes of the present document, the following symbols apply.

#### 4.1.2.1 Variables

*αch*(*m*) channel energy smoothing factor

*α*(*m*) exponential windowing factor

∆~Ε~(m) estimated spectral deviation between current power spectrum and
average long term power spectral estimate

φ(m) spectral peak-to-average ratio

σ*q*^(i*)*^ quantized channel SNR indices

b(m) burst count

b~th~ burst count threshold

{*d*(*m*)} overlapped portion of the frame buffer of input samples

E*ch*(*m,i*) channel energy estimate; channel i, subframe m

**E***ch*(*m*) vector of channel energy estimates, 0 ≤ i \< N~c~

E~dB~(m,i) estimated log power spectrum

**E***dB*(*m*) vector of log power spectrum estimates, 0 ≤ i \< N~c~

![](media/image41.wmf){width="0.36527777777777776in"
height="0.14652777777777778in"} average long term power spectral
estimate

![](media/image42.wmf){width="0.36527777777777776in"
height="0.14652777777777778in"} vector of average long term power
spectral estimates, 0 ≤ i \< N~c~

E*n*(*m,i*) channel noise estimate

**E***n*(*m*) vector of channel noise estimates, 0 ≤ i \< N~c~

E~tn~(m) total estimated noise energy

*Etot*(*m*) total channel energy

*E^\'^tot*(*m*) modified total channel energy

*h(m)* hysteresis counter

*h~cnt~* hangover count

*h~o~*(*n*) overlap-and-add buffer of samples

*hyster\_cnt* hysteresis counter to avoid long term creeping of
*update\_cnt*

*last\_update\_cnt* previous value of *update\_cnt*

*shp*(*n*) sample at the output of the speech encoder high pass filter

*sinewave\_flag* boolean flag, set TRUE when spectral peak-to-average
ratio is greater than 10dB and the spectral deviation is less than
DEV\_THLD

*SNR* Signal to Noise ratio

*SNR~p~(m)* long-term peak SNR

*SNR~q~(m)* quantized version of *SNR~p~(m)*

*update\_cnt* counter gating noise estimate update process

*update\_flag* flag controlling noise estimate updating

*VAD(m)* boolean VAD flag for subframe m

VAD\_flag boolean VAD Flag

v(m) sum of voice metrics

v~th~ voice metric threshold

#### 4.1.2.2 Constants

> *α~H\ ~*upper limit for values of *α*(*m*)
>
> *α~L\ ~*lower limit for values of *α*(*m*)
>
> *α~n~* channel noise smoothing factor
>
> *ζp* pre-emphasis factor
>
> b~table~ table to generate b~th~
>
> D overlap (delay) in sample intervals
>
> DEV\_THLD threshold for setting *sinewave\_flag*
>
> E~floor~ low threshold for *Etot*(*m*)
>
> *EH* high energy endpoint for linear interpolation of *E~tot~(m)*
>
> *Einit* minimum allowable channel noise initialisation energy
>
> *EL* low energy endpoint for linear interpolation of *E~tot~(m)*
>
> *E*min minimum allowable channel energy
>
> f*H* high channel combining table
>
> f*L* low channel combining table
>
> g(n) trapezoidal window, n = 0 to M
>
> G(k) frequency domain transformation of g(n)
>
> h~table~ table to generate h~cnt~
>
> HYSTER\_CNT\_THLD threshold for *hyster\_cnt*
>
> L subframe length in samples
>
> M DFT sequence length
>
> *Nc* number of combined channels

*NOISE\_FLOOR\_D* low threshold for *Etot*(*m*) in dB

UPDATE\_CNT\_THLD threshold for update\_cnt

UPDATE\_THLD threshold for v(m)

> V voice metric table
>
> v~table~ table to generate v~th~

#### 4.1.2.3 Functions

**+** addition

**-** subtraction

**\*** multiplication

**/** division

![](media/image43.wmf){width="0.20833333333333334in"
height="0.20833333333333334in"} largest integer ≤ x

**AND** Boolean AND

**OR** Boolean OR

![](media/image44.wmf){width="0.5833333333333334in"
height="0.5138888888888888in"}
![](media/image4.wmf){width="2.5694444444444446in" height="0.25in"}

### 4.1.3 Abbreviations

For the purposes of the present document, the following abbreviations
apply:

**ANSI American National Standards Institute**

**DTX Discontinuous Transmission**

**VAD Voice Activity Detector**

**CAD Complex Activity Detection**

**CNG** Comfort Noise Generation

4.2 General
-----------

The function of the VAD algorithm is to indicate whether each 20 ms
frame contains signals that should be transmitted, i.e. speech, music or
information tones. The output of the VAD algorithm is a Boolean flag
(VAD\_flag) indicating presence of such signals.

4.3 Functional description
--------------------------

The block diagram of the VAD algorithm is depicted in figure 4.1. The
VAD algorithm uses parameters of the speech encoder to compute the
Boolean VAD flag (VAD\_flag).

![](media/image45.wmf){width="5.625694444444444in"
height="4.073611111111111in"}

Figure 4.1: Block Diagram of the VAD algorithm: Option 2

**Input**:

The output of the High-Pass Filter, {*shp*(*n*)}

*- LTP\_flag* is generated by the comparison of the long-term prediction
gain to a constant threshold LTP\_THLD, where the long-term prediction
gain *β* is derived from the speech encoder\[2\] open-loop pitch
predictor.

**Output**:

*-* The output of the vad is designated as VAD\_flag

**Initialization**:

The following variables shall be set to zero at initialization (frame
*m* = 0):

*-* The pre-emphasis memory

The following shall be initialized to a startup value other than zero:

The channel energy estimate, **E***ch*(*m*), (see clause 4.3.2)

The long-term power spectral estimate,
![](media/image46.wmf){width="0.37569444444444444in"
height="0.15694444444444444in"}, (see clause 4.3.5)

The channel noise estimate, **E***n*(*m*), (see clause 4.3.8)

Processing: The following procedures shall be executed two times per 20
ms speech frame and the current 10 ms subframe shall be denoted *m*.

### 4.3.1 Frequency Domain Conversion

The input signal is pre-emphasised and windowed prior to frequency
domain conversion. This process is defined as:

![](media/image47.wmf){width="2.69375in" height="0.2638888888888889in"},
(4.1)

where *d*(*n*) is the pre-emphasised speech buffer, *ζ~p~* is the
pre-emphasis factor, and *L* is the subframe length. A rectangular
window is then used to frame the speech prior to frequency domain
conversion, which is expressed as:

![](media/image48.wmf){width="3.125in" height="0.5in"}, (4.2)

where *D* is the zero-padding offset into the DFT buffer, and *M* is the
DFT length. The transformation of *g*(*n*) to the frequency domain is
performed using the Discrete Fourier Transform (DFT) defined[^1] as:

![](media/image49.wmf){width="2.763888888888889in"
height="0.4722222222222222in"} (4.3)

where *e^jω ^*is a unit amplitude complex phasor with instantaneous
radial position *ω*.

### 4.3.2 Channel Energy Estimator

Calculate the channel energy estimate **E***ch*(*m*) for the current
subframe, *m*, as:

![](media/image50.wmf){width="5.997222222222222in"
height="0.5055555555555555in"} (4.4)

where *E*min is the minimum allowable channel energy, *αch*(*m*) is the
channel energy smoothing factor (defined below), *Nc* is the number of
combined channels, and *fL*(*i*) and *fH*(*i*) are the *i*-th elements
of the respective low and high channel combining tables.

The channel energy smoothing factor, *αch*(*m*), is defined as:

![](media/image51.wmf){width="1.5965277777777778in" height="0.5in"}
(4.5)

So, this means that *αch*(*m*) assumes a value of zero for the first
frame (*m* = 1) and a value of 0.45 for all subsequent frames. This
allows the channel energy estimate to be initialized to the unfiltered
channel energy of the first frame.

### 4.3.3 Channel SNR Estimator

Estimate the channel SNR vector { *σ* } as:

![](media/image52.wmf){width="2.5694444444444446in"
height="0.5277777777777778in"} (4.6)

where **E***n*(*m*) is the current channel noise energy estimate (see
clause 4.3.8), and then quantify the channel SNR estimate in 3/8 dB
steps to yield the channel SNR indices { *σ~q~* } given as:

![](media/image53.wmf){width="3.75in" height="0.2638888888888889in"}
(4.7)

where the values of { σ*q* } are constrained to be between 0 and 89,
inclusive.

### 4.3.4 Voice Metric Calculation

Next, calculate the sum of voice metrics as:

![](media/image54.wmf){width="1.2916666666666667in"
height="0.4861111111111111in"} , (4.8)

where *V*(*k*) is the *k*th value of the 90 element voice metric table
**V**.

### 4.3.5 Frame SNR and Long-Term Peak SNR Calculation

The instantaneous frame SNR, *SNR*, and long-term peak SNR,
*SNR~p~*(*m*), are used to calibrate the responsiveness of the VAD
decision. When the frame count is less than or equal to four (*m* ≤ 4)
or the forced update flag (sec 4.3.10) is set (fupdate\_flag == TRUE),
then the SNR\'s are initialized as:

![](media/image55.wmf){width="3.013888888888889in"
height="0.5277777777777778in"}. (4.9)

Otherwise, the instantaneous frame SNR is generated by:

![](media/image56.wmf){width="2.125in" height="0.5277777777777778in"}
(4.10)

and the long-term peak SNR is derived by the following expression:

![](media/image57.wmf){width="5.777777777777778in"
height="0.8055555555555556in"}. (4.11)

The long-term peak SNR is then quantized in 3 dB steps and limited to be
between 0 and 19, as follows:

![](media/image58.wmf){width="2.5965277777777778in"
height="0.2638888888888889in"} (4.12)

where ![](media/image43.wmf){width="0.20833333333333334in"
height="0.20833333333333334in"} is the largest integer ≤ *x* (floor
function).

### 4.3.6 Negative SNR Sensitivity Bias

In order for the VAD decision to overcome the problem of being
over-sensitive to fluctuating, non-stationary background noise
conditions, a bias factor is used to increase the threshold on which the
VAD decision is based. This bias factor is derived from an estimate of
the variablility of the background noise estimate. The variability
estimate is further based on negative values of the instantaneous SNR.
It is presumed that a negative SNR can only occur as a result of
fluctuating background noise, and not from the presence of voice.
Therefore, the bias factor *μ*(*m*) is derived by first calculating the
variability factor *ψ*(*m*) as:

![](media/image59.wmf){width="3.1527777777777777in"
height="0.5277777777777778in"} (4.13)

which is then clamped in magnitude to
![](media/image60.wmf){width="1.0138888888888888in"
height="0.2222222222222222in"}. In addition, the variability factor is
reset to zero when the frame count is less than or equal to four (*m* ≤
4) or the forced update flag (sec 4.3.10) is set (*fupdate\_flag* ==
TRUE). The bias factor *μ*(*m*) is then calculated as:

![](media/image61.wmf){width="2.2777777777777777in"
height="0.2361111111111111in"} (4.14)

### 4.3.7 VAD Decision

The quantized SNR *SNR~q~* is used to determine the respective voice
metric threshold *vth*, hangover count *hcnt*, and burst count threshold
*bth* parameters:

![](media/image62.wmf){width="3.763888888888889in"
height="0.2638888888888889in"} (4.15)

where *SNRQ* is the index of the respective table elements. The VAD
decision can then be made according to the following pseudocode:

if ( *v*(*m*) \> *vth* + *μ*(*m)*) { /\* if the voice metric \> voice
metric threshold\*/\
*VAD*(*m*) = ON\
*b*(*m*) = *b*(*m*-1) + 1 /\* increment burst counter \*/\
if ( *b*(*m*) \> *bth* ) { /\* compare counter with threshold \*/\
*h*(*m*) = *hcnt* /\* set hangover \*/\
}\
} else {\
*b*(*m*) = 0 /\* clear burst counter \*/\
*h*(*m*) = *h*(*m*-1) -1 /\* decrement hangover **/\
** if ( *h*(*m*) \<= 0 ) { /\* check for expired hangover **/\
** *VAD*(*m*) = OFF\
*h*(*m*) = 0\
} else {\
*VAD*(*m*) = ON /\* hangover not yet expired \*/\
}\
}

Note that two 10 ms subframes are required to determine one VAD
decision. The final decision is determined by the maximum of two
subframe decisions, i.e.

if(*VAD*(*m*) == ON OR *VAD*(*m-1*) == ON) {\
VAD\_flag = TRUE\
} else {\
VAD\_flag = FALSE\
}

### 4.3.8 Spectral Deviation Estimator

The spectral deviation estimator is used as a safeguard against
erroneous updates of the background noise estimate. If the spectral
deviation of the input signal is too high, then the background noise
estimate update may not be permitted. Calculate the estimated log power
spectrum as:

![](media/image63.wmf){width="2.7916666666666665in" height="0.25in"}
(4.16)

Then, calculate the estimated spectral deviation between the current
power spectrum and the average long-term power spectral estimate:

![](media/image64.wmf){width="2.236111111111111in"
height="0.4861111111111111in"} (4.17)

where ![](media/image65.wmf){width="0.5416666666666666in"
height="0.2638888888888889in"} is the average long-term power spectral
estimate calculated during the previous subframe, as defined in Equation
4.20. The initial value of
![](media/image65.wmf){width="0.5416666666666666in"
height="0.2638888888888889in"}, however, is defined to be the estimated
log power spectrum of subframe 1, or:

![](media/image66.wmf){width="1.75in" height="0.2638888888888889in"}
(4.18)

The exponential windowing factor,* α*(*m*), is then calculated as a
function of the instantaneous frame SNR *SNR* and the long-term peak SNR
*SNR~p~*(*m*), as:

![](media/image67.wmf){width="2.8333333333333335in"
height="0.5555555555555556in"}, (4.19)

which is then limited to ![](media/image68.wmf){width="1.125in"
height="0.2361111111111111in"}.

The average long-term power spectral estimate is then updated for the
next frame by:

![](media/image69.wmf){width="4.166666666666667in"
height="0.2638888888888889in"} (4.20)

where all the variables are previously defined.

### 4.3.9 Sinewave Detection

Next the *sinewave\_flag* is set TRUE when the spectral peak-to-average
ratio *φ*(*m*) is greater than 10, i.e.

![](media/image70.wmf){width="2.638888888888889in" height="0.5in"}
(4.21)

where:

![](media/image71.wmf){width="3.361111111111111in" height="0.69375in"}
(4.22)

### 4.3.10 Background Noise Update Decision

The following logic, as shown in pseudo-code, demonstrates how the noise
estimate update decision is ultimately made:

/\* Normal update logic \*/\
*update\_flag* = ***fupdate\_flag* =** FALSE\
if ( *v*(*m*) ≤ UPDATE\_THLD and *b*(*m*) == 0 ) {\
*update\_flag* = TRUE\
*update\_cnt* = 0\
}

/\* Forced update logic (for over-riding the normal update logic)\*/\
else if (( *Etot* \> NOISE\_FLOOR) and ( ∆*E*(*m*) \< DEV\_THLD )\
**and ( *sinewave\_flag* == FALSE )** and (*LTP\_flag* == FALSE)) {\
*update\_cnt* = *update\_cnt* + 1\
if ( *update\_cnt* ≥ UPDATE\_CNT\_THLD )\
*update\_flag* = ***fupdate\_flag* =** TRUE\
}

/\* \"Hysteresis\" logic to prevent long-term creeping of update\_cnt
\*/

if ( *update\_cnt* == *last\_update\_cnt* )\
*hyster\_cnt* = *hyster\_cnt* + 1\
else\
*hyster\_cnt* = 0\
*last\_update\_cnt* = *update\_cnt*\
if ( *hyster\_cnt* \> HYSTER\_CNT\_THLD )\
*update\_cnt* = 0

where *E~tot~* is the total channel energy defined as:

![](media/image72.wmf){width="1.2361111111111112in"
height="0.4861111111111111in"} (4.23)

and *LTP\_flag* is generated by the comparison of the long-term
prediction gain to a constant threshold LTP\_THLD, i.e.:

![](media/image73.wmf){width="2.888888888888889in" height="0.5in"}
(4.24)

where the long-term prediction gain *β* is derived from the speech
encoder \[2\] open-loop pitch predictor, and can be expressed as:

![](media/image74.wmf){width="1.75in" height="0.6111111111111112in"}
(4.25)

where *s~w~*(*n*) is the weighted speech, *k* is the optimal open-loop
lag, and *N~p~* is the pitch analysis frame length. This expression is
calculated in the speech encoder on the previous frame.

### 4.3.10 Background Noise Estimate Update

If (and only if) the update flag is set (*update\_flag* == TRUE), then
update the channel noise estimate for the next subframe by:

![](media/image75.wmf){width="4.430555555555555in" height="0.25in"}
(4.26)

where *E*min is the minimum allowable channel energy, and *αn* is the
channel noise smoothing factor. The channel noise estimate shall be
initialized for each of the first four frames to the estimated channel
energy, i.e.:

![](media/image76.wmf){width="3.44375in" height="0.25in"}, (4.27)

where *Einit* is the minimum allowable channel noise initialization
energy.

5 Computational details
=======================

A low level description has been prepared in form of ANSI C source code
\[1\].

######## Annex A (informative) : Change history

+-------+-------+-------+-------+-------+-------+-------+-------+
| Doc   |       |       |       |       |       |       |       |
| ument |       |       |       |       |       |       |       |
| hi    |       |       |       |       |       |       |       |
| story |       |       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| > V.  | > Oc  | > 3G  |       |       |       |       |       |
| >     | tober | > TS  |       |       |       |       |       |
| 2.0.0 | >     | > 2   |       |       |       |       |       |
|       |  1999 | 6.094 |       |       |       |       |       |
|       |       | >     |       |       |       |       |       |
|       |       |  pres |       |       |       |       |       |
|       |       | ented |       |       |       |       |       |
|       |       | > for |       |       |       |       |       |
|       |       | > app |       |       |       |       |       |
|       |       | roval |       |       |       |       |       |
|       |       | > to  |       |       |       |       |       |
|       |       | > T   |       |       |       |       |       |
|       |       | SG\#5 |       |       |       |       |       |
|       |       | > Pl  |       |       |       |       |       |
|       |       | enary |       |       |       |       |       |
|       |       | > me  |       |       |       |       |       |
|       |       | eting |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| > V.  | > Oc  | > 3G  |       |       |       |       |       |
| >     | tober | > TS  |       |       |       |       |       |
| 3.0.0 | >     | > 2   |       |       |       |       |       |
|       |  1999 | 6.094 |       |       |       |       |       |
|       |       | > app |       |       |       |       |       |
|       |       | roved |       |       |       |       |       |
|       |       | > at  |       |       |       |       |       |
|       |       | > T   |       |       |       |       |       |
|       |       | SG\#5 |       |       |       |       |       |
|       |       | > Pl  |       |       |       |       |       |
|       |       | enary |       |       |       |       |       |
|       |       | > me  |       |       |       |       |       |
|       |       | eting |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| C     |       |       |       |       |       |       |       |
| hange |       |       |       |       |       |       |       |
| hi    |       |       |       |       |       |       |       |
| story |       |       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| **D   | **TSG | **TSG | *     | **    | **Su  | **    | **    |
| ate** |  \#** | D     | *CR** | Rev** | bject | Old** | New** |
|       |       | oc.** |       |       | /Comm |       |       |
|       |       |       |       |       | ent** |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 03    | 11    |       |       |       | Ve    |       | 4.0.0 |
| -2001 |       |       |       |       | rsion |       |       |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 4     |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 06    | 16    |       |       |       | Ve    | 4.0.0 | 5.0.0 |
| -2002 |       |       |       |       | rsion |       |       |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 5     |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 12    | 26    |       |       |       | Ve    | 5.0.0 | 6.0.0 |
| -2004 |       |       |       |       | rsion |       |       |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 6     |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 06    | 32    | SP-0  | 0001  | 2     | Co    | 6.0.0 | 6.1.0 |
| -2006 |       | 60356 |       |       | rrect |       |       |
|       |       |       |       |       | the   |       |       |
|       |       |       |       |       | d     |       |       |
|       |       |       |       |       | escri |       |       |
|       |       |       |       |       | ption |       |       |
|       |       |       |       |       | error |       |       |
|       |       |       |       |       | and   |       |       |
|       |       |       |       |       | s     |       |       |
|       |       |       |       |       | yntax |       |       |
|       |       |       |       |       | error |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 06    | 36    |       |       |       | Ve    | 6.1.0 | 7.0.0 |
| -2007 |       |       |       |       | rsion |       |       |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 7     |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 12    | 42    |       |       |       | Ve    | 7.0.0 | 8.0.0 |
| -2008 |       |       |       |       | rsion |       |       |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 8     |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 12    | 46    |       |       |       | Ve    | 8.0.0 | 9.0.0 |
| -2009 |       |       |       |       | rsion |       |       |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 9     |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 03    | 51    |       |       |       | Ve    | 9.0.0 | 1     |
| -2011 |       |       |       |       | rsion |       | 0.0.0 |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 10    |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 09    | 57    |       |       |       | Ve    | 1     | 1     |
| -2012 |       |       |       |       | rsion | 0.0.0 | 1.0.0 |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 11    |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 09    | 65    |       |       |       | Ve    | 1     | 1     |
| -2014 |       |       |       |       | rsion | 1.0.0 | 2.0.0 |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 12    |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+
| 12    | 70    |       |       |       | Ve    | 1     | 1     |
| -2015 |       |       |       |       | rsion | 2.0.0 | 3.0.0 |
|       |       |       |       |       | for   |       |       |
|       |       |       |       |       | Re    |       |       |
|       |       |       |       |       | lease |       |       |
|       |       |       |       |       | 13    |       |       |
+-------+-------+-------+-------+-------+-------+-------+-------+

  -------------------- ------------- ---------- -------- --------- --------- -------------------------------- -----------------
  **Change history**                                                                                          
  **Date**             **Meeting**   **TDoc**   **CR**   **Rev**   **Cat**   **Subject/Comment**              **New version**
  2017-03              75                                                    Version for Release 14           14.0.0
  2018-06              80                                                    Version for Release 15           15.0.0
  2020-07              \-            \-         \-       \-        \-        Update to Rel-16 version (MCC)   **16.0.0**
  -------------------- ------------- ---------- -------- --------- --------- -------------------------------- -----------------

[^1]: This atypical definition is used to exploit the efficiencies of
    the complex Fast Fourier Transform (FFT). The 2/*M* scale factor
    results from preconditioning the *M* point real sequence to form an
    *M*/2 point complex sequence that is transformed using an *M*/2
    point complex FFT. Details on this technique can be found in
    Proakis, J. G. and Manolakis, D. G., *Introduction to Digital Signal
    Processing*, New York, Macmillan, 1988, pp. 721-722.
