![](media/image1.jpeg){width="7.086111111111111in"
height="1.136111111111111in"}

Contents {#contents .TT}
========

[4](#foreword)

[5](#scope)

[5](#references)

[5](#definitions-and-abbreviations)

[5](#definitions)

[5](#abbreviations)

[5](#c-code-structure)

[5](#contents-of-the-c-source-code)

[6](#program-execution)

[7](#code-hierarchy)

[12](#variables-constants-and-tables)

[13](#description-of-constants-used-in-the-c-code)

[16](#description-of-fixed-tables-used-in-the-c-code)

[17](#static-variables-used-in-the-c-code)

[21](#file-formats)

[21](#speech-file)

[22](#annex-a-informative-change-history)Foreword 1 Scope 2 References 3
Definitions and abbreviations 3.1 Definitions 3.2 Abbreviations 4 C code
structure 4.1 Contents of the C source code 4.2 Program execution 4.3
Code hierarchy 4.5 Variables, constants and tables 4.5.1 Description of
constants used in the C-code 4.5.2 Description of fixed tables used in
the C-code 4.5.3 Static variables used in the C-code 5 File formats 5.1
Speech file Annex A (informative): Change history

Foreword
========

This Technical Specification has been produced by the 3^rd^ Generation
Partnership Project (3GPP).

The contents of the present document are subject to continuing work
within the TSG and may change following formal TSG approval. Should the
TSG modify the contents of the present document, it will be re-released
by the TSG with an identifying change of release date and an increase in
version number as follows:

Version x.y.z

where:

x the first digit:

1 presented to TSG for information;

2 presented to TSG for approval;

3 or greater indicates TSG approved document under change control.

y the second digit is incremented for all changes of substance, i.e.
technical enhancements, corrections, updates, etc.

z the third digit is incremented when editorial only changes have been
incorporated in the document.

1 Scope
=======

The present document contains an electronic copy of the ANSI‑C code for
DSR Extended Advanced Front-end. The ANSI‑C code is necessary for a bit
exact implementation of DSR Extended Advanced Front-end.

2 References
============

The following documents contain provisions which, through reference in
this text, constitute provisions of the present document.

\[1\] ETSI ES 202 050 (2007-01) V1.1.5: \"Distributed Speech
Recognition; Advanced Front-end Feature Extraction Algorithm;
Compression Algorithm\".

\[2\] ETSI ES 202 212 (2005-11) V1.1.2: \"Distributed Speech
Recognition; Extended Advanced Front-end Feature Extraction Algorithm;
Compression Algorithm, Back-end Speech Reconstruction Algorithm\".

\[3\] 3GPP TS 26.177: \"Speech Enabled Services (SES); Distributed
Speech Recognition (DSR) extended advanced front-end test sequences\".

3 Definitions and abbreviations
===============================

3.1 Definitions
---------------

Definition of terms used in the present document, can be found in \[1\],
\[2\]

3.2 Abbreviations
-----------------

For the purpose of the present document, the following abbreviations
apply:

ANSI American National Standards Institute

I/O Input/Output

RAM Random Access Memory

ROM Read Only Memory

AFE Advanced Front-end

X-AFE eXtended Advanced Front-end

DSR Distributed Speech Recognition

4 C code structure
==================

This clause gives an overview of the structure of the bit‑exact C code
and provides an overview of the contents and organization of the C code
attached to this document.

The C code has been verified on the following systems:

\- Sun Microsystems workstations and GNU gcc compiler

\- IBM PC compatible computers with Linux operating system and GNU gcc
compiler.

ANSI‑C was selected as the programming language because portability was
desirable.

4.1 Contents of the C source code
---------------------------------

The distributed files with suffix \"c\" contain the source code and the
files with suffix \"h\" are the header files.

Makefiles are provided for the platforms in which the C code has been
verified (listed above).

4.2 Program execution
---------------------

There are separate executables for the FrontEnd and Vector Quantization,
with and without Extensions. The command line options are described
below.

\<\> - indicates parameters for the given option for running the
executable

() -- indicates default parameter.

**FrontEnd w/ Extension:**

USAGE: bin/ExtAdvFrontEnd infile HTK\_outfile pitch\_outfile
class\_outfile \[options\]

OPTIONS:

-q Quiet Mode (FALSE)

-F format Input file format *\<NIST,HTK,RAW\>* (NIST)

-fs freq Sampling frequency in kHz *\<8,16\>* (8)

-swap Change input byte ordering (Native)

-noh No HTK header to output file (FALSE)

-noc0 No c0 coefficient to output feature vector (FALSE)

-nologE No logE component to output feature vector (FALSE)

-skip\_header\_bytes n - Skip header, first n bytes ( Only for -F RAW)

-noh, -noc0, -nologE and --skip\_header\_bytes are not used and should
not be changed.

**FrontEnd w/o Extension**:

USAGE: bin/AdvFrontEnd infile HTK\_outfile \[options\]

OPTIONS: - Same as FrontEnd w/ Extension

**Vector Quantization w/ Extension:**

Usage: extcoder htk\_file\_in pitch\_file\_in class\_file\_in
bitstream\_file\_out pitch\_file\_out txt\_file\_out -freq x
-VAD/No\_VAD

htk\_file\_in Input mel-frequency cepstral coefficient file in HTK MFCC
format.

pitch\_file\_in Input pitch period file.

class\_file\_in Input classification file.

bit\_file\_out Output binary bitstream.

pitch\_file\_out Output quantised pitch period file.

txt\_file\_out Vector quantiser output in text format.

-freq x Sampling frequency in kHz (8 or 16).

-VAD Use voice activity detector data. Voice activity input file must
have same name as htk\_file, but extension .vad

-No\_VAD Do not incorporate voice activity detector information in
output bitstream.

**Vector Quantization w/o Extension:**

Usage: coder htk\_file\_in bitstream\_file\_out txt\_file\_out -freq x
-VAD/No\_VAD

htk\_file\_in Input mel-frequency cepstral coefficient file in HTK MFCC
format.

bit\_file\_out Binary output bitstream.

txt\_file\_out Vector quantiser output in text format.

-freq x Sampling frequency in kHz (8 or 16).

-VAD Use voice activity detector data. Voice activity input file must
have same name as htk\_file, but extension .vad

-No\_VAD Do not incorporate voice activity detector information in
output bitstream.

**File extension descriptions as generated by the sample script:**

**.**cep -- Binary file containing cepstral features in HTK format.
Output from the FrontEnd, input to the vector quantizer.

.pitch -- Binary file containing pitch information. Output from the
FrontEnd, input to the vector quantizer. Only used for Extension.

.class -- Ascii file containing class information. Output from the
FrontEnd, input to the vector quantizer. Only used for Extension.

.bs -- Binary file containing the bitstream. Output from the vector
quantizer.

.log -- Log files from the different executables.

4.3 Code hierarchy
------------------

Tables 1 to 3 are call graphs that show the functions used for AFE
(table 1), VQ (table 2), and Extension (table 3).

Each column represents a call level and each cell a function. The
functions contain calls to the functions in rightwards neighboring
cells. The time order in the call graphs is from the top downwards as
the processing of a frame advances. All standard C functions: printf(),
fwrite(), etc. have been omitted. Also, no basic operations (add(),
L\_add(), mac(), etc.) or double precision extended operations (e.g.
L\_Extract()) appear in the graphs.

The basic operations are not counted as extending the depth, therefore
the deepest level in this software is level 7.

Table 1: AFE call structure

  -------- ----------------------- ----------------------- --------------------------------------- ---------------------------------------
  main()                                                                                           
           AdvProcessInit\_B()                                                                     
                                   DoNoiseSupInit\_B()                                             
                                   DoWaveProcInit\_B()                                             
                                   DoCompCepsInit\_B()                                             
                                   DoPostProcInit\_B()                                             
                                   DoVADInit\_F()                                                  
                                   Do16kProcInit\_B()                                              
                                                           QMF\_FIR\_Init\_B()                     
                                                                                                   fir\_initialization\_B()
                                                                                                   DP\_HP\_filters\_B()
                                   BufIn32Alloc()                                                  
           AdvProcessAlloc\_B()                                                                    
                                   DoNoiseSupAlloc\_B()                                            
                                   DoWaveProcAlloc\_B()                                            
                                   DoCompCepsAlloc\_B()                                            
                                   DoPostProcAlloc\_B()                                            
                                   DoVADAlloc\_F()                                                 
                                   Do16kProcAlloc\_B()                                             
           FlushAdvProcess\_B()                                                                    
                                   DoVADFlush\_F()                                                 
                                   CvFeatInt2Float()                                               
           AdvProcessDelete\_B()                                                                   
                                   DoNoiseSupDelete\_B()                                           
                                   DoWaveProcDelete\_B()                                           
                                   DoCompCepsDelete\_B()                                           
                                   DoPostProcDelete\_B()                                           
                                   DoVADDelete\_B()                                                
                                   BufIn32Free()                                                   
           DoAdvProcess\_B()                                                                       
                                   Do16kProcessing\_B()                                            
                                   DoNoiseSup\_B()                                                 
                                                           Get16k\_p\_bufferData16k\_B()           
                                                           Get16k\_bufData16kSize\_B()             
                                                           Get16k\_p\_BandsForCoding16k\_B()       
                                                           Get16k\_p\_CodeForBands16k\_B()         
                                                           Get16k\_dataHP\_B()                     
                                                           VAD\_F()                                
                                                                                                   Log\_2()
                                                           DoSigWindowing16\_F1()                  
                                                           DoSigWindowing16\_F2()                  
                                                           ff4NRFix32\_B()                         
                                                                                                   GetL15()
                                                                                                   GetH15()
                                                                                                   Mult16x32()
                                                                                                   Add\_Mult16x16\_16()
                                                                                                   Sub\_Mult16x16\_16()
                                                                                                   Permut()
                                                           FFTtoPSD\_F()                           
                                                                                                   Square24d2\_B()
                                                                                                   Square24\_B()
                                                           Get16k\_BFC\_dec\_B()                   
                                                           GetBandsForCoding16k\_B()               
                                                           PSDMean\_F()                            
                                                           NoiseEstimation\_F1()                   
                                                                                                   Sqrt\_2()
                                                                                                   Sqrt16\_2()
                                                           NoiseEstimation\_F2()                   
                                                                                                   Sqrt\_2()
                                                                                                   Sqrt16\_2()
                                                           FilterCalc\_F()                         
                                                           SpeechQVar()                            
                                                           FilterBank16()                          
                                                           SpeechQSpec()                           
                                                           SpeechQMel()                            
                                                           DoGainFact\_F1()                        
                                                                                                   Log\_2()
                                                           DoGainFact\_F2()                        
                                                                                                   Log\_2()
                                                           DoMelIDCT\_F16()                        
                                                           ApplyWF()                               
                                                           Get16k\_dec1()                          
                                                           Get16k\_dec2()                          
                                                           Get16k\_dec3()                          
                                                           DoSigWindowing16\_F3()                  
                                                           ff4NRFix32\_B()                         
                                                                                                   GetL15()
                                                                                                   GetH15()
                                                                                                   Mult16x32()
                                                                                                   Add\_Mult16x16\_16()
                                                                                                   Sub\_Mult16x16\_16()
                                                                                                   Permut()
                                                           FFTtoPSD\_F()                           
                                                                                                   Square24d2\_B()
                                                                                                   Square24\_B()
                                                           DoMelFB\_B()                            
                                                           CodeBands16k\_B()                       
                                                           DoSpecSub16k\_B()                       
                                                                                                   Log\_2()
                                                           UpDateDecal()                           
                                                           ApplyDecal()                            
                                                           DCOffsetFil\_F()                        
                                                           Get16k\_hpBandsSize\_B()                
                                                           Get16k\_p\_hpBands\_B()                 
                                                           Get16k\_p\_bufferCodeForBands16k\_B()   
                                                           Get16k\_p\_CodeForBands16k\_B()         
                                                           Get16k\_p\_bufferCodeWeights\_B()       
                                                           Get16k\_p\_codeWeights\_B()             
                                                           Set16k\_hpBands\_dec\_B()               
                                   DoWaveProc\_B()                                                 
                                                           TeagerEng()                             
                                                           GetTeagerFilter()                       
                                                                                                   GetMaximaPositions()
                                   DoCompCeps\_B()                                                 
                                                           CepsCompute()                           
                                                                                                   Get16k\_p\_bufferCodeWeights\_B()
                                                                                                   Get16k\_p\_bufferCodeForBands16k\_B()
                                                                                                   PreEmphHamm()
                                                                                                   ff4NB16\_B()
                                                                                                   GetBandsForDecoding16k\_B()
                                                                                                   DecodeBands16k\_B()
                                                                                                   FilterBank()
                                                                                                   Get16k\_hpBands\_dec\_B()
                                                                                                   Get16k\_p\_hpBands\_B()
                                                                                                   MergeSSandCoded\_B()
                                                                                                   CorrectEnergy\_B()
                                                                                                   CosInv16Khz()
                                                                                                   cosInv() (only for 8kHz)
                                   DoPostProc\_B()                                                 
                                   DoVADProc\_F()                                                  
                                                           focalpoint()                            
  -------- ----------------------- ----------------------- --------------------------------------- ---------------------------------------

Table 2: VQ call structure

  -------- ------------------------ ------------------------ ------------------ -- --
  main()                                                                           
           quantize\_and\_print()                                                  
                                    get\_best\_dataframe()                         
                                                             best\_centroid()      
                                    quant\_pitch\_abs()                            
                                    get\_class\_bit()                              
                                    quant\_pitch\_diff()                           
                                    get\_class\_bit()                              
                                    mfcc\_crc\_encode()                            
                                    pc\_crc\_encode()                              
  -------- ------------------------ ------------------------ ------------------ -- --

Table 3: Extension call structure

  -------- -------------------------------- ----------------------------------- ------------------------- -------------------------------- ------------------------------------------------ ----------------------------------------------- -------------------------
  main()                                                                                                                                                                                                                                    
           RVC\_ConstructPitchRom\_be()                                                                                                                                                                                                     
           RVC\_ConstructPitchMeter\_be()                                                                                                                                                                                                   
                                            Allocate\_InterpolatedDft\_be()                                                                                                                                                                 
                                            RVC\_ResetPitchMeter\_be()                                                                                                                                                                      
           RVC\_DestructPitchRom\_be()                                                                                                                                                                                                      
           RVC\_DestructPitchMeter\_be()                                                                                                                                                                                                    
                                            Deallocate\_InterpolatedDft\_be()                                                                                                                                                               
           DoAdvProcess\_B()                                                                                                                                                                                                                
                                            DoPitchExtract()                                                                                                                                                                                
                                                                                FilterBank()                                                                                                                                                
                                                                                dsr\_afe\_vad()                                                                                                                                             
                                                                                                          get\_vm()                                                                                                                         
                                                                                                                                           fnLog2()                                                                                         
                                                                                IsLowBandNoise()                                                                                                                                            
                                                                                get\_zcm()                                                                                                                                                  
                                                                                pre\_process()                                                                                                                                              
                                                                                                          iir\_d()                                                                                                                          
                                                                                                          iir\_s()                                                                                                                          
                                                                                RVC\_MeasurePitch\_be()                                                                                                                                     
                                                                                                          ClearPitch\_be()                                                                                                                  
                                                                                                          DirichletInterpolation\_be()                                                                                                      
                                                                                                          IsLowLevelInput\_be()                                                                                                             
                                                                                                          Finalize\_be()                                                                                                                    
                                                                                                                                           IsContinuousPitch\_be()                                                                          
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                          Mpy\_lw\_sw()                                                                                                                     
                                                                                                          PrepareSpectralPeaks\_be()                                                                                                        
                                                                                                                                           CalcSpectrum\_be()                                                                               
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                                                                                                            Mpy\_lw\_sw\_Add()                              
                                                                                                                                           FindPeaks\_be()                                                                                  
                                                                                                                                           Prelim\_ScaleDownAmpsOfHighFreqPeaks\_be()                                                       
                                                                                                                                           qsort\_be()\*                                                                                    
                                                                                                                                                                                            swap()                                          
                                                                                                                                           CompareIpointAmp\_be()                                                                           
                                                                                                                                           RefineSpectralPeaks\_be()                                                                        
                                                                                                                                                                                            sqrt\_l\_fix()                                  
                                                                                                                                           Final\_ScaleDownAmpsOfHighFreqPeaks\_be()                                                        
                                                                                                                                           Mpy\_lw\_sw()                                                                                    
                                                                                                          FindPitchCandidates\_be()                                                                                                         
                                                                                                                                           NormalizeAmplitudes\_be()                                                                        
                                                                                                                                           CalcUtilityFunction\_be()                                                                        
                                                                                                                                                                                            CreatePieceWiseConstantFunction\_be()           
                                                                                                                                                                                                                                            L\_Extract()
                                                                                                                                                                                                                                            Mpy\_32\_16()
                                                                                                                                                                                            qsort\_be()\*                                   
                                                                                                                                                                                                                                            swap()
                                                                                                                                                                                            Compare\_ARRAY\_OF\_XPOINTS\_be()               
                                                                                                                                                                                            LinkArrayOfPoints\_be()                         
                                                                                                                                                                                            AddSortedArrayOfPoints\_be()                    
                                                                                                                                                                                                                                            LinkArrayOfPoints\_be()
                                                                                                                                                                                            ConvertLinkedListOfDiffPointsToUtilFunc\_be()   
                                                                                                                                           FindDominantLocalMaximaInUtilityFunction\_be()                                                   
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                                                           UtilityFunctionAtGivenPitchFreq\_be()                                                            
                                                                                                                                           qsort\_be()\*                                                                                    
                                                                                                                                                                                            swap()                                          
                                                                                                                                           ComparePitchFreqAscending\_be()                                                                  
                                                                                                                                           SelectTopPitchCandidates\_be()                                                                   
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                                                           compute\_pcorr\_be()                                                                             
                                                                                                                                                                                            interpolate\_be()                               
                                                                                                                                                                                                                                            Mpy\_lw\_sw()
                                                                                                                                                                                                                                            Mpy\_lw\_lw()
                                                                                                                                                                                                                                            sqrt\_l\_fix()
                                                                                                                                                                                            find\_most\_energetic\_window\_be()             
                                                                                                                                                                                            accumulate\_be()                                
                                                                                                                                                                                            find\_most\_energetic\_window2\_be()            
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                          SelectFinalPitch\_be()                                                                                                            
                                                                                                                                           qsort\_be()\*                                                                                    
                                                                                                                                                                                            swap()                                          
                                                                                                                                           ComparePitchFreqDescending\_be()                                                                 
                                                                                                                                           ClearPitch\_be()                                                                                 
                                                                                                                                           GOOD\_ENOUGH\_be()                                                                               
                                                                                                                                           CLOSELY\_LOCATED\_be()                                                                           
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                                                           BETTER\_be()                                                                                     
                                                                                                                                           IsContinuousPitch\_be()                                                                          
                                                                                                                                                                                            Mpy\_lw\_sw()                                   
                                                                                                          CalculateDoubleWindowDft\_be()                                                                                                    
                                                                                classify\_frame()                                                                                                                                           
  -------- -------------------------------- ----------------------------------- ------------------------- -------------------------------- ------------------------------------------------ ----------------------------------------------- -------------------------

**\* qsort\_be() is a recursive function**

4.5 Variables, constants and tables
-----------------------------------

The data types of variables and tables used in the fixed point
implementation are signed integers in 2\'s complement representation,
defined by:

\- **Word16** 16 bit variable;

\- **Word32** 32 bit variable.

### 4.5.1 Description of constants used in the C-code

Table 5a: Global constants for AFE

  --------------------------------------- ------------- ------------------------------------------------------------------------------
  **Constant**                            **Value**     **Description**
  NS\_SPEC\_ORDER\_16K                    64            Noise suppression Array length
  NS\_HANGOVER\_16K                       15            Noise suppression hangover count
  NS\_MIN\_SPEECH\_FRAME\_HANGOVER\_16K   4             Noise suppression minmum speech frame hangover count
  NS\_ANALYSIS\_WINDOW\_16K               80            Noise suppression analysis window
  PERC\_CODED                             0.7           lambda merge (empirically set constant)
  LAMBDA\_NSE16k                          0.99          Noise estimation Lambda
  NS\_NB\_FRAME\_THRESHOLD\_NSE           100           Noise suppression number of frame threshold used for NSE
  LENGTH\_QMF                             118           QMF filter length
  f24                                     1             multiplier for QMF filter coefficients
  SHFF\_H                                 8             shift to get higher value
  L\_H                                    16            shift to get lower value
  HP16k\_MEL\_USED                        3             Higher frequnecy band Mel used
  NB\_LP\_BANDS\_CODING                   3             Lower frequency band used in coding
  NE16k\_FRAMES\_THRESH                   100           Noise estimation frames threshold
  NB\_TOPOSTPROC                          12            Number of coefficients to postprocess
  CEP\_FRAME\_LENGTH                      200           Frame length for cepstral coefficients
  CEP\_NB\_COEF                           13            Number of cepstral coefficients (including c0)
  CEP\_NB\_CHANNELS                       23            Number of filters used for cepstral coefficients
  CEP\_FFT\_LENGTH                        256           FFT length for cepstral coefficients
  FRAME\_BUF\_SIZE                        241           Denoised Output buffer size
  FRAME\_SHIFT                            80            WaveProcessing input frame shift
  FRAME\_LENGTH                           200           WaveProcessing frame size
  NS\_SPEC\_ORDER                         65            Noise suppression array length (8khz)
  NS\_BUFFER\_SIZE                        180           Noise suppression past frame size
  NS\_FRAME\_SHIFT                        80            Noise suppression input frame shift
  NS\_HALF\_FILTER\_LENGTH                8             Noise suppression filter half size
  NS\_NB\_FRAME\_THRESHOLD\_LTE           10            Noise suppression long term energy forgetting factor threshold (in frames)
  NS\_NB\_FRAME\_THRESHOLD\_NSE           100           Noise suppression spectrum estimate forgetting factor threshold (in frames)
  NS\_MIN\_FRAME                          10            Number of frame threshold to update average energy for Nosie suppression VAD
  NS\_FFT\_LENGTH                         256           FFT length for noise suppression
  WF\_MEL\_ORDER                          25            Noise suppression Wiener filter order
  SHFT\_NOISE                             14            shift applied to noise spectrum estimate
  SHFT\_FACT\_MUL                         14            shift applied to gain coefficient (nosie suppression gain factoriization)
  IDCT\_ORDER                             25            Noise suppression idct order
  NS\_BETA                                0.98          Noiseless signal suppression factor
  NS\_RSB\_MIN                            0.079432823   Minimum a priori SNR
  NS\_LAMBDA\_NSE                         0.99          Forgetting factor for noise spectrum estimate
  NS\_LOG\_SPEC\_FLOOR                    -10.0         average energy minimum threshold
  NS\_SNR\_THRESHOLD\_VAD                 15            SNR threshold for noise suppression VAD
  NS\_SNR\_THRESHOLD\_UPD\_LTE            20            Long term energy update threshold for noise suppression VAD
  NS\_ENERGY\_FLOOR                       80            Energy Minimum threshold for noise suppression VAD
  MaxPos                                  10            Maximum number of maxima in waveprocessing
  WP\_EPS                                 0.2           weigthing value added or substracted for waveprocessing
  --------------------------------------- ------------- ------------------------------------------------------------------------------

Table 5b: Global constants for VQ

  ----------------------- ----------- ----------------------------------------
  **Constant**            **Value**   **Description**
  MIN\_PERIOD             1245184     Minimum pitch period allowed
  MAX\_PERIOD             9175040     Maximum pitch period allowed
  NUM\_MULTI\_LEVELS\_1   26          number of levels in pitch quantization
  NUM\_MULTI\_LEVELS\_2   24          number of levels in pitch quantization
  UNVOICED\_CODE          0           init value for Qpindex
  ----------------------- ----------- ----------------------------------------

Table 5c: Global constants for Extension

  ----------------------------------------- ------------- -------------------------------------------------------------------------------------------------------------------------------
  **Constant**                              **Value**     **Description**
  HISTORY\_LEN                              100           History length - past samples for pitch extraction
  DOWN\_SAMP\_FACTOR                        4             Down-sampling factor - used in computing correlation
  NO\_OF\_DFT\_POINTS                       128           Number of DFT points
  BREAK\_POINT                              12            Break point - marks the end of low frequency band
  LBN\_HIST\_WEIGHT                         32440         Low band noise history weight
  LBN\_CURR\_WEIGHT                         328           Low band noise current weight (32768 - LBN\_HIST\_WEIGHT)
  LBN\_MAX\_THR                             124518        Low band noise maximum threshold
  LBN\_LOW\_ENR\_LEVEL\_MANT                32000         Low band noise low energy level mantissa
  LBN\_LOW\_ENR\_LEVEL\_SHFT                22            Low band noise low energy level shift
  RVC\_OK                                   0             Return code for success
  RVC\_ERR                                  -1            Return code for unspecified error
  RVC\_ERR\_NOT\_ENOUGH\_MEMORY             -2            Return code for not enough memory
  RVC\_ERR\_ILLEGAL\_ARGUMENT               -3            Return code for an illegal input / output argument
  RVC\_ERR\_IO\_FAILED                      -4            Return code for failed input / output to a file
  RVC\_ERR\_BAD\_FILE\_FORMAT               -5            Return code for a bad file header
  RVC\_ERR\_NOT\_INITIALIZED                -6            Return code for failure due to improper initialization
  RVC\_ERR\_ILLEGAL\_USAGE                  -7            Return code for illegal usage of a function
  RVC\_ERR\_NOT\_ENOUGH\_SAMPLES            -8            Return code for insufficient number of samples
  RVC\_ERR\_NOT\_IMPLEMENTED                -9            Return code for an unimplemented function
  RVC\_ERR\_FAIL\_OPEN\_FILE                -10           Return code for failure to open a file
  UB\_ENRG\_FRAC                            59            Upper band energy fraction
  ZCM\_THLD                                 87            Zero crossing measure threshold
  SQRT\_ONE\_HALF                           0x5A82        Square root of 0.5 (0.707)
  FRAME\_LEN\_DS                            50            Frame length downsampled (200/4)
  FRAME\_LEN\_DS\_BY\_2                     25            Frame length downsampled divided by 2
  HISTORY\_LEN\_DS                          25            History length downsampled (100/4)
  WINDOW\_LENGTH                            18            Window length used in computing correlation
  INV\_WINDOW\_LENGTH                       1820          Inverse of window length (1/18 = 0.05556)
  NUM\_CHAN                                 23            Number of channels or Mel-frequency bands
  MIN\_CH\_ENRG\_MANTISSA                   20000         Minimum channel energy mantissa
  MIN\_CH\_ENRG\_SHIFT                      25            Minimum channel energy shift
  INIT\_SIG\_ENRG\_MANTISSA                 30518         Initial signal energy mantissa
  INIT\_SIG\_ENRG\_SHIFT                    8             Initial signal energy shift
  CE\_SM\_FAC                               18022         Channel energy smoothing factor
  CE\_SM\_FAC\_COMPL                        14746         Channel energy smoothing factor complement
  CNE\_SM\_FAC                              3277          Channel noise energy smoothing factor
  CNE\_SM\_FAC\_COMPL                       29491         Channel noise energy smoothing factor complement
  LO\_GAMMA                                 22938         Low gamma value
  LO\_GAMMA\_COMPL                          9830          Low gamma value complement
  HI\_GAMMA                                 29491         High gamma value
  HI\_GAMMA\_COMPL                          3277          High gamma value complement
  LO\_BETA                                  31130         Low beta value
  HI\_BETA                                  32702         High beta value
  INIT\_FRAMES                              10            Initial number of frames (considered to be noise frames)
  SINE\_START\_CHAN                         4             Sine start channel (for sine wave detection)
  PEAK\_TO\_AVE\_THLD                       10            Peak to average threshold
  DEV\_THLD                                 1523942       Deviation threshold
  HYSTER\_CNT\_THLD                         9             Hysteresis count threshold
  F\_UPDATE\_CNT\_THLD                      500           Forced update count threshold
  NON\_SPEECH\_THLD                         32            Non-speech threshold
  FIX\_34                                   24576         (short) (32768.0 \* 3.0/4.0)
  FIX\_18                                   4096          (short) (32768.0 \* 1.0/8.0)
  FIX\_INVSQRT2                             -23170        1 / sqrt(2)
  swTHIRD\_REF\_BANDWIDTH                   85            One third of the reference bandwidth
  swTWO\_THIRDS\_REF\_BANDWIDTH             171           Two thirds of the reference bandwidth
  MIN\_ENERGY\_MANTISSA                     25600         Minimum energy mantissa
  MIN\_ENERGY\_SHIFT                        18            Minimum energy shift
  swREF\_SAMPLE\_RATE\_Q0                   0x1F40        Reference sampling rate in Q0 format
  swCLOSE\_FACTOR\_Q14                      0x4CCD        Closeness factor in Q14 format
  swFD\_SCORE\_THLD1\_Q15                   0x63D7        Frequency domain score threshold 1 in Q15 format
  swFD\_SCORE\_THLD2\_Q15                   0x570A        Frequency domain score threshold 2 in Q15 format
  swCORR\_THLD\_Q15                         0x651F        Correlation threshold in Q15 format
  swSUM\_THLD\_Q14                          0x6667        Sum threshold in Q14 format
  lwCRIT0\_OFFSET\_Q15                      0x0000170A    Offset for finding a better pitch candidate in Q15 format
  swCANDCORR\_THLD1\_Q15                    0x799A        Pitch candidate correlation threshold 1 in Q15 format
  swCANDCORR\_THLD2\_Q15                    0x599A        Pitch candidate correlation threshold 2 in Q15 format
  swCANDCORR\_THLD3\_Q15                    0x6CCD        Pitch candidate correlation threshold 3 in Q15 format
  swCANDAMP\_THLD3\_Q15                     0x68F6        Pitch candidate amplitude threshold 3 in Q15 format
  swSTARTFREQ\_COEFF                        0x553F        Start frequency coefficient (for candidate search)
  swENDFREQ\_COEFF                          0x4666        End frequency coefficient (for candidate search)
  DIRICHLET\_KERNEL\_SPAN                   8             Direchlet kernal span (for interpolation)
  REF\_SAMPLE\_RATE                         8000          Reference sampling rate
  REF\_BANDWIDTH                            4000          Reference bandwidth
  lwTHIRD\_REF\_BANDWIDTH                   87381333      One third of the reference bandwidth
  lwTWO\_THIRDS\_REF\_BANDWIDTH             174762667     Two thirds of the reference bandwidth
  swCENTER\_WEIGHT                          0x5000        Center weight
  swSIDE\_WEIGHT                            0x1800        Side weight
  swAMP\_SCALE\_DOWN1                       0x5333        Amplitude scale down factor 1
  swAMP\_SCALE\_DOWN2                       0x399A        Amplitude scale down factor 2
  swAMP\_SCALE\_DOWN2b                      0x7333        Amplitude scale down factor 2b
  swUDIST1                                  -4160         Utility function distance 1
  swUDIST2                                  -6400         Utility function distance 2
  swUSTEP                                   -16384        Utility function step
  swFREQ\_MARGIN1                           0x4AE1        Frequency margin 1
  swAMP\_MARGIN1                            0x07AE        Amplitude margin 1
  swAMP\_MARGIN2                            0x07AE        Amplitude margin 2
  MIN\_STABLE\_FRAMES                       6             Minimum number of stable frames
  MAX\_TRACK\_GAP\_FRAMES                   2             Maximum pitch track gap frames
  swSTABLE\_FREQ\_UPPER\_MARGIN             0x4E14        Stable frequency upper margin
  swSTABLE\_FREQ\_LOWER\_MARGIN             0x68EB        Stable frequency lower margin
  UNVOICED                                  0             Pitch frequency of an unvoiced frame
  lwMAX\_PITCH\_FREQ                        0x01A40000L   Maximum pitch frequency
  lwMIN\_PITCH\_FREQ                        0x00340000L   Minimum pitch frequency
  MAX\_PITCH\_FREQ                          420           Maximum pitch frequency in Hz
  MIN\_PITCH\_FREQ                          52            Minimum pitch frequency in Hz
  HIGHPASS\_CUTOFF\_FREQ                    300           Highpass cut-off frequency in Hz
  NO\_OF\_FRACS                             77            Number of fractions in the frations table
  lwSHORT\_WIN\_START\_FREQ                 0x00C80000L   Short window start frequency
  lwSHORT\_WIN\_END\_FREQ                   0x01A40000    Short window end frequency
  lwSINGLE\_WIN\_START\_FREQ                0x00640000L   Single window start frequency
  lwSINGLE\_WIN\_END\_FREQ                  0x00D20000L   Single window end frequency
  lwDOUBLE\_WIN\_START\_FREQ                0x00340000    Double window start frequency
  lwDOUBLE\_WIN\_END\_FREQ                  0x00780000L   Double window end frequency
  MAX\_LOCAL\_MAXIMA\_ON\_SPECTRUM          70            Maximum number of local maxima on the spectrum
  MAX\_PEAKS\_FOR\_SORT                     30            Maximum number peaks for sorting
  MAX\_PEAKS\_PRELIM                        7             Maximum number of peaks (preliminary)
  MIN\_PEAKS                                7             Minimum number of peaks
  MAX\_PEAKS\_FINAL                         20            Maximum number of peaks (final)
  MAX\_PRELIM\_CANDS                        4             Maximum number of preliminary candidates (pitch)
  CREATE\_PIECEWISE\_FUNC\_LOOP\_LIM\_SH    20            Create Piecewise function loop limit for short window
  CREATE\_PIECEWISE\_FUNC\_LOOP\_LIM\_SNG   30            Create Piecewise function loop limit for single window
  CREATE\_PIECEWISE\_FUNC\_LOOP\_LIM\_DBL   60            Create Piecewise function loop limit for double window
  swSUM\_FRACTION                           0x799A        Sum fraction
  swAMP\_FRACTION                           0x33F8        Amplitude fraction
  MAX\_BEST\_CANDS                          2             Maximum number of best candidates (pitch)
  N\_OF\_BEST\_CANDS\_SHORT                 2             Number of best candidates for short window
  N\_OF\_BEST\_CANDS\_SINGLE                2             Number of best candidates for single window
  N\_OF\_BEST\_CANDS\_DOUBLE                2             Number of best candidates for double window
  N\_OF\_BEST\_CANDS                        6             Number of best candidates for all windows
  SIZE\_SCRATCH\_DOPITCH                    1090          Scratch memory size for DoPitch() function (This is the actual size required. The declared size in C simulation is 1632)
  SIZE\_SCRATCH\_ADVPROCESS                 825           Scratch memory size for DoAdvProcess() function (This is the actual size required. The declared size in C simulation is 1100)
  RVC\_PITCH\_ROM\_SIG                      11031         Signature for RVC\_PITCH\_ROM structure
  RVC\_PITCH\_METER\_SIG                    21053         Signature for RVC\_PITCH\_METER structure
  ----------------------------------------- ------------- -------------------------------------------------------------------------------------------------------------------------------

### 4.5.2 Description of fixed tables used in the C-code

This section contains a listing of all fixed tables sorted by source
file name and table name. All table data is declared as **Word16**.

Table 6a: Fixed tables for AFE

  ---------------------- -------------------- ------------ -----------------------------------------------------------------
  **File**               **Table Name**       **Length**   **Description**
  16kHzProcessing\_B.c   table\_pow2          33           Table for square root
                         LambdaNSEx2          100          Table used to compute first 100 LambdaNSE
                         dp02\_h              59           MSB of QMF filter coefficients
                         dp02\_l              43           LSB of QMF filter coefficients
  PostProc\_B.c          targetLMS16          12           Target for blind equalization
  ComCeps\_B.c           HalfHamming16        100          Hamming window coefficients
                         CosMatrix16          144          Inverse cosinus coefficients at 8Khz (not used at 16khz)
                         CosMatrix16\_16khz   156          Inverse cosinus coefficients at 16Khz
                         pondMelFilter        309          Mel bank coefficients
  ff4nrFix16\_B.c        tabSin               64           Sine table
                         tabCos               64           Cosine table
  MathFunc.c             tbInt0               48           Coefficients for computation of square root
  ExtNoiseSup\_B.c       lambda\_1divX        20           Computation of 1/N
                         Hann\_sh32\_hi       100          MSB of hanning window coefficients (32 bits)
                         Hann\_sh32\_lo       100          LSB of hanning window coefficients (32 bits)
                         Hann\_sh24\_hi       100          MSB of hanning window coefficients (24 bits)
                         Hann\_sh24\_lo       100          LSB of hanning window coefficients (24 bits)
                         pondMelFilterNoise   157          Mel-frequency scale coefficients (applied to the Wiener filter)
                         idctMel16            234          Mel-warped inverse DCT coefficients
                         pondMelFilter16k     134          Filter bank coefficients at 16Khz
                         M1\_LamdaLTE         8            Computation of 1/N
                         M1\_LambdaNSEx2      100          Computation of 2/N
                         M1\_LamdaNSE         9            Computation of 1/N
                         mInvLambda16         10           Comutation od 2/N
  ---------------------- -------------------- ------------ -----------------------------------------------------------------

Table 6b: Fixed tables for VQ

  -------------- ------------------------------ ------------ ----------------------------------------
  **File**       **Table Name**                 **Length**   **Description**
  coder\_VAD.c   quantizer16kHz\_0\_1           128          vq table
                 quantizer16kHz\_2\_3           128          vq table
                 quantizer16kHz\_4\_5           128          vq table
                 quantizer16kHz\_6\_7           128          vq table
                 quantizer16kHz\_8\_9           128          vq table
                 quantizer16kHz\_10\_11         64           vq table
                 quantizer16kHz\_12\_13         512          vq table
                 quantizer8kHz\_0\_1            128          vq table
                 quantizer8kHz\_2\_3            128          vq table
                 quantizer8kHz\_4\_5            128          vq table
                 quantizer8kHz\_6\_7            128          vq table
                 quantizer8kHz\_8\_9            128          vq table
                 quantizer8kHz\_10\_11          64           vq table
                 quantizer8kHz\_12\_13          512          vq table
                 weight16kHz\_c0\_shift         1            vq weights
                 weight16kHz\_c0\_norm          1            vq weights
                 weight16kHz\_logE              1            vq weights
                 weight8kHz\_c0\_shift          1            vq weights
                 weight8kHz\_c0\_norm           1            vq weights
                 weight8kHz\_logE               1            vq weights
                 plwQuantLevels\[127\]          127\*2       vq tables for pitch/class quantization
                 ppplwQuantSections\[8\]\[3\]   24\*2        vq tables for pitch/class quantization
                 plwQuantLevels\[31\]           31\*2        vq tables for pitch/class quantization
                 pplwQuantSections\[4\]\[3\]    12\*2        vq tables for pitch/class quantization
                 pswRatioThld\_1\[4\]\[6\]      24           vq tables for pitch/class quantization
                 piMultiLevelIndex\[4\]         4            vq tables for pitch/class quantization
                 pswRatioThld\_2\[4\]\[8\]      32           vq tables for pitch/class quantization
                 piMultiLevelIndex\_2\[4\]      4            vq tables for pitch/class quantization
                 swAlpha1                       1            pitch/class constants
                 swAlpha2                       1            pitch/class constants
  -------------- ------------------------------ ------------ ----------------------------------------

Table 6c: Fixed Tables for Extension

  ----------------------- -------------------------- ------------ ---------------------------------------------------------------
  **File**                **Table name**             **Length**   **Description**
  ExtNoiseSup\_B.c        pswPePower                 129          Coefficients to compute the pre-emphasis power spectrum
  preProc\_B.c            pswHpfCoef                 15           High pass filter coefficients
  preProc\_B.c            pswLpfCoef                 15           Low pass filter coefficients
  preProc\_B.c            pswLfeCoef                 3            Low frequency emphasis filter coefficients
  dsrAfeVad\_B.c          piBurstConst               20           Burst length constants for different SNR\'s
  dsrAfeVad\_B.c          piHangConst                20           Hang length constants for different SNR\'s
  dsrAfeVad\_B.c          piVADThld                  20           VAD voice metric thresholds for different SNR\'s
  dsrAfeVad\_B.c          piVMTable                  90           Voice metric table as a function of SNR index
  dsrAfeVad\_B.c          piSigThld                  20           Signal threshold table as a function of SNR
  dsrAfeVad\_B.c          piUpdateThld               20           Update threshold table as a function of SNR
  dsrAfeVad\_B.c          pswShapeTable              23           Spectral shape correction table
  fix\_mathlib.c          coeff\_sqrt5\_58           5            Coefficients for computation of square root
  fix\_mathlib.c          coeff\_sqrt5\_78           5            Coefficients for computation of square root
  rvc\_pitch\_init\_B.h   ROM\_astFrac               312          Fractions table
  rvc\_pitch\_init\_B.h   ROM\_pstWindowshiftTable   514          Complex exponents table for time shifting in frequency domain
  rvc\_pitch\_init\_B.h   ROM\_aswDirichletImag      8            Imaginary part of the Dirichlet kernel
  ----------------------- -------------------------- ------------ ---------------------------------------------------------------

### 4.5.3 Static variables used in the C-code

In this section two tables that specify the static variables for the
AFE, VQ, and Extension respectively are shown.

Table 7a: AFE static variables

  ------------------- ---------------------------------- -------------------- ------------------------------------------------------------------------
  **Struct Name**     **Variable**                       **Type\[Length\]**   **Description**
  QMF\_FIR                                                                    
                      lengthQMF                          Word32               QMF Filter length
                      \*dp\_l                            Word16               QMF filter low frequency Coeff
                      \*dp\_h                            Word16               QMF filter high frequency Coeff
                      \*T                                Word16               Temporary QMF filter buffer
                      T\_dec                             Word16               Multiplier for T
  DataFor16kProc\_B                                                           
                      FrameLength                        Word32               Input Frame length
                      FrameShift                         Word32               Shift value for the frame
                      numFramesInBuffer                  Word32               Number of frames in buffer
                      SamplingFrequency                  Word32               Sampling frequency (8/16)
                      Do16kHzProc                        BOOLEAN              Flag to enable 16kHz processing
                      \*hpBands\_B                       Word32               Buffer for HP bands
                      hpBandsSize                        Word32               hpBands\_B buffer size
                      CodeForBands16k\_B                 Word32\[9\]          HP coding buffer
                      bufferCodeForBands16k\_B           Word32\[27\]         buffer used for HP coding
                      codeWeights\_B                     Word16\[3\]          code Weights buffer
                      bufferCodeWeights\_B               Word16\[9\]          buffer used for code Weights
                      \* pQMF\_Fir                       QMF\_FIR             Pointer to QMF\_FIR structure
                      \*bufferData16k\_B                 Word32               temporary buffer to carry QMF LP data
                      bufData16kSize                     Word32               16k data buffer size
                      \*FirstWindow16k                   MelFB\_Window        pointer to MelFB\_Window structure
                      noiseSE16k\_B                      Word32\[3\]          noise spectrul energy variable
                      noise\_dec                         Word16               Multiplier for noiseSE16k\_B
                      BandsForCoding16k\_B               Word32\[9\]          buffer for storing Bands for Coding
                      vadCounter16k                      Word32               vad flag counter
                      vad16k                             Word32               vad flag
                      nbSpeechFrames16k                  Word32               number of speech frames counter
                      hangOver16k                        Word32               hang over used for VAD
                      meanEn16k                          Word32               mean Energy variable
                      nb\_frame\_threshold\_nse          Word32               threshold NSE for frame
                      lambda\_nse                        Word16               lambda NSE variable
                      \*dataHP\_B                        Word32               buffer stores QMF HP value
                      dec\_16k                           Word16\[5\]          Multiplier for dataHP\_B buffer
                      BFC\_dec                           Word16\[1\]          Multiplier for computing bands for coding
                      fb16k\_dec                         Word16\[3\]          Buffer is used to store multiplier for current and pervious two frames
  PostProcStructX                                                             
                      weightLMS                          Word32\[12\]         Current LMS weight
  CompCepsStructX                                                             
                      FFTLength                          Word32               FFT size
                      Do16khzProc                        Word16               Flag to enable 16kHz processing
                      \*pData16k                         Word32               Pointer to data for 16Khz processing
  WaveProcStructX                                                             
                      \*TeagerFilter16                   Word32               Pointer to teager filter
                      \*TeagerWindow32                   Word32               Pointer to teager window
                      TeagerOnset                        Word32               Unused
                      FrameLength                        Word32               Input frame length
  ns\_var\_F                                                                  
                      SampFreq                           Word16               Sampling frequency (8/16)
                      Do16khzProc                        Word16               Flag to enable 16kHz processing
                      buffers.nbFramesInFirstStage       Word32               number of frames in first stage
                      buffers.nbFramesInFirstStage       Word32               number of frames in second stage
                      buffers. nbFramesOutSecondStage    Word32               number of frames out og second stage
                      buffers. FirstStageIn16Buffer      Word16\[180\]        First stage buffer
                      buffers.SecondStageInBuffer32      Word32\[180\]        Second stage buffer
                      buffers. SecondDecalSig            Word16\[4\]          Shift factor for each sub-frame of second stage buffer
                      prevSamples32.lastSampleIn32       Word32               Last input sample of DC offset compensation
                      prevSamples32.lastDCOut32          Word32               last output sample of DC offset compensation
                      prevSamples32. oldShift            Word16               lprevious window shift factor of DC offset compensation
                      spectrum.indexBuffer1              Word16               Where to enter new PSD for first stage, alternatively 0 and 1
                      spectrum.indexBuffer2              Word16               Where to enter new PSD for second stage, alternatively 0 and 1
                      spectrum.noiseSE1\_32              Word32\[65\]         Noise spectrum estimate for first stage
                      spectrum.noiseSE1\_dec             Word16\[65\]         Shift factor for Noise spectrum estimate (first sage)
                      spectrum.noiseSE2\_32              Word32\[65\]         Noise spectrum estimate for second stage
                      spectrum.noiseSE2\_dec             Word16\[65\]         Shift factor for Noise spectrum estimate (second sage)
                      spectrum.PSDMeanAntBuffer1         Word32\[65\]         1st stage PSD Mean buffer for precedent frame
                      spectrum.nSigSE1Ant\_dec           Word16\[65\]         Shift factor for PSD Mean buffer for precedent frame (1rst stage)
                      spectrum.PSDMeanAntBuffer2         Word32\[65\]         2nd stage PSD Mean bufferfor precedent frame
                      spectrum.nSigSE2Ant\_dec           Word16\[65\]         Shift factor for PSD Mean buffer for precedent frame (2nd stage)
                      spectrum.denSigSE1\_32             Word32\[65\]         1st stage PSD Mean buffer
                      spectrum. nSigSE1Cur\_dec          Word16\[65\]         Shift factor for PSD Mean buffer (1rst stage)
                      spectrum. denSigSE2\_32            Word32\[65\]         2nd stage PSD Mean buffer
                      spectrum. nSigSE2Cur\_dec          Word16\[65\]         Shift factor for PSD Mean buffer (2^nd^ stage)
                      vad\_data\_ns\_F. nbFrame          Word16\[2\]          Nubmer of frames (for the 2 stages)
                      vad\_data\_ns\_F. flagVAD          Word16               Vad Flag (1 = SPEECH, 0 = NON SPEECH)
                      vad\_data\_ns\_F.hangOver          Word16               hangover
                      vad\_data\_ns\_F. nbSpeechFrames   Word16               Number of speech frames (used to set hangover)
                      vad\_data\_ns\_F.meanEn32          Word32               Mean energy for VAD
                      vad\_data\_ca. flagVAD             Word16               Vad Flag (1 = SPEECH, 0 = NON SPEECH)
                      vad\_data\_ca.hangOver             Word16               hangover
                      vad\_data\_ca. nbSpeechFrames      Word16               Number of speech frames (used to set hangover)
                      vad\_data\_ca.meanEn32             Word32               Mean energy for VAD
                      vad\_data\_fd.MelMean              Word16               SpeechQMel (for frame dropping)
                      vad\_data\_fd.VarMean              Word32               SpeechQVar (for frame dropping)
                      vad\_data\_fd.AccTest              Word32               SpeechQSpec (for frame dropping)
                      vad\_data\_fd.AccTest2             Word32               
                      vad\_data\_fd.SpecMean             Word32               SpecMean (for frame dropping)
                      vad\_data\_fd.MelValues            Word16\[2\]          SpeechQMel (for frame dropping)
                      vad\_data\_fd.SpecValues           Word32               SpeechQSpec (for frame dropping)
                      vad\_data\_fd.SpeechInVADQ         Word16               Flag (for frame dropping)
                      vad\_data\_fd.SpeechInVADQ2        Word16               Flag (for frame dropping)
                      gainFact.logDenEn1\_32             Word32\[3\]          Denoise frame energy for gain factorization
                      gainFact.lowSNRtrack32             Word32               Low SNR level for gain factorization
                      gainFact. alfaGF16                 Word16               Wiener filter gain factorization coefficient
  VADStructX\_F                                                               
                      Focus                              Word16               Position of circular buffe
                      HangOver                           Word16               Hangover length
                      FlushFocus                         Word16               Position in circular buffer when emptying at end
                      H\_CountDown                       Word16               Main hangover countdown
                      V\_CountDown                       Word16               Short hangover countdown
                      \*\*OutBuffer                      Word32               outBuffer pointer pointer
                      \*OutBuffer                        Word32\[7\]          outBuffer pointer
                      OutBuffer                          Word16\[7x15\]       outBuffer
  ------------------- ---------------------------------- -------------------- ------------------------------------------------------------------------

Table 7b: VQ static variables

  ----------------- -------------------- --------------------- ------------------------------------------
  **Struct Name**   **Variable**         **Type \[Length\]**   **Description**
  coder\_VAD.c      four\_frames\[27\]   Word16\[27\]          Previous frames used to build multiframe
                    plwQPHistory\[3\]    Word32\[3\]           History of Pitch
                    IReliableFlag        Word16                Pitch reliability flag
  ----------------- -------------------- --------------------- ------------------------------------------

Table 7c: Extension static variables

  ------------------ -------------------------- -------------------- --------------------------------------------
  **Struct Name**    **Variable**               **Type\[Length\]**   **Description**
                     iFirstFrameFlag            Word16               First frame flag
                     pswUBSpeech                Word16\[200\]        Upper band speech
                     pswDownSampledProcSpeech   Word16\[75\]         Down-sampled processed speech
                     lwCritMax                  Word32               Maximum power ratio
                     iOldPitchPeriod            Word16               Old pitch period value
                     iOldFrameNo                Word16               Old frame number
  PCORR\_STATE\_be   s\_be                                           
                     lwX1\_X1                   Word32               X1\*X1
                     lwZ1\_Z1                   Word32               Z1\*Z1
                     lwZ2\_Z2                   Word32               Z2\*Z2
                     lwX1\_Z1                   Word32               X1\*Z1
                     lwX1\_Z2                   Word32               X1\*Z2
                     lwZ1\_Z2                   Word32               Z1\*Z2
                     swX1\_Sum                  Word16               Sum of X1
                     swZ1\_Sum                  Word16               Sum of Z1
                     swZ2\_Sum                  Word16               Sum of Z2
                     iBurstConst                Word16               Burst constant
                     iBurstCount                Word16               Burst count
                     iHangConst                 Word16               Hang constant
                     iHangCount                 Word16               Hang count
                     iVADThld                   Word16               VAD threshold
                     iFrameCount                Word16               Frame count
                     iFUpdateFlag               Word16               Forced update flag
                     iHysterCount               Word16               Hysteresis count
                     iLastUpdateCount           Word16               Last update count
                     iSigThld                   Word16               Signal threshold
                     iUpdateCount               Word16               Update count
                     iChanEnrgShift             Word16               Channel energy shift
                     iChanNoiseEnrgShift        Word16               Channel noise energy shift
                     pswChanEnrg                Word16\[23\]         Channel energy
                     pswChanNoiseEnrg           Word16\[23\]         Channel noise energy
                     swBeta                     Word16               Beta value
                     swSnr                      Word16               SNR value
  NormSw             pnsLogSpecEnrgLong                              
                     swMantissa                 Word16\[23\]         Mantissa
                     iShift                     Word16\[23\]         Shift
                     swC0                       Word16               C0 value
                     swC1                       Word16               C1 value
                     swC2                       Word16               C2 value
                     pswHpfXState               Word16\[6\]          High pass filter input state
                     pswHpfYState               Word16\[12\]         High pass filter output state
                     pswLpfXState               Word16\[6\]          Low pass filter input state
                     pswLpfYState               Word16\[12\]         Low pass filter output state
                     pswLfeXState               Word16               Low frequency emphasis filter input state
                     pswLfeYState               Word16\[2\]          Low frequency emphasis filter output state
  ------------------ -------------------------- -------------------- --------------------------------------------

5 File formats
==============

This section describes the file formats used by the AFE, VQ & Extension
programs.

5.1 Speech file 
---------------

Speech files read by the X-AFE and written by the Extension consist of
16-bit words. The byte order depends on the host architecture (e.g.
MSByte first on SUN workstations, LSByte first on PCs etc)

######## Annex A (informative): Change history

  -------------------- ------------ -------------- -------- --------- --------------------------------------------------------------------------------------------- --------- ---------
  **Change history**                                                                                                                                                          
  **Date**             **TSG \#**   **TSG Doc.**   **CR**   **Rev**   **Subject/Comment**                                                                           **Old**   **New**
  2004-06              24           SP-040343                         Version 6.0.0 approved at 3GPP TSG SA\#24                                                     2.0.0     6.0.0
  2004-12              26           SP-040837      001      1         Software bug correction: Removal of Basicops simulation of \"C\" shift operator               6.0.0     6.1.0
  2004-12              26           SP-040837      002      1         Software bug correction: Initialization of the variables lwc and i2aScale                     6.0.0     6.1.0
  2004-12              26           SP-040837      003      1         Software bug correction: Wrong assignment of the variables \*piReliableFlag and \*pcQPIndex   6.0.0     6.1.0
  2004-12              26           SP-040837      004      2         Software bug correction: Use of incorrect variable fRefPeriod instead of iRefPeriod           6.0.0     6.1.0
  2004-12              26           SP-040837      005                Add reference to test sequences document                                                      6.0.0     6.1.0
  2007-06              26                                             Version for Release 7                                                                         6.1.0     7.0.0
  2008-12              42                                             Version for Release 8                                                                         7.0.0     8.0.0
  2009-12              46                                             Version for Release 9                                                                         8.0.0     9.0.0
  2011-03              51                                             Version for Release 10                                                                        9.0.0     10.0.0
  2012-09              57                                             Version for Release 11                                                                        10.0.0    11.0.0
  2013-12              62           SP-130568      0006               Correction to references                                                                      11.0.0    11.1.0
  2014-09              65                                             Version for Release 12                                                                        11.1.0    12.0.0
  2015-12              70                                             Version for Release 13                                                                        12.0.0    13.0.0
  -------------------- ------------ -------------- -------- --------- --------------------------------------------------------------------------------------------- --------- ---------

  -------------------- ------------- ---------- -------- --------- --------- -------------------------------- -----------------
  **Change history**                                                                                          
  **Date**             **Meeting**   **TDoc**   **CR**   **Rev**   **Cat**   **Subject/Comment**              **New version**
  2017-03              75                                                    Version for Release 14           14.0.0
  2018-06              80                                                    Version for Release 15           15.0.0
  2020-07              \-            \-         \-       \-        \-        Update to Rel-16 version (MCC)   **16.0.0**
  -------------------- ------------- ---------- -------- --------- --------- -------------------------------- -----------------
